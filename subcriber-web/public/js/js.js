if ("undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery"); + function(a) {
    "use strict";

    function b() {
        var a = document.createElement("bootstrap"),
            b = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
                transition: "transitionend"
            };
        for (var c in b)
            if (void 0 !== a.style[c]) return {
                end: b[c]
            };
        return !1
    }
    a.fn.emulateTransitionEnd = function(b) {
        var c = !1,
            d = this;
        a(this).one(a.support.transition.end, function() {
            c = !0
        });
        var e = function() {
            c || a(d).trigger(a.support.transition.end)
        };
        return setTimeout(e, b), this
    }, a(function() {
        a.support.transition = b()
    })
}(jQuery), + function(a) {
    "use strict";
    var b = '[data-dismiss="alert"]',
        c = function(c) {
            a(c).on("click", b, this.close)
        };
    c.prototype.close = function(b) {
        function c() {
            f.trigger("closed.bs.alert").remove()
        }
        var d = a(this),
            e = d.attr("data-target");
        e || (e = d.attr("href"), e = e && e.replace(/.*(?=#[^\s]*$)/, ""));
        var f = a(e);
        b && b.preventDefault(), f.length || (f = d.hasClass("alert") ? d : d.parent()), f.trigger(b = a.Event("close.bs.alert")), b.isDefaultPrevented() || (f.removeClass("in"), a.support.transition && f.hasClass("fade") ? f.one(a.support.transition.end, c).emulateTransitionEnd(150) : c())
    };
    var d = a.fn.alert;
    a.fn.alert = function(b) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.alert");
            e || d.data("bs.alert", e = new c(this)), "string" == typeof b && e[b].call(d)
        })
    }, a.fn.alert.Constructor = c, a.fn.alert.noConflict = function() {
        return a.fn.alert = d, this
    }, a(document).on("click.bs.alert.data-api", b, c.prototype.close)
}(jQuery), + function(a) {
    "use strict";
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d), this.isLoading = !1
    };
    b.DEFAULTS = {
        loadingText: "loading..."
    }, b.prototype.setState = function(b) {
        var c = "disabled",
            d = this.$element,
            e = d.is("input") ? "val" : "html",
            f = d.data();
        b += "Text", f.resetText || d.data("resetText", d[e]()), d[e](f[b] || this.options[b]), setTimeout(a.proxy(function() {
            "loadingText" == b ? (this.isLoading = !0, d.addClass(c).attr(c, c)) : this.isLoading && (this.isLoading = !1, d.removeClass(c).removeAttr(c))
        }, this), 0)
    }, b.prototype.toggle = function() {
        var a = !0,
            b = this.$element.closest('[data-toggle="buttons"]');
        if (b.length) {
            var c = this.$element.find("input");
            "radio" == c.prop("type") && (c.prop("checked") && this.$element.hasClass("active") ? a = !1 : b.find(".active").removeClass("active")), a && c.prop("checked", !this.$element.hasClass("active")).trigger("change")
        }
        a && this.$element.toggleClass("active")
    };
    var c = a.fn.button;
    a.fn.button = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.button"),
                f = "object" == typeof c && c;
            e || d.data("bs.button", e = new b(this, f)), "toggle" == c ? e.toggle() : c && e.setState(c)
        })
    }, a.fn.button.Constructor = b, a.fn.button.noConflict = function() {
        return a.fn.button = c, this
    }, a(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(b) {
        var c = a(b.target);
        c.hasClass("btn") || (c = c.closest(".btn")), c.button("toggle"), b.preventDefault()
    })
}(jQuery), + function(a) {
    "use strict";
    var b = function(b, c) {
        this.$element = a(b), this.$indicators = this.$element.find(".carousel-indicators"), this.options = c, this.paused = this.sliding = this.interval = this.$active = this.$items = null, "hover" == this.options.pause && this.$element.on("mouseenter", a.proxy(this.pause, this)).on("mouseleave", a.proxy(this.cycle, this))
    };
    b.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0
    }, b.prototype.cycle = function(b) {
        return b || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(a.proxy(this.next, this), this.options.interval)), this
    }, b.prototype.getActiveIndex = function() {
        return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), this.$items.index(this.$active)
    }, b.prototype.to = function(b) {
        var c = this,
            d = this.getActiveIndex();
        return b > this.$items.length - 1 || 0 > b ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            c.to(b)
        }) : d == b ? this.pause().cycle() : this.slide(b > d ? "next" : "prev", a(this.$items[b]))
    }, b.prototype.pause = function(b) {
        return b || (this.paused = !0), this.$element.find(".next, .prev").length && a.support.transition && (this.$element.trigger(a.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    }, b.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next")
    }, b.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev")
    }, b.prototype.slide = function(b, c) {
        var d = this.$element.find(".item.active"),
            e = c || d[b](),
            f = this.interval,
            g = "next" == b ? "left" : "right",
            h = "next" == b ? "first" : "last",
            i = this;
        if (!e.length) {
            if (!this.options.wrap) return;
            e = this.$element.find(".item")[h]()
        }
        if (e.hasClass("active")) return this.sliding = !1;
        var j = a.Event("slide.bs.carousel", {
            relatedTarget: e[0],
            direction: g
        });
        return this.$element.trigger(j), j.isDefaultPrevented() ? void 0 : (this.sliding = !0, f && this.pause(), this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), this.$element.one("slid.bs.carousel", function() {
            var b = a(i.$indicators.children()[i.getActiveIndex()]);
            b && b.addClass("active")
        })), a.support.transition && this.$element.hasClass("slide") ? (e.addClass(b), e[0].offsetWidth, d.addClass(g), e.addClass(g), d.one(a.support.transition.end, function() {
            e.removeClass([b, g].join(" ")).addClass("active"), d.removeClass(["active", g].join(" ")), i.sliding = !1, setTimeout(function() {
                i.$element.trigger("slid.bs.carousel")
            }, 0)
        }).emulateTransitionEnd(1e3 * d.css("transition-duration").slice(0, -1))) : (d.removeClass("active"), e.addClass("active"), this.sliding = !1, this.$element.trigger("slid.bs.carousel")), f && this.cycle(), this)
    };
    var c = a.fn.carousel;
    a.fn.carousel = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.carousel"),
                f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c),
                g = "string" == typeof c ? c : f.slide;
            e || d.data("bs.carousel", e = new b(this, f)), "number" == typeof c ? e.to(c) : g ? e[g]() : f.interval && e.pause().cycle()
        })
    }, a.fn.carousel.Constructor = b, a.fn.carousel.noConflict = function() {
        return a.fn.carousel = c, this
    }, a(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function(b) {
        var c, d = a(this),
            e = a(d.attr("data-target") || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, "")),
            f = a.extend({}, e.data(), d.data()),
            g = d.attr("data-slide-to");
        g && (f.interval = !1), e.carousel(f), (g = d.attr("data-slide-to")) && e.data("bs.carousel").to(g), b.preventDefault()
    }), a(window).on("load", function() {
        a('[data-ride="carousel"]').each(function() {
            var b = a(this);
            b.carousel(b.data())
        })
    })
}(jQuery), + function(a) {
    "use strict";
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d), this.transitioning = null, this.options.parent && (this.$parent = a(this.options.parent)), this.options.toggle && this.toggle()
    };
    b.DEFAULTS = {
        toggle: !0
    }, b.prototype.dimension = function() {
        var a = this.$element.hasClass("width");
        return a ? "width" : "height"
    }, b.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var b = a.Event("show.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.$parent && this.$parent.find("> .panel > .in");
                if (c && c.length) {
                    var d = c.data("bs.collapse");
                    if (d && d.transitioning) return;
                    c.collapse("hide"), d || c.data("bs.collapse", null)
                }
                var e = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[e](0), this.transitioning = 1;
                var f = function() {
                    this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"), this.transitioning = 0, this.$element.trigger("shown.bs.collapse")
                };
                if (!a.support.transition) return f.call(this);
                var g = a.camelCase(["scroll", e].join("-"));
                this.$element.one(a.support.transition.end, a.proxy(f, this)).emulateTransitionEnd(350)[e](this.$element[0][g])
            }
        }
    }, b.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var b = a.Event("hide.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.dimension();
                this.$element[c](this.$element[c]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), this.transitioning = 1;
                var d = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
                };
                return a.support.transition ? void this.$element[c](0).one(a.support.transition.end, a.proxy(d, this)).emulateTransitionEnd(350) : d.call(this)
            }
        }
    }, b.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
    var c = a.fn.collapse;
    a.fn.collapse = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.collapse"),
                f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c);
            !e && f.toggle && "show" == c && (c = !c), e || d.data("bs.collapse", e = new b(this, f)), "string" == typeof c && e[c]()
        })
    }, a.fn.collapse.Constructor = b, a.fn.collapse.noConflict = function() {
        return a.fn.collapse = c, this
    }, a(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(b) {
        var c, d = a(this),
            e = d.attr("data-target") || b.preventDefault() || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, ""),
            f = a(e),
            g = f.data("bs.collapse"),
            h = g ? "toggle" : d.data(),
            i = d.attr("data-parent"),
            j = i && a(i);
        g && g.transitioning || (j && j.find('[data-toggle=collapse][data-parent="' + i + '"]').not(d).addClass("collapsed"), d[f.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), f.collapse(h)
    })
}(jQuery), + function(a) {
    "use strict";

    function b(b) {
        a(d).remove(), a(e).each(function() {
            var d = c(a(this)),
                e = {
                    relatedTarget: this
                };
            d.hasClass("open") && (d.trigger(b = a.Event("hide.bs.dropdown", e)), b.isDefaultPrevented() || d.removeClass("open").trigger("hidden.bs.dropdown", e))
        })
    }

    function c(b) {
        var c = b.attr("data-target");
        c || (c = b.attr("href"), c = c && /#[A-Za-z]/.test(c) && c.replace(/.*(?=#[^\s]*$)/, ""));
        var d = c && a(c);
        return d && d.length ? d : b.parent()
    }
    var d = ".dropdown-backdrop",
        e = "[data-toggle=dropdown]",
        f = function(b) {
            a(b).on("click.bs.dropdown", this.toggle)
        };
    f.prototype.toggle = function(d) {
        var e = a(this);
        if (!e.is(".disabled, :disabled")) {
            var f = c(e),
                g = f.hasClass("open");
            if (b(), !g) {
                "ontouchstart" in document.documentElement && !f.closest(".navbar-nav").length && a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click", b);
                var h = {
                    relatedTarget: this
                };
                if (f.trigger(d = a.Event("show.bs.dropdown", h)), d.isDefaultPrevented()) return;
                f.toggleClass("open").trigger("shown.bs.dropdown", h), e.focus()
            }
            return !1
        }
    }, f.prototype.keydown = function(b) {
        if (/(38|40|27)/.test(b.keyCode)) {
            var d = a(this);
            if (b.preventDefault(), b.stopPropagation(), !d.is(".disabled, :disabled")) {
                var f = c(d),
                    g = f.hasClass("open");
                if (!g || g && 27 == b.keyCode) return 27 == b.which && f.find(e).focus(), d.click();
                var h = " li:not(.divider):visible a",
                    i = f.find("[role=menu]" + h + ", [role=listbox]" + h);
                if (i.length) {
                    var j = i.index(i.filter(":focus"));
                    38 == b.keyCode && j > 0 && j--, 40 == b.keyCode && j < i.length - 1 && j++, ~j || (j = 0), i.eq(j).focus()
                }
            }
        }
    };
    var g = a.fn.dropdown;
    a.fn.dropdown = function(b) {
        return this.each(function() {
            var c = a(this),
                d = c.data("bs.dropdown");
            d || c.data("bs.dropdown", d = new f(this)), "string" == typeof b && d[b].call(c)
        })
    }, a.fn.dropdown.Constructor = f, a.fn.dropdown.noConflict = function() {
        return a.fn.dropdown = g, this
    }, a(document).on("click.bs.dropdown.data-api", b).on("click.bs.dropdown.data-api", ".dropdown form", function(a) {
        a.stopPropagation()
    }).on("click.bs.dropdown.data-api", e, f.prototype.toggle).on("keydown.bs.dropdown.data-api", e + ", [role=menu], [role=listbox]", f.prototype.keydown)
}(jQuery), + function(a) {
    "use strict";
    var b = function(b, c) {
        this.options = c, this.$element = a(b), this.$backdrop = this.isShown = null, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, a.proxy(function() {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    };
    b.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, b.prototype.toggle = function(a) {
        return this[this.isShown ? "hide" : "show"](a)
    }, b.prototype.show = function(b) {
        var c = this,
            d = a.Event("show.bs.modal", {
                relatedTarget: b
            });
        this.$element.trigger(d), this.isShown || d.isDefaultPrevented() || (this.isShown = !0, this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', a.proxy(this.hide, this)), this.backdrop(function() {
            var d = a.support.transition && c.$element.hasClass("fade");
            c.$element.parent().length || c.$element.appendTo(document.body), c.$element.show().scrollTop(0), d && c.$element[0].offsetWidth, c.$element.addClass("in").attr("aria-hidden", !1), c.enforceFocus();
            var e = a.Event("shown.bs.modal", {
                relatedTarget: b
            });
            d ? c.$element.find(".modal-dialog").one(a.support.transition.end, function() {
                c.$element.focus().trigger(e)
            }).emulateTransitionEnd(300) : c.$element.focus().trigger(e)
        }))
    }, b.prototype.hide = function(b) {
        b && b.preventDefault(), b = a.Event("hide.bs.modal"), this.$element.trigger(b), this.isShown && !b.isDefaultPrevented() && (this.isShown = !1, this.escape(), a(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), a.support.transition && this.$element.hasClass("fade") ? this.$element.one(a.support.transition.end, a.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal())
    }, b.prototype.enforceFocus = function() {
        a(document).off("focusin.bs.modal").on("focusin.bs.modal", a.proxy(function(a) {
            this.$element[0] === a.target || this.$element.has(a.target).length || this.$element.focus()
        }, this))
    }, b.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", a.proxy(function(a) {
            27 == a.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal")
    }, b.prototype.hideModal = function() {
        var a = this;
        this.$element.hide(), this.backdrop(function() {
            a.removeBackdrop(), a.$element.trigger("hidden.bs.modal")
        })
    }, b.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
    }, b.prototype.backdrop = function(b) {
        var c = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var d = a.support.transition && c;
            if (this.$backdrop = a('<div class="modal-backdrop ' + c + '" />').appendTo(document.body), this.$element.on("click.dismiss.bs.modal", a.proxy(function(a) {
                a.target === a.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this))
            }, this)), d && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !b) return;
            d ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b()
        } else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), a.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b()) : b && b()
    };
    var c = a.fn.modal;
    a.fn.modal = function(c, d) {
        return this.each(function() {
            var e = a(this),
                f = e.data("bs.modal"),
                g = a.extend({}, b.DEFAULTS, e.data(), "object" == typeof c && c);
            f || e.data("bs.modal", f = new b(this, g)), "string" == typeof c ? f[c](d) : g.show && f.show(d)
        })
    }, a.fn.modal.Constructor = b, a.fn.modal.noConflict = function() {
        return a.fn.modal = c, this
    }, a(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(b) {
        var c = a(this),
            d = c.attr("href"),
            e = a(c.attr("data-target") || d && d.replace(/.*(?=#[^\s]+$)/, "")),
            f = e.data("bs.modal") ? "toggle" : a.extend({
                remote: !/#/.test(d) && d
            }, e.data(), c.data());
        c.is("a") && b.preventDefault(), e.modal(f, this).one("hide", function() {
            c.is(":visible") && c.focus()
        })
    }), a(document).on("show.bs.modal", ".modal", function() {
        a(document.body).addClass("modal-open")
    }).on("hidden.bs.modal", ".modal", function() {
        a(document.body).removeClass("modal-open")
    })
}(jQuery), + function(a) {
    "use strict";
    var b = function(a, b) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, this.init("tooltip", a, b)
    };
    b.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, b.prototype.init = function(b, c, d) {
        this.enabled = !0, this.type = b, this.$element = a(c), this.options = this.getOptions(d);
        for (var e = this.options.trigger.split(" "), f = e.length; f--;) {
            var g = e[f];
            if ("click" == g) this.$element.on("click." + this.type, this.options.selector, a.proxy(this.toggle, this));
            else if ("manual" != g) {
                var h = "hover" == g ? "mouseenter" : "focusin",
                    i = "hover" == g ? "mouseleave" : "focusout";
                this.$element.on(h + "." + this.type, this.options.selector, a.proxy(this.enter, this)), this.$element.on(i + "." + this.type, this.options.selector, a.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = a.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, b.prototype.getDefaults = function() {
        return b.DEFAULTS
    }, b.prototype.getOptions = function(b) {
        return b = a.extend({}, this.getDefaults(), this.$element.data(), b), b.delay && "number" == typeof b.delay && (b.delay = {
            show: b.delay,
            hide: b.delay
        }), b
    }, b.prototype.getDelegateOptions = function() {
        var b = {},
            c = this.getDefaults();
        return this._options && a.each(this._options, function(a, d) {
            c[a] != d && (b[a] = d)
        }), b
    }, b.prototype.enter = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "in", c.options.delay && c.options.delay.show ? void(c.timeout = setTimeout(function() {
            "in" == c.hoverState && c.show()
        }, c.options.delay.show)) : c.show()
    }, b.prototype.leave = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "out", c.options.delay && c.options.delay.hide ? void(c.timeout = setTimeout(function() {
            "out" == c.hoverState && c.hide()
        }, c.options.delay.hide)) : c.hide()
    }, b.prototype.show = function() {
        var b = a.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(b), b.isDefaultPrevented()) return;
            var c = this,
                d = this.tip();
            this.setContent(), this.options.animation && d.addClass("fade");
            var e = "function" == typeof this.options.placement ? this.options.placement.call(this, d[0], this.$element[0]) : this.options.placement,
                f = /\s?auto?\s?/i,
                g = f.test(e);
            g && (e = e.replace(f, "") || "top"), d.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(e), this.options.container ? d.appendTo(this.options.container) : d.insertAfter(this.$element);
            var h = this.getPosition(),
                i = d[0].offsetWidth,
                j = d[0].offsetHeight;
            if (g) {
                var k = this.$element.parent(),
                    l = e,
                    m = document.documentElement.scrollTop || document.body.scrollTop,
                    n = "body" == this.options.container ? window.innerWidth : k.outerWidth(),
                    o = "body" == this.options.container ? window.innerHeight : k.outerHeight(),
                    p = "body" == this.options.container ? 0 : k.offset().left;
                e = "bottom" == e && h.top + h.height + j - m > o ? "top" : "top" == e && h.top - m - j < 0 ? "bottom" : "right" == e && h.right + i > n ? "left" : "left" == e && h.left - i < p ? "right" : e, d.removeClass(l).addClass(e)
            }
            var q = this.getCalculatedOffset(e, h, i, j);
            this.applyPlacement(q, e), this.hoverState = null;
            var r = function() {
                c.$element.trigger("shown.bs." + c.type)
            };
            a.support.transition && this.$tip.hasClass("fade") ? d.one(a.support.transition.end, r).emulateTransitionEnd(150) : r()
        }
    }, b.prototype.applyPlacement = function(b, c) {
        var d, e = this.tip(),
            f = e[0].offsetWidth,
            g = e[0].offsetHeight,
            h = parseInt(e.css("margin-top"), 10),
            i = parseInt(e.css("margin-left"), 10);
        isNaN(h) && (h = 0), isNaN(i) && (i = 0), b.top = b.top + h, b.left = b.left + i, a.offset.setOffset(e[0], a.extend({
            using: function(a) {
                e.css({
                    top: Math.round(a.top),
                    left: Math.round(a.left)
                })
            }
        }, b), 0), e.addClass("in");
        var j = e[0].offsetWidth,
            k = e[0].offsetHeight;
        if ("top" == c && k != g && (d = !0, b.top = b.top + g - k), /bottom|top/.test(c)) {
            var l = 0;
            b.left < 0 && (l = -2 * b.left, b.left = 0, e.offset(b), j = e[0].offsetWidth, k = e[0].offsetHeight), this.replaceArrow(l - f + j, j, "left")
        } else this.replaceArrow(k - g, k, "top");
        d && e.offset(b)
    }, b.prototype.replaceArrow = function(a, b, c) {
        this.arrow().css(c, a ? 50 * (1 - a / b) + "%" : "")
    }, b.prototype.setContent = function() {
        var a = this.tip(),
            b = this.getTitle();
        a.find(".tooltip-inner")[this.options.html ? "html" : "text"](b), a.removeClass("fade in top bottom left right")
    }, b.prototype.hide = function() {
        function b() {
            "in" != c.hoverState && d.detach(), c.$element.trigger("hidden.bs." + c.type)
        }
        var c = this,
            d = this.tip(),
            e = a.Event("hide.bs." + this.type);
        return this.$element.trigger(e), e.isDefaultPrevented() ? void 0 : (d.removeClass("in"), a.support.transition && this.$tip.hasClass("fade") ? d.one(a.support.transition.end, b).emulateTransitionEnd(150) : b(), this.hoverState = null, this)
    }, b.prototype.fixTitle = function() {
        var a = this.$element;
        (a.attr("title") || "string" != typeof a.attr("data-original-title")) && a.attr("data-original-title", a.attr("title") || "").attr("title", "")
    }, b.prototype.hasContent = function() {
        return this.getTitle()
    }, b.prototype.getPosition = function() {
        var b = this.$element[0];
        return a.extend({}, "function" == typeof b.getBoundingClientRect ? b.getBoundingClientRect() : {
            width: b.offsetWidth,
            height: b.offsetHeight
        }, this.$element.offset())
    }, b.prototype.getCalculatedOffset = function(a, b, c, d) {
        return "bottom" == a ? {
            top: b.top + b.height,
            left: b.left + b.width / 2 - c / 2
        } : "top" == a ? {
            top: b.top - d,
            left: b.left + b.width / 2 - c / 2
        } : "left" == a ? {
            top: b.top + b.height / 2 - d / 2,
            left: b.left - c
        } : {
            top: b.top + b.height / 2 - d / 2,
            left: b.left + b.width
        }
    }, b.prototype.getTitle = function() {
        var a, b = this.$element,
            c = this.options;
        return a = b.attr("data-original-title") || ("function" == typeof c.title ? c.title.call(b[0]) : c.title)
    }, b.prototype.tip = function() {
        return this.$tip = this.$tip || a(this.options.template)
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, b.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    }, b.prototype.enable = function() {
        this.enabled = !0
    }, b.prototype.disable = function() {
        this.enabled = !1
    }, b.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    }, b.prototype.toggle = function(b) {
        var c = b ? a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        c.tip().hasClass("in") ? c.leave(c) : c.enter(c)
    }, b.prototype.destroy = function() {
        clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    var c = a.fn.tooltip;
    a.fn.tooltip = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.tooltip"),
                f = "object" == typeof c && c;
            (e || "destroy" != c) && (e || d.data("bs.tooltip", e = new b(this, f)), "string" == typeof c && e[c]())
        })
    }, a.fn.tooltip.Constructor = b, a.fn.tooltip.noConflict = function() {
        return a.fn.tooltip = c, this
    }
}(jQuery), + function(a) {
    "use strict";
    var b = function(a, b) {
        this.init("popover", a, b)
    };
    if (!a.fn.tooltip) throw new Error("Popover requires tooltip.js");
    b.DEFAULTS = a.extend({}, a.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), b.prototype = a.extend({}, a.fn.tooltip.Constructor.prototype), b.prototype.constructor = b, b.prototype.getDefaults = function() {
        return b.DEFAULTS
    }, b.prototype.setContent = function() {
        var a = this.tip(),
            b = this.getTitle(),
            c = this.getContent();
        a.find(".popover-title")[this.options.html ? "html" : "text"](b), a.find(".popover-content")[this.options.html ? "string" == typeof c ? "html" : "append" : "text"](c), a.removeClass("fade top bottom left right in"), a.find(".popover-title").html() || a.find(".popover-title").hide()
    }, b.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    }, b.prototype.getContent = function() {
        var a = this.$element,
            b = this.options;
        return a.attr("data-content") || ("function" == typeof b.content ? b.content.call(a[0]) : b.content)
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    }, b.prototype.tip = function() {
        return this.$tip || (this.$tip = a(this.options.template)), this.$tip
    };
    var c = a.fn.popover;
    a.fn.popover = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.popover"),
                f = "object" == typeof c && c;
            (e || "destroy" != c) && (e || d.data("bs.popover", e = new b(this, f)), "string" == typeof c && e[c]())
        })
    }, a.fn.popover.Constructor = b, a.fn.popover.noConflict = function() {
        return a.fn.popover = c, this
    }
}(jQuery), + function(a) {
    "use strict";

    function b(c, d) {
        var e, f = a.proxy(this.process, this);
        this.$element = a(a(c).is("body") ? window : c), this.$body = a("body"), this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", f), this.options = a.extend({}, b.DEFAULTS, d), this.selector = (this.options.target || (e = a(c).attr("href")) && e.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", this.offsets = a([]), this.targets = a([]), this.activeTarget = null, this.refresh(), this.process()
    }
    b.DEFAULTS = {
        offset: 10
    }, b.prototype.refresh = function() {
        var b = this.$element[0] == window ? "offset" : "position";
        this.offsets = a([]), this.targets = a([]); {
            var c = this;
            this.$body.find(this.selector).map(function() {
                var d = a(this),
                    e = d.data("target") || d.attr("href"),
                    f = /^#./.test(e) && a(e);
                return f && f.length && f.is(":visible") && [
                    [f[b]().top + (!a.isWindow(c.$scrollElement.get(0)) && c.$scrollElement.scrollTop()), e]
                ] || null
            }).sort(function(a, b) {
                return a[0] - b[0]
            }).each(function() {
                c.offsets.push(this[0]), c.targets.push(this[1])
            })
        }
    }, b.prototype.process = function() {
        var a, b = this.$scrollElement.scrollTop() + this.options.offset,
            c = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight,
            d = c - this.$scrollElement.height(),
            e = this.offsets,
            f = this.targets,
            g = this.activeTarget;
        if (b >= d) return g != (a = f.last()[0]) && this.activate(a);
        if (g && b <= e[0]) return g != (a = f[0]) && this.activate(a);
        for (a = e.length; a--;) g != f[a] && b >= e[a] && (!e[a + 1] || b <= e[a + 1]) && this.activate(f[a])
    }, b.prototype.activate = function(b) {
        this.activeTarget = b, a(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
        var c = this.selector + '[data-target="' + b + '"],' + this.selector + '[href="' + b + '"]',
            d = a(c).parents("li").addClass("active");
        d.parent(".dropdown-menu").length && (d = d.closest("li.dropdown").addClass("active")), d.trigger("activate.bs.scrollspy")
    };
    var c = a.fn.scrollspy;
    a.fn.scrollspy = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.scrollspy"),
                f = "object" == typeof c && c;
            e || d.data("bs.scrollspy", e = new b(this, f)), "string" == typeof c && e[c]()
        })
    }, a.fn.scrollspy.Constructor = b, a.fn.scrollspy.noConflict = function() {
        return a.fn.scrollspy = c, this
    }, a(window).on("load", function() {
        a('[data-spy="scroll"]').each(function() {
            var b = a(this);
            b.scrollspy(b.data())
        })
    })
}(jQuery), + function(a) {
    "use strict";
    var b = function(b) {
        this.element = a(b)
    };
    b.prototype.show = function() {
        var b = this.element,
            c = b.closest("ul:not(.dropdown-menu)"),
            d = b.data("target");
        if (d || (d = b.attr("href"), d = d && d.replace(/.*(?=#[^\s]*$)/, "")), !b.parent("li").hasClass("active")) {
            var e = c.find(".active:last a")[0],
                f = a.Event("show.bs.tab", {
                    relatedTarget: e
                });
            if (b.trigger(f), !f.isDefaultPrevented()) {
                var g = a(d);
                this.activate(b.parent("li"), c), this.activate(g, g.parent(), function() {
                    b.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: e
                    })
                })
            }
        }
    }, b.prototype.activate = function(b, c, d) {
        function e() {
            f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), b.addClass("active"), g ? (b[0].offsetWidth, b.addClass("in")) : b.removeClass("fade"), b.parent(".dropdown-menu") && b.closest("li.dropdown").addClass("active"), d && d()
        }
        var f = c.find("> .active"),
            g = d && a.support.transition && f.hasClass("fade");
        g ? f.one(a.support.transition.end, e).emulateTransitionEnd(150) : e(), f.removeClass("in")
    };
    var c = a.fn.tab;
    a.fn.tab = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.tab");
            e || d.data("bs.tab", e = new b(this)), "string" == typeof c && e[c]()
        })
    }, a.fn.tab.Constructor = b, a.fn.tab.noConflict = function() {
        return a.fn.tab = c, this
    }, a(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(b) {
        b.preventDefault(), a(this).tab("show")
    })
}(jQuery), + function(a) {
    "use strict";
    var b = function(c, d) {
        this.options = a.extend({}, b.DEFAULTS, d), this.$window = a(window).on("scroll.bs.affix.data-api", a.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", a.proxy(this.checkPositionWithEventLoop, this)), this.$element = a(c), this.affixed = this.unpin = this.pinnedOffset = null, this.checkPosition()
    };
    b.RESET = "affix affix-top affix-bottom", b.DEFAULTS = {
        offset: 0
    }, b.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(b.RESET).addClass("affix");
        var a = this.$window.scrollTop(),
            c = this.$element.offset();
        return this.pinnedOffset = c.top - a
    }, b.prototype.checkPositionWithEventLoop = function() {
        setTimeout(a.proxy(this.checkPosition, this), 1)
    }, b.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var c = a(document).height(),
                d = this.$window.scrollTop(),
                e = this.$element.offset(),
                f = this.options.offset,
                g = f.top,
                h = f.bottom;
            "top" == this.affixed && (e.top += d), "object" != typeof f && (h = g = f), "function" == typeof g && (g = f.top(this.$element)), "function" == typeof h && (h = f.bottom(this.$element));
            var i = null != this.unpin && d + this.unpin <= e.top ? !1 : null != h && e.top + this.$element.height() >= c - h ? "bottom" : null != g && g >= d ? "top" : !1;
            if (this.affixed !== i) {
                this.unpin && this.$element.css("top", "");
                var j = "affix" + (i ? "-" + i : ""),
                    k = a.Event(j + ".bs.affix");
                this.$element.trigger(k), k.isDefaultPrevented() || (this.affixed = i, this.unpin = "bottom" == i ? this.getPinnedOffset() : null, this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix", "affixed"))), "bottom" == i && this.$element.offset({
                    top: c - h - this.$element.height()
                }))
            }
        }
    };
    var c = a.fn.affix;
    a.fn.affix = function(c) {
        return this.each(function() {
            var d = a(this),
                e = d.data("bs.affix"),
                f = "object" == typeof c && c;
            e || d.data("bs.affix", e = new b(this, f)), "string" == typeof c && e[c]()
        })
    }, a.fn.affix.Constructor = b, a.fn.affix.noConflict = function() {
        return a.fn.affix = c, this
    }, a(window).on("load", function() {
        a('[data-spy="affix"]').each(function() {
            var b = a(this),
                c = b.data();
            c.offset = c.offset || {}, c.offsetBottom && (c.offset.bottom = c.offsetBottom), c.offsetTop && (c.offset.top = c.offsetTop), b.affix(c)
        })
    })
}(jQuery);;
! function(t, e) {
    return "function" == typeof define && define.amd ? define(["publisher-web/public/js/jquery"], function(o) {
        return t.Tour = e(o)
    }) : "object" == typeof exports ? module.exports = e(require("publisher-web/public/js/jquery")) : t.Tour = e(t.jQuery)
}(window, function(t) {
    var e, o;
    return o = window.document, e = function() {
        function e(e) {
            var o;
            try {
                o = window.localStorage
            } catch (n) {
                o = !1
            }
            this._options = t.extend({
                name: "tour",
                steps: [],
                container: "body",
                autoscroll: !0,
                keyboard: !0,
                storage: o,
                debug: !1,
                backdrop: !1,
                backdropContainer: "body",
                backdropPadding: 0,
                redirect: !0,
                orphan: !1,
                duration: !1,
                delay: !1,
                basePath: "",
                template: '<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',
                afterSetState: function() {},
                afterGetState: function() {},
                afterRemoveState: function() {},
                onStart: function() {},
                onEnd: function() {},
                onShow: function() {},
                onShown: function() {},
                onHide: function() {},
                onHidden: function() {},
                onNext: function() {},
                onPrev: function() {},
                onPause: function() {},
                onResume: function() {},
                onRedirectError: function() {}
            }, e), this._force = !1, this._inited = !1, this._current = null, this.backdrop = {
                overlay: null,
                $element: null,
                $background: null,
                backgroundShown: !1,
                overlayElementShown: !1
            }
        }
        return e.prototype.addSteps = function(t) {
            var e, o, n;
            for (o = 0, n = t.length; n > o; o++) e = t[o], this.addStep(e);
            return this
        }, e.prototype.addStep = function(t) {
            return this._options.steps.push(t), this
        }, e.prototype.getStep = function(e) {
            return null != this._options.steps[e] ? t.extend({
                id: "step-" + e,
                path: "",
                host: "",
                placement: "right",
                title: "",
                content: "<p></p>",
                next: e === this._options.steps.length - 1 ? -1 : e + 1,
                prev: e - 1,
                animation: !0,
                container: this._options.container,
                autoscroll: this._options.autoscroll,
                backdrop: this._options.backdrop,
                backdropContainer: this._options.backdropContainer,
                backdropPadding: this._options.backdropPadding,
                redirect: this._options.redirect,
                reflexElement: this._options.steps[e].element,
                orphan: this._options.orphan,
                duration: this._options.duration,
                delay: this._options.delay,
                template: this._options.template,
                onShow: this._options.onShow,
                onShown: this._options.onShown,
                onHide: this._options.onHide,
                onHidden: this._options.onHidden,
                onNext: this._options.onNext,
                onPrev: this._options.onPrev,
                onPause: this._options.onPause,
                onResume: this._options.onResume,
                onRedirectError: this._options.onRedirectError
            }, this._options.steps[e]) : void 0
        }, e.prototype.init = function(t) {
            return this._force = t, this.ended() ? (this._debug("Tour ended, init prevented."), this) : (this.setCurrentStep(), this._initMouseNavigation(), this._initKeyboardNavigation(), this._onResize(function(t) {
                return function() {
                    return t.showStep(t._current)
                }
            }(this)), null !== this._current && this.showStep(this._current), this._inited = !0, this)
        }, e.prototype.start = function(t) {
            var e;
            return null == t && (t = !1), this._inited || this.init(t), null === this._current && (e = this._makePromise(null != this._options.onStart ? this._options.onStart(this) : void 0), this._callOnPromiseDone(e, this.showStep, 0)), this
        }, e.prototype.next = function() {
            var t;
            return t = this.hideStep(this._current), this._callOnPromiseDone(t, this._showNextStep)
        }, e.prototype.prev = function() {
            var t;
            return t = this.hideStep(this._current), this._callOnPromiseDone(t, this._showPrevStep)
        }, e.prototype.goTo = function(t) {
            var e;
            return e = this.hideStep(this._current), this._callOnPromiseDone(e, this.showStep, t)
        }, e.prototype.end = function() {
            var e, n;
            return e = function(e) {
                return function() {
                    return t(o).off("click.tour-" + e._options.name), t(o).off("keyup.tour-" + e._options.name), t(window).off("resize.tour-" + e._options.name), e._setState("end", "yes"), e._inited = !1, e._force = !1, e._clearTimer(), null != e._options.onEnd ? e._options.onEnd(e) : void 0
                }
            }(this), n = this.hideStep(this._current), this._callOnPromiseDone(n, e)
        }, e.prototype.ended = function() {
            return !this._force && !!this._getState("end")
        }, e.prototype.restart = function() {
            return this._removeState("current_step"), this._removeState("end"), this._removeState("redirect_to"), this.start()
        }, e.prototype.pause = function() {
            var t;
            return t = this.getStep(this._current), t && t.duration ? (this._paused = !0, this._duration -= (new Date).getTime() - this._start, window.clearTimeout(this._timer), this._debug("Paused/Stopped step " + (this._current + 1) + " timer (" + this._duration + " remaining)."), null != t.onPause ? t.onPause(this, this._duration) : void 0) : this
        }, e.prototype.resume = function() {
            var t;
            return t = this.getStep(this._current), t && t.duration ? (this._paused = !1, this._start = (new Date).getTime(), this._duration = this._duration || t.duration, this._timer = window.setTimeout(function(t) {
                return function() {
                    return t._isLast() ? t.next() : t.end()
                }
            }(this), this._duration), this._debug("Started step " + (this._current + 1) + " timer with duration " + this._duration), null != t.onResume && this._duration !== t.duration ? t.onResume(this, this._duration) : void 0) : this
        }, e.prototype.hideStep = function(e) {
            var o, n, r;
            return (r = this.getStep(e)) ? (this._clearTimer(), n = this._makePromise(null != r.onHide ? r.onHide(this, e) : void 0), o = function(o) {
                return function() {
                    var n;
                    return n = t(r.element), n.data("bs.popover") || n.data("popover") || (n = t("body")), n.popover("destroy").removeClass("tour-" + o._options.name + "-element tour-" + o._options.name + "-" + e + "-element"), n.removeData("bs.popover"), r.reflex && t(r.reflexElement).removeClass("tour-step-element-reflex").off("" + o._reflexEvent(r.reflex) + ".tour-" + o._options.name), r.backdrop && o._hideBackdrop(), null != r.onHidden ? r.onHidden(o) : void 0
                }
            }(this), this._callOnPromiseDone(n, o), n) : void 0
        }, e.prototype.showStep = function(t) {
            var e, n, r, i;
            return this.ended() ? (this._debug("Tour ended, showStep prevented."), this) : (i = this.getStep(t)) ? (r = t < this._current, e = this._makePromise(null != i.onShow ? i.onShow(this, t) : void 0), n = function(e) {
                return function() {
                    var n, s;
                    if (e.setCurrentStep(t), n = function() {
                        switch ({}.toString.call(i.path)) {
                            case "[object Function]":
                                return i.path();
                            case "[object String]":
                                return this._options.basePath + i.path;
                            default:
                                return i.path
                        }
                    }.call(e), !e._isRedirect(i.host, n, o.location) || (e._redirect(i, t, n), e._isJustPathHashDifferent(i.host, n, o.location))) {
                        if (e._isOrphan(i)) {
                            if (i.orphan === !1) return e._debug("Skip the orphan step " + (e._current + 1) + ".\nOrphan option is false and the element does not exist or is hidden."), r ? e._showPrevStep() : e._showNextStep(), void 0;
                            e._debug("Show the orphan step " + (e._current + 1) + ". Orphans option is true.")
                        }
                        return i.backdrop && e._showBackdrop(i), s = function() {
                            return e.getCurrentStep() !== t || e.ended() ? void 0 : (null != i.element && i.backdrop && e._showOverlayElement(i, !0), e._showPopover(i, t), null != i.onShown && i.onShown(e), e._debug("Step " + (e._current + 1) + " of " + e._options.steps.length))
                        }, i.autoscroll ? e._scrollIntoView(i.element, s) : s(), i.duration ? e.resume() : void 0
                    }
                }
            }(this), i.delay ? (this._debug("Wait " + i.delay + " milliseconds to show the step " + (this._current + 1)), window.setTimeout(function(t) {
                return function() {
                    return t._callOnPromiseDone(e, n)
                }
            }(this), i.delay)) : this._callOnPromiseDone(e, n), e) : void 0
        }, e.prototype.getCurrentStep = function() {
            return this._current
        }, e.prototype.setCurrentStep = function(t) {
            return null != t ? (this._current = t, this._setState("current_step", t)) : (this._current = this._getState("current_step"), this._current = null === this._current ? null : parseInt(this._current, 10)), this
        }, e.prototype.redraw = function() {
            return this._showOverlayElement(this.getStep(this.getCurrentStep()).element, !0)
        }, e.prototype._setState = function(t, e) {
            var o, n;
            if (this._options.storage) {
                n = "" + this._options.name + "_" + t;
                try {
                    this._options.storage.setItem(n, e)
                } catch (r) {
                    o = r, o.code === DOMException.QUOTA_EXCEEDED_ERR && this._debug("LocalStorage quota exceeded. State storage failed.")
                }
                return this._options.afterSetState(n, e)
            }
            return null == this._state && (this._state = {}), this._state[t] = e
        }, e.prototype._removeState = function(t) {
            var e;
            return this._options.storage ? (e = "" + this._options.name + "_" + t, this._options.storage.removeItem(e), this._options.afterRemoveState(e)) : null != this._state ? delete this._state[t] : void 0
        }, e.prototype._getState = function(t) {
            var e, o;
            return this._options.storage ? (e = "" + this._options.name + "_" + t, o = this._options.storage.getItem(e)) : null != this._state && (o = this._state[t]), (void 0 === o || "null" === o) && (o = null), this._options.afterGetState(t, o), o
        }, e.prototype._showNextStep = function() {
            var t, e, o;
            return o = this.getStep(this._current), e = function(t) {
                return function() {
                    return t.showStep(o.next)
                }
            }(this), t = this._makePromise(null != o.onNext ? o.onNext(this) : void 0), this._callOnPromiseDone(t, e)
        }, e.prototype._showPrevStep = function() {
            var t, e, o;
            return o = this.getStep(this._current), e = function(t) {
                return function() {
                    return t.showStep(o.prev)
                }
            }(this), t = this._makePromise(null != o.onPrev ? o.onPrev(this) : void 0), this._callOnPromiseDone(t, e)
        }, e.prototype._debug = function(t) {
            return this._options.debug ? window.console.log("Bootstrap Tour '" + this._options.name + "' | " + t) : void 0
        }, e.prototype._isRedirect = function(t, e, o) {
            var n;
            return "" !== t && this._isHostDifferent(t, o.href) ? !0 : (n = [o.pathname, o.search, o.hash].join(""), null != e && "" !== e && ("[object RegExp]" === {}.toString.call(e) && !e.test(n) || "[object String]" === {}.toString.call(e) && this._isPathDifferent(e, n)))
        }, e.prototype._isHostDifferent = function(t, e) {
            return this._getProtocol(t) !== this._getProtocol(e) || this._getHost(t) !== this._getHost(e)
        }, e.prototype._isPathDifferent = function(t, e) {
            return this._getPath(t) !== this._getPath(e) || !this._equal(this._getQuery(t), this._getQuery(e)) || !this._equal(this._getHash(t), this._getHash(e))
        }, e.prototype._isJustPathHashDifferent = function(t, e, o) {
            var n;
            return "" !== t && this._isHostDifferent(t, o.href) ? !1 : (n = [o.pathname, o.search, o.hash].join(""), "[object String]" === {}.toString.call(e) ? this._getPath(e) === this._getPath(n) && this._equal(this._getQuery(e), this._getQuery(n)) && !this._equal(this._getHash(e), this._getHash(n)) : !1)
        }, e.prototype._redirect = function(e, n, r) {
            if (t.isFunction(e.redirect)) return e.redirect.call(this, r);
            if (e.redirect === !0) {
                if (this._debug("Redirect to " + e.host + r), this._getState("redirect_to") !== "" + n) return this._setState("redirect_to", "" + n), o.location.href = "" + e.host + r;
                if (this._debug("Error redirection loop to " + r), this._removeState("redirect_to"), null != e.onRedirectError) return e.onRedirectError(this)
            }
        }, e.prototype._isOrphan = function(e) {
            return null == e.element || !t(e.element).length || t(e.element).is(":hidden") && "http://www.w3.org/2000/svg" !== t(e.element)[0].namespaceURI
        }, e.prototype._isLast = function() {
            return this._current < this._options.steps.length - 1
        }, e.prototype._showPopover = function(e, o) {
            var n, r, i, s, a;
            return t(".tour-" + this._options.name).remove(), s = t.extend({}, this._options), i = this._isOrphan(e), e.template = this._template(e, o), i && (e.element = "body", e.placement = "top"), n = t(e.element), n.addClass("tour-" + this._options.name + "-element tour-" + this._options.name + "-" + o + "-element"), e.options && t.extend(s, e.options), e.reflex && !i && t(e.reflexElement).addClass("tour-step-element-reflex").off("" + this._reflexEvent(e.reflex) + ".tour-" + this._options.name).on("" + this._reflexEvent(e.reflex) + ".tour-" + this._options.name, function(t) {
                return function() {
                    return t._isLast() ? t.next() : t.end()
                }
            }(this)), a = e.smartPlacement === !0 && -1 === e.placement.search(/auto/i), n.popover({
                placement: a ? "auto " + e.placement : e.placement,
                trigger: "manual",
                title: e.title,
                content: e.content,
                html: !0,
                animation: e.animation,
                container: e.container,
                template: e.template,
                selector: e.element
            }).popover("show"), r = n.data("bs.popover") ? n.data("bs.popover").tip() : n.data("popover").tip(), r.attr("id", e.id), this._reposition(r, e), i ? this._center(r) : void 0
        }, e.prototype._template = function(e, o) {
            var n, r, i, s, a, p;
            return p = e.template, this._isOrphan(e) && "[object Boolean]" !== {}.toString.call(e.orphan) && (p = e.orphan), a = t.isFunction(p) ? t(p(o, e)) : t(p), n = a.find(".popover-navigation"), i = n.find('[data-role="prev"]'), r = n.find('[data-role="next"]'), s = n.find('[data-role="pause-resume"]'), this._isOrphan(e) && a.addClass("orphan"), a.addClass("tour-" + this._options.name + " tour-" + this._options.name + "-" + o), e.reflex && a.addClass("tour-" + this._options.name + "-reflex"), e.prev < 0 && (i.addClass("disabled"), i.prop("disabled", !0)), e.next < 0 && (r.addClass("disabled"), r.prop("disabled", !0)), e.duration || s.remove(), a.clone().wrap("<div>").parent().html()
        }, e.prototype._reflexEvent = function(t) {
            return "[object Boolean]" === {}.toString.call(t) ? "click" : t
        }, e.prototype._reposition = function(e, n) {
            var r, i, s, a, p, u, h;
            if (a = e[0].offsetWidth, i = e[0].offsetHeight, h = e.offset(), p = h.left, u = h.top, r = t(o).outerHeight() - h.top - e.outerHeight(), 0 > r && (h.top = h.top + r), s = t("html").outerWidth() - h.left - e.outerWidth(), 0 > s && (h.left = h.left + s), h.top < 0 && (h.top = 0), h.left < 0 && (h.left = 0), e.offset(h), "bottom" === n.placement || "top" === n.placement) {
                if (p !== h.left) return this._replaceArrow(e, 2 * (h.left - p), a, "left")
            } else if (u !== h.top) return this._replaceArrow(e, 2 * (h.top - u), i, "top")
        }, e.prototype._center = function(e) {
            return e.css("top", t(window).outerHeight() / 2 - e.outerHeight() / 2)
        }, e.prototype._replaceArrow = function(t, e, o, n) {
            return t.find(".arrow").css(n, e ? 50 * (1 - e / o) + "%" : "")
        }, e.prototype._scrollIntoView = function(e, o) {
            var n, r, i, s, a, p;
            return n = t(e), n.length ? (r = t(window), s = n.offset().top, p = r.height(), a = Math.max(0, s - p / 2), this._debug("Scroll into view. ScrollTop: " + a + ". Element offset: " + s + ". Window height: " + p + "."), i = 0, t("body, html").stop(!0, !0).animate({
                scrollTop: Math.ceil(a)
            }, function(t) {
                return function() {
                    return 2 === ++i ? (o(), t._debug("Scroll into view.\nAnimation end element offset: " + n.offset().top + ".\nWindow height: " + r.height() + ".")) : void 0
                }
            }(this))) : o()
        }, e.prototype._onResize = function(e, o) {
            return t(window).on("resize.tour-" + this._options.name, function() {
                return clearTimeout(o), o = setTimeout(e, 100)
            })
        }, e.prototype._initMouseNavigation = function() {
            var e;
            return e = this, t(o).off("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='prev']").off("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='next']").off("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='end']").off("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='pause-resume']").on("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='next']", function(t) {
                return function(e) {
                    return e.preventDefault(), t.next()
                }
            }(this)).on("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='prev']", function(t) {
                return function(e) {
                    return e.preventDefault(), t._current > 0 ? t.prev() : void 0
                }
            }(this)).on("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='end']", function(t) {
                return function(e) {
                    return e.preventDefault(), t.end()
                }
            }(this)).on("click.tour-" + this._options.name, ".popover.tour-" + this._options.name + " *[data-role='pause-resume']", function(o) {
                var n;
                return o.preventDefault(), n = t(this), n.text(e._paused ? n.data("pause-text") : n.data("resume-text")), e._paused ? e.resume() : e.pause()
            })
        }, e.prototype._initKeyboardNavigation = function() {
            return this._options.keyboard ? t(o).on("keyup.tour-" + this._options.name, function(t) {
                return function(e) {
                    if (e.which) switch (e.which) {
                        case 39:
                            return e.preventDefault(), t._isLast() ? t.next() : t.end();
                        case 37:
                            if (e.preventDefault(), t._current > 0) return t.prev();
                            break;
                        case 27:
                            return e.preventDefault(), t.end()
                    }
                }
            }(this)) : void 0
        }, e.prototype._makePromise = function(e) {
            return e && t.isFunction(e.then) ? e : null
        }, e.prototype._callOnPromiseDone = function(t, e, o) {
            return t ? t.then(function(t) {
                return function() {
                    return e.call(t, o)
                }
            }(this)) : e.call(this, o)
        }, e.prototype._showBackdrop = function(e) {
            return this.backdrop.backgroundShown ? void 0 : (this.backdrop = t("<div>", {
                "class": "tour-backdrop"
            }), this.backdrop.backgroundShown = !0, t(e.backdropContainer).append(this.backdrop))
        }, e.prototype._hideBackdrop = function() {
            return this._hideOverlayElement(), this._hideBackground()
        }, e.prototype._hideBackground = function() {
            return this.backdrop ? (this.backdrop.remove(), this.backdrop.overlay = null, this.backdrop.backgroundShown = !1) : void 0
        }, e.prototype._showOverlayElement = function(e, o) {
            var n, r;
            return n = t(e.element), !n || 0 === n.length || this.backdrop.overlayElementShown && !o ? void 0 : (this.backdrop.overlayElementShown || (this.backdrop.$element = n.addClass("tour-step-backdrop"), this.backdrop.$background = t("<div>", {
                "class": "tour-step-background"
            }), this.backdrop.$background.appendTo(e.backdropContainer), this.backdrop.overlayElementShown = !0), r = {
                width: n.innerWidth(),
                height: n.innerHeight(),
                offset: n.offset()
            }, e.backdropPadding && (r = this._applyBackdropPadding(e.backdropPadding, r)), this.backdrop.$background.width(r.width).height(r.height).offset(r.offset))
        }, e.prototype._hideOverlayElement = function() {
            return this.backdrop.overlayElementShown ? (this.backdrop.$element.removeClass("tour-step-backdrop"), this.backdrop.$background.remove(), this.backdrop.$element = null, this.backdrop.$background = null, this.backdrop.overlayElementShown = !1) : void 0
        }, e.prototype._applyBackdropPadding = function(t, e) {
            return "object" == typeof t ? (null == t.top && (t.top = 0), null == t.right && (t.right = 0), null == t.bottom && (t.bottom = 0), null == t.left && (t.left = 0), e.offset.top = e.offset.top - t.top, e.offset.left = e.offset.left - t.left, e.width = e.width + t.left + t.right, e.height = e.height + t.top + t.bottom) : (e.offset.top = e.offset.top - t, e.offset.left = e.offset.left - t, e.width = e.width + 2 * t, e.height = e.height + 2 * t), e
        }, e.prototype._clearTimer = function() {
            return window.clearTimeout(this._timer), this._timer = null, this._duration = null
        }, e.prototype._getProtocol = function(t) {
            return t = t.split("://"), t.length > 1 ? t[0] : "http"
        }, e.prototype._getHost = function(t) {
            return t = t.split("//"), t = t.length > 1 ? t[1] : t[0], t.split("/")[0]
        }, e.prototype._getPath = function(t) {
            return t.replace(/\/?$/, "").split("?")[0].split("#")[0]
        }, e.prototype._getQuery = function(t) {
            return this._getParams(t, "?")
        }, e.prototype._getHash = function(t) {
            return this._getParams(t, "#")
        }, e.prototype._getParams = function(t, e) {
            var o, n, r, i, s;
            if (n = t.split(e), 1 === n.length) return {};
            for (n = n[1].split("&"), r = {}, i = 0, s = n.length; s > i; i++) o = n[i], o = o.split("="), r[o[0]] = o[1] || "";
            return r
        }, e.prototype._equal = function(t, e) {
            var o, n;
            if ("[object Object]" === {}.toString.call(t) && "[object Object]" === {}.toString.call(e)) {
                for (o in t)
                    if (n = t[o], e[o] !== n) return !1;
                for (o in e)
                    if (n = e[o], t[o] !== n) return !1;
                return !0
            }
            return t === e
        }, e
    }()
});;
if (window.FormValidation = {
    AddOn: {},
    Framework: {},
    I18n: {},
    Validator: {}
}, "undefined" == typeof jQuery) throw new Error("FormValidation requires jQuery");
! function(a) {
    var b = a.fn.jquery.split(" ")[0].split(".");
    if (+b[0] < 2 && +b[1] < 9 || 1 === +b[0] && 9 === +b[1] && +b[2] < 1) throw new Error("FormValidation requires jQuery version 1.9.1 or higher")
}(jQuery),
    function(a) {
        FormValidation.Base = function(b, c, d) {
            this.$form = a(b), this.options = a.extend({}, a.fn.formValidation.DEFAULT_OPTIONS, c), this._namespace = d || "fv", this.$invalidFields = a([]), this.$submitButton = null, this.$hiddenButton = null, this.STATUS_NOT_VALIDATED = "NOT_VALIDATED", this.STATUS_VALIDATING = "VALIDATING", this.STATUS_INVALID = "INVALID", this.STATUS_VALID = "VALID";
            var e = function() {
                    for (var a = 3, b = document.createElement("div"), c = b.all || []; b.innerHTML = "<!--[if gt IE " + ++a + "]><br><![endif]-->", c[0];);
                    return a > 4 ? a : !a
                }(),
                f = document.createElement("div");
            this._changeEvent = 9 !== e && "oninput" in f ? "input" : "keyup", this._submitIfValid = null, this._cacheFields = {}, this._init()
        }, FormValidation.Base.prototype = {
            constructor: FormValidation.Base,
            _exceedThreshold: function(b) {
                var c = this._namespace,
                    d = b.attr("data-" + c + "-field"),
                    e = this.options.fields[d].threshold || this.options.threshold;
                if (!e) return !0;
                var f = -1 !== a.inArray(b.attr("type"), ["button", "checkbox", "file", "hidden", "image", "radio", "reset", "submit"]);
                return f || b.val().length >= e
            },
            _init: function() {
                var b = this,
                    c = this._namespace,
                    d = {
                        addOns: {},
                        autoFocus: this.$form.attr("data-" + c + "-autofocus"),
                        button: {
                            selector: this.$form.attr("data-" + c + "-button-selector") || this.$form.attr("data-" + c + "-submitbuttons"),
                            disabled: this.$form.attr("data-" + c + "-button-disabled")
                        },
                        control: {
                            valid: this.$form.attr("data-" + c + "-control-valid"),
                            invalid: this.$form.attr("data-" + c + "-control-invalid")
                        },
                        err: {
                            clazz: this.$form.attr("data-" + c + "-err-clazz"),
                            container: this.$form.attr("data-" + c + "-err-container") || this.$form.attr("data-" + c + "-container"),
                            parent: this.$form.attr("data-" + c + "-err-parent")
                        },
                        events: {
                            formInit: this.$form.attr("data-" + c + "-events-form-init"),
                            formError: this.$form.attr("data-" + c + "-events-form-error"),
                            formSuccess: this.$form.attr("data-" + c + "-events-form-success"),
                            fieldAdded: this.$form.attr("data-" + c + "-events-field-added"),
                            fieldRemoved: this.$form.attr("data-" + c + "-events-field-removed"),
                            fieldInit: this.$form.attr("data-" + c + "-events-field-init"),
                            fieldError: this.$form.attr("data-" + c + "-events-field-error"),
                            fieldSuccess: this.$form.attr("data-" + c + "-events-field-success"),
                            fieldStatus: this.$form.attr("data-" + c + "-events-field-status"),
                            localeChanged: this.$form.attr("data-" + c + "-events-locale-changed"),
                            validatorError: this.$form.attr("data-" + c + "-events-validator-error"),
                            validatorSuccess: this.$form.attr("data-" + c + "-events-validator-success")
                        },
                        excluded: this.$form.attr("data-" + c + "-excluded"),
                        icon: {
                            valid: this.$form.attr("data-" + c + "-icon-valid") || this.$form.attr("data-" + c + "-feedbackicons-valid"),
                            invalid: this.$form.attr("data-" + c + "-icon-invalid") || this.$form.attr("data-" + c + "-feedbackicons-invalid"),
                            validating: this.$form.attr("data-" + c + "-icon-validating") || this.$form.attr("data-" + c + "-feedbackicons-validating"),
                            feedback: this.$form.attr("data-" + c + "-icon-feedback")
                        },
                        live: this.$form.attr("data-" + c + "-live"),
                        locale: this.$form.attr("data-" + c + "-locale"),
                        message: this.$form.attr("data-" + c + "-message"),
                        onError: this.$form.attr("data-" + c + "-onerror"),
                        onSuccess: this.$form.attr("data-" + c + "-onsuccess"),
                        row: {
                            selector: this.$form.attr("data-" + c + "-row-selector") || this.$form.attr("data-" + c + "-group"),
                            valid: this.$form.attr("data-" + c + "-row-valid"),
                            invalid: this.$form.attr("data-" + c + "-row-invalid"),
                            feedback: this.$form.attr("data-" + c + "-row-feedback")
                        },
                        threshold: this.$form.attr("data-" + c + "-threshold"),
                        trigger: this.$form.attr("data-" + c + "-trigger"),
                        verbose: this.$form.attr("data-" + c + "-verbose"),
                        fields: {}
                    };
                this.$form.attr("novalidate", "novalidate").addClass(this.options.elementClass).on("submit." + c, function(a) {
                    a.preventDefault(), b.validate()
                }).on("click." + c, this.options.button.selector, function() {
                    b.$submitButton = a(this), b._submitIfValid = !0
                }).find("[name], [data-" + c + "-field]").each(function() {
                    var e = a(this),
                        f = e.attr("name") || e.attr("data-" + c + "-field"),
                        g = b._parseOptions(e);
                    g && (e.attr("data-" + c + "-field", f), d.fields[f] = a.extend({}, g, d.fields[f]))
                }), this.options = a.extend(!0, this.options, d), "string" == typeof this.options.err.parent && (this.options.err.parent = new RegExp(this.options.err.parent)), this.options.container && (this.options.err.container = this.options.container, delete this.options.container), this.options.feedbackIcons && (this.options.icon = a.extend(!0, this.options.icon, this.options.feedbackIcons), delete this.options.feedbackIcons), this.options.group && (this.options.row.selector = this.options.group, delete this.options.group), this.options.submitButtons && (this.options.button.selector = this.options.submitButtons, delete this.options.submitButtons), FormValidation.I18n[this.options.locale] || (this.options.locale = a.fn.formValidation.DEFAULT_OPTIONS.locale), this.options = a.extend(!0, this.options, {
                    addOns: this._parseAddOnOptions()
                }), this.$hiddenButton = a("<button/>").attr("type", "submit").prependTo(this.$form).addClass("fv-hidden-submit").css({
                    display: "none",
                    width: 0,
                    height: 0
                }), this.$form.on("click." + this._namespace, '[type="submit"]', function(c) {
                    if (!c.isDefaultPrevented()) {
                        var d = a(c.target),
                            e = d.is('[type="submit"]') ? d.eq(0) : d.parent('[type="submit"]').eq(0);
                        !b.options.button.selector || e.is(b.options.button.selector) || e.is(b.$hiddenButton) || b.$form.off("submit." + b._namespace).submit()
                    }
                });
                for (var e in this.options.fields) this._initField(e);
                for (var f in this.options.addOns) "function" == typeof FormValidation.AddOn[f].init && FormValidation.AddOn[f].init(this, this.options.addOns[f]);
                this.$form.trigger(a.Event(this.options.events.formInit), {
                    bv: this,
                    fv: this,
                    options: this.options
                }), this.options.onSuccess && this.$form.on(this.options.events.formSuccess, function(a) {
                    FormValidation.Helper.call(b.options.onSuccess, [a])
                }), this.options.onError && this.$form.on(this.options.events.formError, function(a) {
                    FormValidation.Helper.call(b.options.onError, [a])
                })
            },
            _initField: function(b) {
                var c = this._namespace,
                    d = a([]);
                switch (typeof b) {
                    case "object":
                        d = b, b = b.attr("data-" + c + "-field");
                        break;
                    case "string":
                        d = this.getFieldElements(b), d.attr("data-" + c + "-field", b)
                }
                if (0 !== d.length && null !== this.options.fields[b] && null !== this.options.fields[b].validators) {
                    var e;
                    for (e in this.options.fields[b].validators) FormValidation.Validator[e] || delete this.options.fields[b].validators[e];
                    null === this.options.fields[b].enabled && (this.options.fields[b].enabled = !0);
                    for (var f = this, g = d.length, h = d.attr("type"), i = 1 === g || "radio" === h || "checkbox" === h, j = this._getFieldTrigger(d.eq(0)), k = a.map(j, function(a) {
                        return a + ".update." + c
                    }).join(" "), l = 0; g > l; l++) {
                        var m = d.eq(l),
                            n = this.options.fields[b].row || this.options.row.selector,
                            o = m.closest(n),
                            p = "function" == typeof(this.options.fields[b].container || this.options.fields[b].err || this.options.err.container) ? (this.options.fields[b].container || this.options.fields[b].err || this.options.err.container).call(this, m, this) : this.options.fields[b].container || this.options.fields[b].err || this.options.err.container,
                            q = p && "tooltip" !== p && "popover" !== p ? a(p) : this._getMessageContainer(m, n);
                        p && "tooltip" !== p && "popover" !== p && q.addClass(this.options.err.clazz), q.find("." + this.options.err.clazz.split(" ").join(".") + "[data-" + c + "-validator][data-" + c + '-for="' + b + '"]').remove(), o.find("i[data-" + c + '-icon-for="' + b + '"]').remove(), m.off(k).on(k, function() {
                            f.updateStatus(a(this), f.STATUS_NOT_VALIDATED)
                        }), m.data(c + ".messages", q);
                        for (e in this.options.fields[b].validators) m.data(c + ".result." + e, this.STATUS_NOT_VALIDATED), i && l !== g - 1 || a("<small/>").css("display", "none").addClass(this.options.err.clazz).attr("data-" + c + "-validator", e).attr("data-" + c + "-for", b).attr("data-" + c + "-result", this.STATUS_NOT_VALIDATED).html(this._getMessage(b, e)).appendTo(q), "function" == typeof FormValidation.Validator[e].init && FormValidation.Validator[e].init(this, m, this.options.fields[b].validators[e]);
                        if (this.options.fields[b].icon !== !1 && "false" !== this.options.fields[b].icon && this.options.icon && this.options.icon.valid && this.options.icon.invalid && this.options.icon.validating && (!i || l === g - 1)) {
                            o.addClass(this.options.row.feedback);
                            var r = a("<i/>").css("display", "none").addClass(this.options.icon.feedback).attr("data-" + c + "-icon-for", b).insertAfter(m);
                            (i ? d : m).data(c + ".icon", r), ("tooltip" === p || "popover" === p) && ((i ? d : m).on(this.options.events.fieldError, function() {
                                o.addClass("fv-has-tooltip")
                            }).on(this.options.events.fieldSuccess, function() {
                                o.removeClass("fv-has-tooltip")
                            }), m.off("focus.container." + c).on("focus.container." + c, function() {
                                f._showTooltip(m, p)
                            }).off("blur.container." + c).on("blur.container." + c, function() {
                                f._hideTooltip(m, p)
                            })), "string" == typeof this.options.fields[b].icon && "true" !== this.options.fields[b].icon ? r.appendTo(a(this.options.fields[b].icon)) : this._fixIcon(m, r)
                        }
                    }
                    d.on(this.options.events.fieldSuccess, function(a, b) {
                        var c = f.getOptions(b.field, null, "onSuccess");
                        c && FormValidation.Helper.call(c, [a, b])
                    }).on(this.options.events.fieldError, function(a, b) {
                        var c = f.getOptions(b.field, null, "onError");
                        c && FormValidation.Helper.call(c, [a, b])
                    }).on(this.options.events.fieldStatus, function(a, b) {
                        var c = f.getOptions(b.field, null, "onStatus");
                        c && FormValidation.Helper.call(c, [a, b])
                    }).on(this.options.events.validatorError, function(a, b) {
                        var c = f.getOptions(b.field, b.validator, "onError");
                        c && FormValidation.Helper.call(c, [a, b])
                    }).on(this.options.events.validatorSuccess, function(a, b) {
                        var c = f.getOptions(b.field, b.validator, "onSuccess");
                        c && FormValidation.Helper.call(c, [a, b])
                    }), this.onLiveChange(d, "live", function() {
                        f._exceedThreshold(a(this)) && f.validateField(a(this))
                    }), d.trigger(a.Event(this.options.events.fieldInit), {
                        bv: this,
                        fv: this,
                        field: b,
                        element: d
                    })
                }
            },
            _isExcluded: function(b) {
                var c = this._namespace,
                    d = b.attr("data-" + c + "-excluded"),
                    e = b.attr("data-" + c + "-field") || b.attr("name");
                switch (!0) {
                    case !!e && this.options.fields && this.options.fields[e] && ("true" === this.options.fields[e].excluded || this.options.fields[e].excluded === !0):
                    case "true" === d:
                    case "" === d:
                        return !0;
                    case !!e && this.options.fields && this.options.fields[e] && ("false" === this.options.fields[e].excluded || this.options.fields[e].excluded === !1):
                    case "false" === d:
                        return !1;
                    default:
                        if (this.options.excluded) {
                            "string" == typeof this.options.excluded && (this.options.excluded = a.map(this.options.excluded.split(","), function(b) {
                                return a.trim(b)
                            }));
                            for (var f = this.options.excluded.length, g = 0; f > g; g++)
                                if ("string" == typeof this.options.excluded[g] && b.is(this.options.excluded[g]) || "function" == typeof this.options.excluded[g] && this.options.excluded[g].call(this, b, this) === !0) return !0
                        }
                        return !1
                }
            },
            _getFieldTrigger: function(a) {
                var b = this._namespace,
                    c = a.data(b + ".trigger");
                if (c) return c;
                var d = a.attr("type"),
                    e = a.attr("data-" + b + "-field"),
                    f = "radio" === d || "checkbox" === d || "file" === d || "SELECT" === a.get(0).tagName ? "change" : this._changeEvent;
                return c = ((this.options.fields[e] ? this.options.fields[e].trigger : null) || this.options.trigger || f).split(" "), a.data(b + ".trigger", c), c
            },
            _getMessage: function(a, b) {
                if (!(this.options.fields[a] && FormValidation.Validator[b] && this.options.fields[a].validators && this.options.fields[a].validators[b])) return "";
                switch (!0) {
                    case !!this.options.fields[a].validators[b].message:
                        return this.options.fields[a].validators[b].message;
                    case !!this.options.fields[a].message:
                        return this.options.fields[a].message;
                    case !!FormValidation.I18n[this.options.locale][b]["default"]:
                        return FormValidation.I18n[this.options.locale][b]["default"];
                    default:
                        return this.options.message
                }
            },
            _getMessageContainer: function(a, b) {
                if (!this.options.err.parent) throw new Error("The err.parent option is not defined");
                var c = a.parent();
                if (c.is(b)) return c;
                var d = c.attr("class");
                return d && this.options.err.parent.test(d) ? c : this._getMessageContainer(c, b)
            },
            _parseAddOnOptions: function() {
                var a = this._namespace,
                    b = this.$form.attr("data-" + a + "-addons"),
                    c = this.options.addOns || {};
                if (b) {
                    b = b.replace(/\s/g, "").split(",");
                    for (var d = 0; d < b.length; d++) c[b[d]] || (c[b[d]] = {})
                }
                var e, f, g, h;
                for (e in c)
                    if (FormValidation.AddOn[e]) {
                        if (f = FormValidation.AddOn[e].html5Attributes)
                            for (g in f) h = this.$form.attr("data-" + a + "-addons-" + e.toLowerCase() + "-" + g.toLowerCase()), h && (c[e][f[g]] = h)
                    } else delete c[e];
                return c
            },
            _parseOptions: function(b) {
                var c, d, e, f, g, h, i, j, k, l = this._namespace,
                    m = b.attr("name") || b.attr("data-" + l + "-field"),
                    n = {};
                for (d in FormValidation.Validator)
                    if (c = FormValidation.Validator[d], e = "data-" + l + "-" + d.toLowerCase(), f = b.attr(e) + "", k = "function" == typeof c.enableByHtml5 ? c.enableByHtml5(b) : null, k && "false" !== f || k !== !0 && ("" === f || "true" === f || e === f.toLowerCase())) {
                        c.html5Attributes = a.extend({}, {
                            message: "message",
                            onerror: "onError",
                            onsuccess: "onSuccess",
                            transformer: "transformer"
                        }, c.html5Attributes), n[d] = a.extend({}, k === !0 ? {} : k, n[d]);
                        for (j in c.html5Attributes) g = c.html5Attributes[j], h = "data-" + l + "-" + d.toLowerCase() + "-" + j, i = b.attr(h), i && ("true" === i || h === i.toLowerCase() ? i = !0 : "false" === i && (i = !1), n[d][g] = i)
                    } var o = {
                        autoFocus: b.attr("data-" + l + "-autofocus"),
                        err: b.attr("data-" + l + "-err-container") || b.attr("data-" + l + "-container"),
                        excluded: b.attr("data-" + l + "-excluded"),
                        icon: b.attr("data-" + l + "-icon") || b.attr("data-" + l + "-feedbackicons") || (this.options.fields && this.options.fields[m] ? this.options.fields[m].feedbackIcons : null),
                        message: b.attr("data-" + l + "-message"),
                        onError: b.attr("data-" + l + "-onerror"),
                        onStatus: b.attr("data-" + l + "-onstatus"),
                        onSuccess: b.attr("data-" + l + "-onsuccess"),
                        row: b.attr("data-" + l + "-row") || b.attr("data-" + l + "-group") || (this.options.fields && this.options.fields[m] ? this.options.fields[m].group : null),
                        selector: b.attr("data-" + l + "-selector"),
                        threshold: b.attr("data-" + l + "-threshold"),
                        transformer: b.attr("data-" + l + "-transformer"),
                        trigger: b.attr("data-" + l + "-trigger"),
                        verbose: b.attr("data-" + l + "-verbose"),
                        validators: n
                    },
                    p = a.isEmptyObject(o),
                    q = a.isEmptyObject(n);
                return !q || !p && this.options.fields && this.options.fields[m] ? (o.validators = n, o) : null
            },
            _submit: function() {
                var b = this.isValid(),
                    c = b ? this.options.events.formSuccess : this.options.events.formError,
                    d = a.Event(c);
                this.$form.trigger(d), this.$submitButton && (b ? this._onSuccess(d) : this._onError(d))
            },
            _onError: function(b) {
                if (!b.isDefaultPrevented()) {
                    if ("submitted" === this.options.live) {
                        this.options.live = "enabled";
                        var c = this;
                        for (var d in this.options.fields) ! function(b) {
                            var d = c.getFieldElements(b);
                            d.length && c.onLiveChange(d, "live", function() {
                                c._exceedThreshold(a(this)) && c.validateField(a(this))
                            })
                        }(d)
                    }
                    for (var e = this._namespace, f = 0; f < this.$invalidFields.length; f++) {
                        var g = this.$invalidFields.eq(f),
                            h = this.isOptionEnabled(g.attr("data-" + e + "-field"), "autoFocus");
                        if (h) {
                            g.focus();
                            break
                        }
                    }
                }
            },
            _onFieldValidated: function(b, c) {
                var d = this._namespace,
                    e = b.attr("data-" + d + "-field"),
                    f = this.options.fields[e].validators,
                    g = {},
                    h = 0,
                    i = {
                        bv: this,
                        fv: this,
                        field: e,
                        element: b,
                        validator: c,
                        result: b.data(d + ".response." + c)
                    };
                if (c) switch (b.data(d + ".result." + c)) {
                    case this.STATUS_INVALID:
                        b.trigger(a.Event(this.options.events.validatorError), i);
                        break;
                    case this.STATUS_VALID:
                        b.trigger(a.Event(this.options.events.validatorSuccess), i)
                }
                g[this.STATUS_NOT_VALIDATED] = 0, g[this.STATUS_VALIDATING] = 0, g[this.STATUS_INVALID] = 0, g[this.STATUS_VALID] = 0;
                for (var j in f)
                    if (f[j].enabled !== !1) {
                        h++;
                        var k = b.data(d + ".result." + j);
                        k && g[k]++
                    } g[this.STATUS_VALID] === h ? (this.$invalidFields = this.$invalidFields.not(b), b.trigger(a.Event(this.options.events.fieldSuccess), i)) : (0 === g[this.STATUS_NOT_VALIDATED] || !this.isOptionEnabled(e, "verbose")) && 0 === g[this.STATUS_VALIDATING] && g[this.STATUS_INVALID] > 0 && (this.$invalidFields = this.$invalidFields.add(b), b.trigger(a.Event(this.options.events.fieldError), i))
            },
            _onSuccess: function(a) {
                a.isDefaultPrevented() || this.disableSubmitButtons(!0).defaultSubmit()
            },
            _fixIcon: function() {},
            _createTooltip: function() {},
            _destroyTooltip: function() {},
            _hideTooltip: function() {},
            _showTooltip: function() {},
            defaultSubmit: function() {
                var b = this._namespace;
                this.$submitButton && a("<input/>").attr({
                    type: "hidden",
                    name: this.$submitButton.attr("name")
                }).attr("data-" + b + "-submit-hidden", "").val(this.$submitButton.val()).appendTo(this.$form), this.$form.off("submit." + b).submit()
            },
            disableSubmitButtons: function(a) {
                return a ? "disabled" !== this.options.live && this.$form.find(this.options.button.selector).attr("disabled", "disabled").addClass(this.options.button.disabled) : this.$form.find(this.options.button.selector).removeAttr("disabled").removeClass(this.options.button.disabled), this
            },
            getFieldElements: function(b) {
                if (!this._cacheFields[b])
                    if (this.options.fields[b] && this.options.fields[b].selector) {
                        var c = this.$form.find(this.options.fields[b].selector);
                        this._cacheFields[b] = c.length ? c : a(this.options.fields[b].selector)
                    } else this._cacheFields[b] = this.$form.find('[name="' + b + '"]');
                return this._cacheFields[b]
            },
            getFieldValue: function(a, b) {
                var c, d = this._namespace;
                if ("string" == typeof a) {
                    if (c = this.getFieldElements(a), 0 === c.length) return null
                } else c = a, a = c.attr("data-" + d + "-field");
                if (!a || !this.options.fields[a]) return c.val();
                var e = (this.options.fields[a].validators && this.options.fields[a].validators[b] ? this.options.fields[a].validators[b].transformer : null) || this.options.fields[a].transformer;
                return e ? FormValidation.Helper.call(e, [c, b]) : c.val()
            },
            getNamespace: function() {
                return this._namespace
            },
            getOptions: function(a, b, c) {
                var d = this._namespace;
                if (!a) return c ? this.options[c] : this.options;
                if ("object" == typeof a && (a = a.attr("data-" + d + "-field")), !this.options.fields[a]) return null;
                var e = this.options.fields[a];
                return b ? e.validators && e.validators[b] ? c ? e.validators[b][c] : e.validators[b] : null : c ? e[c] : e
            },
            getStatus: function(a, b) {
                var c = this._namespace;
                switch (typeof a) {
                    case "object":
                        return a.data(c + ".result." + b);
                    case "string":
                    default:
                        return this.getFieldElements(a).eq(0).data(c + ".result." + b)
                }
            },
            isOptionEnabled: function(a, b) {
                return !this.options.fields[a] || "true" !== this.options.fields[a][b] && this.options.fields[a][b] !== !0 ? !this.options.fields[a] || "false" !== this.options.fields[a][b] && this.options.fields[a][b] !== !1 ? "true" === this.options[b] || this.options[b] === !0 : !1 : !0
            },
            isValid: function() {
                for (var a in this.options.fields)
                    if (!this.isValidField(a)) return !1;
                return !0
            },
            isValidContainer: function(b) {
                var c = this,
                    d = this._namespace,
                    e = {},
                    f = "string" == typeof b ? a(b) : b;
                if (0 === f.length) return !0;
                f.find("[data-" + d + "-field]").each(function() {
                    var b = a(this),
                        f = b.attr("data-" + d + "-field");
                    c._isExcluded(b) || e[f] || (e[f] = b)
                });
                for (var g in e) {
                    var h = e[g],
                        i = h.data(d + ".messages").find("." + this.options.err.clazz.split(" ").join(".") + "[data-" + d + "-validator][data-" + d + '-for="' + g + '"]');
                    if (i.filter("[data-" + d + '-result="' + this.STATUS_INVALID + '"]').length > 0) return !1;
                    if (i.filter("[data-" + d + '-result="' + this.STATUS_NOT_VALIDATED + '"]').length > 0 || i.filter("[data-" + d + '-result="' + this.STATUS_VALIDATING + '"]').length > 0) return null
                }
                return !0
            },
            isValidField: function(b) {
                var c = this._namespace,
                    d = a([]);
                switch (typeof b) {
                    case "object":
                        d = b, b = b.attr("data-" + c + "-field");
                        break;
                    case "string":
                        d = this.getFieldElements(b)
                }
                if (0 === d.length || !this.options.fields[b] || this.options.fields[b].enabled === !1) return !0;
                for (var e, f, g, h = d.attr("type"), i = "radio" === h || "checkbox" === h ? 1 : d.length, j = 0; i > j; j++)
                    if (e = d.eq(j), !this._isExcluded(e))
                        for (f in this.options.fields[b].validators)
                            if (this.options.fields[b].validators[f].enabled !== !1 && (g = e.data(c + ".result." + f), g !== this.STATUS_VALID)) return !1;
                return !0
            },
            offLiveChange: function(b, c) {
                if (null === b || 0 === b.length) return this;
                var d = this._namespace,
                    e = this._getFieldTrigger(b.eq(0)),
                    f = a.map(e, function(a) {
                        return a + "." + c + "." + d
                    }).join(" ");
                return b.off(f), this
            },
            onLiveChange: function(b, c, d) {
                if (null === b || 0 === b.length) return this;
                var e = this._namespace,
                    f = this._getFieldTrigger(b.eq(0)),
                    g = a.map(f, function(a) {
                        return a + "." + c + "." + e
                    }).join(" ");
                switch (this.options.live) {
                    case "submitted":
                        break;
                    case "disabled":
                        b.off(g);
                        break;
                    case "enabled":
                    default:
                        b.off(g).on(g, function() {
                            d.apply(this, arguments)
                        })
                }
                return this
            },
            updateMessage: function(b, c, d) {
                var e = this,
                    f = this._namespace,
                    g = a([]);
                switch (typeof b) {
                    case "object":
                        g = b, b = b.attr("data-" + f + "-field");
                        break;
                    case "string":
                        g = this.getFieldElements(b)
                }
                g.each(function() {
                    a(this).data(f + ".messages").find("." + e.options.err.clazz + "[data-" + f + '-validator="' + c + '"][data-' + f + '-for="' + b + '"]').html(d)
                })
            },
            updateStatus: function(b, c, d) {
                var e = this._namespace,
                    f = a([]);
                switch (typeof b) {
                    case "object":
                        f = b, b = b.attr("data-" + e + "-field");
                        break;
                    case "string":
                        f = this.getFieldElements(b)
                }
                if (!b || !this.options.fields[b]) return this;
                c === this.STATUS_NOT_VALIDATED && (this._submitIfValid = !1);
                for (var g = this, h = f.attr("type"), i = this.options.fields[b].row || this.options.row.selector, j = "radio" === h || "checkbox" === h ? 1 : f.length, k = 0; j > k; k++) {
                    var l = f.eq(k);
                    if (!this._isExcluded(l)) {
                        var m = l.closest(i),
                            n = l.data(e + ".messages"),
                            o = n.find("." + this.options.err.clazz.split(" ").join(".") + "[data-" + e + "-validator][data-" + e + '-for="' + b + '"]'),
                            p = d ? o.filter("[data-" + e + '-validator="' + d + '"]') : o,
                            q = l.data(e + ".icon"),
                            r = "function" == typeof(this.options.fields[b].container || this.options.fields[b].err || this.options.err.container) ? (this.options.fields[b].container || this.options.fields[b].err || this.options.err.container).call(this, l, this) : this.options.fields[b].container || this.options.fields[b].err || this.options.err.container,
                            s = null;
                        if (d) l.data(e + ".result." + d, c);
                        else
                            for (var t in this.options.fields[b].validators) l.data(e + ".result." + t, c);
                        switch (p.attr("data-" + e + "-result", c), c) {
                            case this.STATUS_VALIDATING:
                                s = null, this.disableSubmitButtons(!0), l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid), m.removeClass(this.options.row.valid).removeClass(this.options.row.invalid), q && q.removeClass(this.options.icon.valid).removeClass(this.options.icon.invalid).addClass(this.options.icon.validating).show();
                                break;
                            case this.STATUS_INVALID:
                                s = !1, this.disableSubmitButtons(!0), l.removeClass(this.options.control.valid).addClass(this.options.control.invalid), m.removeClass(this.options.row.valid).addClass(this.options.row.invalid), q && q.removeClass(this.options.icon.valid).removeClass(this.options.icon.validating).addClass(this.options.icon.invalid).show();
                                break;
                            case this.STATUS_VALID:
                                if (s = 0 === o.filter("[data-" + e + '-result="' + this.STATUS_NOT_VALIDATED + '"]').length ? o.filter("[data-" + e + '-result="' + this.STATUS_VALID + '"]').length === o.length : null, l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid), null !== s && (this.disableSubmitButtons(this.$submitButton ? !this.isValid() : !s), l.addClass(s ? this.options.control.valid : this.options.control.invalid), q)) {
                                    var u = o.filter('[data-bv-result="' + this.STATUS_VALIDATING + '"]').length > 0;
                                    q.removeClass(this.options.icon.invalid).removeClass(this.options.icon.validating).removeClass(this.options.icon.valid).addClass(s ? this.options.icon.valid : u ? this.options.icon.validating : this.options.icon.invalid).show()
                                }
                                var v = this.isValidContainer(m);
                                null !== v && m.removeClass(this.options.row.valid).removeClass(this.options.row.invalid).addClass(v ? this.options.row.valid : this.options.row.invalid);
                                break;
                            case this.STATUS_NOT_VALIDATED:
                            default:
                                s = null, this.disableSubmitButtons(!1), l.removeClass(this.options.control.valid).removeClass(this.options.control.invalid), m.removeClass(this.options.row.valid).removeClass(this.options.row.invalid), q && q.removeClass(this.options.icon.valid).removeClass(this.options.icon.invalid).removeClass(this.options.icon.validating).hide()
                        }!q || "tooltip" !== r && "popover" !== r ? c === this.STATUS_INVALID ? p.show() : p.hide() : s === !1 ? this._createTooltip(l, o.filter("[data-" + e + '-result="' + g.STATUS_INVALID + '"]').eq(0).html(), r) : this._destroyTooltip(l, r), l.trigger(a.Event(this.options.events.fieldStatus), {
                            bv: this,
                            fv: this,
                            field: b,
                            element: l,
                            status: c
                        }), this._onFieldValidated(l, d)
                    }
                }
                return this
            },
            validate: function() {
                if (!this.options.fields) return this;
                this.disableSubmitButtons(!0), this._submitIfValid = !1;
                for (var a in this.options.fields) this.validateField(a);
                return this._submit(), this._submitIfValid = !0, this
            },
            validateField: function(b) {
                var c = this._namespace,
                    d = a([]);
                switch (typeof b) {
                    case "object":
                        d = b, b = b.attr("data-" + c + "-field");
                        break;
                    case "string":
                        d = this.getFieldElements(b)
                }
                if (0 === d.length || !this.options.fields[b] || this.options.fields[b].enabled === !1) return this;
                for (var e, f, g = this, h = d.attr("type"), i = "radio" === h || "checkbox" === h ? 1 : d.length, j = "radio" === h || "checkbox" === h, k = this.options.fields[b].validators, l = this.isOptionEnabled(b, "verbose"), m = 0; i > m; m++) {
                    var n = d.eq(m);
                    if (!this._isExcluded(n)) {
                        var o = !1;
                        for (e in k) {
                            if (n.data(c + ".dfs." + e) && n.data(c + ".dfs." + e).reject(), o) break;
                            var p = n.data(c + ".result." + e);
                            if (p !== this.STATUS_VALID && p !== this.STATUS_INVALID)
                                if (k[e].enabled !== !1) {
                                    if (n.data(c + ".result." + e, this.STATUS_VALIDATING), f = FormValidation.Validator[e].validate(this, n, k[e]), "object" == typeof f && f.resolve) this.updateStatus(j ? b : n, this.STATUS_VALIDATING, e), n.data(c + ".dfs." + e, f), f.done(function(a, b, d) {
                                        a.removeData(c + ".dfs." + b).data(c + ".response." + b, d), d.message && g.updateMessage(a, b, d.message), g.updateStatus(j ? a.attr("data-" + c + "-field") : a, d.valid ? g.STATUS_VALID : g.STATUS_INVALID, b), d.valid && g._submitIfValid === !0 ? g._submit() : d.valid || l || (o = !0)
                                    });
                                    else if ("object" == typeof f && void 0 !== f.valid) {
                                        if (n.data(c + ".response." + e, f), f.message && this.updateMessage(j ? b : n, e, f.message), this.updateStatus(j ? b : n, f.valid ? this.STATUS_VALID : this.STATUS_INVALID, e), !f.valid && !l) break
                                    } else if ("boolean" == typeof f && (n.data(c + ".response." + e, f), this.updateStatus(j ? b : n, f ? this.STATUS_VALID : this.STATUS_INVALID, e), !f && !l)) break
                                } else this.updateStatus(j ? b : n, this.STATUS_VALID, e);
                            else this._onFieldValidated(n, e)
                        }
                    }
                }
                return this
            },
            addField: function(b, c) {
                var d = this._namespace,
                    e = a([]);
                switch (typeof b) {
                    case "object":
                        e = b, b = b.attr("data-" + d + "-field") || b.attr("name");
                        break;
                    case "string":
                        delete this._cacheFields[b], e = this.getFieldElements(b)
                }
                e.attr("data-" + d + "-field", b);
                for (var f = e.attr("type"), g = "radio" === f || "checkbox" === f ? 1 : e.length, h = 0; g > h; h++) {
                    var i = e.eq(h),
                        j = this._parseOptions(i);
                    j = null === j ? c : a.extend(!0, c, j), this.options.fields[b] = a.extend(!0, this.options.fields[b], j), this._cacheFields[b] = this._cacheFields[b] ? this._cacheFields[b].add(i) : i, this._initField("checkbox" === f || "radio" === f ? b : i)
                }
                return this.disableSubmitButtons(!1), this.$form.trigger(a.Event(this.options.events.fieldAdded), {
                    field: b,
                    element: e,
                    options: this.options.fields[b]
                }), this
            },
            destroy: function() {
                var a, b, c, d, e, f, g, h = this._namespace;
                for (b in this.options.fields)
                    for (c = this.getFieldElements(b), a = 0; a < c.length; a++) {
                        d = c.eq(a);
                        for (e in this.options.fields[b].validators) d.data(h + ".dfs." + e) && d.data(h + ".dfs." + e).reject(), d.removeData(h + ".result." + e).removeData(h + ".response." + e).removeData(h + ".dfs." + e), "function" == typeof FormValidation.Validator[e].destroy && FormValidation.Validator[e].destroy(this, d, this.options.fields[b].validators[e])
                    }
                for (b in this.options.fields)
                    for (c = this.getFieldElements(b), g = this.options.fields[b].row || this.options.row.selector, a = 0; a < c.length; a++) {
                        d = c.eq(a), d.data(h + ".messages").find("." + this.options.err.clazz.split(" ").join(".") + "[data-" + h + "-validator][data-" + h + '-for="' + b + '"]').remove().end().end().removeData(h + ".messages").closest(g).removeClass(this.options.row.valid).removeClass(this.options.row.invalid).removeClass(this.options.row.feedback).end().off("." + h).removeAttr("data-" + h + "-field");
                        var i = "function" == typeof(this.options.fields[b].container || this.options.fields[b].err || this.options.err.container) ? (this.options.fields[b].container || this.options.fields[b].err || this.options.err.container).call(this, d, this) : this.options.fields[b].container || this.options.fields[b].err || this.options.err.container;
                        ("tooltip" === i || "popover" === i) && this._destroyTooltip(d, i), f = d.data(h + ".icon"), f && f.remove(), d.removeData(h + ".icon").removeData(h + ".trigger")
                    }
                for (var j in this.options.addOns) "function" == typeof FormValidation.AddOn[j].destroy && FormValidation.AddOn[j].destroy(this, this.options.addOns[j]);
                this.disableSubmitButtons(!1), this.$hiddenButton.remove(), this.$form.removeClass(this.options.elementClass).off("." + h).removeData("bootstrapValidator").removeData("formValidation").find("[data-" + h + "-submit-hidden]").remove().end().find('[type="submit"]').off("click." + h)
            },
            enableFieldValidators: function(a, b, c) {
                var d = this.options.fields[a].validators;
                if (c && d && d[c] && d[c].enabled !== b) this.options.fields[a].validators[c].enabled = b, this.updateStatus(a, this.STATUS_NOT_VALIDATED, c);
                else if (!c && this.options.fields[a].enabled !== b) {
                    this.options.fields[a].enabled = b;
                    for (var e in d) this.enableFieldValidators(a, b, e)
                }
                return this
            },
            getDynamicOption: function(a, b) {
                var c = "string" == typeof a ? this.getFieldElements(a) : a,
                    d = c.val();
                if ("function" == typeof b) return FormValidation.Helper.call(b, [d, this, c]);
                if ("string" == typeof b) {
                    var e = this.getFieldElements(b);
                    return e.length ? e.val() : FormValidation.Helper.call(b, [d, this, c]) || b
                }
                return null
            },
            getForm: function() {
                return this.$form
            },
            getInvalidFields: function() {
                return this.$invalidFields
            },
            getLocale: function() {
                return this.options.locale
            },
            getMessages: function(b, c) {
                var d = this,
                    e = this._namespace,
                    f = [],
                    g = a([]);
                switch (!0) {
                    case b && "object" == typeof b:
                        g = b;
                        break;
                    case b && "string" == typeof b:
                        var h = this.getFieldElements(b);
                        if (h.length > 0) {
                            var i = h.attr("type");
                            g = "radio" === i || "checkbox" === i ? h.eq(0) : h
                        }
                        break;
                    default:
                        g = this.$invalidFields
                }
                var j = c ? "[data-" + e + '-validator="' + c + '"]' : "";
                return g.each(function() {
                    f = f.concat(a(this).data(e + ".messages").find("." + d.options.err.clazz + "[data-" + e + '-for="' + a(this).attr("data-" + e + "-field") + '"][data-' + e + '-result="' + d.STATUS_INVALID + '"]' + j).map(function() {
                        var b = a(this).attr("data-" + e + "-validator"),
                            c = a(this).attr("data-" + e + "-for");
                        return d.options.fields[c].validators[b].enabled === !1 ? "" : a(this).html()
                    }).get())
                }), f
            },
            getSubmitButton: function() {
                return this.$submitButton
            },
            removeField: function(b) {
                var c = this._namespace,
                    d = a([]);
                switch (typeof b) {
                    case "object":
                        d = b, b = b.attr("data-" + c + "-field") || b.attr("name"), d.attr("data-" + c + "-field", b);
                        break;
                    case "string":
                        d = this.getFieldElements(b)
                }
                if (0 === d.length) return this;
                for (var e = d.attr("type"), f = "radio" === e || "checkbox" === e ? 1 : d.length, g = 0; f > g; g++) {
                    var h = d.eq(g);
                    this.$invalidFields = this.$invalidFields.not(h), this._cacheFields[b] = this._cacheFields[b].not(h)
                }
                return this._cacheFields[b] && 0 !== this._cacheFields[b].length || delete this.options.fields[b], ("checkbox" === e || "radio" === e) && this._initField(b), this.disableSubmitButtons(!1), this.$form.trigger(a.Event(this.options.events.fieldRemoved), {
                    field: b,
                    element: d
                }), this
            },
            resetField: function(b, c) {
                var d = this._namespace,
                    e = a([]);
                switch (typeof b) {
                    case "object":
                        e = b, b = b.attr("data-" + d + "-field");
                        break;
                    case "string":
                        e = this.getFieldElements(b)
                }
                var f = e.length;
                if (this.options.fields[b])
                    for (var g = 0; f > g; g++)
                        for (var h in this.options.fields[b].validators) e.eq(g).removeData(d + ".dfs." + h);
                if (this.updateStatus(b, this.STATUS_NOT_VALIDATED), c) {
                    var i = e.attr("type");
                    "radio" === i || "checkbox" === i ? e.removeAttr("checked").removeAttr("selected") : e.val("")
                }
                return this
            },
            resetForm: function(b) {
                for (var c in this.options.fields) this.resetField(c, b);
                return this.$invalidFields = a([]), this.$submitButton = null, this.disableSubmitButtons(!1), this
            },
            revalidateField: function(a) {
                return this.updateStatus(a, this.STATUS_NOT_VALIDATED).validateField(a), this
            },
            setLocale: function(b) {
                return this.options.locale = b, this.$form.trigger(a.Event(this.options.events.localeChanged), {
                    locale: b,
                    bv: this,
                    fv: this
                }), this
            },
            updateOption: function(a, b, c, d) {
                var e = this._namespace;
                return "object" == typeof a && (a = a.attr("data-" + e + "-field")), this.options.fields[a] && this.options.fields[a].validators[b] && (this.options.fields[a].validators[b][c] = d, this.updateStatus(a, this.STATUS_NOT_VALIDATED, b)), this
            },
            validateContainer: function(b) {
                var c = this,
                    d = this._namespace,
                    e = {},
                    f = "string" == typeof b ? a(b) : b;
                if (0 === f.length) return this;
                f.find("[data-" + d + "-field]").each(function() {
                    var b = a(this),
                        f = b.attr("data-" + d + "-field");
                    c._isExcluded(b) || e[f] || (e[f] = b)
                });
                for (var g in e) this.validateField(e[g]);
                return this
            }
        }, a.fn.formValidation = function(b) {
            var c = arguments;
            return this.each(function() {
                var d = a(this),
                    e = d.data("formValidation"),
                    f = "object" == typeof b && b;
                if (!e) {
                    var g = (f.framework || d.attr("data-fv-framework") || "bootstrap").toLowerCase();
                    switch (g) {
                        case "foundation":
                            e = new FormValidation.Framework.Foundation(this, f);
                            break;
                        case "pure":
                            e = new FormValidation.Framework.Pure(this, f);
                            break;
                        case "semantic":
                            e = new FormValidation.Framework.Semantic(this, f);
                            break;
                        case "uikit":
                            e = new FormValidation.Framework.UIKit(this, f);
                            break;
                        case "bootstrap":
                        default:
                            e = new FormValidation.Framework.Bootstrap(this, f)
                    }
                    d.addClass("fv-form-" + g).data("formValidation", e)
                }
                "string" == typeof b && e[b].apply(e, Array.prototype.slice.call(c, 1))
            })
        }, a.fn.formValidation.Constructor = FormValidation.Base, a.fn.formValidation.DEFAULT_OPTIONS = {
            autoFocus: !0,
            elementClass: "fv-form",
            events: {
                formInit: "init.form.fv",
                formError: "err.form.fv",
                formSuccess: "success.form.fv",
                fieldAdded: "added.field.fv",
                fieldRemoved: "removed.field.fv",
                fieldInit: "init.field.fv",
                fieldError: "err.field.fv",
                fieldSuccess: "success.field.fv",
                fieldStatus: "status.field.fv",
                localeChanged: "changed.locale.fv",
                validatorError: "err.validator.fv",
                validatorSuccess: "success.validator.fv"
            },
            excluded: [":disabled", ":hidden", ":not(:visible)"],
            fields: null,
            live: "enabled",
            locale: "en_US",
            message: "This value is not valid",
            threshold: null,
            verbose: !0,
            button: {
                selector: '[type="submit"]',
                disabled: ""
            },
            control: {
                valid: "",
                invalid: ""
            },
            err: {
                clazz: "",
                container: null,
                parent: null
            },
            icon: {
                valid: null,
                invalid: null,
                validating: null,
                feedback: ""
            },
            row: {
                container: null,
                valid: "",
                invalid: "",
                feedback: ""
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.Helper = {
            call: function(a, b) {
                if ("function" == typeof a) return a.apply(this, b);
                if ("string" == typeof a) {
                    "()" === a.substring(a.length - 2) && (a = a.substring(0, a.length - 2));
                    for (var c = a.split("."), d = c.pop(), e = window, f = 0; f < c.length; f++) e = e[c[f]];
                    return "undefined" == typeof e[d] ? null : e[d].apply(this, b)
                }
            },
            date: function(a, b, c, d) {
                if (isNaN(a) || isNaN(b) || isNaN(c)) return !1;
                if (c.length > 2 || b.length > 2 || a.length > 4) return !1;
                if (c = parseInt(c, 10), b = parseInt(b, 10), a = parseInt(a, 10), 1e3 > a || a > 9999 || 0 >= b || b > 12) return !1;
                var e = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if ((a % 400 === 0 || a % 100 !== 0 && a % 4 === 0) && (e[1] = 29), 0 >= c || c > e[b - 1]) return !1;
                if (d === !0) {
                    var f = new Date,
                        g = f.getFullYear(),
                        h = f.getMonth(),
                        i = f.getDate();
                    return g > a || a === g && h > b - 1 || a === g && b - 1 === h && i > c
                }
                return !0
            },
            format: function(b, c) {
                a.isArray(c) || (c = [c]);
                for (var d in c) b = b.replace("%s", c[d]);
                return b
            },
            luhn: function(a) {
                for (var b = a.length, c = 0, d = [
                    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                    [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]
                ], e = 0; b--;) e += d[c][parseInt(a.charAt(b), 10)], c ^= 1;
                return e % 10 === 0 && e > 0
            },
            mod11And10: function(a) {
                for (var b = 5, c = a.length, d = 0; c > d; d++) b = (2 * (b || 10) % 11 + parseInt(a.charAt(d), 10)) % 10;
                return 1 === b
            },
            mod37And36: function(a, b) {
                b = b || "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                for (var c = b.length, d = a.length, e = Math.floor(c / 2), f = 0; d > f; f++) e = (2 * (e || c) % (c + 1) + b.indexOf(a.charAt(f))) % c;
                return 1 === e
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                base64: {
                    "default": "Please enter a valid base 64 encoded"
                }
            }
        }), FormValidation.Validator.base64 = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "base64");
                return "" === c ? !0 : /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/.test(c)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                between: {
                    "default": "Please enter a value between %s and %s",
                    notInclusive: "Please enter a value between %s and %s strictly"
                }
            }
        }), FormValidation.Validator.between = {
            html5Attributes: {
                message: "message",
                min: "min",
                max: "max",
                inclusive: "inclusive"
            },
            enableByHtml5: function(a) {
                return "range" === a.attr("type") ? {
                    min: a.attr("min"),
                    max: a.attr("max")
                } : !1
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "between");
                if ("" === e) return !0;
                if (e = this._format(e), !a.isNumeric(e)) return !1;
                var f = b.getLocale(),
                    g = a.isNumeric(d.min) ? d.min : b.getDynamicOption(c, d.min),
                    h = a.isNumeric(d.max) ? d.max : b.getDynamicOption(c, d.max),
                    i = this._format(g),
                    j = this._format(h);
                return e = parseFloat(e), d.inclusive === !0 || void 0 === d.inclusive ? {
                    valid: e >= i && j >= e,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].between["default"], [g, h])
                } : {
                    valid: e > i && j > e,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].between.notInclusive, [g, h])
                }
            },
            _format: function(a) {
                return (a + "").replace(",", ".")
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                bic: {
                    "default": "Please enter a valid BIC number"
                }
            }
        }), FormValidation.Validator.bic = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "bic");
                return "" === c ? !0 : /^[a-zA-Z]{6}[a-zA-Z0-9]{2}([a-zA-Z0-9]{3})?$/.test(c)
            }
        }
    }(jQuery),
    function() {
        FormValidation.Validator.blank = {
            validate: function() {
                return !0
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                callback: {
                    "default": "Please enter a valid value"
                }
            }
        }), FormValidation.Validator.callback = {
            html5Attributes: {
                message: "message",
                callback: "callback"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "callback"),
                    f = new a.Deferred,
                    g = {
                        valid: !0
                    };
                if (d.callback) {
                    var h = FormValidation.Helper.call(d.callback, [e, b, c]);
                    g = "boolean" == typeof h ? {
                        valid: h
                    } : h
                }
                return f.resolve(c, "callback", g), f
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                choice: {
                    "default": "Please enter a valid value",
                    less: "Please choose %s options at minimum",
                    more: "Please choose %s options at maximum",
                    between: "Please choose %s - %s options"
                }
            }
        }), FormValidation.Validator.choice = {
            html5Attributes: {
                message: "message",
                min: "min",
                max: "max"
            },
            validate: function(b, c, d) {
                var e = b.getLocale(),
                    f = b.getNamespace(),
                    g = c.is("select") ? b.getFieldElements(c.attr("data-" + f + "-field")).find("option").filter(":selected").length : b.getFieldElements(c.attr("data-" + f + "-field")).filter(":checked").length,
                    h = d.min ? a.isNumeric(d.min) ? d.min : b.getDynamicOption(c, d.min) : null,
                    i = d.max ? a.isNumeric(d.max) ? d.max : b.getDynamicOption(c, d.max) : null,
                    j = !0,
                    k = d.message || FormValidation.I18n[e].choice["default"];
                switch ((h && g < parseInt(h, 10) || i && g > parseInt(i, 10)) && (j = !1), !0) {
                    case !!h && !!i:
                        k = FormValidation.Helper.format(d.message || FormValidation.I18n[e].choice.between, [parseInt(h, 10), parseInt(i, 10)]);
                        break;
                    case !!h:
                        k = FormValidation.Helper.format(d.message || FormValidation.I18n[e].choice.less, parseInt(h, 10));
                        break;
                    case !!i:
                        k = FormValidation.Helper.format(d.message || FormValidation.I18n[e].choice.more, parseInt(i, 10))
                }
                return {
                    valid: j,
                    message: k
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                color: {
                    "default": "Please enter a valid color"
                }
            }
        }), FormValidation.Validator.color = {
            html5Attributes: {
                message: "message",
                type: "type"
            },
            enableByHtml5: function(a) {
                return "color" === a.attr("type")
            },
            SUPPORTED_TYPES: ["hex", "rgb", "rgba", "hsl", "hsla", "keyword"],
            KEYWORD_COLORS: ["aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkgrey", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkslategrey", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dimgrey", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "green", "greenyellow", "grey", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightgrey", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightslategrey", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "slategrey", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "transparent", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen"],
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "color");
                if ("" === e) return !0;
                if (this.enableByHtml5(c)) return /^#[0-9A-F]{6}$/i.test(e);
                var f = d.type || this.SUPPORTED_TYPES;
                a.isArray(f) || (f = f.replace(/s/g, "").split(","));
                for (var g, h, i = !1, j = 0; j < f.length; j++)
                    if (h = f[j], g = "_" + h.toLowerCase(), i = i || this[g](e)) return !0;
                return !1
            },
            _hex: function(a) {
                return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)
            },
            _hsl: function(a) {
                return /^hsl\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/.test(a)
            },
            _hsla: function(a) {
                return /^hsla\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/.test(a)
            },
            _keyword: function(b) {
                return a.inArray(b, this.KEYWORD_COLORS) >= 0
            },
            _rgb: function(a) {
                var b = /^rgb\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){2}(\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*)\)$/,
                    c = /^rgb\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/;
                return b.test(a) || c.test(a)
            },
            _rgba: function(a) {
                var b = /^rgba\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/,
                    c = /^rgba\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/;
                return b.test(a) || c.test(a)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                creditCard: {
                    "default": "Please enter a valid credit card number"
                }
            }
        }), FormValidation.Validator.creditCard = {
            validate: function(b, c) {
                var d = b.getFieldValue(c, "creditCard");
                if ("" === d) return !0;
                if (/[^0-9-\s]+/.test(d)) return !1;
                if (d = d.replace(/\D/g, ""), !FormValidation.Helper.luhn(d)) return !1;
                var e, f, g = {
                    AMERICAN_EXPRESS: {
                        length: [15],
                        prefix: ["34", "37"]
                    },
                    DINERS_CLUB: {
                        length: [14],
                        prefix: ["300", "301", "302", "303", "304", "305", "36"]
                    },
                    DINERS_CLUB_US: {
                        length: [16],
                        prefix: ["54", "55"]
                    },
                    DISCOVER: {
                        length: [16],
                        prefix: ["6011", "622126", "622127", "622128", "622129", "62213", "62214", "62215", "62216", "62217", "62218", "62219", "6222", "6223", "6224", "6225", "6226", "6227", "6228", "62290", "62291", "622920", "622921", "622922", "622923", "622924", "622925", "644", "645", "646", "647", "648", "649", "65"]
                    },
                    JCB: {
                        length: [16],
                        prefix: ["3528", "3529", "353", "354", "355", "356", "357", "358"]
                    },
                    LASER: {
                        length: [16, 17, 18, 19],
                        prefix: ["6304", "6706", "6771", "6709"]
                    },
                    MAESTRO: {
                        length: [12, 13, 14, 15, 16, 17, 18, 19],
                        prefix: ["5018", "5020", "5038", "6304", "6759", "6761", "6762", "6763", "6764", "6765", "6766"]
                    },
                    MASTERCARD: {
                        length: [16],
                        prefix: ["51", "52", "53", "54", "55"]
                    },
                    SOLO: {
                        length: [16, 18, 19],
                        prefix: ["6334", "6767"]
                    },
                    UNIONPAY: {
                        length: [16, 17, 18, 19],
                        prefix: ["622126", "622127", "622128", "622129", "62213", "62214", "62215", "62216", "62217", "62218", "62219", "6222", "6223", "6224", "6225", "6226", "6227", "6228", "62290", "62291", "622920", "622921", "622922", "622923", "622924", "622925"]
                    },
                    VISA: {
                        length: [16],
                        prefix: ["4"]
                    }
                };
                for (e in g)
                    for (f in g[e].prefix)
                        if (d.substr(0, g[e].prefix[f].length) === g[e].prefix[f] && -1 !== a.inArray(d.length, g[e].length)) return {
                            valid: !0,
                            type: e
                        };
                return !1
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                cusip: {
                    "default": "Please enter a valid CUSIP number"
                }
            }
        }), FormValidation.Validator.cusip = {
            validate: function(b, c) {
                var d = b.getFieldValue(c, "cusip");
                if ("" === d) return !0;
                if (d = d.toUpperCase(), !/^[0-9A-Z]{9}$/.test(d)) return !1;
                for (var e = a.map(d.split(""), function(a) {
                    var b = a.charCodeAt(0);
                    return b >= "A".charCodeAt(0) && b <= "Z".charCodeAt(0) ? b - "A".charCodeAt(0) + 10 : a
                }), f = e.length, g = 0, h = 0; f - 1 > h; h++) {
                    var i = parseInt(e[h], 10);
                    h % 2 !== 0 && (i *= 2), i > 9 && (i -= 9), g += i
                }
                return g = (10 - g % 10) % 10, g === parseInt(e[f - 1], 10)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                cvv: {
                    "default": "Please enter a valid CVV number"
                }
            }
        }), FormValidation.Validator.cvv = {
            html5Attributes: {
                message: "message",
                ccfield: "creditCardField"
            },
            init: function(a, b, c) {
                if (c.creditCardField) {
                    var d = a.getFieldElements(c.creditCardField);
                    a.onLiveChange(d, "live_cvv", function() {
                        var c = a.getStatus(b, "cvv");
                        c !== a.STATUS_NOT_VALIDATED && a.revalidateField(b)
                    })
                }
            },
            destroy: function(a, b, c) {
                if (c.creditCardField) {
                    var d = a.getFieldElements(c.creditCardField);
                    a.offLiveChange(d, "live_cvv")
                }
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "cvv");
                if ("" === e) return !0;
                if (!/^[0-9]{3,4}$/.test(e)) return !1;
                if (!d.creditCardField) return !0;
                var f = b.getFieldElements(d.creditCardField).val();
                if ("" === f) return !0;
                f = f.replace(/\D/g, "");
                var g, h, i = {
                        AMERICAN_EXPRESS: {
                            length: [15],
                            prefix: ["34", "37"]
                        },
                        DINERS_CLUB: {
                            length: [14],
                            prefix: ["300", "301", "302", "303", "304", "305", "36"]
                        },
                        DINERS_CLUB_US: {
                            length: [16],
                            prefix: ["54", "55"]
                        },
                        DISCOVER: {
                            length: [16],
                            prefix: ["6011", "622126", "622127", "622128", "622129", "62213", "62214", "62215", "62216", "62217", "62218", "62219", "6222", "6223", "6224", "6225", "6226", "6227", "6228", "62290", "62291", "622920", "622921", "622922", "622923", "622924", "622925", "644", "645", "646", "647", "648", "649", "65"]
                        },
                        JCB: {
                            length: [16],
                            prefix: ["3528", "3529", "353", "354", "355", "356", "357", "358"]
                        },
                        LASER: {
                            length: [16, 17, 18, 19],
                            prefix: ["6304", "6706", "6771", "6709"]
                        },
                        MAESTRO: {
                            length: [12, 13, 14, 15, 16, 17, 18, 19],
                            prefix: ["5018", "5020", "5038", "6304", "6759", "6761", "6762", "6763", "6764", "6765", "6766"]
                        },
                        MASTERCARD: {
                            length: [16],
                            prefix: ["51", "52", "53", "54", "55"]
                        },
                        SOLO: {
                            length: [16, 18, 19],
                            prefix: ["6334", "6767"]
                        },
                        UNIONPAY: {
                            length: [16, 17, 18, 19],
                            prefix: ["622126", "622127", "622128", "622129", "62213", "62214", "62215", "62216", "62217", "62218", "62219", "6222", "6223", "6224", "6225", "6226", "6227", "6228", "62290", "62291", "622920", "622921", "622922", "622923", "622924", "622925"]
                        },
                        VISA: {
                            length: [16],
                            prefix: ["4"]
                        }
                    },
                    j = null;
                for (g in i)
                    for (h in i[g].prefix)
                        if (f.substr(0, i[g].prefix[h].length) === i[g].prefix[h] && -1 !== a.inArray(f.length, i[g].length)) {
                            j = g;
                            break
                        } return null === j ? !1 : "AMERICAN_EXPRESS" === j ? 4 === e.length : 3 === e.length
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                date: {
                    "default": "Please enter a valid date",
                    min: "Please enter a date after %s",
                    max: "Please enter a date before %s",
                    range: "Please enter a date in the range %s - %s"
                }
            }
        }), FormValidation.Validator.date = {
            html5Attributes: {
                message: "message",
                format: "format",
                min: "min",
                max: "max",
                separator: "separator"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "date");
                if ("" === e) return !0;
                d.format = d.format || "MM/DD/YYYY", "date" === c.attr("type") && (d.format = "YYYY-MM-DD");
                var f = b.getLocale(),
                    g = d.message || FormValidation.I18n[f].date["default"],
                    h = d.format.split(" "),
                    i = h[0],
                    j = h.length > 1 ? h[1] : null,
                    k = h.length > 2 ? h[2] : null,
                    l = e.split(" "),
                    m = l[0],
                    n = l.length > 1 ? l[1] : null;
                if (h.length !== l.length) return {
                    valid: !1,
                    message: g
                };
                var o = d.separator;
                if (o || (o = -1 !== m.indexOf("/") ? "/" : -1 !== m.indexOf("-") ? "-" : null), null === o || -1 === m.indexOf(o)) return {
                    valid: !1,
                    message: g
                };
                if (m = m.split(o), i = i.split(o), m.length !== i.length) return {
                    valid: !1,
                    message: g
                };
                var p = m[a.inArray("YYYY", i)],
                    q = m[a.inArray("MM", i)],
                    r = m[a.inArray("DD", i)];
                if (!p || !q || !r || 4 !== p.length) return {
                    valid: !1,
                    message: g
                };
                var s = null,
                    t = null,
                    u = null;
                if (j) {
                    if (j = j.split(":"), n = n.split(":"), j.length !== n.length) return {
                        valid: !1,
                        message: g
                    };
                    if (t = n.length > 0 ? n[0] : null, s = n.length > 1 ? n[1] : null, u = n.length > 2 ? n[2] : null, "" === t || "" === s || "" === u) return {
                        valid: !1,
                        message: g
                    };
                    if (u) {
                        if (isNaN(u) || u.length > 2) return {
                            valid: !1,
                            message: g
                        };
                        if (u = parseInt(u, 10), 0 > u || u > 60) return {
                            valid: !1,
                            message: g
                        }
                    }
                    if (t) {
                        if (isNaN(t) || t.length > 2) return {
                            valid: !1,
                            message: g
                        };
                        if (t = parseInt(t, 10), 0 > t || t >= 24 || k && t > 12) return {
                            valid: !1,
                            message: g
                        }
                    }
                    if (s) {
                        if (isNaN(s) || s.length > 2) return {
                            valid: !1,
                            message: g
                        };
                        if (s = parseInt(s, 10), 0 > s || s > 59) return {
                            valid: !1,
                            message: g
                        }
                    }
                }
                var v = FormValidation.Helper.date(p, q, r),
                    w = null,
                    x = null,
                    y = d.min,
                    z = d.max;
                switch (y && (isNaN(Date.parse(y)) && (y = b.getDynamicOption(c, y)), w = y instanceof Date ? y : this._parseDate(y, i, o), y = y instanceof Date ? this._formatDate(y, d.format) : y), z && (isNaN(Date.parse(z)) && (z = b.getDynamicOption(c, z)), x = z instanceof Date ? z : this._parseDate(z, i, o), z = z instanceof Date ? this._formatDate(z, d.format) : z), m = new Date(p, q - 1, r, t, s, u), !0) {
                    case y && !z && v:
                        v = m.getTime() >= w.getTime(), g = d.message || FormValidation.Helper.format(FormValidation.I18n[f].date.min, y);
                        break;
                    case z && !y && v:
                        v = m.getTime() <= x.getTime(), g = d.message || FormValidation.Helper.format(FormValidation.I18n[f].date.max, z);
                        break;
                    case z && y && v:
                        v = m.getTime() <= x.getTime() && m.getTime() >= w.getTime(), g = d.message || FormValidation.Helper.format(FormValidation.I18n[f].date.range, [y, z])
                }
                return {
                    valid: v,
                    message: g
                }
            },
            _parseDate: function(b, c, d) {
                var e = 0,
                    f = 0,
                    g = 0,
                    h = b.split(" "),
                    i = h[0],
                    j = h.length > 1 ? h[1] : null;
                i = i.split(d);
                var k = i[a.inArray("YYYY", c)],
                    l = i[a.inArray("MM", c)],
                    m = i[a.inArray("DD", c)];
                return j && (j = j.split(":"), f = j.length > 0 ? j[0] : null, e = j.length > 1 ? j[1] : null, g = j.length > 2 ? j[2] : null), new Date(k, l - 1, m, f, e, g)
            },
            _formatDate: function(a, b) {
                b = b.replace(/Y/g, "y").replace(/M/g, "m").replace(/D/g, "d").replace(/:m/g, ":M").replace(/:mm/g, ":MM").replace(/:S/, ":s").replace(/:SS/, ":ss");
                var c = {
                    d: function(a) {
                        return a.getDate()
                    },
                    dd: function(a) {
                        var b = a.getDate();
                        return 10 > b ? "0" + b : b
                    },
                    m: function(a) {
                        return a.getMonth() + 1
                    },
                    mm: function(a) {
                        var b = a.getMonth() + 1;
                        return 10 > b ? "0" + b : b
                    },
                    yy: function(a) {
                        return ("" + a.getFullYear()).substr(2)
                    },
                    yyyy: function(a) {
                        return a.getFullYear()
                    },
                    h: function(a) {
                        return a.getHours() % 12 || 12
                    },
                    hh: function(a) {
                        var b = a.getHours() % 12 || 12;
                        return 10 > b ? "0" + b : b
                    },
                    H: function(a) {
                        return a.getHours()
                    },
                    HH: function(a) {
                        var b = a.getHours();
                        return 10 > b ? "0" + b : b
                    },
                    M: function(a) {
                        return a.getMinutes()
                    },
                    MM: function(a) {
                        var b = a.getMinutes();
                        return 10 > b ? "0" + b : b
                    },
                    s: function(a) {
                        return a.getSeconds()
                    },
                    ss: function(a) {
                        var b = a.getSeconds();
                        return 10 > b ? "0" + b : b
                    }
                };
                return b.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g, function(b) {
                    return c[b] ? c[b](a) : b.slice(1, b.length - 1)
                })
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                different: {
                    "default": "Please enter a different value"
                }
            }
        }), FormValidation.Validator.different = {
            html5Attributes: {
                message: "message",
                field: "field"
            },
            init: function(a, b, c) {
                for (var d = c.field.split(","), e = 0; e < d.length; e++) {
                    var f = a.getFieldElements(d[e]);
                    a.onLiveChange(f, "live_different", function() {
                        var c = a.getStatus(b, "different");
                        c !== a.STATUS_NOT_VALIDATED && a.revalidateField(b)
                    })
                }
            },
            destroy: function(a, b, c) {
                for (var d = c.field.split(","), e = 0; e < d.length; e++) {
                    var f = a.getFieldElements(d[e]);
                    a.offLiveChange(f, "live_different")
                }
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "different");
                if ("" === d) return !0;
                for (var e = c.field.split(","), f = !0, g = 0; g < e.length; g++) {
                    var h = a.getFieldElements(e[g]);
                    if (null != h && 0 !== h.length) {
                        var i = a.getFieldValue(h, "different");
                        d === i ? f = !1 : "" !== i && a.updateStatus(h, a.STATUS_VALID, "different")
                    }
                }
                return f
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                digits: {
                    "default": "Please enter only digits"
                }
            }
        }), FormValidation.Validator.digits = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "digits");
                return "" === c ? !0 : /^\d+$/.test(c)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                ean: {
                    "default": "Please enter a valid EAN number"
                }
            }
        }), FormValidation.Validator.ean = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "ean");
                if ("" === c) return !0;
                if (!/^(\d{8}|\d{12}|\d{13})$/.test(c)) return !1;
                for (var d = c.length, e = 0, f = 8 === d ? [3, 1] : [1, 3], g = 0; d - 1 > g; g++) e += parseInt(c.charAt(g), 10) * f[g % 2];
                return e = (10 - e % 10) % 10, e + "" === c.charAt(d - 1)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                ein: {
                    "default": "Please enter a valid EIN number"
                }
            }
        }), FormValidation.Validator.ein = {
            CAMPUS: {
                ANDOVER: ["10", "12"],
                ATLANTA: ["60", "67"],
                AUSTIN: ["50", "53"],
                BROOKHAVEN: ["01", "02", "03", "04", "05", "06", "11", "13", "14", "16", "21", "22", "23", "25", "34", "51", "52", "54", "55", "56", "57", "58", "59", "65"],
                CINCINNATI: ["30", "32", "35", "36", "37", "38", "61"],
                FRESNO: ["15", "24"],
                KANSAS_CITY: ["40", "44"],
                MEMPHIS: ["94", "95"],
                OGDEN: ["80", "90"],
                PHILADELPHIA: ["33", "39", "41", "42", "43", "46", "48", "62", "63", "64", "66", "68", "71", "72", "73", "74", "75", "76", "77", "81", "82", "83", "84", "85", "86", "87", "88", "91", "92", "93", "98", "99"],
                INTERNET: ["20", "26", "27", "45", "46"],
                SMALL_BUSINESS_ADMINISTRATION: ["31"]
            },
            validate: function(b, c) {
                var d = b.getFieldValue(c, "ein");
                if ("" === d) return !0;
                if (!/^[0-9]{2}-?[0-9]{7}$/.test(d)) return !1;
                var e = d.substr(0, 2) + "";
                for (var f in this.CAMPUS)
                    if (-1 !== a.inArray(e, this.CAMPUS[f])) return {
                        valid: !0,
                        campus: f
                    };
                return !1
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                emailAddress: {
                    "default": "Please enter a valid email address"
                }
            }
        }), FormValidation.Validator.emailAddress = {
            html5Attributes: {
                message: "message",
                multiple: "multiple",
                separator: "separator"
            },
            enableByHtml5: function(a) {
                return "email" === a.attr("type")
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "emailAddress");
                if ("" === d) return !0;
                var e = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,
                    f = c.multiple === !0 || "true" === c.multiple;
                if (f) {
                    for (var g = c.separator || /[,;]/, h = this._splitEmailAddresses(d, g), i = 0; i < h.length; i++)
                        if (!e.test(h[i])) return !1;
                    return !0
                }
                return e.test(d)
            },
            _splitEmailAddresses: function(a, b) {
                for (var c = a.split(/"/), d = c.length, e = [], f = "", g = 0; d > g; g++)
                    if (g % 2 === 0) {
                        var h = c[g].split(b),
                            i = h.length;
                        if (1 === i) f += h[0];
                        else {
                            e.push(f + h[0]);
                            for (var j = 1; i - 1 > j; j++) e.push(h[j]);
                            f = h[i - 1]
                        }
                    } else f += '"' + c[g], d - 1 > g && (f += '"');
                return e.push(f), e
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                file: {
                    "default": "Please choose a valid file"
                }
            }
        }), FormValidation.Validator.file = {
            html5Attributes: {
                extension: "extension",
                maxfiles: "maxFiles",
                minfiles: "minFiles",
                maxsize: "maxSize",
                minsize: "minSize",
                maxtotalsize: "maxTotalSize",
                mintotalsize: "minTotalSize",
                message: "message",
                type: "type"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "file");
                if ("" === e) return !0;
                var f, g = d.extension ? d.extension.toLowerCase().split(",") : null,
                    h = d.type ? d.type.toLowerCase().split(",") : null,
                    i = window.File && window.FileList && window.FileReader;
                if (i) {
                    var j = c.get(0).files,
                        k = j.length,
                        l = 0;
                    if (d.maxFiles && k > parseInt(d.maxFiles, 10) || d.minFiles && k < parseInt(d.minFiles, 10)) return !1;
                    for (var m = 0; k > m; m++)
                        if (l += j[m].size, f = j[m].name.substr(j[m].name.lastIndexOf(".") + 1), d.minSize && j[m].size < parseInt(d.minSize, 10) || d.maxSize && j[m].size > parseInt(d.maxSize, 10) || g && -1 === a.inArray(f.toLowerCase(), g) || j[m].type && h && -1 === a.inArray(j[m].type.toLowerCase(), h)) return !1;
                    if (d.maxTotalSize && l > parseInt(d.maxTotalSize, 10) || d.minTotalSize && l < parseInt(d.minTotalSize, 10)) return !1
                } else if (f = e.substr(e.lastIndexOf(".") + 1), g && -1 === a.inArray(f.toLowerCase(), g)) return !1;
                return !0
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                greaterThan: {
                    "default": "Please enter a value greater than or equal to %s",
                    notInclusive: "Please enter a value greater than %s"
                }
            }
        }), FormValidation.Validator.greaterThan = {
            html5Attributes: {
                message: "message",
                value: "value",
                inclusive: "inclusive"
            },
            enableByHtml5: function(a) {
                var b = a.attr("type"),
                    c = a.attr("min");
                return c && "date" !== b ? {
                    value: c
                } : !1
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "greaterThan");
                if ("" === e) return !0;
                if (e = this._format(e), !a.isNumeric(e)) return !1;
                var f = b.getLocale(),
                    g = a.isNumeric(d.value) ? d.value : b.getDynamicOption(c, d.value),
                    h = this._format(g);
                return e = parseFloat(e), d.inclusive === !0 || void 0 === d.inclusive ? {
                    valid: e >= h,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].greaterThan["default"], g)
                } : {
                    valid: e > h,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].greaterThan.notInclusive, g)
                }
            },
            _format: function(a) {
                return (a + "").replace(",", ".")
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                grid: {
                    "default": "Please enter a valid GRId number"
                }
            }
        }), FormValidation.Validator.grid = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "grid");
                return "" === c ? !0 : (c = c.toUpperCase(), /^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g.test(c) ? (c = c.replace(/\s/g, "").replace(/-/g, ""), "GRID:" === c.substr(0, 5) && (c = c.substr(5)), FormValidation.Helper.mod37And36(c)) : !1)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                hex: {
                    "default": "Please enter a valid hexadecimal number"
                }
            }
        }), FormValidation.Validator.hex = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "hex");
                return "" === c ? !0 : /^[0-9a-fA-F]+$/.test(c)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                iban: {
                    "default": "Please enter a valid IBAN number",
                    country: "Please enter a valid IBAN number in %s",
                    countries: {
                        AD: "Andorra",
                        AE: "United Arab Emirates",
                        AL: "Albania",
                        AO: "Angola",
                        AT: "Austria",
                        AZ: "Azerbaijan",
                        BA: "Bosnia and Herzegovina",
                        BE: "Belgium",
                        BF: "Burkina Faso",
                        BG: "Bulgaria",
                        BH: "Bahrain",
                        BI: "Burundi",
                        BJ: "Benin",
                        BR: "Brazil",
                        CH: "Switzerland",
                        CI: "Ivory Coast",
                        CM: "Cameroon",
                        CR: "Costa Rica",
                        CV: "Cape Verde",
                        CY: "Cyprus",
                        CZ: "Czech Republic",
                        DE: "Germany",
                        DK: "Denmark",
                        DO: "Dominican Republic",
                        DZ: "Algeria",
                        EE: "Estonia",
                        ES: "Spain",
                        FI: "Finland",
                        FO: "Faroe Islands",
                        FR: "France",
                        GB: "United Kingdom",
                        GE: "Georgia",
                        GI: "Gibraltar",
                        GL: "Greenland",
                        GR: "Greece",
                        GT: "Guatemala",
                        HR: "Croatia",
                        HU: "Hungary",
                        IE: "Ireland",
                        IL: "Israel",
                        IR: "Iran",
                        IS: "Iceland",
                        IT: "Italy",
                        JO: "Jordan",
                        KW: "Kuwait",
                        KZ: "Kazakhstan",
                        LB: "Lebanon",
                        LI: "Liechtenstein",
                        LT: "Lithuania",
                        LU: "Luxembourg",
                        LV: "Latvia",
                        MC: "Monaco",
                        MD: "Moldova",
                        ME: "Montenegro",
                        MG: "Madagascar",
                        MK: "Macedonia",
                        ML: "Mali",
                        MR: "Mauritania",
                        MT: "Malta",
                        MU: "Mauritius",
                        MZ: "Mozambique",
                        NL: "Netherlands",
                        NO: "Norway",
                        PK: "Pakistan",
                        PL: "Poland",
                        PS: "Palestine",
                        PT: "Portugal",
                        QA: "Qatar",
                        RO: "Romania",
                        RS: "Serbia",
                        SA: "Saudi Arabia",
                        SE: "Sweden",
                        SI: "Slovenia",
                        SK: "Slovakia",
                        SM: "San Marino",
                        SN: "Senegal",
                        TN: "Tunisia",
                        TR: "Turkey",
                        VG: "Virgin Islands, British"
                    }
                }
            }
        }), FormValidation.Validator.iban = {
            html5Attributes: {
                message: "message",
                country: "country"
            },
            REGEX: {
                AD: "AD[0-9]{2}[0-9]{4}[0-9]{4}[A-Z0-9]{12}",
                AE: "AE[0-9]{2}[0-9]{3}[0-9]{16}",
                AL: "AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}",
                AO: "AO[0-9]{2}[0-9]{21}",
                AT: "AT[0-9]{2}[0-9]{5}[0-9]{11}",
                AZ: "AZ[0-9]{2}[A-Z]{4}[A-Z0-9]{20}",
                BA: "BA[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{8}[0-9]{2}",
                BE: "BE[0-9]{2}[0-9]{3}[0-9]{7}[0-9]{2}",
                BF: "BF[0-9]{2}[0-9]{23}",
                BG: "BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}",
                BH: "BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}",
                BI: "BI[0-9]{2}[0-9]{12}",
                BJ: "BJ[0-9]{2}[A-Z]{1}[0-9]{23}",
                BR: "BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z][A-Z0-9]",
                CH: "CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}",
                CI: "CI[0-9]{2}[A-Z]{1}[0-9]{23}",
                CM: "CM[0-9]{2}[0-9]{23}",
                CR: "CR[0-9]{2}[0-9]{3}[0-9]{14}",
                CV: "CV[0-9]{2}[0-9]{21}",
                CY: "CY[0-9]{2}[0-9]{3}[0-9]{5}[A-Z0-9]{16}",
                CZ: "CZ[0-9]{2}[0-9]{20}",
                DE: "DE[0-9]{2}[0-9]{8}[0-9]{10}",
                DK: "DK[0-9]{2}[0-9]{14}",
                DO: "DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}",
                DZ: "DZ[0-9]{2}[0-9]{20}",
                EE: "EE[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{11}[0-9]{1}",
                ES: "ES[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{1}[0-9]{1}[0-9]{10}",
                FI: "FI[0-9]{2}[0-9]{6}[0-9]{7}[0-9]{1}",
                FO: "FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",
                FR: "FR[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",
                GB: "GB[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",
                GE: "GE[0-9]{2}[A-Z]{2}[0-9]{16}",
                GI: "GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}",
                GL: "GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",
                GR: "GR[0-9]{2}[0-9]{3}[0-9]{4}[A-Z0-9]{16}",
                GT: "GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}",
                HR: "HR[0-9]{2}[0-9]{7}[0-9]{10}",
                HU: "HU[0-9]{2}[0-9]{3}[0-9]{4}[0-9]{1}[0-9]{15}[0-9]{1}",
                IE: "IE[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",
                IL: "IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}",
                IR: "IR[0-9]{2}[0-9]{22}",
                IS: "IS[0-9]{2}[0-9]{4}[0-9]{2}[0-9]{6}[0-9]{10}",
                IT: "IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",
                JO: "JO[0-9]{2}[A-Z]{4}[0-9]{4}[0]{8}[A-Z0-9]{10}",
                KW: "KW[0-9]{2}[A-Z]{4}[0-9]{22}",
                KZ: "KZ[0-9]{2}[0-9]{3}[A-Z0-9]{13}",
                LB: "LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}",
                LI: "LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}",
                LT: "LT[0-9]{2}[0-9]{5}[0-9]{11}",
                LU: "LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}",
                LV: "LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}",
                MC: "MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",
                MD: "MD[0-9]{2}[A-Z0-9]{20}",
                ME: "ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",
                MG: "MG[0-9]{2}[0-9]{23}",
                MK: "MK[0-9]{2}[0-9]{3}[A-Z0-9]{10}[0-9]{2}",
                ML: "ML[0-9]{2}[A-Z]{1}[0-9]{23}",
                MR: "MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}",
                MT: "MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}",
                MU: "MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{3}",
                MZ: "MZ[0-9]{2}[0-9]{21}",
                NL: "NL[0-9]{2}[A-Z]{4}[0-9]{10}",
                NO: "NO[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{1}",
                PK: "PK[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",
                PL: "PL[0-9]{2}[0-9]{8}[0-9]{16}",
                PS: "PS[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",
                PT: "PT[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{11}[0-9]{2}",
                QA: "QA[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",
                RO: "RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",
                RS: "RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",
                SA: "SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}",
                SE: "SE[0-9]{2}[0-9]{3}[0-9]{16}[0-9]{1}",
                SI: "SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}",
                SK: "SK[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{10}",
                SM: "SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",
                SN: "SN[0-9]{2}[A-Z]{1}[0-9]{23}",
                TN: "TN59[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",
                TR: "TR[0-9]{2}[0-9]{5}[A-Z0-9]{1}[A-Z0-9]{16}",
                VG: "VG[0-9]{2}[A-Z]{4}[0-9]{16}"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "iban");
                if ("" === e) return !0;
                e = e.replace(/[^a-zA-Z0-9]/g, "").toUpperCase();
                var f = d.country;
                f ? "string" == typeof f && this.REGEX[f] || (f = b.getDynamicOption(c, f)) : f = e.substr(0, 2);
                var g = b.getLocale();
                if (!this.REGEX[f]) return !0;
                if (!new RegExp("^" + this.REGEX[f] + "$").test(e)) return {
                    valid: !1,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[g].iban.country, FormValidation.I18n[g].iban.countries[f])
                };
                e = e.substr(4) + e.substr(0, 4), e = a.map(e.split(""), function(a) {
                    var b = a.charCodeAt(0);
                    return b >= "A".charCodeAt(0) && b <= "Z".charCodeAt(0) ? b - "A".charCodeAt(0) + 10 : a
                }), e = e.join("");
                for (var h = parseInt(e.substr(0, 1), 10), i = e.length, j = 1; i > j; ++j) h = (10 * h + parseInt(e.substr(j, 1), 10)) % 97;
                return {
                    valid: 1 === h,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[g].iban.country, FormValidation.I18n[g].iban.countries[f])
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                id: {
                    "default": "Please enter a valid identification number",
                    country: "Please enter a valid identification number in %s",
                    countries: {
                        BA: "Bosnia and Herzegovina",
                        BG: "Bulgaria",
                        BR: "Brazil",
                        CH: "Switzerland",
                        CL: "Chile",
                        CN: "China",
                        CZ: "Czech Republic",
                        DK: "Denmark",
                        EE: "Estonia",
                        ES: "Spain",
                        FI: "Finland",
                        HR: "Croatia",
                        IE: "Ireland",
                        IS: "Iceland",
                        LT: "Lithuania",
                        LV: "Latvia",
                        ME: "Montenegro",
                        MK: "Macedonia",
                        NL: "Netherlands",
                        RO: "Romania",
                        RS: "Serbia",
                        SE: "Sweden",
                        SI: "Slovenia",
                        SK: "Slovakia",
                        SM: "San Marino",
                        TH: "Thailand",
                        ZA: "South Africa"
                    }
                }
            }
        }), FormValidation.Validator.id = {
            html5Attributes: {
                message: "message",
                country: "country"
            },
            COUNTRY_CODES: ["BA", "BG", "BR", "CH", "CL", "CN", "CZ", "DK", "EE", "ES", "FI", "HR", "IE", "IS", "LT", "LV", "ME", "MK", "NL", "RO", "RS", "SE", "SI", "SK", "SM", "TH", "ZA"],
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "id");
                if ("" === e) return !0;
                var f = b.getLocale(),
                    g = d.country;
                if (g ? ("string" != typeof g || -1 === a.inArray(g.toUpperCase(), this.COUNTRY_CODES)) && (g = b.getDynamicOption(c, g)) : g = e.substr(0, 2), -1 === a.inArray(g, this.COUNTRY_CODES)) return !0;
                var h = ["_", g.toLowerCase()].join("");
                return this[h](e) ? !0 : {
                    valid: !1,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].id.country, FormValidation.I18n[f].id.countries[g.toUpperCase()])
                }
            },
            _validateJMBG: function(a, b) {
                if (!/^\d{13}$/.test(a)) return !1;
                var c = parseInt(a.substr(0, 2), 10),
                    d = parseInt(a.substr(2, 2), 10),
                    e = (parseInt(a.substr(4, 3), 10), parseInt(a.substr(7, 2), 10)),
                    f = parseInt(a.substr(12, 1), 10);
                if (c > 31 || d > 12) return !1;
                for (var g = 0, h = 0; 6 > h; h++) g += (7 - h) * (parseInt(a.charAt(h), 10) + parseInt(a.charAt(h + 6), 10));
                if (g = 11 - g % 11, (10 === g || 11 === g) && (g = 0), g !== f) return !1;
                switch (b.toUpperCase()) {
                    case "BA":
                        return e >= 10 && 19 >= e;
                    case "MK":
                        return e >= 41 && 49 >= e;
                    case "ME":
                        return e >= 20 && 29 >= e;
                    case "RS":
                        return e >= 70 && 99 >= e;
                    case "SI":
                        return e >= 50 && 59 >= e;
                    default:
                        return !0
                }
            },
            _ba: function(a) {
                return this._validateJMBG(a, "BA")
            },
            _mk: function(a) {
                return this._validateJMBG(a, "MK")
            },
            _me: function(a) {
                return this._validateJMBG(a, "ME")
            },
            _rs: function(a) {
                return this._validateJMBG(a, "RS")
            },
            _si: function(a) {
                return this._validateJMBG(a, "SI")
            },
            _bg: function(a) {
                if (!/^\d{10}$/.test(a) && !/^\d{6}\s\d{3}\s\d{1}$/.test(a)) return !1;
                a = a.replace(/\s/g, "");
                var b = parseInt(a.substr(0, 2), 10) + 1900,
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10);
                if (c > 40 ? (b += 100, c -= 40) : c > 20 && (b -= 100, c -= 20), !FormValidation.Helper.date(b, c, d)) return !1;
                for (var e = 0, f = [2, 4, 8, 5, 10, 9, 7, 3, 6], g = 0; 9 > g; g++) e += parseInt(a.charAt(g), 10) * f[g];
                return e = e % 11 % 10, e + "" === a.substr(9, 1)
            },
            _br: function(a) {
                if (a = a.replace(/\D/g, ""), /^1{11}|2{11}|3{11}|4{11}|5{11}|6{11}|7{11}|8{11}|9{11}|0{11}$/.test(a)) return !1;
                for (var b = 0, c = 0; 9 > c; c++) b += (10 - c) * parseInt(a.charAt(c), 10);
                if (b = 11 - b % 11, (10 === b || 11 === b) && (b = 0), b + "" !== a.charAt(9)) return !1;
                var d = 0;
                for (c = 0; 10 > c; c++) d += (11 - c) * parseInt(a.charAt(c), 10);
                return d = 11 - d % 11, (10 === d || 11 === d) && (d = 0), d + "" === a.charAt(10)
            },
            _ch: function(a) {
                if (!/^756[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{2}$/.test(a)) return !1;
                a = a.replace(/\D/g, "").substr(3);
                for (var b = a.length, c = 0, d = 8 === b ? [3, 1] : [1, 3], e = 0; b - 1 > e; e++) c += parseInt(a.charAt(e), 10) * d[e % 2];
                return c = 10 - c % 10, c + "" === a.charAt(b - 1)
            },
            _cl: function(a) {
                if (!/^\d{7,8}[-]{0,1}[0-9K]$/i.test(a)) return !1;
                for (a = a.replace(/\-/g, ""); a.length < 9;) a = "0" + a;
                for (var b = 0, c = [3, 2, 7, 6, 5, 4, 3, 2], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b = 11 - b % 11, 11 === b ? b = 0 : 10 === b && (b = "K"), b + "" === a.charAt(8).toUpperCase()
            },
            _cn: function(b) {
                if (b = b.trim(), !/^\d{15}$/.test(b) && !/^\d{17}[\dXx]{1}$/.test(b)) return !1;
                var c = {
                        11: {
                            0: [0],
                            1: [
                                [0, 9],
                                [11, 17]
                            ],
                            2: [0, 28, 29]
                        },
                        12: {
                            0: [0],
                            1: [
                                [0, 16]
                            ],
                            2: [0, 21, 23, 25]
                        },
                        13: {
                            0: [0],
                            1: [
                                [0, 5], 7, 8, 21, [23, 33],
                                [81, 85]
                            ],
                            2: [
                                [0, 5],
                                [7, 9],
                                [23, 25], 27, 29, 30, 81, 83
                            ],
                            3: [
                                [0, 4],
                                [21, 24]
                            ],
                            4: [
                                [0, 4], 6, 21, [23, 35], 81
                            ],
                            5: [
                                [0, 3],
                                [21, 35], 81, 82
                            ],
                            6: [
                                [0, 4],
                                [21, 38],
                                [81, 84]
                            ],
                            7: [
                                [0, 3], 5, 6, [21, 33]
                            ],
                            8: [
                                [0, 4],
                                [21, 28]
                            ],
                            9: [
                                [0, 3],
                                [21, 30],
                                [81, 84]
                            ],
                            10: [
                                [0, 3],
                                [22, 26], 28, 81, 82
                            ],
                            11: [
                                [0, 2],
                                [21, 28], 81, 82
                            ]
                        },
                        14: {
                            0: [0],
                            1: [0, 1, [5, 10],
                                [21, 23], 81
                            ],
                            2: [
                                [0, 3], 11, 12, [21, 27]
                            ],
                            3: [
                                [0, 3], 11, 21, 22
                            ],
                            4: [
                                [0, 2], 11, 21, [23, 31], 81
                            ],
                            5: [
                                [0, 2], 21, 22, 24, 25, 81
                            ],
                            6: [
                                [0, 3],
                                [21, 24]
                            ],
                            7: [
                                [0, 2],
                                [21, 29], 81
                            ],
                            8: [
                                [0, 2],
                                [21, 30], 81, 82
                            ],
                            9: [
                                [0, 2],
                                [21, 32], 81
                            ],
                            10: [
                                [0, 2],
                                [21, 34], 81, 82
                            ],
                            11: [
                                [0, 2],
                                [21, 30], 81, 82
                            ],
                            23: [
                                [0, 3], 22, 23, [25, 30], 32, 33
                            ]
                        },
                        15: {
                            0: [0],
                            1: [
                                [0, 5],
                                [21, 25]
                            ],
                            2: [
                                [0, 7],
                                [21, 23]
                            ],
                            3: [
                                [0, 4]
                            ],
                            4: [
                                [0, 4],
                                [21, 26],
                                [28, 30]
                            ],
                            5: [
                                [0, 2],
                                [21, 26], 81
                            ],
                            6: [
                                [0, 2],
                                [21, 27]
                            ],
                            7: [
                                [0, 3],
                                [21, 27],
                                [81, 85]
                            ],
                            8: [
                                [0, 2],
                                [21, 26]
                            ],
                            9: [
                                [0, 2],
                                [21, 29], 81
                            ],
                            22: [
                                [0, 2],
                                [21, 24]
                            ],
                            25: [
                                [0, 2],
                                [22, 31]
                            ],
                            26: [
                                [0, 2],
                                [24, 27],
                                [29, 32], 34
                            ],
                            28: [0, 1, [22, 27]],
                            29: [0, [21, 23]]
                        },
                        21: {
                            0: [0],
                            1: [
                                [0, 6],
                                [11, 14],
                                [22, 24], 81
                            ],
                            2: [
                                [0, 4],
                                [11, 13], 24, [81, 83]
                            ],
                            3: [
                                [0, 4], 11, 21, 23, 81
                            ],
                            4: [
                                [0, 4], 11, [21, 23]
                            ],
                            5: [
                                [0, 5], 21, 22
                            ],
                            6: [
                                [0, 4], 24, 81, 82
                            ],
                            7: [
                                [0, 3], 11, 26, 27, 81, 82
                            ],
                            8: [
                                [0, 4], 11, 81, 82
                            ],
                            9: [
                                [0, 5], 11, 21, 22
                            ],
                            10: [
                                [0, 5], 11, 21, 81
                            ],
                            11: [
                                [0, 3], 21, 22
                            ],
                            12: [
                                [0, 2], 4, 21, 23, 24, 81, 82
                            ],
                            13: [
                                [0, 3], 21, 22, 24, 81, 82
                            ],
                            14: [
                                [0, 4], 21, 22, 81
                            ]
                        },
                        22: {
                            0: [0],
                            1: [
                                [0, 6], 12, 22, [81, 83]
                            ],
                            2: [
                                [0, 4], 11, 21, [81, 84]
                            ],
                            3: [
                                [0, 3], 22, 23, 81, 82
                            ],
                            4: [
                                [0, 3], 21, 22
                            ],
                            5: [
                                [0, 3], 21, 23, 24, 81, 82
                            ],
                            6: [
                                [0, 2], 4, 5, [21, 23], 25, 81
                            ],
                            7: [
                                [0, 2],
                                [21, 24], 81
                            ],
                            8: [
                                [0, 2], 21, 22, 81, 82
                            ],
                            24: [
                                [0, 6], 24, 26
                            ]
                        },
                        23: {
                            0: [0],
                            1: [
                                [0, 12], 21, [23, 29],
                                [81, 84]
                            ],
                            2: [
                                [0, 8], 21, [23, 25], 27, [29, 31], 81
                            ],
                            3: [
                                [0, 7], 21, 81, 82
                            ],
                            4: [
                                [0, 7], 21, 22
                            ],
                            5: [
                                [0, 3], 5, 6, [21, 24]
                            ],
                            6: [
                                [0, 6],
                                [21, 24]
                            ],
                            7: [
                                [0, 16], 22, 81
                            ],
                            8: [
                                [0, 5], 11, 22, 26, 28, 33, 81, 82
                            ],
                            9: [
                                [0, 4], 21
                            ],
                            10: [
                                [0, 5], 24, 25, 81, [83, 85]
                            ],
                            11: [
                                [0, 2], 21, 23, 24, 81, 82
                            ],
                            12: [
                                [0, 2],
                                [21, 26],
                                [81, 83]
                            ],
                            27: [
                                [0, 4],
                                [21, 23]
                            ]
                        },
                        31: {
                            0: [0],
                            1: [0, 1, [3, 10],
                                [12, 20]
                            ],
                            2: [0, 30]
                        },
                        32: {
                            0: [0],
                            1: [
                                [0, 7], 11, [13, 18], 24, 25
                            ],
                            2: [
                                [0, 6], 11, 81, 82
                            ],
                            3: [
                                [0, 5], 11, 12, [21, 24], 81, 82
                            ],
                            4: [
                                [0, 2], 4, 5, 11, 12, 81, 82
                            ],
                            5: [
                                [0, 9],
                                [81, 85]
                            ],
                            6: [
                                [0, 2], 11, 12, 21, 23, [81, 84]
                            ],
                            7: [0, 1, 3, 5, 6, [21, 24]],
                            8: [
                                [0, 4], 11, 26, [29, 31]
                            ],
                            9: [
                                [0, 3],
                                [21, 25], 28, 81, 82
                            ],
                            10: [
                                [0, 3], 11, 12, 23, 81, 84, 88
                            ],
                            11: [
                                [0, 2], 11, 12, [81, 83]
                            ],
                            12: [
                                [0, 4],
                                [81, 84]
                            ],
                            13: [
                                [0, 2], 11, [21, 24]
                            ]
                        },
                        33: {
                            0: [0],
                            1: [
                                [0, 6],
                                [8, 10], 22, 27, 82, 83, 85
                            ],
                            2: [0, 1, [3, 6], 11, 12, 25, 26, [81, 83]],
                            3: [
                                [0, 4], 22, 24, [26, 29], 81, 82
                            ],
                            4: [
                                [0, 2], 11, 21, 24, [81, 83]
                            ],
                            5: [
                                [0, 3],
                                [21, 23]
                            ],
                            6: [
                                [0, 2], 21, 24, [81, 83]
                            ],
                            7: [
                                [0, 3], 23, 26, 27, [81, 84]
                            ],
                            8: [
                                [0, 3], 22, 24, 25, 81
                            ],
                            9: [
                                [0, 3], 21, 22
                            ],
                            10: [
                                [0, 4],
                                [21, 24], 81, 82
                            ],
                            11: [
                                [0, 2],
                                [21, 27], 81
                            ]
                        },
                        34: {
                            0: [0],
                            1: [
                                [0, 4], 11, [21, 24], 81
                            ],
                            2: [
                                [0, 4], 7, 8, [21, 23], 25
                            ],
                            3: [
                                [0, 4], 11, [21, 23]
                            ],
                            4: [
                                [0, 6], 21
                            ],
                            5: [
                                [0, 4], 6, [21, 23]
                            ],
                            6: [
                                [0, 4], 21
                            ],
                            7: [
                                [0, 3], 11, 21
                            ],
                            8: [
                                [0, 3], 11, [22, 28], 81
                            ],
                            10: [
                                [0, 4],
                                [21, 24]
                            ],
                            11: [
                                [0, 3], 22, [24, 26], 81, 82
                            ],
                            12: [
                                [0, 4], 21, 22, 25, 26, 82
                            ],
                            13: [
                                [0, 2],
                                [21, 24]
                            ],
                            14: [
                                [0, 2],
                                [21, 24]
                            ],
                            15: [
                                [0, 3],
                                [21, 25]
                            ],
                            16: [
                                [0, 2],
                                [21, 23]
                            ],
                            17: [
                                [0, 2],
                                [21, 23]
                            ],
                            18: [
                                [0, 2],
                                [21, 25], 81
                            ]
                        },
                        35: {
                            0: [0],
                            1: [
                                [0, 5], 11, [21, 25], 28, 81, 82
                            ],
                            2: [
                                [0, 6],
                                [11, 13]
                            ],
                            3: [
                                [0, 5], 22
                            ],
                            4: [
                                [0, 3], 21, [23, 30], 81
                            ],
                            5: [
                                [0, 5], 21, [24, 27],
                                [81, 83]
                            ],
                            6: [
                                [0, 3],
                                [22, 29], 81
                            ],
                            7: [
                                [0, 2],
                                [21, 25],
                                [81, 84]
                            ],
                            8: [
                                [0, 2],
                                [21, 25], 81
                            ],
                            9: [
                                [0, 2],
                                [21, 26], 81, 82
                            ]
                        },
                        36: {
                            0: [0],
                            1: [
                                [0, 5], 11, [21, 24]
                            ],
                            2: [
                                [0, 3], 22, 81
                            ],
                            3: [
                                [0, 2], 13, [21, 23]
                            ],
                            4: [
                                [0, 3], 21, [23, 30], 81, 82
                            ],
                            5: [
                                [0, 2], 21
                            ],
                            6: [
                                [0, 2], 22, 81
                            ],
                            7: [
                                [0, 2],
                                [21, 35], 81, 82
                            ],
                            8: [
                                [0, 3],
                                [21, 30], 81
                            ],
                            9: [
                                [0, 2],
                                [21, 26],
                                [81, 83]
                            ],
                            10: [
                                [0, 2],
                                [21, 30]
                            ],
                            11: [
                                [0, 2],
                                [21, 30], 81
                            ]
                        },
                        37: {
                            0: [0],
                            1: [
                                [0, 5], 12, 13, [24, 26], 81
                            ],
                            2: [
                                [0, 3], 5, [11, 14],
                                [81, 85]
                            ],
                            3: [
                                [0, 6],
                                [21, 23]
                            ],
                            4: [
                                [0, 6], 81
                            ],
                            5: [
                                [0, 3],
                                [21, 23]
                            ],
                            6: [
                                [0, 2],
                                [11, 13], 34, [81, 87]
                            ],
                            7: [
                                [0, 5], 24, 25, [81, 86]
                            ],
                            8: [
                                [0, 2], 11, [26, 32],
                                [81, 83]
                            ],
                            9: [
                                [0, 3], 11, 21, 23, 82, 83
                            ],
                            10: [
                                [0, 2],
                                [81, 83]
                            ],
                            11: [
                                [0, 3], 21, 22
                            ],
                            12: [
                                [0, 3]
                            ],
                            13: [
                                [0, 2], 11, 12, [21, 29]
                            ],
                            14: [
                                [0, 2],
                                [21, 28], 81, 82
                            ],
                            15: [
                                [0, 2],
                                [21, 26], 81
                            ],
                            16: [
                                [0, 2],
                                [21, 26]
                            ],
                            17: [
                                [0, 2],
                                [21, 28]
                            ]
                        },
                        41: {
                            0: [0],
                            1: [
                                [0, 6], 8, 22, [81, 85]
                            ],
                            2: [
                                [0, 5], 11, [21, 25]
                            ],
                            3: [
                                [0, 7], 11, [22, 29], 81
                            ],
                            4: [
                                [0, 4], 11, [21, 23], 25, 81, 82
                            ],
                            5: [
                                [0, 3], 5, 6, 22, 23, 26, 27, 81
                            ],
                            6: [
                                [0, 3], 11, 21, 22
                            ],
                            7: [
                                [0, 4], 11, 21, [24, 28], 81, 82
                            ],
                            8: [
                                [0, 4], 11, [21, 23], 25, [81, 83]
                            ],
                            9: [
                                [0, 2], 22, 23, [26, 28]
                            ],
                            10: [
                                [0, 2],
                                [23, 25], 81, 82
                            ],
                            11: [
                                [0, 4],
                                [21, 23]
                            ],
                            12: [
                                [0, 2], 21, 22, 24, 81, 82
                            ],
                            13: [
                                [0, 3],
                                [21, 30], 81
                            ],
                            14: [
                                [0, 3],
                                [21, 26], 81
                            ],
                            15: [
                                [0, 3],
                                [21, 28]
                            ],
                            16: [
                                [0, 2],
                                [21, 28], 81
                            ],
                            17: [
                                [0, 2],
                                [21, 29]
                            ],
                            90: [0, 1]
                        },
                        42: {
                            0: [0],
                            1: [
                                [0, 7],
                                [11, 17]
                            ],
                            2: [
                                [0, 5], 22, 81
                            ],
                            3: [
                                [0, 3],
                                [21, 25], 81
                            ],
                            5: [
                                [0, 6],
                                [25, 29],
                                [81, 83]
                            ],
                            6: [
                                [0, 2], 6, 7, [24, 26],
                                [82, 84]
                            ],
                            7: [
                                [0, 4]
                            ],
                            8: [
                                [0, 2], 4, 21, 22, 81
                            ],
                            9: [
                                [0, 2],
                                [21, 23], 81, 82, 84
                            ],
                            10: [
                                [0, 3],
                                [22, 24], 81, 83, 87
                            ],
                            11: [
                                [0, 2],
                                [21, 27], 81, 82
                            ],
                            12: [
                                [0, 2],
                                [21, 24], 81
                            ],
                            13: [
                                [0, 3], 21, 81
                            ],
                            28: [
                                [0, 2], 22, 23, [25, 28]
                            ],
                            90: [0, [4, 6], 21]
                        },
                        43: {
                            0: [0],
                            1: [
                                [0, 5], 11, 12, 21, 22, 24, 81
                            ],
                            2: [
                                [0, 4], 11, 21, [23, 25], 81
                            ],
                            3: [
                                [0, 2], 4, 21, 81, 82
                            ],
                            4: [0, 1, [5, 8], 12, [21, 24], 26, 81, 82],
                            5: [
                                [0, 3], 11, [21, 25],
                                [27, 29], 81
                            ],
                            6: [
                                [0, 3], 11, 21, 23, 24, 26, 81, 82
                            ],
                            7: [
                                [0, 3],
                                [21, 26], 81
                            ],
                            8: [
                                [0, 2], 11, 21, 22
                            ],
                            9: [
                                [0, 3],
                                [21, 23], 81
                            ],
                            10: [
                                [0, 3],
                                [21, 28], 81
                            ],
                            11: [
                                [0, 3],
                                [21, 29]
                            ],
                            12: [
                                [0, 2],
                                [21, 30], 81
                            ],
                            13: [
                                [0, 2], 21, 22, 81, 82
                            ],
                            31: [0, 1, [22, 27], 30]
                        },
                        44: {
                            0: [0],
                            1: [
                                [0, 7],
                                [11, 16], 83, 84
                            ],
                            2: [
                                [0, 5], 21, 22, 24, 29, 32, 33, 81, 82
                            ],
                            3: [0, 1, [3, 8]],
                            4: [
                                [0, 4]
                            ],
                            5: [0, 1, [6, 15], 23, 82, 83],
                            6: [0, 1, [4, 8]],
                            7: [0, 1, [3, 5], 81, [83, 85]],
                            8: [
                                [0, 4], 11, 23, 25, [81, 83]
                            ],
                            9: [
                                [0, 3], 23, [81, 83]
                            ],
                            12: [
                                [0, 3],
                                [23, 26], 83, 84
                            ],
                            13: [
                                [0, 3],
                                [22, 24], 81
                            ],
                            14: [
                                [0, 2],
                                [21, 24], 26, 27, 81
                            ],
                            15: [
                                [0, 2], 21, 23, 81
                            ],
                            16: [
                                [0, 2],
                                [21, 25]
                            ],
                            17: [
                                [0, 2], 21, 23, 81
                            ],
                            18: [
                                [0, 3], 21, 23, [25, 27], 81, 82
                            ],
                            19: [0],
                            20: [0],
                            51: [
                                [0, 3], 21, 22
                            ],
                            52: [
                                [0, 3], 21, 22, 24, 81
                            ],
                            53: [
                                [0, 2],
                                [21, 23], 81
                            ]
                        },
                        45: {
                            0: [0],
                            1: [
                                [0, 9],
                                [21, 27]
                            ],
                            2: [
                                [0, 5],
                                [21, 26]
                            ],
                            3: [
                                [0, 5], 11, 12, [21, 32]
                            ],
                            4: [0, 1, [3, 6], 11, [21, 23], 81],
                            5: [
                                [0, 3], 12, 21
                            ],
                            6: [
                                [0, 3], 21, 81
                            ],
                            7: [
                                [0, 3], 21, 22
                            ],
                            8: [
                                [0, 4], 21, 81
                            ],
                            9: [
                                [0, 3],
                                [21, 24], 81
                            ],
                            10: [
                                [0, 2],
                                [21, 31]
                            ],
                            11: [
                                [0, 2],
                                [21, 23]
                            ],
                            12: [
                                [0, 2],
                                [21, 29], 81
                            ],
                            13: [
                                [0, 2],
                                [21, 24], 81
                            ],
                            14: [
                                [0, 2],
                                [21, 25], 81
                            ]
                        },
                        46: {
                            0: [0],
                            1: [0, 1, [5, 8]],
                            2: [0, 1],
                            3: [0, [21, 23]],
                            90: [
                                [0, 3],
                                [5, 7],
                                [21, 39]
                            ]
                        },
                        50: {
                            0: [0],
                            1: [
                                [0, 19]
                            ],
                            2: [0, [22, 38],
                                [40, 43]
                            ],
                            3: [0, [81, 84]]
                        },
                        51: {
                            0: [0],
                            1: [0, 1, [4, 8],
                                [12, 15],
                                [21, 24], 29, 31, 32, [81, 84]
                            ],
                            3: [
                                [0, 4], 11, 21, 22
                            ],
                            4: [
                                [0, 3], 11, 21, 22
                            ],
                            5: [
                                [0, 4], 21, 22, 24, 25
                            ],
                            6: [0, 1, 3, 23, 26, [81, 83]],
                            7: [0, 1, 3, 4, [22, 27], 81],
                            8: [
                                [0, 2], 11, 12, [21, 24]
                            ],
                            9: [
                                [0, 4],
                                [21, 23]
                            ],
                            10: [
                                [0, 2], 11, 24, 25, 28
                            ],
                            11: [
                                [0, 2],
                                [11, 13], 23, 24, 26, 29, 32, 33, 81
                            ],
                            13: [
                                [0, 4],
                                [21, 25], 81
                            ],
                            14: [
                                [0, 2],
                                [21, 25]
                            ],
                            15: [
                                [0, 3],
                                [21, 29]
                            ],
                            16: [
                                [0, 3],
                                [21, 23], 81
                            ],
                            17: [
                                [0, 3],
                                [21, 25], 81
                            ],
                            18: [
                                [0, 3],
                                [21, 27]
                            ],
                            19: [
                                [0, 3],
                                [21, 23]
                            ],
                            20: [
                                [0, 2], 21, 22, 81
                            ],
                            32: [0, [21, 33]],
                            33: [0, [21, 38]],
                            34: [0, 1, [22, 37]]
                        },
                        52: {
                            0: [0],
                            1: [
                                [0, 3],
                                [11, 15],
                                [21, 23], 81
                            ],
                            2: [0, 1, 3, 21, 22],
                            3: [
                                [0, 3],
                                [21, 30], 81, 82
                            ],
                            4: [
                                [0, 2],
                                [21, 25]
                            ],
                            5: [
                                [0, 2],
                                [21, 27]
                            ],
                            6: [
                                [0, 3],
                                [21, 28]
                            ],
                            22: [0, 1, [22, 30]],
                            23: [0, 1, [22, 28]],
                            24: [0, 1, [22, 28]],
                            26: [0, 1, [22, 36]],
                            27: [
                                [0, 2], 22, 23, [25, 32]
                            ]
                        },
                        53: {
                            0: [0],
                            1: [
                                [0, 3],
                                [11, 14], 21, 22, [24, 29], 81
                            ],
                            3: [
                                [0, 2],
                                [21, 26], 28, 81
                            ],
                            4: [
                                [0, 2],
                                [21, 28]
                            ],
                            5: [
                                [0, 2],
                                [21, 24]
                            ],
                            6: [
                                [0, 2],
                                [21, 30]
                            ],
                            7: [
                                [0, 2],
                                [21, 24]
                            ],
                            8: [
                                [0, 2],
                                [21, 29]
                            ],
                            9: [
                                [0, 2],
                                [21, 27]
                            ],
                            23: [0, 1, [22, 29], 31],
                            25: [
                                [0, 4],
                                [22, 32]
                            ],
                            26: [0, 1, [21, 28]],
                            27: [0, 1, [22, 30]],
                            28: [0, 1, 22, 23],
                            29: [0, 1, [22, 32]],
                            31: [0, 2, 3, [22, 24]],
                            34: [0, [21, 23]],
                            33: [0, 21, [23, 25]],
                            35: [0, [21, 28]]
                        },
                        54: {
                            0: [0],
                            1: [
                                [0, 2],
                                [21, 27]
                            ],
                            21: [0, [21, 29], 32, 33],
                            22: [0, [21, 29],
                                [31, 33]
                            ],
                            23: [0, 1, [22, 38]],
                            24: [0, [21, 31]],
                            25: [0, [21, 27]],
                            26: [0, [21, 27]]
                        },
                        61: {
                            0: [0],
                            1: [
                                [0, 4],
                                [11, 16], 22, [24, 26]
                            ],
                            2: [
                                [0, 4], 22
                            ],
                            3: [
                                [0, 4],
                                [21, 24],
                                [26, 31]
                            ],
                            4: [
                                [0, 4],
                                [22, 31], 81
                            ],
                            5: [
                                [0, 2],
                                [21, 28], 81, 82
                            ],
                            6: [
                                [0, 2],
                                [21, 32]
                            ],
                            7: [
                                [0, 2],
                                [21, 30]
                            ],
                            8: [
                                [0, 2],
                                [21, 31]
                            ],
                            9: [
                                [0, 2],
                                [21, 29]
                            ],
                            10: [
                                [0, 2],
                                [21, 26]
                            ]
                        },
                        62: {
                            0: [0],
                            1: [
                                [0, 5], 11, [21, 23]
                            ],
                            2: [0, 1],
                            3: [
                                [0, 2], 21
                            ],
                            4: [
                                [0, 3],
                                [21, 23]
                            ],
                            5: [
                                [0, 3],
                                [21, 25]
                            ],
                            6: [
                                [0, 2],
                                [21, 23]
                            ],
                            7: [
                                [0, 2],
                                [21, 25]
                            ],
                            8: [
                                [0, 2],
                                [21, 26]
                            ],
                            9: [
                                [0, 2],
                                [21, 24], 81, 82
                            ],
                            10: [
                                [0, 2],
                                [21, 27]
                            ],
                            11: [
                                [0, 2],
                                [21, 26]
                            ],
                            12: [
                                [0, 2],
                                [21, 28]
                            ],
                            24: [0, 21, [24, 29]],
                            26: [0, 21, [23, 30]],
                            29: [0, 1, [21, 27]],
                            30: [0, 1, [21, 27]]
                        },
                        63: {
                            0: [0],
                            1: [
                                [0, 5],
                                [21, 23]
                            ],
                            2: [0, 2, [21, 25]],
                            21: [0, [21, 23],
                                [26, 28]
                            ],
                            22: [0, [21, 24]],
                            23: [0, [21, 24]],
                            25: [0, [21, 25]],
                            26: [0, [21, 26]],
                            27: [0, 1, [21, 26]],
                            28: [
                                [0, 2],
                                [21, 23]
                            ]
                        },
                        64: {
                            0: [0],
                            1: [0, 1, [4, 6], 21, 22, 81],
                            2: [
                                [0, 3], 5, [21, 23]
                            ],
                            3: [
                                [0, 3],
                                [21, 24], 81
                            ],
                            4: [
                                [0, 2],
                                [21, 25]
                            ],
                            5: [
                                [0, 2], 21, 22
                            ]
                        },
                        65: {
                            0: [0],
                            1: [
                                [0, 9], 21
                            ],
                            2: [
                                [0, 5]
                            ],
                            21: [0, 1, 22, 23],
                            22: [0, 1, 22, 23],
                            23: [
                                [0, 3],
                                [23, 25], 27, 28
                            ],
                            28: [0, 1, [22, 29]],
                            29: [0, 1, [22, 29]],
                            30: [0, 1, [22, 24]],
                            31: [0, 1, [21, 31]],
                            32: [0, 1, [21, 27]],
                            40: [0, 2, 3, [21, 28]],
                            42: [
                                [0, 2], 21, [23, 26]
                            ],
                            43: [0, 1, [21, 26]],
                            90: [
                                [0, 4]
                            ],
                            27: [
                                [0, 2], 22, 23
                            ]
                        },
                        71: {
                            0: [0]
                        },
                        81: {
                            0: [0]
                        },
                        82: {
                            0: [0]
                        }
                    },
                    d = parseInt(b.substr(0, 2), 10),
                    e = parseInt(b.substr(2, 2), 10),
                    f = parseInt(b.substr(4, 2), 10);
                if (!c[d] || !c[d][e]) return !1;
                for (var g = !1, h = c[d][e], i = 0; i < h.length; i++)
                    if (a.isArray(h[i]) && h[i][0] <= f && f <= h[i][1] || !a.isArray(h[i]) && f === h[i]) {
                        g = !0;
                        break
                    } if (!g) return !1;
                var j;
                j = 18 === b.length ? b.substr(6, 8) : "19" + b.substr(6, 6);
                var k = parseInt(j.substr(0, 4), 10),
                    l = parseInt(j.substr(4, 2), 10),
                    m = parseInt(j.substr(6, 2), 10);
                if (!FormValidation.Helper.date(k, l, m)) return !1;
                if (18 === b.length) {
                    var n = 0,
                        o = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
                    for (i = 0; 17 > i; i++) n += parseInt(b.charAt(i), 10) * o[i];
                    n = (12 - n % 11) % 11;
                    var p = "X" !== b.charAt(17).toUpperCase() ? parseInt(b.charAt(17), 10) : 10;
                    return p === n
                }
                return !0
            },
            _cz: function(a) {
                if (!/^\d{9,10}$/.test(a)) return !1;
                var b = 1900 + parseInt(a.substr(0, 2), 10),
                    c = parseInt(a.substr(2, 2), 10) % 50 % 20,
                    d = parseInt(a.substr(4, 2), 10);
                if (9 === a.length) {
                    if (b >= 1980 && (b -= 100), b > 1953) return !1
                } else 1954 > b && (b += 100);
                if (!FormValidation.Helper.date(b, c, d)) return !1;
                if (10 === a.length) {
                    var e = parseInt(a.substr(0, 9), 10) % 11;
                    return 1985 > b && (e %= 10), e + "" === a.substr(9, 1)
                }
                return !0
            },
            _dk: function(a) {
                if (!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(a)) return !1;
                a = a.replace(/-/g, "");
                var b = parseInt(a.substr(0, 2), 10),
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10);
                switch (!0) {
                    case -1 !== "5678".indexOf(a.charAt(6)) && d >= 58:
                        d += 1800;
                        break;
                    case -1 !== "0123".indexOf(a.charAt(6)):
                    case -1 !== "49".indexOf(a.charAt(6)) && d >= 37:
                        d += 1900;
                        break;
                    default:
                        d += 2e3
                }
                return FormValidation.Helper.date(d, c, b)
            },
            _ee: function(a) {
                return this._lt(a)
            },
            _es: function(a) {
                var b = /^[0-9]{8}[-]{0,1}[A-HJ-NP-TV-Z]$/.test(a),
                    c = /^[XYZ][-]{0,1}[0-9]{7}[-]{0,1}[A-HJ-NP-TV-Z]$/.test(a),
                    d = /^[A-HNPQS][-]{0,1}[0-9]{7}[-]{0,1}[0-9A-J]$/.test(a);
                if (!b && !c && !d) return !1;
                a = a.replace(/-/g, "");
                var e;
                if (b || c) {
                    var f = "XYZ".indexOf(a.charAt(0));
                    return -1 !== f && (a = f + a.substr(1) + ""), e = parseInt(a.substr(0, 8), 10), e = "TRWAGMYFPDXBNJZSQVHLCKE" [e % 23], e === a.substr(8, 1)
                }
                e = a.substr(1, 7);
                for (var g = a[0], h = a.substr(-1), i = 0, j = 0; j < e.length; j++)
                    if (j % 2 !== 0) i += parseInt(e[j], 10);
                    else {
                        var k = "" + 2 * parseInt(e[j], 10);
                        i += parseInt(k[0], 10), 2 === k.length && (i += parseInt(k[1], 10))
                    } var l = i - 10 * Math.floor(i / 10);
                return 0 !== l && (l = 10 - l), -1 !== "KQS".indexOf(g) ? h === "JABCDEFGHI" [l] : -1 !== "ABEH".indexOf(g) ? h === "" + l : h === "" + l || h === "JABCDEFGHI" [l]
            },
            _fi: function(a) {
                if (!/^[0-9]{6}[-+A][0-9]{3}[0-9ABCDEFHJKLMNPRSTUVWXY]$/.test(a)) return !1;
                var b = parseInt(a.substr(0, 2), 10),
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10),
                    e = {
                        "+": 1800,
                        "-": 1900,
                        A: 2e3
                    };
                if (d = e[a.charAt(6)] + d, !FormValidation.Helper.date(d, c, b)) return !1;
                var f = parseInt(a.substr(7, 3), 10);
                if (2 > f) return !1;
                var g = a.substr(0, 6) + a.substr(7, 3) + "";
                return g = parseInt(g, 10), "0123456789ABCDEFHJKLMNPRSTUVWXY".charAt(g % 31) === a.charAt(10)
            },
            _hr: function(a) {
                return /^[0-9]{11}$/.test(a) ? FormValidation.Helper.mod11And10(a) : !1
            },
            _ie: function(a) {
                if (!/^\d{7}[A-W][AHWTX]?$/.test(a)) return !1;
                var b = function(a) {
                    for (; a.length < 7;) a = "0" + a;
                    for (var b = "WABCDEFGHIJKLMNOPQRSTUV", c = 0, d = 0; 7 > d; d++) c += parseInt(a.charAt(d), 10) * (8 - d);
                    return c += 9 * b.indexOf(a.substr(7)), b[c % 23]
                };
                return 9 !== a.length || "A" !== a.charAt(8) && "H" !== a.charAt(8) ? a.charAt(7) === b(a.substr(0, 7)) : a.charAt(7) === b(a.substr(0, 7) + a.substr(8) + "")
            },
            _is: function(a) {
                if (!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(a)) return !1;
                a = a.replace(/-/g, "");
                var b = parseInt(a.substr(0, 2), 10),
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10),
                    e = parseInt(a.charAt(9), 10);
                if (d = 9 === e ? 1900 + d : 100 * (20 + e) + d, !FormValidation.Helper.date(d, c, b, !0)) return !1;
                for (var f = 0, g = [3, 2, 7, 6, 5, 4, 3, 2], h = 0; 8 > h; h++) f += parseInt(a.charAt(h), 10) * g[h];
                return f = 11 - f % 11, f + "" === a.charAt(8)
            },
            _lt: function(a) {
                if (!/^[0-9]{11}$/.test(a)) return !1;
                var b = parseInt(a.charAt(0), 10),
                    c = parseInt(a.substr(1, 2), 10),
                    d = parseInt(a.substr(3, 2), 10),
                    e = parseInt(a.substr(5, 2), 10),
                    f = b % 2 === 0 ? 17 + b / 2 : 17 + (b + 1) / 2;
                if (c = 100 * f + c, !FormValidation.Helper.date(c, d, e, !0)) return !1;
                for (var g = 0, h = [1, 2, 3, 4, 5, 6, 7, 8, 9, 1], i = 0; 10 > i; i++) g += parseInt(a.charAt(i), 10) * h[i];
                if (g %= 11, 10 !== g) return g + "" === a.charAt(10);
                for (g = 0, h = [3, 4, 5, 6, 7, 8, 9, 1, 2, 3], i = 0; 10 > i; i++) g += parseInt(a.charAt(i), 10) * h[i];
                return g %= 11, 10 === g && (g = 0), g + "" === a.charAt(10)
            },
            _lv: function(a) {
                if (!/^[0-9]{6}[-]{0,1}[0-9]{5}$/.test(a)) return !1;
                a = a.replace(/\D/g, "");
                var b = parseInt(a.substr(0, 2), 10),
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10);
                if (d = d + 1800 + 100 * parseInt(a.charAt(6), 10), !FormValidation.Helper.date(d, c, b, !0)) return !1;
                for (var e = 0, f = [10, 5, 8, 4, 2, 1, 6, 3, 7, 9], g = 0; 10 > g; g++) e += parseInt(a.charAt(g), 10) * f[g];
                return e = (e + 1) % 11 % 10, e + "" === a.charAt(10)
            },
            _nl: function(a) {
                for (; a.length < 9;) a = "0" + a;
                if (!/^[0-9]{4}[.]{0,1}[0-9]{2}[.]{0,1}[0-9]{3}$/.test(a)) return !1;
                if (a = a.replace(/\./g, ""), 0 === parseInt(a, 10)) return !1;
                for (var b = 0, c = a.length, d = 0; c - 1 > d; d++) b += (9 - d) * parseInt(a.charAt(d), 10);
                return b %= 11, 10 === b && (b = 0), b + "" === a.charAt(c - 1)
            },
            _ro: function(a) {
                if (!/^[0-9]{13}$/.test(a)) return !1;
                var b = parseInt(a.charAt(0), 10);
                if (0 === b || 7 === b || 8 === b) return !1;
                var c = parseInt(a.substr(1, 2), 10),
                    d = parseInt(a.substr(3, 2), 10),
                    e = parseInt(a.substr(5, 2), 10),
                    f = {
                        1: 1900,
                        2: 1900,
                        3: 1800,
                        4: 1800,
                        5: 2e3,
                        6: 2e3
                    };
                if (e > 31 && d > 12) return !1;
                if (9 !== b && (c = f[b + ""] + c, !FormValidation.Helper.date(c, d, e))) return !1;
                for (var g = 0, h = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9], i = a.length, j = 0; i - 1 > j; j++) g += parseInt(a.charAt(j), 10) * h[j];
                return g %= 11, 10 === g && (g = 1), g + "" === a.charAt(i - 1)
            },
            _se: function(a) {
                if (!/^[0-9]{10}$/.test(a) && !/^[0-9]{6}[-|+][0-9]{4}$/.test(a)) return !1;
                a = a.replace(/[^0-9]/g, "");
                var b = parseInt(a.substr(0, 2), 10) + 1900,
                    c = parseInt(a.substr(2, 2), 10),
                    d = parseInt(a.substr(4, 2), 10);
                return FormValidation.Helper.date(b, c, d) ? FormValidation.Helper.luhn(a) : !1
            },
            _sk: function(a) {
                return this._cz(a)
            },
            _sm: function(a) {
                return /^\d{5}$/.test(a)
            },
            _th: function(a) {
                if (13 !== a.length) return !1;
                for (var b = 0, c = 0; 12 > c; c++) b += parseInt(a.charAt(c), 10) * (13 - c);
                return (11 - b % 11) % 10 === parseInt(a.charAt(12), 10)
            },
            _za: function(a) {
                if (!/^[0-9]{10}[0|1][8|9][0-9]$/.test(a)) return !1;
                var b = parseInt(a.substr(0, 2), 10),
                    c = (new Date).getFullYear() % 100,
                    d = parseInt(a.substr(2, 2), 10),
                    e = parseInt(a.substr(4, 2), 10);
                return b = b >= c ? b + 1900 : b + 2e3, FormValidation.Helper.date(b, d, e) ? FormValidation.Helper.luhn(a) : !1
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                identical: {
                    "default": "Please enter the same value"
                }
            }
        }), FormValidation.Validator.identical = {
            html5Attributes: {
                message: "message",
                field: "field"
            },
            init: function(a, b, c) {
                var d = a.getFieldElements(c.field);
                a.onLiveChange(d, "live_identical", function() {
                    var c = a.getStatus(b, "identical");
                    c !== a.STATUS_NOT_VALIDATED && a.revalidateField(b)
                })
            },
            destroy: function(a, b, c) {
                var d = a.getFieldElements(c.field);
                a.offLiveChange(d, "live_identical")
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "identical"),
                    e = a.getFieldElements(c.field);
                if (null === e || 0 === e.length) return !0;
                var f = a.getFieldValue(e, "identical");
                return d === f ? (a.updateStatus(e, a.STATUS_VALID, "identical"), !0) : !1
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                imei: {
                    "default": "Please enter a valid IMEI number"
                }
            }
        }), FormValidation.Validator.imei = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "imei");
                if ("" === c) return !0;
                switch (!0) {
                    case /^\d{15}$/.test(c):
                    case /^\d{2}-\d{6}-\d{6}-\d{1}$/.test(c):
                    case /^\d{2}\s\d{6}\s\d{6}\s\d{1}$/.test(c):
                        return c = c.replace(/[^0-9]/g, ""), FormValidation.Helper.luhn(c);
                    case /^\d{14}$/.test(c):
                    case /^\d{16}$/.test(c):
                    case /^\d{2}-\d{6}-\d{6}(|-\d{2})$/.test(c):
                    case /^\d{2}\s\d{6}\s\d{6}(|\s\d{2})$/.test(c):
                        return !0;
                    default:
                        return !1
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                imo: {
                    "default": "Please enter a valid IMO number"
                }
            }
        }), FormValidation.Validator.imo = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "imo");
                if ("" === c) return !0;
                if (!/^IMO \d{7}$/i.test(c)) return !1;
                for (var d = 0, e = c.replace(/^.*(\d{7})$/, "$1"), f = 6; f >= 1; f--) d += e.slice(6 - f, -f) * (f + 1);
                return d % 10 === parseInt(e.charAt(6), 10)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                integer: {
                    "default": "Please enter a valid number"
                }
            }
        }), FormValidation.Validator.integer = {
            enableByHtml5: function(a) {
                return "number" === a.attr("type") && (void 0 === a.attr("step") || a.attr("step") % 1 === 0)
            },
            validate: function(a, b) {
                if (this.enableByHtml5(b) && b.get(0).validity && b.get(0).validity.badInput === !0) return !1;
                var c = a.getFieldValue(b, "integer");
                return "" === c ? !0 : /^(?:-?(?:0|[1-9][0-9]*))$/.test(c)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                ip: {
                    "default": "Please enter a valid IP address",
                    ipv4: "Please enter a valid IPv4 address",
                    ipv6: "Please enter a valid IPv6 address"
                }
            }
        }), FormValidation.Validator.ip = {
            html5Attributes: {
                message: "message",
                ipv4: "ipv4",
                ipv6: "ipv6"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "ip");
                if ("" === e) return !0;
                d = a.extend({}, {
                    ipv4: !0,
                    ipv6: !0
                }, d);
                var f, g = b.getLocale(),
                    h = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,
                    i = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,
                    j = !1;
                switch (!0) {
                    case d.ipv4 && !d.ipv6:
                        j = h.test(e), f = d.message || FormValidation.I18n[g].ip.ipv4;
                        break;
                    case !d.ipv4 && d.ipv6:
                        j = i.test(e), f = d.message || FormValidation.I18n[g].ip.ipv6;
                        break;
                    case d.ipv4 && d.ipv6:
                    default:
                        j = h.test(e) || i.test(e), f = d.message || FormValidation.I18n[g].ip["default"]
                }
                return {
                    valid: j,
                    message: f
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                isbn: {
                    "default": "Please enter a valid ISBN number"
                }
            }
        }), FormValidation.Validator.isbn = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "isbn");
                if ("" === c) return !0;
                var d;
                switch (!0) {
                    case /^\d{9}[\dX]$/.test(c):
                    case 13 === c.length && /^(\d+)-(\d+)-(\d+)-([\dX])$/.test(c):
                    case 13 === c.length && /^(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(c):
                        d = "ISBN10";
                        break;
                    case /^(978|979)\d{9}[\dX]$/.test(c):
                    case 17 === c.length && /^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/.test(c):
                    case 17 === c.length && /^(978|979)\s(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(c):
                        d = "ISBN13";
                        break;
                    default:
                        return !1
                }
                c = c.replace(/[^0-9X]/gi, "");
                var e, f, g = c.split(""),
                    h = g.length,
                    i = 0;
                switch (d) {
                    case "ISBN10":
                        for (i = 0, e = 0; h - 1 > e; e++) i += parseInt(g[e], 10) * (10 - e);
                        return f = 11 - i % 11, 11 === f ? f = 0 : 10 === f && (f = "X"), f + "" === g[h - 1];
                    case "ISBN13":
                        for (i = 0, e = 0; h - 1 > e; e++) i += e % 2 === 0 ? parseInt(g[e], 10) : 3 * parseInt(g[e], 10);
                        return f = 10 - i % 10, 10 === f && (f = "0"), f + "" === g[h - 1];
                    default:
                        return !1
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                isin: {
                    "default": "Please enter a valid ISIN number"
                }
            }
        }), FormValidation.Validator.isin = {
            COUNTRY_CODES: "AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW",
            validate: function(a, b) {
                var c = a.getFieldValue(b, "isin");
                if ("" === c) return !0;
                c = c.toUpperCase();
                var d = new RegExp("^(" + this.COUNTRY_CODES + ")[0-9A-Z]{10}$");
                if (!d.test(c)) return !1;
                for (var e = "", f = c.length, g = 0; f - 1 > g; g++) {
                    var h = c.charCodeAt(g);
                    e += h > 57 ? (h - 55).toString() : c.charAt(g)
                }
                var i = "",
                    j = e.length,
                    k = j % 2 !== 0 ? 0 : 1;
                for (g = 0; j > g; g++) i += parseInt(e[g], 10) * (g % 2 === k ? 2 : 1) + "";
                var l = 0;
                for (g = 0; g < i.length; g++) l += parseInt(i.charAt(g), 10);
                return l = (10 - l % 10) % 10, l + "" === c.charAt(f - 1)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                ismn: {
                    "default": "Please enter a valid ISMN number"
                }
            }
        }), FormValidation.Validator.ismn = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "ismn");
                if ("" === c) return !0;
                var d;
                switch (!0) {
                    case /^M\d{9}$/.test(c):
                    case /^M-\d{4}-\d{4}-\d{1}$/.test(c):
                    case /^M\s\d{4}\s\d{4}\s\d{1}$/.test(c):
                        d = "ISMN10";
                        break;
                    case /^9790\d{9}$/.test(c):
                    case /^979-0-\d{4}-\d{4}-\d{1}$/.test(c):
                    case /^979\s0\s\d{4}\s\d{4}\s\d{1}$/.test(c):
                        d = "ISMN13";
                        break;
                    default:
                        return !1
                }
                "ISMN10" === d && (c = "9790" + c.substr(1)), c = c.replace(/[^0-9]/gi, "");
                for (var e = c.length, f = 0, g = [1, 3], h = 0; e - 1 > h; h++) f += parseInt(c.charAt(h), 10) * g[h % 2];
                return f = 10 - f % 10, f + "" === c.charAt(e - 1)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                issn: {
                    "default": "Please enter a valid ISSN number"
                }
            }
        }), FormValidation.Validator.issn = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "issn");
                if ("" === c) return !0;
                if (!/^\d{4}\-\d{3}[\dX]$/.test(c)) return !1;
                c = c.replace(/[^0-9X]/gi, "");
                var d = c.split(""),
                    e = d.length,
                    f = 0;
                "X" === d[7] && (d[7] = 10);
                for (var g = 0; e > g; g++) f += parseInt(d[g], 10) * (8 - g);
                return f % 11 === 0
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                lessThan: {
                    "default": "Please enter a value less than or equal to %s",
                    notInclusive: "Please enter a value less than %s"
                }
            }
        }), FormValidation.Validator.lessThan = {
            html5Attributes: {
                message: "message",
                value: "value",
                inclusive: "inclusive"
            },
            enableByHtml5: function(a) {
                var b = a.attr("type"),
                    c = a.attr("max");
                return c && "date" !== b ? {
                    value: c
                } : !1
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "lessThan");
                if ("" === e) return !0;
                if (e = this._format(e), !a.isNumeric(e)) return !1;
                var f = b.getLocale(),
                    g = a.isNumeric(d.value) ? d.value : b.getDynamicOption(c, d.value),
                    h = this._format(g);
                return e = parseFloat(e), d.inclusive === !0 || void 0 === d.inclusive ? {
                    valid: h >= e,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].lessThan["default"], g)
                } : {
                    valid: h > e,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].lessThan.notInclusive, g)
                }
            },
            _format: function(a) {
                return (a + "").replace(",", ".")
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                mac: {
                    "default": "Please enter a valid MAC address"
                }
            }
        }), FormValidation.Validator.mac = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "mac");
                return "" === c ? !0 : /^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(c)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                meid: {
                    "default": "Please enter a valid MEID number"
                }
            }
        }), FormValidation.Validator.meid = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "meid");
                if ("" === c) return !0;
                switch (!0) {
                    case /^[0-9A-F]{15}$/i.test(c):
                    case /^[0-9A-F]{2}[-][0-9A-F]{6}[-][0-9A-F]{6}[-][0-9A-F]$/i.test(c):
                    case /^\d{19}$/.test(c):
                    case /^\d{5}[-]\d{5}[-]\d{4}[-]\d{4}[-]\d$/.test(c):
                        var d = c.charAt(c.length - 1);
                        if (c = c.replace(/[- ]/g, ""), c.match(/^\d*$/i)) return FormValidation.Helper.luhn(c);
                        c = c.slice(0, -1);
                        for (var e = "", f = 1; 13 >= f; f += 2) e += (2 * parseInt(c.charAt(f), 16)).toString(16);
                        var g = 0;
                        for (f = 0; f < e.length; f++) g += parseInt(e.charAt(f), 16);
                        return g % 10 === 0 ? "0" === d : d === (2 * (10 * Math.floor((g + 10) / 10) - g)).toString(16);
                    case /^[0-9A-F]{14}$/i.test(c):
                    case /^[0-9A-F]{2}[-][0-9A-F]{6}[-][0-9A-F]{6}$/i.test(c):
                    case /^\d{18}$/.test(c):
                    case /^\d{5}[-]\d{5}[-]\d{4}[-]\d{4}$/.test(c):
                        return !0;
                    default:
                        return !1
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                notEmpty: {
                    "default": "Please enter a value"
                }
            }
        }), FormValidation.Validator.notEmpty = {
            enableByHtml5: function(a) {
                var b = a.attr("required") + "";
                return "required" === b || "true" === b
            },
            validate: function(b, c) {
                var d = c.attr("type");
                if ("radio" === d || "checkbox" === d) {
                    var e = b.getNamespace();
                    return b.getFieldElements(c.attr("data-" + e + "-field")).filter(":checked").length > 0
                }
                return "number" === d && c.get(0).validity && c.get(0).validity.badInput === !0 ? !0 : "" !== a.trim(c.val())
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                numeric: {
                    "default": "Please enter a valid float number"
                }
            }
        }), FormValidation.Validator.numeric = {
            html5Attributes: {
                message: "message",
                separator: "separator"
            },
            enableByHtml5: function(a) {
                return "number" === a.attr("type") && void 0 !== a.attr("step") && a.attr("step") % 1 !== 0
            },
            validate: function(a, b, c) {
                if (this.enableByHtml5(b) && b.get(0).validity && b.get(0).validity.badInput === !0) return !1;
                var d = a.getFieldValue(b, "numeric");
                if ("" === d) return !0;
                var e = c.separator || ".";
                return "." !== e && (d = d.replace(e, ".")), !isNaN(parseFloat(d)) && isFinite(d)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                phone: {
                    "default": "Please enter a valid phone number",
                    country: "Please enter a valid phone number in %s",
                    countries: {
                        AE: "United Arab Emirates",
                        BR: "Brazil",
                        CN: "China",
                        CZ: "Czech Republic",
                        DE: "Germany",
                        DK: "Denmark",
                        ES: "Spain",
                        FR: "France",
                        GB: "United Kingdom",
                        IN: "India",
                        MA: "Morocco",
                        PK: "Pakistan",
                        RO: "Romania",
                        RU: "Russia",
                        SK: "Slovakia",
                        TH: "Thailand",
                        US: "USA",
                        VE: "Venezuela"
                    }
                }
            }
        }), FormValidation.Validator.phone = {
            html5Attributes: {
                message: "message",
                country: "country"
            },
            COUNTRY_CODES: ["AE", "BR", "CN", "CZ", "DE", "DK", "ES", "FR", "GB", "IN", "MA", "PK", "RO", "RU", "SK", "TH", "US", "VE"],
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "phone");
                if ("" === e) return !0;
                var f = b.getLocale(),
                    g = d.country;
                if (("string" != typeof g || -1 === a.inArray(g, this.COUNTRY_CODES)) && (g = b.getDynamicOption(c, g)), !g || -1 === a.inArray(g.toUpperCase(), this.COUNTRY_CODES)) return !0;
                var h = !0;
                switch (g.toUpperCase()) {
                    case "AE":
                        e = a.trim(e), h = /^(((\+|00)?971[\s\.-]?(\(0\)[\s\.-]?)?|0)(\(5(0|2|5|6)\)|5(0|2|5|6)|2|3|4|6|7|9)|60)([\s\.-]?[0-9]){7}$/.test(e);
                        break;
                    case "BR":
                        e = a.trim(e), h = /^(([\d]{4}[-.\s]{1}[\d]{2,3}[-.\s]{1}[\d]{2}[-.\s]{1}[\d]{2})|([\d]{4}[-.\s]{1}[\d]{3}[-.\s]{1}[\d]{4})|((\(?\+?[0-9]{2}\)?\s?)?(\(?\d{2}\)?\s?)?\d{4,5}[-.\s]?\d{4}))$/.test(e);
                        break;
                    case "CN":
                        e = a.trim(e), h = /^((00|\+)?(86(?:-| )))?((\d{11})|(\d{3}[- ]{1}\d{4}[- ]{1}\d{4})|((\d{2,4}[- ]){1}(\d{7,8}|(\d{3,4}[- ]{1}\d{4}))([- ]{1}\d{1,4})?))$/.test(e);
                        break;
                    case "CZ":
                        h = /^(((00)([- ]?)|\+)(420)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(e);
                        break;
                    case "DE":
                        e = a.trim(e), h = /^(((((((00|\+)49[ \-/]?)|0)[1-9][0-9]{1,4})[ \-/]?)|((((00|\+)49\()|\(0)[1-9][0-9]{1,4}\)[ \-/]?))[0-9]{1,7}([ \-/]?[0-9]{1,5})?)$/.test(e);
                        break;
                    case "DK":
                        e = a.trim(e), h = /^(\+45|0045|\(45\))?\s?[2-9](\s?\d){7}$/.test(e);
                        break;
                    case "ES":
                        e = a.trim(e), h = /^(?:(?:(?:\+|00)34\D?))?(?:5|6|7|8|9)(?:\d\D?){8}$/.test(e);
                        break;
                    case "FR":
                        e = a.trim(e), h = /^(?:(?:(?:\+|00)33[ ]?(?:\(0\)[ ]?)?)|0){1}[1-9]{1}([ .-]?)(?:\d{2}\1?){3}\d{2}$/.test(e);
                        break;
                    case "GB":
                        e = a.trim(e), h = /^\(?(?:(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?\(?(?:0\)?[\s-]?\(?)?|0)(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}|\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4}|\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3})|\d{5}\)?[\s-]?\d{4,5}|8(?:00[\s-]?11[\s-]?11|45[\s-]?46[\s-]?4\d))(?:(?:[\s-]?(?:x|ext\.?\s?|\#)\d+)?)$/.test(e);
                        break;
                    case "IN":
                        e = a.trim(e), h = /((\+?)((0[ -]+)*|(91 )*)(\d{12}|\d{10}))|\d{5}([- ]*)\d{6}/.test(e);
                        break;
                    case "MA":
                        e = a.trim(e), h = /^(?:(?:(?:\+|00)212[\s]?(?:[\s]?\(0\)[\s]?)?)|0){1}(?:5[\s.-]?[2-3]|6[\s.-]?[13-9]){1}[0-9]{1}(?:[\s.-]?\d{2}){3}$/.test(e);
                        break;
                    case "PK":
                        e = a.trim(e), h = /^0?3[0-9]{2}[0-9]{7}$/.test(e);
                        break;
                    case "RO":
                        h = /^(\+4|)?(07[0-8]{1}[0-9]{1}|02[0-9]{2}|03[0-9]{2}){1}?(\s|\.|\-)?([0-9]{3}(\s|\.|\-|)){2}$/g.test(e);
                        break;
                    case "RU":
                        h = /^((8|\+7|007)[\-\.\/ ]?)?([\(\/\.]?\d{3}[\)\/\.]?[\-\.\/ ]?)?[\d\-\.\/ ]{7,10}$/g.test(e);
                        break;
                    case "SK":
                        h = /^(((00)([- ]?)|\+)(420)([- ]?))?((\d{3})([- ]?)){2}(\d{3})$/.test(e);
                        break;
                    case "TH":
                        h = /^0\(?([6|8-9]{2})*-([0-9]{3})*-([0-9]{4})$/.test(e);
                        break;
                    case "VE":
                        e = a.trim(e), h = /^0(?:2(?:12|4[0-9]|5[1-9]|6[0-9]|7[0-8]|8[1-35-8]|9[1-5]|3[45789])|4(?:1[246]|2[46]))\d{7}$/.test(e);
                        break;
                    case "US":
                    default:
                        h = /^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(e)
                }
                return {
                    valid: h,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].phone.country, FormValidation.I18n[f].phone.countries[g])
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                regexp: {
                    "default": "Please enter a value matching the pattern"
                }
            }
        }), FormValidation.Validator.regexp = {
            html5Attributes: {
                message: "message",
                regexp: "regexp"
            },
            enableByHtml5: function(a) {
                var b = a.attr("pattern");
                return b ? {
                    regexp: b
                } : !1
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "regexp");
                if ("" === d) return !0;
                var e = "string" == typeof c.regexp ? new RegExp(c.regexp) : c.regexp;
                return e.test(d)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                remote: {
                    "default": "Please enter a valid value"
                }
            }
        }), FormValidation.Validator.remote = {
            html5Attributes: {
                message: "message",
                name: "name",
                type: "type",
                url: "url",
                data: "data",
                delay: "delay"
            },
            destroy: function(a, b) {
                var c = a.getNamespace(),
                    d = b.data(c + ".remote.timer");
                d && (clearTimeout(d), b.removeData(c + ".remote.timer"))
            },
            validate: function(b, c, d) {
                function e() {
                    var b = a.ajax({
                        type: l,
                        headers: m,
                        url: k,
                        dataType: "json",
                        data: j
                    });
                    return b.then(function(a) {
                        a.valid = a.valid === !0 || "true" === a.valid, h.resolve(c, "remote", a)
                    }), h.fail(function() {
                        b.abort()
                    }), h
                }
                var f = b.getNamespace(),
                    g = b.getFieldValue(c, "remote"),
                    h = new a.Deferred;
                if ("" === g) return h.resolve(c, "remote", {
                    valid: !0
                }), h;
                var i = c.attr("data-" + f + "-field"),
                    j = d.data || {},
                    k = d.url,
                    l = d.type || "GET",
                    m = d.headers || {};
                return "function" == typeof j && (j = j.call(this, b)), "string" == typeof j && (j = JSON.parse(j)), "function" == typeof k && (k = k.call(this, b)), j[d.name || i] = g, d.delay ? (c.data(f + ".remote.timer") && clearTimeout(c.data(f + ".remote.timer")), c.data(f + ".remote.timer", setTimeout(e, d.delay)), h) : e()
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                rtn: {
                    "default": "Please enter a valid RTN number"
                }
            }
        }), FormValidation.Validator.rtn = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "rtn");
                if ("" === c) return !0;
                if (!/^\d{9}$/.test(c)) return !1;
                for (var d = 0, e = 0; e < c.length; e += 3) d += 3 * parseInt(c.charAt(e), 10) + 7 * parseInt(c.charAt(e + 1), 10) + parseInt(c.charAt(e + 2), 10);
                return 0 !== d && d % 10 === 0
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                sedol: {
                    "default": "Please enter a valid SEDOL number"
                }
            }
        }), FormValidation.Validator.sedol = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "sedol");
                if ("" === c) return !0;
                if (c = c.toUpperCase(), !/^[0-9A-Z]{7}$/.test(c)) return !1;
                for (var d = 0, e = [1, 3, 1, 7, 3, 9, 1], f = c.length, g = 0; f - 1 > g; g++) d += e[g] * parseInt(c.charAt(g), 36);
                return d = (10 - d % 10) % 10, d + "" === c.charAt(f - 1)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                siren: {
                    "default": "Please enter a valid SIREN number"
                }
            }
        }), FormValidation.Validator.siren = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "siren");
                return "" === c ? !0 : /^\d{9}$/.test(c) ? FormValidation.Helper.luhn(c) : !1
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                siret: {
                    "default": "Please enter a valid SIRET number"
                }
            }
        }), FormValidation.Validator.siret = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "siret");
                if ("" === c) return !0;
                for (var d, e = 0, f = c.length, g = 0; f > g; g++) d = parseInt(c.charAt(g), 10), g % 2 === 0 && (d = 2 * d, d > 9 && (d -= 9)), e += d;
                return e % 10 === 0
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                step: {
                    "default": "Please enter a valid step of %s"
                }
            }
        }), FormValidation.Validator.step = {
            html5Attributes: {
                message: "message",
                base: "baseValue",
                step: "step"
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "step");
                if ("" === e) return !0;
                if (d = a.extend({}, {
                    baseValue: 0,
                    step: 1
                }, d), e = parseFloat(e), !a.isNumeric(e)) return !1;
                var f = function(a, b) {
                        var c = Math.pow(10, b);
                        a *= c;
                        var d = a > 0 | -(0 > a),
                            e = a % 1 === .5 * d;
                        return e ? (Math.floor(a) + (d > 0)) / c : Math.round(a) / c
                    },
                    g = function(a, b) {
                        if (0 === b) return 1;
                        var c = (a + "").split("."),
                            d = (b + "").split("."),
                            e = (1 === c.length ? 0 : c[1].length) + (1 === d.length ? 0 : d[1].length);
                        return f(a - b * Math.floor(a / b), e)
                    },
                    h = b.getLocale(),
                    i = g(e - d.baseValue, d.step);
                return {
                    valid: 0 === i || i === d.step,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[h].step["default"], [d.step])
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                stringCase: {
                    "default": "Please enter only lowercase characters",
                    upper: "Please enter only uppercase characters"
                }
            }
        }), FormValidation.Validator.stringCase = {
            html5Attributes: {
                message: "message",
                "case": "case"
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "stringCase");
                if ("" === d) return !0;
                var e = a.getLocale(),
                    f = (c["case"] || "lower").toLowerCase();
                return {
                    valid: "upper" === f ? d === d.toUpperCase() : d === d.toLowerCase(),
                    message: c.message || ("upper" === f ? FormValidation.I18n[e].stringCase.upper : FormValidation.I18n[e].stringCase["default"])
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                stringLength: {
                    "default": "Please enter a value with valid length",
                    less: "Please enter less than %s characters",
                    more: "Please enter more than %s characters",
                    between: "Please enter value between %s and %s characters long"
                }
            }
        }), FormValidation.Validator.stringLength = {
            html5Attributes: {
                message: "message",
                min: "min",
                max: "max",
                trim: "trim",
                utf8bytes: "utf8Bytes"
            },
            enableByHtml5: function(b) {
                var c = {},
                    d = b.attr("maxlength"),
                    e = b.attr("minlength");
                return d && (c.max = parseInt(d, 10)), e && (c.min = parseInt(e, 10)), a.isEmptyObject(c) ? !1 : c
            },
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "stringLength");
                if ((d.trim === !0 || "true" === d.trim) && (e = a.trim(e)), "" === e) return !0;
                var f = b.getLocale(),
                    g = a.isNumeric(d.min) ? d.min : b.getDynamicOption(c, d.min),
                    h = a.isNumeric(d.max) ? d.max : b.getDynamicOption(c, d.max),
                    i = function(a) {
                        for (var b = a.length, c = a.length - 1; c >= 0; c--) {
                            var d = a.charCodeAt(c);
                            d > 127 && 2047 >= d ? b++ : d > 2047 && 65535 >= d && (b += 2), d >= 56320 && 57343 >= d && c--
                        }
                        return b
                    },
                    j = d.utf8Bytes ? i(e) : e.length,
                    k = !0,
                    l = d.message || FormValidation.I18n[f].stringLength["default"];
                switch ((g && j < parseInt(g, 10) || h && j > parseInt(h, 10)) && (k = !1), !0) {
                    case !!g && !!h:
                        l = FormValidation.Helper.format(d.message || FormValidation.I18n[f].stringLength.between, [parseInt(g, 10), parseInt(h, 10)]);
                        break;
                    case !!g:
                        l = FormValidation.Helper.format(d.message || FormValidation.I18n[f].stringLength.more, parseInt(g, 10));
                        break;
                    case !!h:
                        l = FormValidation.Helper.format(d.message || FormValidation.I18n[f].stringLength.less, parseInt(h, 10))
                }
                return {
                    valid: k,
                    message: l
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                uri: {
                    "default": "Please enter a valid URI"
                }
            }
        }), FormValidation.Validator.uri = {
            html5Attributes: {
                message: "message",
                allowlocal: "allowLocal",
                allowemptyprotocol: "allowEmptyProtocol",
                protocol: "protocol"
            },
            enableByHtml5: function(a) {
                return "url" === a.attr("type")
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "uri");
                if ("" === d) return !0;
                var e = c.allowLocal === !0 || "true" === c.allowLocal,
                    f = c.allowEmptyProtocol === !0 || "true" === c.allowEmptyProtocol,
                    g = (c.protocol || "http, https, ftp").split(",").join("|").replace(/\s/g, ""),
                    h = new RegExp("^(?:(?:" + g + ")://)" + (f ? "?" : "") + "(?:\\S+(?::\\S*)?@)?(?:" + (e ? "" : "(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})") + "(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))" + (e ? "?" : "") + ")(?::\\d{2,5})?(?:/[^\\s]*)?$", "i");
                return h.test(d)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                uuid: {
                    "default": "Please enter a valid UUID number",
                    version: "Please enter a valid UUID version %s number"
                }
            }
        }), FormValidation.Validator.uuid = {
            html5Attributes: {
                message: "message",
                version: "version"
            },
            validate: function(a, b, c) {
                var d = a.getFieldValue(b, "uuid");
                if ("" === d) return !0;
                var e = a.getLocale(),
                    f = {
                        3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
                        4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
                        5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
                        all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i
                    },
                    g = c.version ? c.version + "" : "all";
                return {
                    valid: null === f[g] ? !0 : f[g].test(d),
                    message: c.version ? FormValidation.Helper.format(c.message || FormValidation.I18n[e].uuid.version, c.version) : c.message || FormValidation.I18n[e].uuid["default"]
                }
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                vat: {
                    "default": "Please enter a valid VAT number",
                    country: "Please enter a valid VAT number in %s",
                    countries: {
                        AT: "Austria",
                        BE: "Belgium",
                        BG: "Bulgaria",
                        BR: "Brazil",
                        CH: "Switzerland",
                        CY: "Cyprus",
                        CZ: "Czech Republic",
                        DE: "Germany",
                        DK: "Denmark",
                        EE: "Estonia",
                        ES: "Spain",
                        FI: "Finland",
                        FR: "France",
                        GB: "United Kingdom",
                        GR: "Greek",
                        EL: "Greek",
                        HU: "Hungary",
                        HR: "Croatia",
                        IE: "Ireland",
                        IS: "Iceland",
                        IT: "Italy",
                        LT: "Lithuania",
                        LU: "Luxembourg",
                        LV: "Latvia",
                        MT: "Malta",
                        NL: "Netherlands",
                        NO: "Norway",
                        PL: "Poland",
                        PT: "Portugal",
                        RO: "Romania",
                        RU: "Russia",
                        RS: "Serbia",
                        SE: "Sweden",
                        SI: "Slovenia",
                        SK: "Slovakia",
                        VE: "Venezuela",
                        ZA: "South Africa"
                    }
                }
            }
        }), FormValidation.Validator.vat = {
            html5Attributes: {
                message: "message",
                country: "country"
            },
            COUNTRY_CODES: ["AT", "BE", "BG", "BR", "CH", "CY", "CZ", "DE", "DK", "EE", "EL", "ES", "FI", "FR", "GB", "GR", "HR", "HU", "IE", "IS", "IT", "LT", "LU", "LV", "MT", "NL", "NO", "PL", "PT", "RO", "RU", "RS", "SE", "SK", "SI", "VE", "ZA"],
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "vat");
                if ("" === e) return !0;
                var f = b.getLocale(),
                    g = d.country;
                if (g ? ("string" != typeof g || -1 === a.inArray(g.toUpperCase(), this.COUNTRY_CODES)) && (g = b.getDynamicOption(c, g)) : g = e.substr(0, 2), -1 === a.inArray(g, this.COUNTRY_CODES)) return !0;
                var h = ["_", g.toLowerCase()].join("");
                return this[h](e) ? !0 : {
                    valid: !1,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].vat.country, FormValidation.I18n[f].vat.countries[g.toUpperCase()])
                }
            },
            _at: function(a) {
                if (/^ATU[0-9]{8}$/.test(a) && (a = a.substr(2)), !/^U[0-9]{8}$/.test(a)) return !1;
                a = a.substr(1);
                for (var b = 0, c = [1, 2, 1, 2, 1, 2, 1], d = 0, e = 0; 7 > e; e++) d = parseInt(a.charAt(e), 10) * c[e], d > 9 && (d = Math.floor(d / 10) + d % 10), b += d;
                return b = 10 - (b + 4) % 10, 10 === b && (b = 0), b + "" === a.substr(7, 1)
            },
            _be: function(a) {
                if (/^BE[0]{0,1}[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0]{0,1}[0-9]{9}$/.test(a)) return !1;
                if (9 === a.length && (a = "0" + a), "0" === a.substr(1, 1)) return !1;
                var b = parseInt(a.substr(0, 8), 10) + parseInt(a.substr(8, 2), 10);
                return b % 97 === 0
            },
            _bg: function(a) {
                if (/^BG[0-9]{9,10}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9,10}$/.test(a)) return !1;
                var b = 0,
                    c = 0;
                if (9 === a.length) {
                    for (c = 0; 8 > c; c++) b += parseInt(a.charAt(c), 10) * (c + 1);
                    if (b %= 11, 10 === b)
                        for (b = 0, c = 0; 8 > c; c++) b += parseInt(a.charAt(c), 10) * (c + 3);
                    return b %= 10, b + "" === a.substr(8)
                }
                if (10 === a.length) {
                    var d = function(a) {
                            var b = parseInt(a.substr(0, 2), 10) + 1900,
                                c = parseInt(a.substr(2, 2), 10),
                                d = parseInt(a.substr(4, 2), 10);
                            if (c > 40 ? (b += 100, c -= 40) : c > 20 && (b -= 100, c -= 20), !FormValidation.Helper.date(b, c, d)) return !1;
                            for (var e = 0, f = [2, 4, 8, 5, 10, 9, 7, 3, 6], g = 0; 9 > g; g++) e += parseInt(a.charAt(g), 10) * f[g];
                            return e = e % 11 % 10, e + "" === a.substr(9, 1)
                        },
                        e = function(a) {
                            for (var b = 0, c = [21, 19, 17, 13, 11, 9, 7, 3, 1], d = 0; 9 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                            return b %= 10, b + "" === a.substr(9, 1)
                        },
                        f = function(a) {
                            for (var b = 0, c = [4, 3, 2, 7, 6, 5, 4, 3, 2], d = 0; 9 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                            return b = 11 - b % 11, 10 === b ? !1 : (11 === b && (b = 0), b + "" === a.substr(9, 1))
                        };
                    return d(a) || e(a) || f(a)
                }
                return !1
            },
            _br: function(a) {
                if ("" === a) return !0;
                var b = a.replace(/[^\d]+/g, "");
                if ("" === b || 14 !== b.length) return !1;
                if ("00000000000000" === b || "11111111111111" === b || "22222222222222" === b || "33333333333333" === b || "44444444444444" === b || "55555555555555" === b || "66666666666666" === b || "77777777777777" === b || "88888888888888" === b || "99999999999999" === b) return !1;
                for (var c = b.length - 2, d = b.substring(0, c), e = b.substring(c), f = 0, g = c - 7, h = c; h >= 1; h--) f += parseInt(d.charAt(c - h), 10) * g--, 2 > g && (g = 9);
                var i = 2 > f % 11 ? 0 : 11 - f % 11;
                if (i !== parseInt(e.charAt(0), 10)) return !1;
                for (c += 1, d = b.substring(0, c), f = 0, g = c - 7, h = c; h >= 1; h--) f += parseInt(d.charAt(c - h), 10) * g--, 2 > g && (g = 9);
                return i = 2 > f % 11 ? 0 : 11 - f % 11, i === parseInt(e.charAt(1), 10)
            },
            _ch: function(a) {
                if (/^CHE[0-9]{9}(MWST)?$/.test(a) && (a = a.substr(2)), !/^E[0-9]{9}(MWST)?$/.test(a)) return !1;
                a = a.substr(1);
                for (var b = 0, c = [5, 4, 3, 2, 7, 6, 5, 4], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b = 11 - b % 11, 10 === b ? !1 : (11 === b && (b = 0), b + "" === a.substr(8, 1))
            },
            _cy: function(a) {
                if (/^CY[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(a) && (a = a.substr(2)), !/^[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(a)) return !1;
                if ("12" === a.substr(0, 2)) return !1;
                for (var b = 0, c = {
                    0: 1,
                    1: 0,
                    2: 5,
                    3: 7,
                    4: 9,
                    5: 13,
                    6: 15,
                    7: 17,
                    8: 19,
                    9: 21
                }, d = 0; 8 > d; d++) {
                    var e = parseInt(a.charAt(d), 10);
                    d % 2 === 0 && (e = c[e + ""]), b += e
                }
                return b = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" [b % 26], b + "" === a.substr(8, 1)
            },
            _cz: function(a) {
                if (/^CZ[0-9]{8,10}$/.test(a) && (a = a.substr(2)), !/^[0-9]{8,10}$/.test(a)) return !1;
                var b = 0,
                    c = 0;
                if (8 === a.length) {
                    if (a.charAt(0) + "" == "9") return !1;
                    for (b = 0, c = 0; 7 > c; c++) b += parseInt(a.charAt(c), 10) * (8 - c);
                    return b = 11 - b % 11, 10 === b && (b = 0), 11 === b && (b = 1), b + "" === a.substr(7, 1)
                }
                if (9 === a.length && a.charAt(0) + "" == "6") {
                    for (b = 0, c = 0; 7 > c; c++) b += parseInt(a.charAt(c + 1), 10) * (8 - c);
                    return b = 11 - b % 11, 10 === b && (b = 0), 11 === b && (b = 1), b = [8, 7, 6, 5, 4, 3, 2, 1, 0, 9, 10][b - 1], b + "" === a.substr(8, 1)
                }
                if (9 === a.length || 10 === a.length) {
                    var d = 1900 + parseInt(a.substr(0, 2), 10),
                        e = parseInt(a.substr(2, 2), 10) % 50 % 20,
                        f = parseInt(a.substr(4, 2), 10);
                    if (9 === a.length) {
                        if (d >= 1980 && (d -= 100), d > 1953) return !1
                    } else 1954 > d && (d += 100);
                    if (!FormValidation.Helper.date(d, e, f)) return !1;
                    if (10 === a.length) {
                        var g = parseInt(a.substr(0, 9), 10) % 11;
                        return 1985 > d && (g %= 10), g + "" === a.substr(9, 1)
                    }
                    return !0
                }
                return !1
            },
            _de: function(a) {
                return /^DE[0-9]{9}$/.test(a) && (a = a.substr(2)), /^[0-9]{9}$/.test(a) ? FormValidation.Helper.mod11And10(a) : !1
            },
            _dk: function(a) {
                if (/^DK[0-9]{8}$/.test(a) && (a = a.substr(2)), !/^[0-9]{8}$/.test(a)) return !1;
                for (var b = 0, c = [2, 7, 6, 5, 4, 3, 2, 1], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 11 === 0
            },
            _ee: function(a) {
                if (/^EE[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}$/.test(a)) return !1;
                for (var b = 0, c = [3, 7, 1, 3, 7, 1, 3, 7, 1], d = 0; 9 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 10 === 0
            },
            _es: function(a) {
                if (/^ES[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(a) && (a = a.substr(2)), !/^[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(a)) return !1;
                var b = function(a) {
                        var b = parseInt(a.substr(0, 8), 10);
                        return b = "TRWAGMYFPDXBNJZSQVHLCKE" [b % 23], b + "" === a.substr(8, 1)
                    },
                    c = function(a) {
                        var b = ["XYZ".indexOf(a.charAt(0)), a.substr(1)].join("");
                        return b = parseInt(b, 10), b = "TRWAGMYFPDXBNJZSQVHLCKE" [b % 23], b + "" === a.substr(8, 1)
                    },
                    d = function(a) {
                        var b, c = a.charAt(0);
                        if (-1 !== "KLM".indexOf(c)) return b = parseInt(a.substr(1, 8), 10), b = "TRWAGMYFPDXBNJZSQVHLCKE" [b % 23], b + "" === a.substr(8, 1);
                        if (-1 !== "ABCDEFGHJNPQRSUVW".indexOf(c)) {
                            for (var d = 0, e = [2, 1, 2, 1, 2, 1, 2], f = 0, g = 0; 7 > g; g++) f = parseInt(a.charAt(g + 1), 10) * e[g], f > 9 && (f = Math.floor(f / 10) + f % 10), d += f;
                            return d = 10 - d % 10, d + "" === a.substr(8, 1) || "JABCDEFGHI" [d] === a.substr(8, 1)
                        }
                        return !1
                    },
                    e = a.charAt(0);
                return /^[0-9]$/.test(e) ? b(a) : /^[XYZ]$/.test(e) ? c(a) : d(a)
            },
            _fi: function(a) {
                if (/^FI[0-9]{8}$/.test(a) && (a = a.substr(2)), !/^[0-9]{8}$/.test(a)) return !1;
                for (var b = 0, c = [7, 9, 10, 5, 8, 4, 2, 1], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 11 === 0
            },
            _fr: function(a) {
                if (/^FR[0-9A-Z]{2}[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9A-Z]{2}[0-9]{9}$/.test(a)) return !1;
                if (!FormValidation.Helper.luhn(a.substr(2))) return !1;
                if (/^[0-9]{2}$/.test(a.substr(0, 2))) return a.substr(0, 2) === parseInt(a.substr(2) + "12", 10) % 97 + "";
                var b, c = "0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";
                return b = /^[0-9]{1}$/.test(a.charAt(0)) ? 24 * c.indexOf(a.charAt(0)) + c.indexOf(a.charAt(1)) - 10 : 34 * c.indexOf(a.charAt(0)) + c.indexOf(a.charAt(1)) - 100, (parseInt(a.substr(2), 10) + 1 + Math.floor(b / 11)) % 11 === b % 11
            },
            _gb: function(a) {
                if ((/^GB[0-9]{9}$/.test(a) || /^GB[0-9]{12}$/.test(a) || /^GBGD[0-9]{3}$/.test(a) || /^GBHA[0-9]{3}$/.test(a) || /^GB(GD|HA)8888[0-9]{5}$/.test(a)) && (a = a.substr(2)), !(/^[0-9]{9}$/.test(a) || /^[0-9]{12}$/.test(a) || /^GD[0-9]{3}$/.test(a) || /^HA[0-9]{3}$/.test(a) || /^(GD|HA)8888[0-9]{5}$/.test(a))) return !1;
                var b = a.length;
                if (5 === b) {
                    var c = a.substr(0, 2),
                        d = parseInt(a.substr(2), 10);
                    return "GD" === c && 500 > d || "HA" === c && d >= 500
                }
                if (11 === b && ("GD8888" === a.substr(0, 6) || "HA8888" === a.substr(0, 6))) return "GD" === a.substr(0, 2) && parseInt(a.substr(6, 3), 10) >= 500 || "HA" === a.substr(0, 2) && parseInt(a.substr(6, 3), 10) < 500 ? !1 : parseInt(a.substr(6, 3), 10) % 97 === parseInt(a.substr(9, 2), 10);
                if (9 === b || 12 === b) {
                    for (var e = 0, f = [8, 7, 6, 5, 4, 3, 2, 10, 1], g = 0; 9 > g; g++) e += parseInt(a.charAt(g), 10) * f[g];
                    return e %= 97, parseInt(a.substr(0, 3), 10) >= 100 ? 0 === e || 42 === e || 55 === e : 0 === e
                }
                return !0
            },
            _gr: function(a) {
                if (/^(GR|EL)[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}$/.test(a)) return !1;
                8 === a.length && (a = "0" + a);
                for (var b = 0, c = [256, 128, 64, 32, 16, 8, 4, 2], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b = b % 11 % 10, b + "" === a.substr(8, 1)
            },
            _el: function(a) {
                return this._gr(a)
            },
            _hu: function(a) {
                if (/^HU[0-9]{8}$/.test(a) && (a = a.substr(2)), !/^[0-9]{8}$/.test(a)) return !1;
                for (var b = 0, c = [9, 7, 3, 1, 9, 7, 3, 1], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 10 === 0
            },
            _hr: function(a) {
                return /^HR[0-9]{11}$/.test(a) && (a = a.substr(2)), /^[0-9]{11}$/.test(a) ? FormValidation.Helper.mod11And10(a) : !1
            },
            _ie: function(a) {
                if (/^IE[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(a) && (a = a.substr(2)), !/^[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(a)) return !1;
                var b = function(a) {
                    for (; a.length < 7;) a = "0" + a;
                    for (var b = "WABCDEFGHIJKLMNOPQRSTUV", c = 0, d = 0; 7 > d; d++) c += parseInt(a.charAt(d), 10) * (8 - d);
                    return c += 9 * b.indexOf(a.substr(7)), b[c % 23]
                };
                return /^[0-9]+$/.test(a.substr(0, 7)) ? a.charAt(7) === b(a.substr(0, 7) + a.substr(8) + "") : -1 !== "ABCDEFGHIJKLMNOPQRSTUVWXYZ+*".indexOf(a.charAt(1)) ? a.charAt(7) === b(a.substr(2, 5) + a.substr(0, 1) + "") : !0
            },
            _is: function(a) {
                return /^IS[0-9]{5,6}$/.test(a) && (a = a.substr(2)), /^[0-9]{5,6}$/.test(a)
            },
            _it: function(a) {
                if (/^IT[0-9]{11}$/.test(a) && (a = a.substr(2)), !/^[0-9]{11}$/.test(a)) return !1;
                if (0 === parseInt(a.substr(0, 7), 10)) return !1;
                var b = parseInt(a.substr(7, 3), 10);
                return 1 > b || b > 201 && 999 !== b && 888 !== b ? !1 : FormValidation.Helper.luhn(a)
            },
            _lt: function(a) {
                if (/^LT([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(a) && (a = a.substr(2)), !/^([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(a)) return !1;
                var b, c = a.length,
                    d = 0;
                for (b = 0; c - 1 > b; b++) d += parseInt(a.charAt(b), 10) * (1 + b % 9);
                var e = d % 11;
                if (10 === e)
                    for (d = 0, b = 0; c - 1 > b; b++) d += parseInt(a.charAt(b), 10) * (1 + (b + 2) % 9);
                return e = e % 11 % 10, e + "" === a.charAt(c - 1)
            },
            _lu: function(a) {
                return /^LU[0-9]{8}$/.test(a) && (a = a.substr(2)), /^[0-9]{8}$/.test(a) ? parseInt(a.substr(0, 6), 10) % 89 + "" === a.substr(6, 2) : !1
            },
            _lv: function(a) {
                if (/^LV[0-9]{11}$/.test(a) && (a = a.substr(2)), !/^[0-9]{11}$/.test(a)) return !1;
                var b, c = parseInt(a.charAt(0), 10),
                    d = 0,
                    e = [],
                    f = a.length;
                if (c > 3) {
                    for (d = 0, e = [9, 1, 4, 8, 3, 10, 2, 5, 7, 6, 1], b = 0; f > b; b++) d += parseInt(a.charAt(b), 10) * e[b];
                    return d %= 11, 3 === d
                }
                var g = parseInt(a.substr(0, 2), 10),
                    h = parseInt(a.substr(2, 2), 10),
                    i = parseInt(a.substr(4, 2), 10);
                if (i = i + 1800 + 100 * parseInt(a.charAt(6), 10), !FormValidation.Helper.date(i, h, g)) return !1;
                for (d = 0, e = [10, 5, 8, 4, 2, 1, 6, 3, 7, 9], b = 0; f - 1 > b; b++) d += parseInt(a.charAt(b), 10) * e[b];
                return d = (d + 1) % 11 % 10, d + "" === a.charAt(f - 1)
            },
            _mt: function(a) {
                if (/^MT[0-9]{8}$/.test(a) && (a = a.substr(2)), !/^[0-9]{8}$/.test(a)) return !1;
                for (var b = 0, c = [3, 4, 6, 7, 8, 9, 10, 1], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 37 === 0
            },
            _nl: function(a) {
                if (/^NL[0-9]{9}B[0-9]{2}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}B[0-9]{2}$/.test(a)) return !1;
                for (var b = 0, c = [9, 8, 7, 6, 5, 4, 3, 2], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b %= 11, b > 9 && (b = 0), b + "" === a.substr(8, 1)
            },
            _no: function(a) {
                if (/^NO[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}$/.test(a)) return !1;
                for (var b = 0, c = [3, 2, 7, 6, 5, 4, 3, 2], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b = 11 - b % 11, 11 === b && (b = 0), b + "" === a.substr(8, 1)
            },
            _pl: function(a) {
                if (/^PL[0-9]{10}$/.test(a) && (a = a.substr(2)), !/^[0-9]{10}$/.test(a)) return !1;
                for (var b = 0, c = [6, 5, 7, 2, 3, 4, 5, 6, 7, -1], d = 0; 10 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b % 11 === 0
            },
            _pt: function(a) {
                if (/^PT[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}$/.test(a)) return !1;
                for (var b = 0, c = [9, 8, 7, 6, 5, 4, 3, 2], d = 0; 8 > d; d++) b += parseInt(a.charAt(d), 10) * c[d];
                return b = 11 - b % 11, b > 9 && (b = 0), b + "" === a.substr(8, 1)
            },
            _ro: function(a) {
                if (/^RO[1-9][0-9]{1,9}$/.test(a) && (a = a.substr(2)), !/^[1-9][0-9]{1,9}$/.test(a)) return !1;
                for (var b = a.length, c = [7, 5, 3, 2, 1, 7, 5, 3, 2].slice(10 - b), d = 0, e = 0; b - 1 > e; e++) d += parseInt(a.charAt(e), 10) * c[e];
                return d = 10 * d % 11 % 10, d + "" === a.substr(b - 1, 1)
            },
            _ru: function(a) {
                if (/^RU([0-9]{10}|[0-9]{12})$/.test(a) && (a = a.substr(2)), !/^([0-9]{10}|[0-9]{12})$/.test(a)) return !1;
                var b = 0;
                if (10 === a.length) {
                    var c = 0,
                        d = [2, 4, 10, 3, 5, 9, 4, 6, 8, 0];
                    for (b = 0; 10 > b; b++) c += parseInt(a.charAt(b), 10) * d[b];
                    return c %= 11, c > 9 && (c %= 10), c + "" === a.substr(9, 1)
                }
                if (12 === a.length) {
                    var e = 0,
                        f = [7, 2, 4, 10, 3, 5, 9, 4, 6, 8, 0],
                        g = 0,
                        h = [3, 7, 2, 4, 10, 3, 5, 9, 4, 6, 8, 0];
                    for (b = 0; 11 > b; b++) e += parseInt(a.charAt(b), 10) * f[b], g += parseInt(a.charAt(b), 10) * h[b];
                    return e %= 11, e > 9 && (e %= 10), g %= 11, g > 9 && (g %= 10), e + "" === a.substr(10, 1) && g + "" === a.substr(11, 1)
                }
                return !1
            },
            _rs: function(a) {
                if (/^RS[0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[0-9]{9}$/.test(a)) return !1;
                for (var b = 10, c = 0, d = 0; 8 > d; d++) c = (parseInt(a.charAt(d), 10) + b) % 10, 0 === c && (c = 10), b = 2 * c % 11;
                return (b + parseInt(a.substr(8, 1), 10)) % 10 === 1
            },
            _se: function(a) {
                return /^SE[0-9]{10}01$/.test(a) && (a = a.substr(2)), /^[0-9]{10}01$/.test(a) ? (a = a.substr(0, 10), FormValidation.Helper.luhn(a)) : !1
            },
            _si: function(a) {
                var b = a.match(/^(SI)?([1-9][0-9]{7})$/);
                if (!b) return !1;
                b[1] && (a = a.substr(2));
                for (var c = 0, d = [8, 7, 6, 5, 4, 3, 2], e = 0; 7 > e; e++) c += parseInt(a.charAt(e), 10) * d[e];
                return c = 11 - c % 11, 10 === c && (c = 0), c + "" === a.substr(7, 1)
            },
            _sk: function(a) {
                return /^SK[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(a) && (a = a.substr(2)), /^[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(a) ? parseInt(a, 10) % 11 === 0 : !1
            },
            _ve: function(a) {
                if (/^VE[VEJPG][0-9]{9}$/.test(a) && (a = a.substr(2)), !/^[VEJPG][0-9]{9}$/.test(a)) return !1;
                for (var b = {
                    V: 4,
                    E: 8,
                    J: 12,
                    P: 16,
                    G: 20
                }, c = b[a.charAt(0)], d = [3, 2, 7, 6, 5, 4, 3, 2], e = 0; 8 > e; e++) c += parseInt(a.charAt(e + 1), 10) * d[e];
                return c = 11 - c % 11, (11 === c || 10 === c) && (c = 0), c + "" === a.substr(9, 1)
            },
            _za: function(a) {
                return /^ZA4[0-9]{9}$/.test(a) && (a = a.substr(2)), /^4[0-9]{9}$/.test(a)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                vin: {
                    "default": "Please enter a valid VIN number"
                }
            }
        }), FormValidation.Validator.vin = {
            validate: function(a, b) {
                var c = a.getFieldValue(b, "vin");
                if ("" === c) return !0;
                if (!/^[a-hj-npr-z0-9]{8}[0-9xX][a-hj-npr-z0-9]{8}$/i.test(c)) return !1;
                c = c.toUpperCase();
                for (var d = {
                    A: 1,
                    B: 2,
                    C: 3,
                    D: 4,
                    E: 5,
                    F: 6,
                    G: 7,
                    H: 8,
                    J: 1,
                    K: 2,
                    L: 3,
                    M: 4,
                    N: 5,
                    P: 7,
                    R: 9,
                    S: 2,
                    T: 3,
                    U: 4,
                    V: 5,
                    W: 6,
                    X: 7,
                    Y: 8,
                    Z: 9,
                    1: 1,
                    2: 2,
                    3: 3,
                    4: 4,
                    5: 5,
                    6: 6,
                    7: 7,
                    8: 8,
                    9: 9,
                    0: 0
                }, e = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2], f = 0, g = c.length, h = 0; g > h; h++) f += d[c.charAt(h) + ""] * e[h];
                var i = f % 11;
                return 10 === i && (i = "X"), i + "" === c.charAt(8)
            }
        }
    }(jQuery),
    function(a) {
        FormValidation.I18n = a.extend(!0, FormValidation.I18n || {}, {
            en_US: {
                zipCode: {
                    "default": "Please enter a valid postal code",
                    country: "Please enter a valid postal code in %s",
                    countries: {
                        AT: "Austria",
                        BR: "Brazil",
                        CA: "Canada",
                        CH: "Switzerland",
                        CZ: "Czech Republic",
                        DE: "Germany",
                        DK: "Denmark",
                        ES: "Spain",
                        FR: "France",
                        GB: "United Kingdom",
                        IE: "Ireland",
                        IN: "India",
                        IT: "Italy",
                        MA: "Morocco",
                        NL: "Netherlands",
                        PT: "Portugal",
                        RO: "Romania",
                        RU: "Russia",
                        SE: "Sweden",
                        SG: "Singapore",
                        SK: "Slovakia",
                        US: "USA"
                    }
                }
            }
        }), FormValidation.Validator.zipCode = {
            html5Attributes: {
                message: "message",
                country: "country"
            },
            COUNTRY_CODES: ["AT", "BR", "CA", "CH", "CZ", "DE", "DK", "ES", "FR", "GB", "IE", "IN", "IT", "MA", "NL", "PT", "RO", "RU", "SE", "SG", "SK", "US"],
            validate: function(b, c, d) {
                var e = b.getFieldValue(c, "zipCode");
                if ("" === e || !d.country) return !0;
                var f = b.getLocale(),
                    g = d.country;
                if (("string" != typeof g || -1 === a.inArray(g, this.COUNTRY_CODES)) && (g = b.getDynamicOption(c, g)), !g || -1 === a.inArray(g.toUpperCase(), this.COUNTRY_CODES)) return !0;
                var h = !1;
                switch (g = g.toUpperCase()) {
                    case "AT":
                        h = /^([1-9]{1})(\d{3})$/.test(e);
                        break;
                    case "BR":
                        h = /^(\d{2})([\.]?)(\d{3})([\-]?)(\d{3})$/.test(e);
                        break;
                    case "CA":
                        h = /^(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}\s?[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}[0-9]{1}$/i.test(e);
                        break;
                    case "CH":
                        h = /^([1-9]{1})(\d{3})$/.test(e);
                        break;
                    case "CZ":
                        h = /^(\d{3})([ ]?)(\d{2})$/.test(e);
                        break;
                    case "DE":
                        h = /^(?!01000|99999)(0[1-9]\d{3}|[1-9]\d{4})$/.test(e);
                        break;
                    case "DK":
                        h = /^(DK(-|\s)?)?\d{4}$/i.test(e);
                        break;
                    case "ES":
                        h = /^(?:0[1-9]|[1-4][0-9]|5[0-2])\d{3}$/.test(e);
                        break;
                    case "FR":
                        h = /^[0-9]{5}$/i.test(e);
                        break;
                    case "GB":
                        h = this._gb(e);
                        break;
                    case "IN":
                        h = /^\d{3}\s?\d{3}$/.test(e);
                        break;
                    case "IE":
                        h = /^(D6W|[ACDEFHKNPRTVWXY]\d{2})\s[0-9ACDEFHKNPRTVWXY]{4}$/.test(e);
                        break;
                    case "IT":
                        h = /^(I-|IT-)?\d{5}$/i.test(e);
                        break;
                    case "MA":
                        h = /^[1-9][0-9]{4}$/i.test(e);
                        break;
                    case "NL":
                        h = /^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(e);
                        break;
                    case "PT":
                        h = /^[1-9]\d{3}-\d{3}$/.test(e);
                        break;
                    case "RO":
                        h = /^(0[1-8]{1}|[1-9]{1}[0-5]{1})?[0-9]{4}$/i.test(e);
                        break;
                    case "RU":
                        h = /^[0-9]{6}$/i.test(e);
                        break;
                    case "SE":
                        h = /^(S-)?\d{3}\s?\d{2}$/i.test(e);
                        break;
                    case "SG":
                        h = /^([0][1-9]|[1-6][0-9]|[7]([0-3]|[5-9])|[8][0-2])(\d{4})$/i.test(e);
                        break;
                    case "SK":
                        h = /^(\d{3})([ ]?)(\d{2})$/.test(e);
                        break;
                    case "US":
                    default:
                        h = /^\d{4,5}([\-]?\d{4})?$/.test(e)
                }
                return {
                    valid: h,
                    message: FormValidation.Helper.format(d.message || FormValidation.I18n[f].zipCode.country, FormValidation.I18n[f].zipCode.countries[g])
                }
            },
            _gb: function(a) {
                for (var b = "[ABCDEFGHIJKLMNOPRSTUWYZ]", c = "[ABCDEFGHKLMNOPQRSTUVWXY]", d = "[ABCDEFGHJKPMNRSTUVWXY]", e = "[ABEHMNPRVWXY]", f = "[ABDEFGHJLNPQRSTUWXYZ]", g = [new RegExp("^(" + b + "{1}" + c + "?[0-9]{1,2})(\\s*)([0-9]{1}" + f + "{2})$", "i"), new RegExp("^(" + b + "{1}[0-9]{1}" + d + "{1})(\\s*)([0-9]{1}" + f + "{2})$", "i"), new RegExp("^(" + b + "{1}" + c + "{1}?[0-9]{1}" + e + "{1})(\\s*)([0-9]{1}" + f + "{2})$", "i"), new RegExp("^(BF1)(\\s*)([0-6]{1}[ABDEFGHJLNPQRST]{1}[ABDEFGHJLNPQRSTUWZYZ]{1})$", "i"), /^(GIR)(\s*)(0AA)$/i, /^(BFPO)(\s*)([0-9]{1,4})$/i, /^(BFPO)(\s*)(c\/o\s*[0-9]{1,3})$/i, /^([A-Z]{4})(\s*)(1ZZ)$/i, /^(AI-2640)$/i], h = 0; h < g.length; h++)
                    if (g[h].test(a)) return !0;
                return !1
            }
        }
    }(jQuery);;
! function(a) {
    FormValidation.Framework.Bootstrap = function(b, c, d) {
        c = a.extend(!0, {
            button: {
                selector: '[type="submit"]',
                disabled: "disabled"
            },
            err: {
                clazz: "help-block",
                parent: "^(.*)col-(xs|sm|md|lg)-(offset-){0,1}[0-9]+(.*)$"
            },
            icon: {
                valid: null,
                invalid: null,
                validating: null,
                feedback: "form-control-feedback"
            },
            row: {
                selector: ".form-group",
                valid: "has-success",
                invalid: "has-error",
                feedback: "has-feedback"
            }
        }, c), FormValidation.Base.apply(this, [b, c, d])
    }, FormValidation.Framework.Bootstrap.prototype = a.extend({}, FormValidation.Base.prototype, {
        _fixIcon: function(a, b) {
            var c = this._namespace,
                d = a.attr("type"),
                e = a.attr("data-" + c + "-field"),
                f = this.options.fields[e].row || this.options.row.selector,
                g = a.closest(f);
            if ("checkbox" === d || "radio" === d) {
                var h = a.parent();
                h.hasClass(d) ? b.insertAfter(h) : h.parent().hasClass(d) && b.insertAfter(h.parent())
            }
            0 === g.find("label").length && b.addClass("fv-bootstrap-icon-no-label"), 0 !== g.find(".input-group").length && b.addClass("fv-bootstrap-icon-input-group").insertAfter(g.find(".input-group").eq(0))
        },
        _createTooltip: function(a, b, c) {
            var d = this._namespace,
                e = a.data(d + ".icon");
            if (e) switch (c) {
                case "popover":
                    e.css({
                        cursor: "pointer",
                        "pointer-events": "auto"
                    }).popover("destroy").popover({
                        container: "body",
                        content: b,
                        html: !0,
                        placement: "auto top",
                        trigger: "hover click"
                    });
                    break;
                case "tooltip":
                default:
                    e.css({
                        cursor: "pointer",
                        "pointer-events": "auto"
                    }).tooltip("destroy").tooltip({
                        container: "body",
                        html: !0,
                        placement: "auto top",
                        title: b
                    })
            }
        },
        _destroyTooltip: function(a, b) {
            var c = this._namespace,
                d = a.data(c + ".icon");
            if (d) switch (b) {
                case "popover":
                    d.css({
                        cursor: "",
                        "pointer-events": "none"
                    }).popover("destroy");
                    break;
                case "tooltip":
                default:
                    d.css({
                        cursor: "",
                        "pointer-events": "none"
                    }).tooltip("destroy")
            }
        },
        _hideTooltip: function(a, b) {
            var c = this._namespace,
                d = a.data(c + ".icon");
            if (d) switch (b) {
                case "popover":
                    d.popover("hide");
                    break;
                case "tooltip":
                default:
                    d.tooltip("hide")
            }
        },
        _showTooltip: function(a, b) {
            var c = this._namespace,
                d = a.data(c + ".icon");
            if (d) switch (b) {
                case "popover":
                    d.popover("show");
                    break;
                case "tooltip":
                default:
                    d.tooltip("show")
            }
        }
    }), a.fn.bootstrapValidator = function(b) {
        var c = arguments;
        return this.each(function() {
            var d = a(this),
                e = d.data("formValidation") || d.data("bootstrapValidator"),
                f = "object" == typeof b && b;
            e || (e = new FormValidation.Framework.Bootstrap(this, a.extend({}, {
                events: {
                    formInit: "init.form.bv",
                    formError: "error.form.bv",
                    formSuccess: "success.form.bv",
                    fieldAdded: "added.field.bv",
                    fieldRemoved: "removed.field.bv",
                    fieldInit: "init.field.bv",
                    fieldError: "error.field.bv",
                    fieldSuccess: "success.field.bv",
                    fieldStatus: "status.field.bv",
                    localeChanged: "changed.locale.bv",
                    validatorError: "error.validator.bv",
                    validatorSuccess: "success.validator.bv"
                }
            }, f), "bv"), d.addClass("fv-form-bootstrap").data("formValidation", e).data("bootstrapValidator", e)), "string" == typeof b && e[b].apply(e, Array.prototype.slice.call(c, 1))
        })
    }, a.fn.bootstrapValidator.Constructor = FormValidation.Framework.Bootstrap
}(jQuery);;;
(function(global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.moment = factory()
}(this, function() {
    'use strict';
    var hookCallback;

    function utils_hooks__hooks() {
        return hookCallback.apply(null, arguments);
    }

    function setHookCallback(callback) {
        hookCallback = callback;
    }

    function isArray(input) {
        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';
    }

    function isObject(input) {
        return Object.prototype.toString.call(input) === '[object Object]';
    }

    function isObjectEmpty(obj) {
        var k;
        for (k in obj) {
            return false;
        }
        return true;
    }

    function isDate(input) {
        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
    }

    function map(arr, fn) {
        var res = [],
            i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function hasOwnProp(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }

    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }
        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }
        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }
        return a;
    }

    function create_utc__createUTC(input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, true).utc();
    }

    function defaultParsingFlags() {
        return {
            empty: false,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: false,
            invalidMonth: null,
            invalidFormat: false,
            userInvalidated: false,
            iso: false,
            parsedDateParts: [],
            meridiem: null
        };
    }

    function getParsingFlags(m) {
        if (m._pf == null) {
            m._pf = defaultParsingFlags();
        }
        return m._pf;
    }
    var some;
    if (Array.prototype.some) {
        some = Array.prototype.some;
    } else {
        some = function(fun) {
            var t = Object(this);
            var len = t.length >>> 0;
            for (var i = 0; i < len; i++) {
                if (i in t && fun.call(this, t[i], i, t)) {
                    return true;
                }
            }
            return false;
        };
    }

    function valid__isValid(m) {
        if (m._isValid == null) {
            var flags = getParsingFlags(m);
            var parsedParts = some.call(flags.parsedDateParts, function(i) {
                return i != null;
            });
            m._isValid = !isNaN(m._d.getTime()) && flags.overflow < 0 && !flags.empty && !flags.invalidMonth && !flags.invalidWeekday && !flags.nullInput && !flags.invalidFormat && !flags.userInvalidated && (!flags.meridiem || (flags.meridiem && parsedParts));
            if (m._strict) {
                m._isValid = m._isValid && flags.charsLeftOver === 0 && flags.unusedTokens.length === 0 && flags.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function valid__createInvalid(flags) {
        var m = create_utc__createUTC(NaN);
        if (flags != null) {
            extend(getParsingFlags(m), flags);
        } else {
            getParsingFlags(m).userInvalidated = true;
        }
        return m;
    }

    function isUndefined(input) {
        return input === void 0;
    }
    var momentProperties = utils_hooks__hooks.momentProperties = [];

    function copyConfig(to, from) {
        var i, prop, val;
        if (!isUndefined(from._isAMomentObject)) {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (!isUndefined(from._i)) {
            to._i = from._i;
        }
        if (!isUndefined(from._f)) {
            to._f = from._f;
        }
        if (!isUndefined(from._l)) {
            to._l = from._l;
        }
        if (!isUndefined(from._strict)) {
            to._strict = from._strict;
        }
        if (!isUndefined(from._tzm)) {
            to._tzm = from._tzm;
        }
        if (!isUndefined(from._isUTC)) {
            to._isUTC = from._isUTC;
        }
        if (!isUndefined(from._offset)) {
            to._offset = from._offset;
        }
        if (!isUndefined(from._pf)) {
            to._pf = getParsingFlags(from);
        }
        if (!isUndefined(from._locale)) {
            to._locale = from._locale;
        }
        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (!isUndefined(val)) {
                    to[prop] = val;
                }
            }
        }
        return to;
    }
    var updateInProgress = false;

    function Moment(config) {
        copyConfig(this, config);
        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
        if (updateInProgress === false) {
            updateInProgress = true;
            utils_hooks__hooks.updateOffset(this);
            updateInProgress = false;
        }
    }

    function isMoment(obj) {
        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
    }

    function absFloor(number) {
        if (number < 0) {
            return Math.ceil(number) || 0;
        } else {
            return Math.floor(number);
        }
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;
        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            value = absFloor(coercedNumber);
        }
        return value;
    }

    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) || (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function warn(msg) {
        if (utils_hooks__hooks.suppressDeprecationWarnings === false && (typeof console !== 'undefined') && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;
        return extend(function() {
            if (utils_hooks__hooks.deprecationHandler != null) {
                utils_hooks__hooks.deprecationHandler(null, msg);
            }
            if (firstTime) {
                warn(msg + '\nArguments: ' + Array.prototype.slice.call(arguments).join(', ') + '\n' + (new Error()).stack);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }
    var deprecations = {};

    function deprecateSimple(name, msg) {
        if (utils_hooks__hooks.deprecationHandler != null) {
            utils_hooks__hooks.deprecationHandler(name, msg);
        }
        if (!deprecations[name]) {
            warn(msg);
            deprecations[name] = true;
        }
    }
    utils_hooks__hooks.suppressDeprecationWarnings = false;
    utils_hooks__hooks.deprecationHandler = null;

    function isFunction(input) {
        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
    }

    function locale_set__set(config) {
        var prop, i;
        for (i in config) {
            prop = config[i];
            if (isFunction(prop)) {
                this[i] = prop;
            } else {
                this['_' + i] = prop;
            }
        }
        this._config = config;
        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\d{1,2}/).source);
    }

    function mergeConfigs(parentConfig, childConfig) {
        var res = extend({}, parentConfig),
            prop;
        for (prop in childConfig) {
            if (hasOwnProp(childConfig, prop)) {
                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
                    res[prop] = {};
                    extend(res[prop], parentConfig[prop]);
                    extend(res[prop], childConfig[prop]);
                } else if (childConfig[prop] != null) {
                    res[prop] = childConfig[prop];
                } else {
                    delete res[prop];
                }
            }
        }
        for (prop in parentConfig) {
            if (hasOwnProp(parentConfig, prop) && !hasOwnProp(childConfig, prop) && isObject(parentConfig[prop])) {
                res[prop] = extend({}, res[prop]);
            }
        }
        return res;
    }

    function Locale(config) {
        if (config != null) {
            this.set(config);
        }
    }
    var keys;
    if (Object.keys) {
        keys = Object.keys;
    } else {
        keys = function(obj) {
            var i, res = [];
            for (i in obj) {
                if (hasOwnProp(obj, i)) {
                    res.push(i);
                }
            }
            return res;
        };
    }
    var defaultCalendar = {
        sameDay: '[Today at] LT',
        nextDay: '[Tomorrow at] LT',
        nextWeek: 'dddd [at] LT',
        lastDay: '[Yesterday at] LT',
        lastWeek: '[Last] dddd [at] LT',
        sameElse: 'L'
    };

    function locale_calendar__calendar(key, mom, now) {
        var output = this._calendar[key] || this._calendar['sameElse'];
        return isFunction(output) ? output.call(mom, now) : output;
    }
    var defaultLongDateFormat = {
        LTS: 'h:mm:ss A',
        LT: 'h:mm A',
        L: 'MM/DD/YYYY',
        LL: 'MMMM D, YYYY',
        LLL: 'MMMM D, YYYY h:mm A',
        LLLL: 'dddd, MMMM D, YYYY h:mm A'
    };

    function longDateFormat(key) {
        var format = this._longDateFormat[key],
            formatUpper = this._longDateFormat[key.toUpperCase()];
        if (format || !formatUpper) {
            return format;
        }
        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function(val) {
            return val.slice(1);
        });
        return this._longDateFormat[key];
    }
    var defaultInvalidDate = 'Invalid date';

    function invalidDate() {
        return this._invalidDate;
    }
    var defaultOrdinal = '%d';
    var defaultOrdinalParse = /\d{1,2}/;

    function ordinal(number) {
        return this._ordinal.replace('%d', number);
    }
    var defaultRelativeTime = {
        future: 'in %s',
        past: '%s ago',
        s: 'a few seconds',
        m: 'a minute',
        mm: '%d minutes',
        h: 'an hour',
        hh: '%d hours',
        d: 'a day',
        dd: '%d days',
        M: 'a month',
        MM: '%d months',
        y: 'a year',
        yy: '%d years'
    };

    function relative__relativeTime(number, withoutSuffix, string, isFuture) {
        var output = this._relativeTime[string];
        return (isFunction(output)) ? output(number, withoutSuffix, string, isFuture) : output.replace(/%d/i, number);
    }

    function pastFuture(diff, output) {
        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
        return isFunction(format) ? format(output) : format.replace(/%s/i, output);
    }
    var aliases = {};

    function addUnitAlias(unit, shorthand) {
        var lowerCase = unit.toLowerCase();
        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
    }

    function normalizeUnits(units) {
        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp, prop;
        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }
        return normalizedInput;
    }
    var priorities = {};

    function addUnitPriority(unit, priority) {
        priorities[unit] = priority;
    }

    function getPrioritizedUnits(unitsObj) {
        var units = [];
        for (var u in unitsObj) {
            units.push({
                unit: u,
                priority: priorities[u]
            });
        }
        units.sort(function(a, b) {
            return a.priority - b.priority;
        });
        return units;
    }

    function makeGetSet(unit, keepTime) {
        return function(value) {
            if (value != null) {
                get_set__set(this, unit, value);
                utils_hooks__hooks.updateOffset(this, keepTime);
                return this;
            } else {
                return get_set__get(this, unit);
            }
        };
    }

    function get_set__get(mom, unit) {
        return mom.isValid() ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
    }

    function get_set__set(mom, unit, value) {
        if (mom.isValid()) {
            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }

    function stringGet(units) {
        units = normalizeUnits(units);
        if (isFunction(this[units])) {
            return this[units]();
        }
        return this;
    }

    function stringSet(units, value) {
        if (typeof units === 'object') {
            units = normalizeObjectUnits(units);
            var prioritized = getPrioritizedUnits(units);
            for (var i = 0; i < prioritized.length; i++) {
                this[prioritized[i].unit](units[prioritized[i].unit]);
            }
        } else {
            units = normalizeUnits(units);
            if (isFunction(this[units])) {
                return this[units](value);
            }
        }
        return this;
    }

    function zeroFill(number, targetLength, forceSign) {
        var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
        return (sign ? (forceSign ? '+' : '') : '-') +
            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
    }
    var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
    var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;
    var formatFunctions = {};
    var formatTokenFunctions = {};

    function addFormatToken(token, padded, ordinal, callback) {
        var func = callback;
        if (typeof callback === 'string') {
            func = function() {
                return this[callback]();
            };
        }
        if (token) {
            formatTokenFunctions[token] = func;
        }
        if (padded) {
            formatTokenFunctions[padded[0]] = function() {
                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            };
        }
        if (ordinal) {
            formatTokenFunctions[ordinal] = function() {
                return this.localeData().ordinal(func.apply(this, arguments), token);
            };
        }
    }

    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens),
            i, length;
        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }
        return function(mom) {
            var output = '',
                i;
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }
        format = expandFormat(format, m.localeData());
        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);
        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }
        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }
        return format;
    }
    var match1 = /\d/;
    var match2 = /\d\d/;
    var match3 = /\d{3}/;
    var match4 = /\d{4}/;
    var match6 = /[+-]?\d{6}/;
    var match1to2 = /\d\d?/;
    var match3to4 = /\d\d\d\d?/;
    var match5to6 = /\d\d\d\d\d\d?/;
    var match1to3 = /\d{1,3}/;
    var match1to4 = /\d{1,4}/;
    var match1to6 = /[+-]?\d{1,6}/;
    var matchUnsigned = /\d+/;
    var matchSigned = /[+-]?\d+/;
    var matchOffset = /Z|[+-]\d\d:?\d\d/gi;
    var matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi;
    var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/;
    var matchWord = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;
    var regexes = {};

    function addRegexToken(token, regex, strictRegex) {
        regexes[token] = isFunction(regex) ? regex : function(isStrict, localeData) {
            return (isStrict && strictRegex) ? strictRegex : regex;
        };
    }

    function getParseRegexForToken(token, config) {
        if (!hasOwnProp(regexes, token)) {
            return new RegExp(unescapeFormat(token));
        }
        return regexes[token](config._strict, config._locale);
    }

    function unescapeFormat(s) {
        return regexEscape(s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        }));
    }

    function regexEscape(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }
    var tokens = {};

    function addParseToken(token, callback) {
        var i, func = callback;
        if (typeof token === 'string') {
            token = [token];
        }
        if (typeof callback === 'number') {
            func = function(input, array) {
                array[callback] = toInt(input);
            };
        }
        for (i = 0; i < token.length; i++) {
            tokens[token[i]] = func;
        }
    }

    function addWeekParseToken(token, callback) {
        addParseToken(token, function(input, array, config, token) {
            config._w = config._w || {};
            callback(input, config._w, config, token);
        });
    }

    function addTimeToArrayFromToken(token, input, config) {
        if (input != null && hasOwnProp(tokens, token)) {
            tokens[token](input, config._a, config, token);
        }
    }
    var YEAR = 0;
    var MONTH = 1;
    var DATE = 2;
    var HOUR = 3;
    var MINUTE = 4;
    var SECOND = 5;
    var MILLISECOND = 6;
    var WEEK = 7;
    var WEEKDAY = 8;
    var indexOf;
    if (Array.prototype.indexOf) {
        indexOf = Array.prototype.indexOf;
    } else {
        indexOf = function(o) {
            var i;
            for (i = 0; i < this.length; ++i) {
                if (this[i] === o) {
                    return i;
                }
            }
            return -1;
        };
    }

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }
    addFormatToken('M', ['MM', 2], 'Mo', function() {
        return this.month() + 1;
    });
    addFormatToken('MMM', 0, 0, function(format) {
        return this.localeData().monthsShort(this, format);
    });
    addFormatToken('MMMM', 0, 0, function(format) {
        return this.localeData().months(this, format);
    });
    addUnitAlias('month', 'M');
    addUnitPriority('month', 8);
    addRegexToken('M', match1to2);
    addRegexToken('MM', match1to2, match2);
    addRegexToken('MMM', function(isStrict, locale) {
        return locale.monthsShortRegex(isStrict);
    });
    addRegexToken('MMMM', function(isStrict, locale) {
        return locale.monthsRegex(isStrict);
    });
    addParseToken(['M', 'MM'], function(input, array) {
        array[MONTH] = toInt(input) - 1;
    });
    addParseToken(['MMM', 'MMMM'], function(input, array, config, token) {
        var month = config._locale.monthsParse(input, token, config._strict);
        if (month != null) {
            array[MONTH] = month;
        } else {
            getParsingFlags(config).invalidMonth = input;
        }
    });
    var MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;
    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');

    function localeMonths(m, format) {
        return isArray(this._months) ? this._months[m.month()] : this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];
    }
    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');

    function localeMonthsShort(m, format) {
        return isArray(this._monthsShort) ? this._monthsShort[m.month()] : this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    function units_month__handleStrictParse(monthName, format, strict) {
        var i, ii, mom, llc = monthName.toLocaleLowerCase();
        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
            for (i = 0; i < 12; ++i) {
                mom = create_utc__createUTC([2000, i]);
                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();
                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
            }
        }
        if (strict) {
            if (format === 'MMM') {
                ii = indexOf.call(this._shortMonthsParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._longMonthsParse, llc);
                return ii !== -1 ? ii : null;
            }
        } else {
            if (format === 'MMM') {
                ii = indexOf.call(this._shortMonthsParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._longMonthsParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._longMonthsParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortMonthsParse, llc);
                return ii !== -1 ? ii : null;
            }
        }
    }

    function localeMonthsParse(monthName, format, strict) {
        var i, mom, regex;
        if (this._monthsParseExact) {
            return units_month__handleStrictParse.call(this, monthName, format, strict);
        }
        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
        }
        for (i = 0; i < 12; i++) {
            mom = create_utc__createUTC([2000, i]);
            if (strict && !this._longMonthsParse[i]) {
                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
            }
            if (!strict && !this._monthsParse[i]) {
                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                return i;
            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                return i;
            } else if (!strict && this._monthsParse[i].test(monthName)) {
                return i;
            }
        }
    }

    function setMonth(mom, value) {
        var dayOfMonth;
        if (!mom.isValid()) {
            return mom;
        }
        if (typeof value === 'string') {
            if (/^\d+$/.test(value)) {
                value = toInt(value);
            } else {
                value = mom.localeData().monthsParse(value);
                if (typeof value !== 'number') {
                    return mom;
                }
            }
        }
        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function getSetMonth(value) {
        if (value != null) {
            setMonth(this, value);
            utils_hooks__hooks.updateOffset(this, true);
            return this;
        } else {
            return get_set__get(this, 'Month');
        }
    }

    function getDaysInMonth() {
        return daysInMonth(this.year(), this.month());
    }
    var defaultMonthsShortRegex = matchWord;

    function monthsShortRegex(isStrict) {
        if (this._monthsParseExact) {
            if (!hasOwnProp(this, '_monthsRegex')) {
                computeMonthsParse.call(this);
            }
            if (isStrict) {
                return this._monthsShortStrictRegex;
            } else {
                return this._monthsShortRegex;
            }
        } else {
            if (!hasOwnProp(this, '_monthsShortRegex')) {
                this._monthsShortRegex = defaultMonthsShortRegex;
            }
            return this._monthsShortStrictRegex && isStrict ? this._monthsShortStrictRegex : this._monthsShortRegex;
        }
    }
    var defaultMonthsRegex = matchWord;

    function monthsRegex(isStrict) {
        if (this._monthsParseExact) {
            if (!hasOwnProp(this, '_monthsRegex')) {
                computeMonthsParse.call(this);
            }
            if (isStrict) {
                return this._monthsStrictRegex;
            } else {
                return this._monthsRegex;
            }
        } else {
            if (!hasOwnProp(this, '_monthsRegex')) {
                this._monthsRegex = defaultMonthsRegex;
            }
            return this._monthsStrictRegex && isStrict ? this._monthsStrictRegex : this._monthsRegex;
        }
    }

    function computeMonthsParse() {
        function cmpLenRev(a, b) {
            return b.length - a.length;
        }
        var shortPieces = [],
            longPieces = [],
            mixedPieces = [],
            i, mom;
        for (i = 0; i < 12; i++) {
            mom = create_utc__createUTC([2000, i]);
            shortPieces.push(this.monthsShort(mom, ''));
            longPieces.push(this.months(mom, ''));
            mixedPieces.push(this.months(mom, ''));
            mixedPieces.push(this.monthsShort(mom, ''));
        }
        shortPieces.sort(cmpLenRev);
        longPieces.sort(cmpLenRev);
        mixedPieces.sort(cmpLenRev);
        for (i = 0; i < 12; i++) {
            shortPieces[i] = regexEscape(shortPieces[i]);
            longPieces[i] = regexEscape(longPieces[i]);
        }
        for (i = 0; i < 24; i++) {
            mixedPieces[i] = regexEscape(mixedPieces[i]);
        }
        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
        this._monthsShortRegex = this._monthsRegex;
        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
    }
    addFormatToken('Y', 0, 0, function() {
        var y = this.year();
        return y <= 9999 ? '' + y : '+' + y;
    });
    addFormatToken(0, ['YY', 2], 0, function() {
        return this.year() % 100;
    });
    addFormatToken(0, ['YYYY', 4], 0, 'year');
    addFormatToken(0, ['YYYYY', 5], 0, 'year');
    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');
    addUnitAlias('year', 'y');
    addUnitPriority('year', 1);
    addRegexToken('Y', matchSigned);
    addRegexToken('YY', match1to2, match2);
    addRegexToken('YYYY', match1to4, match4);
    addRegexToken('YYYYY', match1to6, match6);
    addRegexToken('YYYYYY', match1to6, match6);
    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
    addParseToken('YYYY', function(input, array) {
        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);
    });
    addParseToken('YY', function(input, array) {
        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);
    });
    addParseToken('Y', function(input, array) {
        array[YEAR] = parseInt(input, 10);
    });

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }
    utils_hooks__hooks.parseTwoDigitYear = function(input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };
    var getSetYear = makeGetSet('FullYear', true);

    function getIsLeapYear() {
        return isLeapYear(this.year());
    }

    function createDate(y, m, d, h, M, s, ms) {
        var date = new Date(y, m, d, h, M, s, ms);
        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {
            date.setFullYear(y);
        }
        return date;
    }

    function createUTCDate(y) {
        var date = new Date(Date.UTC.apply(null, arguments));
        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    function firstWeekOffset(year, dow, doy) {
        var
            fwd = 7 + dow - doy,
            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;
        return -fwdlw + fwd - 1;
    }

    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
        var localWeekday = (7 + weekday - dow) % 7,
            weekOffset = firstWeekOffset(year, dow, doy),
            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
            resYear, resDayOfYear;
        if (dayOfYear <= 0) {
            resYear = year - 1;
            resDayOfYear = daysInYear(resYear) + dayOfYear;
        } else if (dayOfYear > daysInYear(year)) {
            resYear = year + 1;
            resDayOfYear = dayOfYear - daysInYear(year);
        } else {
            resYear = year;
            resDayOfYear = dayOfYear;
        }
        return {
            year: resYear,
            dayOfYear: resDayOfYear
        };
    }

    function weekOfYear(mom, dow, doy) {
        var weekOffset = firstWeekOffset(mom.year(), dow, doy),
            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
            resWeek, resYear;
        if (week < 1) {
            resYear = mom.year() - 1;
            resWeek = week + weeksInYear(resYear, dow, doy);
        } else if (week > weeksInYear(mom.year(), dow, doy)) {
            resWeek = week - weeksInYear(mom.year(), dow, doy);
            resYear = mom.year() + 1;
        } else {
            resYear = mom.year();
            resWeek = week;
        }
        return {
            week: resWeek,
            year: resYear
        };
    }

    function weeksInYear(year, dow, doy) {
        var weekOffset = firstWeekOffset(year, dow, doy),
            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
    }
    addFormatToken('w', ['ww', 2], 'wo', 'week');
    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');
    addUnitAlias('week', 'w');
    addUnitAlias('isoWeek', 'W');
    addUnitPriority('week', 5);
    addUnitPriority('isoWeek', 5);
    addRegexToken('w', match1to2);
    addRegexToken('ww', match1to2, match2);
    addRegexToken('W', match1to2);
    addRegexToken('WW', match1to2, match2);
    addWeekParseToken(['w', 'ww', 'W', 'WW'], function(input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    });

    function localeWeek(mom) {
        return weekOfYear(mom, this._week.dow, this._week.doy).week;
    }
    var defaultLocaleWeek = {
        dow: 0,
        doy: 6
    };

    function localeFirstDayOfWeek() {
        return this._week.dow;
    }

    function localeFirstDayOfYear() {
        return this._week.doy;
    }

    function getSetWeek(input) {
        var week = this.localeData().week(this);
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    function getSetISOWeek(input) {
        var week = weekOfYear(this, 1, 4).week;
        return input == null ? week : this.add((input - week) * 7, 'd');
    }
    addFormatToken('d', 0, 'do', 'day');
    addFormatToken('dd', 0, 0, function(format) {
        return this.localeData().weekdaysMin(this, format);
    });
    addFormatToken('ddd', 0, 0, function(format) {
        return this.localeData().weekdaysShort(this, format);
    });
    addFormatToken('dddd', 0, 0, function(format) {
        return this.localeData().weekdays(this, format);
    });
    addFormatToken('e', 0, 0, 'weekday');
    addFormatToken('E', 0, 0, 'isoWeekday');
    addUnitAlias('day', 'd');
    addUnitAlias('weekday', 'e');
    addUnitAlias('isoWeekday', 'E');
    addUnitPriority('day', 11);
    addUnitPriority('weekday', 11);
    addUnitPriority('isoWeekday', 11);
    addRegexToken('d', match1to2);
    addRegexToken('e', match1to2);
    addRegexToken('E', match1to2);
    addRegexToken('dd', function(isStrict, locale) {
        return locale.weekdaysMinRegex(isStrict);
    });
    addRegexToken('ddd', function(isStrict, locale) {
        return locale.weekdaysShortRegex(isStrict);
    });
    addRegexToken('dddd', function(isStrict, locale) {
        return locale.weekdaysRegex(isStrict);
    });
    addWeekParseToken(['dd', 'ddd', 'dddd'], function(input, week, config, token) {
        var weekday = config._locale.weekdaysParse(input, token, config._strict);
        if (weekday != null) {
            week.d = weekday;
        } else {
            getParsingFlags(config).invalidWeekday = input;
        }
    });
    addWeekParseToken(['d', 'e', 'E'], function(input, week, config, token) {
        week[token] = toInt(input);
    });

    function parseWeekday(input, locale) {
        if (typeof input !== 'string') {
            return input;
        }
        if (!isNaN(input)) {
            return parseInt(input, 10);
        }
        input = locale.weekdaysParse(input);
        if (typeof input === 'number') {
            return input;
        }
        return null;
    }

    function parseIsoWeekday(input, locale) {
        if (typeof input === 'string') {
            return locale.weekdaysParse(input) % 7 || 7;
        }
        return isNaN(input) ? null : input;
    }
    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');

    function localeWeekdays(m, format) {
        return isArray(this._weekdays) ? this._weekdays[m.day()] : this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];
    }
    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');

    function localeWeekdaysShort(m) {
        return this._weekdaysShort[m.day()];
    }
    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');

    function localeWeekdaysMin(m) {
        return this._weekdaysMin[m.day()];
    }

    function day_of_week__handleStrictParse(weekdayName, format, strict) {
        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();
        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._minWeekdaysParse = [];
            for (i = 0; i < 7; ++i) {
                mom = create_utc__createUTC([2000, 1]).day(i);
                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();
                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();
                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
            }
        }
        if (strict) {
            if (format === 'dddd') {
                ii = indexOf.call(this._weekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else if (format === 'ddd') {
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            }
        } else {
            if (format === 'dddd') {
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else if (format === 'ddd') {
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._minWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            }
        }
    }

    function localeWeekdaysParse(weekdayName, format, strict) {
        var i, mom, regex;
        if (this._weekdaysParseExact) {
            return day_of_week__handleStrictParse.call(this, weekdayName, format, strict);
        }
        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._minWeekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._fullWeekdaysParse = [];
        }
        for (i = 0; i < 7; i++) {
            mom = create_utc__createUTC([2000, 1]).day(i);
            if (strict && !this._fullWeekdaysParse[i]) {
                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\.?') + '$', 'i');
                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\.?') + '$', 'i');
                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\.?') + '$', 'i');
            }
            if (!this._weekdaysParse[i]) {
                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
                return i;
            }
        }
    }

    function getSetDayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (input != null) {
            input = parseWeekday(input, this.localeData());
            return this.add(input - day, 'd');
        } else {
            return day;
        }
    }

    function getSetLocaleDayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return input == null ? weekday : this.add(input - weekday, 'd');
    }

    function getSetISODayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        if (input != null) {
            var weekday = parseIsoWeekday(input, this.localeData());
            return this.day(this.day() % 7 ? weekday : weekday - 7);
        } else {
            return this.day() || 7;
        }
    }
    var defaultWeekdaysRegex = matchWord;

    function weekdaysRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysStrictRegex;
            } else {
                return this._weekdaysRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                this._weekdaysRegex = defaultWeekdaysRegex;
            }
            return this._weekdaysStrictRegex && isStrict ? this._weekdaysStrictRegex : this._weekdaysRegex;
        }
    }
    var defaultWeekdaysShortRegex = matchWord;

    function weekdaysShortRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysShortStrictRegex;
            } else {
                return this._weekdaysShortRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysShortRegex')) {
                this._weekdaysShortRegex = defaultWeekdaysShortRegex;
            }
            return this._weekdaysShortStrictRegex && isStrict ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
        }
    }
    var defaultWeekdaysMinRegex = matchWord;

    function weekdaysMinRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysMinStrictRegex;
            } else {
                return this._weekdaysMinRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysMinRegex')) {
                this._weekdaysMinRegex = defaultWeekdaysMinRegex;
            }
            return this._weekdaysMinStrictRegex && isStrict ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
        }
    }

    function computeWeekdaysParse() {
        function cmpLenRev(a, b) {
            return b.length - a.length;
        }
        var minPieces = [],
            shortPieces = [],
            longPieces = [],
            mixedPieces = [],
            i, mom, minp, shortp, longp;
        for (i = 0; i < 7; i++) {
            mom = create_utc__createUTC([2000, 1]).day(i);
            minp = this.weekdaysMin(mom, '');
            shortp = this.weekdaysShort(mom, '');
            longp = this.weekdays(mom, '');
            minPieces.push(minp);
            shortPieces.push(shortp);
            longPieces.push(longp);
            mixedPieces.push(minp);
            mixedPieces.push(shortp);
            mixedPieces.push(longp);
        }
        minPieces.sort(cmpLenRev);
        shortPieces.sort(cmpLenRev);
        longPieces.sort(cmpLenRev);
        mixedPieces.sort(cmpLenRev);
        for (i = 0; i < 7; i++) {
            shortPieces[i] = regexEscape(shortPieces[i]);
            longPieces[i] = regexEscape(longPieces[i]);
            mixedPieces[i] = regexEscape(mixedPieces[i]);
        }
        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
        this._weekdaysShortRegex = this._weekdaysRegex;
        this._weekdaysMinRegex = this._weekdaysRegex;
        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');
    }

    function hFormat() {
        return this.hours() % 12 || 12;
    }

    function kFormat() {
        return this.hours() || 24;
    }
    addFormatToken('H', ['HH', 2], 0, 'hour');
    addFormatToken('h', ['hh', 2], 0, hFormat);
    addFormatToken('k', ['kk', 2], 0, kFormat);
    addFormatToken('hmm', 0, 0, function() {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
    });
    addFormatToken('hmmss', 0, 0, function() {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });
    addFormatToken('Hmm', 0, 0, function() {
        return '' + this.hours() + zeroFill(this.minutes(), 2);
    });
    addFormatToken('Hmmss', 0, 0, function() {
        return '' + this.hours() + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    function meridiem(token, lowercase) {
        addFormatToken(token, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
        });
    }
    meridiem('a', true);
    meridiem('A', false);
    addUnitAlias('hour', 'h');
    addUnitPriority('hour', 13);

    function matchMeridiem(isStrict, locale) {
        return locale._meridiemParse;
    }
    addRegexToken('a', matchMeridiem);
    addRegexToken('A', matchMeridiem);
    addRegexToken('H', match1to2);
    addRegexToken('h', match1to2);
    addRegexToken('HH', match1to2, match2);
    addRegexToken('hh', match1to2, match2);
    addRegexToken('hmm', match3to4);
    addRegexToken('hmmss', match5to6);
    addRegexToken('Hmm', match3to4);
    addRegexToken('Hmmss', match5to6);
    addParseToken(['H', 'HH'], HOUR);
    addParseToken(['a', 'A'], function(input, array, config) {
        config._isPm = config._locale.isPM(input);
        config._meridiem = input;
    });
    addParseToken(['h', 'hh'], function(input, array, config) {
        array[HOUR] = toInt(input);
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmm', function(input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmmss', function(input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('Hmm', function(input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
    });
    addParseToken('Hmmss', function(input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
    });

    function localeIsPM(input) {
        return ((input + '').toLowerCase().charAt(0) === 'p');
    }
    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;

    function localeMeridiem(hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    }
    var getSetHour = makeGetSet('Hours', true);
    var baseConfig = {
        calendar: defaultCalendar,
        longDateFormat: defaultLongDateFormat,
        invalidDate: defaultInvalidDate,
        ordinal: defaultOrdinal,
        ordinalParse: defaultOrdinalParse,
        relativeTime: defaultRelativeTime,
        months: defaultLocaleMonths,
        monthsShort: defaultLocaleMonthsShort,
        week: defaultLocaleWeek,
        weekdays: defaultLocaleWeekdays,
        weekdaysMin: defaultLocaleWeekdaysMin,
        weekdaysShort: defaultLocaleWeekdaysShort,
        meridiemParse: defaultLocaleMeridiemParse
    };
    var locales = {};
    var globalLocale;

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    function chooseLocale(names) {
        var i = 0,
            j, next, locale, split;
        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        if (!locales[name] && (typeof module !== 'undefined') && module && module.exports) {
            try {
                oldLocale = globalLocale._abbr;
                require('./locale/' + name);
                locale_locales__getSetGlobalLocale(oldLocale);
            } catch (e) {}
        }
        return locales[name];
    }

    function locale_locales__getSetGlobalLocale(key, values) {
        var data;
        if (key) {
            if (isUndefined(values)) {
                data = locale_locales__getLocale(key);
            } else {
                data = defineLocale(key, values);
            }
            if (data) {
                globalLocale = data;
            }
        }
        return globalLocale._abbr;
    }

    function defineLocale(name, config) {
        if (config !== null) {
            var parentConfig = baseConfig;
            config.abbr = name;
            if (locales[name] != null) {
                deprecateSimple('defineLocaleOverride', 'use moment.updateLocale(localeName, config) to change ' + 'an existing locale. moment.defineLocale(localeName, ' + 'config) should only be used for creating a new locale ' + 'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');
                parentConfig = locales[name]._config;
            } else if (config.parentLocale != null) {
                if (locales[config.parentLocale] != null) {
                    parentConfig = locales[config.parentLocale]._config;
                } else {
                    deprecateSimple('parentLocaleUndefined', 'specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/');
                }
            }
            locales[name] = new Locale(mergeConfigs(parentConfig, config));
            locale_locales__getSetGlobalLocale(name);
            return locales[name];
        } else {
            delete locales[name];
            return null;
        }
    }

    function updateLocale(name, config) {
        if (config != null) {
            var locale, parentConfig = baseConfig;
            if (locales[name] != null) {
                parentConfig = locales[name]._config;
            }
            config = mergeConfigs(parentConfig, config);
            locale = new Locale(config);
            locale.parentLocale = locales[name];
            locales[name] = locale;
            locale_locales__getSetGlobalLocale(name);
        } else {
            if (locales[name] != null) {
                if (locales[name].parentLocale != null) {
                    locales[name] = locales[name].parentLocale;
                } else if (locales[name] != null) {
                    delete locales[name];
                }
            }
        }
        return locales[name];
    }

    function locale_locales__getLocale(key) {
        var locale;
        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }
        if (!key) {
            return globalLocale;
        }
        if (!isArray(key)) {
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }
        return chooseLocale(key);
    }

    function locale_locales__listLocales() {
        return keys(locales);
    }

    function checkOverflow(m) {
        var overflow;
        var a = m._a;
        if (a && getParsingFlags(m).overflow === -2) {
            overflow = a[MONTH] < 0 || a[MONTH] > 11 ? MONTH : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH]) ? DATE : a[HOUR] < 0 || a[HOUR] > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR : a[MINUTE] < 0 || a[MINUTE] > 59 ? MINUTE : a[SECOND] < 0 || a[SECOND] > 59 ? SECOND : a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND : -1;
            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }
            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
                overflow = WEEK;
            }
            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
                overflow = WEEKDAY;
            }
            getParsingFlags(m).overflow = overflow;
        }
        return m;
    }
    var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
    var basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
    var tzRegex = /Z|[+-]\d\d(?::?\d\d)?/;
    var isoDates = [
        ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
        ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
        ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
        ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
        ['YYYY-DDD', /\d{4}-\d{3}/],
        ['YYYY-MM', /\d{4}-\d\d/, false],
        ['YYYYYYMMDD', /[+-]\d{10}/],
        ['YYYYMMDD', /\d{8}/],
        ['GGGG[W]WWE', /\d{4}W\d{3}/],
        ['GGGG[W]WW', /\d{4}W\d{2}/, false],
        ['YYYYDDD', /\d{7}/]
    ];
    var isoTimes = [
        ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
        ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
        ['HH:mm:ss', /\d\d:\d\d:\d\d/],
        ['HH:mm', /\d\d:\d\d/],
        ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
        ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
        ['HHmmss', /\d\d\d\d\d\d/],
        ['HHmm', /\d\d\d\d/],
        ['HH', /\d\d/]
    ];
    var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

    function configFromISO(config) {
        var i, l, string = config._i,
            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
            allowTime, dateFormat, timeFormat, tzFormat;
        if (match) {
            getParsingFlags(config).iso = true;
            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(match[1])) {
                    dateFormat = isoDates[i][0];
                    allowTime = isoDates[i][2] !== false;
                    break;
                }
            }
            if (dateFormat == null) {
                config._isValid = false;
                return;
            }
            if (match[3]) {
                for (i = 0, l = isoTimes.length; i < l; i++) {
                    if (isoTimes[i][1].exec(match[3])) {
                        timeFormat = (match[2] || ' ') + isoTimes[i][0];
                        break;
                    }
                }
                if (timeFormat == null) {
                    config._isValid = false;
                    return;
                }
            }
            if (!allowTime && timeFormat != null) {
                config._isValid = false;
                return;
            }
            if (match[4]) {
                if (tzRegex.exec(match[4])) {
                    tzFormat = 'Z';
                } else {
                    config._isValid = false;
                    return;
                }
            }
            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
            configFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    function configFromString(config) {
        var matched = aspNetJsonRegex.exec(config._i);
        if (matched !== null) {
            config._d = new Date(+matched[1]);
            return;
        }
        configFromISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }
    utils_hooks__hooks.createFromInputFallback = deprecate('moment construction falls back to js Date. This is ' + 'discouraged and will be removed in upcoming major ' + 'release. Please refer to ' + 'http://momentjs.com/guides/#/warnings/js-date/ for more info.', function(config) {
        config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
    });

    function defaults(a, b, c) {
        if (a != null) {
            return a;
        }
        if (b != null) {
            return b;
        }
        return c;
    }

    function currentDateArray(config) {
        var nowValue = new Date(utils_hooks__hooks.now());
        if (config._useUTC) {
            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
        }
        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
    }

    function configFromArray(config) {
        var i, date, input = [],
            currentDate, yearToUse;
        if (config._d) {
            return;
        }
        currentDate = currentDateArray(config);
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }
        if (config._dayOfYear) {
            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);
            if (config._dayOfYear > daysInYear(yearToUse)) {
                getParsingFlags(config)._overflowDayOfYear = true;
            }
            date = createUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }
        if (config._a[HOUR] === 24 && config._a[MINUTE] === 0 && config._a[SECOND] === 0 && config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }
        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }
        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;
        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;
            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);
            week = defaults(w.W, 1);
            weekday = defaults(w.E, 1);
            if (weekday < 1 || weekday > 7) {
                weekdayOverflow = true;
            }
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;
            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);
            week = defaults(w.w, 1);
            if (w.d != null) {
                weekday = w.d;
                if (weekday < 0 || weekday > 6) {
                    weekdayOverflow = true;
                }
            } else if (w.e != null) {
                weekday = w.e + dow;
                if (w.e < 0 || w.e > 6) {
                    weekdayOverflow = true;
                }
            } else {
                weekday = dow;
            }
        }
        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
            getParsingFlags(config)._overflowWeeks = true;
        } else if (weekdayOverflow != null) {
            getParsingFlags(config)._overflowWeekday = true;
        } else {
            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
            config._a[YEAR] = temp.year;
            config._dayOfYear = temp.dayOfYear;
        }
    }
    utils_hooks__hooks.ISO_8601 = function() {};

    function configFromStringAndFormat(config) {
        if (config._f === utils_hooks__hooks.ISO_8601) {
            configFromISO(config);
            return;
        }
        config._a = [];
        getParsingFlags(config).empty = true;
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped, stringLength = string.length,
            totalParsedInputLength = 0;
        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];
        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    getParsingFlags(config).unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    getParsingFlags(config).empty = false;
                } else {
                    getParsingFlags(config).unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            } else if (config._strict && !parsedInput) {
                getParsingFlags(config).unusedTokens.push(token);
            }
        }
        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            getParsingFlags(config).unusedInput.push(string);
        }
        if (config._a[HOUR] <= 12 && getParsingFlags(config).bigHour === true && config._a[HOUR] > 0) {
            getParsingFlags(config).bigHour = undefined;
        }
        getParsingFlags(config).parsedDateParts = config._a.slice(0);
        getParsingFlags(config).meridiem = config._meridiem;
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);
        configFromArray(config);
        checkOverflow(config);
    }

    function meridiemFixWrap(locale, hour, meridiem) {
        var isPm;
        if (meridiem == null) {
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            return hour;
        }
    }

    function configFromStringAndArray(config) {
        var tempConfig, bestMoment, scoreToBeat, i, currentScore;
        if (config._f.length === 0) {
            getParsingFlags(config).invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }
        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._f = config._f[i];
            configFromStringAndFormat(tempConfig);
            if (!valid__isValid(tempConfig)) {
                continue;
            }
            currentScore += getParsingFlags(tempConfig).charsLeftOver;
            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;
            getParsingFlags(tempConfig).score = currentScore;
            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }
        extend(config, bestMoment || tempConfig);
    }

    function configFromObject(config) {
        if (config._d) {
            return;
        }
        var i = normalizeObjectUnits(config._i);
        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function(obj) {
            return obj && parseInt(obj, 10);
        });
        configFromArray(config);
    }

    function createFromConfig(config) {
        var res = new Moment(checkOverflow(prepareConfig(config)));
        if (res._nextDay) {
            res.add(1, 'd');
            res._nextDay = undefined;
        }
        return res;
    }

    function prepareConfig(config) {
        var input = config._i,
            format = config._f;
        config._locale = config._locale || locale_locales__getLocale(config._l);
        if (input === null || (format === undefined && input === '')) {
            return valid__createInvalid({
                nullInput: true
            });
        }
        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }
        if (isMoment(input)) {
            return new Moment(checkOverflow(input));
        } else if (isArray(format)) {
            configFromStringAndArray(config);
        } else if (isDate(input)) {
            config._d = input;
        } else if (format) {
            configFromStringAndFormat(config);
        } else {
            configFromInput(config);
        }
        if (!valid__isValid(config)) {
            config._d = null;
        }
        return config;
    }

    function configFromInput(config) {
        var input = config._i;
        if (input === undefined) {
            config._d = new Date(utils_hooks__hooks.now());
        } else if (isDate(input)) {
            config._d = new Date(input.valueOf());
        } else if (typeof input === 'string') {
            configFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function(obj) {
                return parseInt(obj, 10);
            });
            configFromArray(config);
        } else if (typeof(input) === 'object') {
            configFromObject(config);
        } else if (typeof(input) === 'number') {
            config._d = new Date(input);
        } else {
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    function createLocalOrUTC(input, format, locale, strict, isUTC) {
        var c = {};
        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        if ((isObject(input) && isObjectEmpty(input)) || (isArray(input) && input.length === 0)) {
            input = undefined;
        }
        c._isAMomentObject = true;
        c._useUTC = c._isUTC = isUTC;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;
        return createFromConfig(c);
    }

    function local__createLocal(input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, false);
    }
    var prototypeMin = deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/', function() {
        var other = local__createLocal.apply(null, arguments);
        if (this.isValid() && other.isValid()) {
            return other < this ? this : other;
        } else {
            return valid__createInvalid();
        }
    });
    var prototypeMax = deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/', function() {
        var other = local__createLocal.apply(null, arguments);
        if (this.isValid() && other.isValid()) {
            return other > this ? this : other;
        } else {
            return valid__createInvalid();
        }
    });

    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return local__createLocal();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (!moments[i].isValid() || moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    function min() {
        var args = [].slice.call(arguments, 0);
        return pickBy('isBefore', args);
    }

    function max() {
        var args = [].slice.call(arguments, 0);
        return pickBy('isAfter', args);
    }
    var now = function() {
        return Date.now ? Date.now() : +(new Date());
    };

    function Duration(duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;
        this._milliseconds = +milliseconds +
            seconds * 1e3 +
            minutes * 6e4 +
            hours * 1000 * 60 * 60;
        this._days = +days +
            weeks * 7;
        this._months = +months +
            quarters * 3 +
            years * 12;
        this._data = {};
        this._locale = locale_locales__getLocale();
        this._bubble();
    }

    function isDuration(obj) {
        return obj instanceof Duration;
    }

    function offset(token, separator) {
        addFormatToken(token, 0, 0, function() {
            var offset = this.utcOffset();
            var sign = '+';
            if (offset < 0) {
                offset = -offset;
                sign = '-';
            }
            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
        });
    }
    offset('Z', ':');
    offset('ZZ', '');
    addRegexToken('Z', matchShortOffset);
    addRegexToken('ZZ', matchShortOffset);
    addParseToken(['Z', 'ZZ'], function(input, array, config) {
        config._useUTC = true;
        config._tzm = offsetFromString(matchShortOffset, input);
    });
    var chunkOffset = /([\+\-]|\d\d)/gi;

    function offsetFromString(matcher, string) {
        var matches = ((string || '').match(matcher) || []);
        var chunk = matches[matches.length - 1] || [];
        var parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];
        var minutes = +(parts[1] * 60) + toInt(parts[2]);
        return parts[0] === '+' ? minutes : -minutes;
    }

    function cloneWithOffset(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (isMoment(input) || isDate(input) ? input.valueOf() : local__createLocal(input).valueOf()) - res.valueOf();
            res._d.setTime(res._d.valueOf() + diff);
            utils_hooks__hooks.updateOffset(res, false);
            return res;
        } else {
            return local__createLocal(input).local();
        }
    }

    function getDateOffset(m) {
        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
    }
    utils_hooks__hooks.updateOffset = function() {};

    function getSetOffset(input, keepLocalTime) {
        var offset = this._offset || 0,
            localAdjust;
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        if (input != null) {
            if (typeof input === 'string') {
                input = offsetFromString(matchShortOffset, input);
            } else if (Math.abs(input) < 16) {
                input = input * 60;
            }
            if (!this._isUTC && keepLocalTime) {
                localAdjust = getDateOffset(this);
            }
            this._offset = input;
            this._isUTC = true;
            if (localAdjust != null) {
                this.add(localAdjust, 'm');
            }
            if (offset !== input) {
                if (!keepLocalTime || this._changeInProgress) {
                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);
                } else if (!this._changeInProgress) {
                    this._changeInProgress = true;
                    utils_hooks__hooks.updateOffset(this, true);
                    this._changeInProgress = null;
                }
            }
            return this;
        } else {
            return this._isUTC ? offset : getDateOffset(this);
        }
    }

    function getSetZone(input, keepLocalTime) {
        if (input != null) {
            if (typeof input !== 'string') {
                input = -input;
            }
            this.utcOffset(input, keepLocalTime);
            return this;
        } else {
            return -this.utcOffset();
        }
    }

    function setOffsetToUTC(keepLocalTime) {
        return this.utcOffset(0, keepLocalTime);
    }

    function setOffsetToLocal(keepLocalTime) {
        if (this._isUTC) {
            this.utcOffset(0, keepLocalTime);
            this._isUTC = false;
            if (keepLocalTime) {
                this.subtract(getDateOffset(this), 'm');
            }
        }
        return this;
    }

    function setOffsetToParsedOffset() {
        if (this._tzm) {
            this.utcOffset(this._tzm);
        } else if (typeof this._i === 'string') {
            this.utcOffset(offsetFromString(matchOffset, this._i));
        }
        return this;
    }

    function hasAlignedHourOffset(input) {
        if (!this.isValid()) {
            return false;
        }
        input = input ? local__createLocal(input).utcOffset() : 0;
        return (this.utcOffset() - input) % 60 === 0;
    }

    function isDaylightSavingTime() {
        return (this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset());
    }

    function isDaylightSavingTimeShifted() {
        if (!isUndefined(this._isDSTShifted)) {
            return this._isDSTShifted;
        }
        var c = {};
        copyConfig(c, this);
        c = prepareConfig(c);
        if (c._a) {
            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);
            this._isDSTShifted = this.isValid() && compareArrays(c._a, other.toArray()) > 0;
        } else {
            this._isDSTShifted = false;
        }
        return this._isDSTShifted;
    }

    function isLocal() {
        return this.isValid() ? !this._isUTC : false;
    }

    function isUtcOffset() {
        return this.isValid() ? this._isUTC : false;
    }

    function isUtc() {
        return this.isValid() ? this._isUTC && this._offset === 0 : false;
    }
    var aspNetRegex = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;
    var isoRegex = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;

    function create__createDuration(input, key) {
        var duration = input,
            match = null,
            sign, ret, diffRes;
        if (isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: 0,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = isoRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: parseIso(match[2], sign),
                M: parseIso(match[3], sign),
                w: parseIso(match[4], sign),
                d: parseIso(match[5], sign),
                h: parseIso(match[6], sign),
                m: parseIso(match[7], sign),
                s: parseIso(match[8], sign)
            };
        } else if (duration == null) {
            duration = {};
        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));
            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }
        ret = new Duration(duration);
        if (isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }
        return ret;
    }
    create__createDuration.fn = Duration.prototype;

    function parseIso(inp, sign) {
        var res = inp && parseFloat(inp.replace(',', '.'));
        return (isNaN(res) ? 0 : res) * sign;
    }

    function positiveMomentsDifference(base, other) {
        var res = {
            milliseconds: 0,
            months: 0
        };
        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }
        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));
        return res;
    }

    function momentsDifference(base, other) {
        var res;
        if (!(base.isValid() && other.isValid())) {
            return {
                milliseconds: 0,
                months: 0
            };
        }
        other = cloneWithOffset(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }
        return res;
    }

    function absRound(number) {
        if (number < 0) {
            return Math.round(-1 * number) * -1;
        } else {
            return Math.round(number);
        }
    }

    function createAdder(direction, name) {
        return function(val, period) {
            var dur, tmp;
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' + 'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
                tmp = val;
                val = period;
                period = tmp;
            }
            val = typeof val === 'string' ? +val : val;
            dur = create__createDuration(val, period);
            add_subtract__addSubtract(this, dur, direction);
            return this;
        };
    }

    function add_subtract__addSubtract(mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = absRound(duration._days),
            months = absRound(duration._months);
        if (!mom.isValid()) {
            return;
        }
        updateOffset = updateOffset == null ? true : updateOffset;
        if (milliseconds) {
            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
        }
        if (days) {
            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);
        }
        if (months) {
            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            utils_hooks__hooks.updateOffset(mom, days || months);
        }
    }
    var add_subtract__add = createAdder(1, 'add');
    var add_subtract__subtract = createAdder(-1, 'subtract');

    function getCalendarFormat(myMoment, now) {
        var diff = myMoment.diff(now, 'days', true);
        return diff < -6 ? 'sameElse' : diff < -1 ? 'lastWeek' : diff < 0 ? 'lastDay' : diff < 1 ? 'sameDay' : diff < 2 ? 'nextDay' : diff < 7 ? 'nextWeek' : 'sameElse';
    }

    function moment_calendar__calendar(time, formats) {
        var now = time || local__createLocal(),
            sod = cloneWithOffset(now, this).startOf('day'),
            format = utils_hooks__hooks.calendarFormat(this, sod) || 'sameElse';
        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);
        return this.format(output || this.localeData().calendar(format, this, local__createLocal(now)));
    }

    function clone() {
        return new Moment(this);
    }

    function isAfter(input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return this.valueOf() > localInput.valueOf();
        } else {
            return localInput.valueOf() < this.clone().startOf(units).valueOf();
        }
    }

    function isBefore(input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return this.valueOf() < localInput.valueOf();
        } else {
            return this.clone().endOf(units).valueOf() < localInput.valueOf();
        }
    }

    function isBetween(from, to, units, inclusivity) {
        inclusivity = inclusivity || '()';
        return (inclusivity[0] === '(' ? this.isAfter(from, units) : !this.isBefore(from, units)) && (inclusivity[1] === ')' ? this.isBefore(to, units) : !this.isAfter(to, units));
    }

    function isSame(input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input),
            inputMs;
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units || 'millisecond');
        if (units === 'millisecond') {
            return this.valueOf() === localInput.valueOf();
        } else {
            inputMs = localInput.valueOf();
            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();
        }
    }

    function isSameOrAfter(input, units) {
        return this.isSame(input, units) || this.isAfter(input, units);
    }

    function isSameOrBefore(input, units) {
        return this.isSame(input, units) || this.isBefore(input, units);
    }

    function diff(input, units, asFloat) {
        var that, zoneDelta, delta, output;
        if (!this.isValid()) {
            return NaN;
        }
        that = cloneWithOffset(input, this);
        if (!that.isValid()) {
            return NaN;
        }
        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;
        units = normalizeUnits(units);
        if (units === 'year' || units === 'month' || units === 'quarter') {
            output = monthDiff(this, that);
            if (units === 'quarter') {
                output = output / 3;
            } else if (units === 'year') {
                output = output / 12;
            }
        } else {
            delta = this - that;
            output = units === 'second' ? delta / 1e3 : units === 'minute' ? delta / 6e4 : units === 'hour' ? delta / 36e5 : units === 'day' ? (delta - zoneDelta) / 864e5 : units === 'week' ? (delta - zoneDelta) / 6048e5 : delta;
        }
        return asFloat ? output : absFloor(output);
    }

    function monthDiff(a, b) {
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;
        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            adjust = (b - anchor) / (anchor2 - anchor);
        }
        return -(wholeMonthDiff + adjust) || 0;
    }
    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
    utils_hooks__hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

    function toString() {
        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
    }

    function moment_format__toISOString() {
        var m = this.clone().utc();
        if (0 < m.year() && m.year() <= 9999) {
            if (isFunction(Date.prototype.toISOString)) {
                return this.toDate().toISOString();
            } else {
                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        } else {
            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
        }
    }

    function format(inputString) {
        if (!inputString) {
            inputString = this.isUtc() ? utils_hooks__hooks.defaultFormatUtc : utils_hooks__hooks.defaultFormat;
        }
        var output = formatMoment(this, inputString);
        return this.localeData().postformat(output);
    }

    function from(time, withoutSuffix) {
        if (this.isValid() && ((isMoment(time) && time.isValid()) || local__createLocal(time).isValid())) {
            return create__createDuration({
                to: this,
                from: time
            }).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function fromNow(withoutSuffix) {
        return this.from(local__createLocal(), withoutSuffix);
    }

    function to(time, withoutSuffix) {
        if (this.isValid() && ((isMoment(time) && time.isValid()) || local__createLocal(time).isValid())) {
            return create__createDuration({
                from: this,
                to: time
            }).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function toNow(withoutSuffix) {
        return this.to(local__createLocal(), withoutSuffix);
    }

    function locale(key) {
        var newLocaleData;
        if (key === undefined) {
            return this._locale._abbr;
        } else {
            newLocaleData = locale_locales__getLocale(key);
            if (newLocaleData != null) {
                this._locale = newLocaleData;
            }
            return this;
        }
    }
    var lang = deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.', function(key) {
        if (key === undefined) {
            return this.localeData();
        } else {
            return this.locale(key);
        }
    });

    function localeData() {
        return this._locale;
    }

    function startOf(units) {
        units = normalizeUnits(units);
        switch (units) {
            case 'year':
                this.month(0);
            case 'quarter':
            case 'month':
                this.date(1);
            case 'week':
            case 'isoWeek':
            case 'day':
            case 'date':
                this.hours(0);
            case 'hour':
                this.minutes(0);
            case 'minute':
                this.seconds(0);
            case 'second':
                this.milliseconds(0);
        }
        if (units === 'week') {
            this.weekday(0);
        }
        if (units === 'isoWeek') {
            this.isoWeekday(1);
        }
        if (units === 'quarter') {
            this.month(Math.floor(this.month() / 3) * 3);
        }
        return this;
    }

    function endOf(units) {
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond') {
            return this;
        }
        if (units === 'date') {
            units = 'day';
        }
        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
    }

    function to_type__valueOf() {
        return this._d.valueOf() - ((this._offset || 0) * 60000);
    }

    function unix() {
        return Math.floor(this.valueOf() / 1000);
    }

    function toDate() {
        return new Date(this.valueOf());
    }

    function toArray() {
        var m = this;
        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
    }

    function toObject() {
        var m = this;
        return {
            years: m.year(),
            months: m.month(),
            date: m.date(),
            hours: m.hours(),
            minutes: m.minutes(),
            seconds: m.seconds(),
            milliseconds: m.milliseconds()
        };
    }

    function toJSON() {
        return this.isValid() ? this.toISOString() : null;
    }

    function moment_valid__isValid() {
        return valid__isValid(this);
    }

    function parsingFlags() {
        return extend({}, getParsingFlags(this));
    }

    function invalidAt() {
        return getParsingFlags(this).overflow;
    }

    function creationData() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }
    addFormatToken(0, ['gg', 2], 0, function() {
        return this.weekYear() % 100;
    });
    addFormatToken(0, ['GG', 2], 0, function() {
        return this.isoWeekYear() % 100;
    });

    function addWeekYearFormatToken(token, getter) {
        addFormatToken(0, [token, token.length], 0, getter);
    }
    addWeekYearFormatToken('gggg', 'weekYear');
    addWeekYearFormatToken('ggggg', 'weekYear');
    addWeekYearFormatToken('GGGG', 'isoWeekYear');
    addWeekYearFormatToken('GGGGG', 'isoWeekYear');
    addUnitAlias('weekYear', 'gg');
    addUnitAlias('isoWeekYear', 'GG');
    addUnitPriority('weekYear', 1);
    addUnitPriority('isoWeekYear', 1);
    addRegexToken('G', matchSigned);
    addRegexToken('g', matchSigned);
    addRegexToken('GG', match1to2, match2);
    addRegexToken('gg', match1to2, match2);
    addRegexToken('GGGG', match1to4, match4);
    addRegexToken('gggg', match1to4, match4);
    addRegexToken('GGGGG', match1to6, match6);
    addRegexToken('ggggg', match1to6, match6);
    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function(input, week, config, token) {
        week[token.substr(0, 2)] = toInt(input);
    });
    addWeekParseToken(['gg', 'GG'], function(input, week, config, token) {
        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    function getSetWeekYear(input) {
        return getSetWeekYearHelper.call(this, input, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
    }

    function getSetISOWeekYear(input) {
        return getSetWeekYearHelper.call(this, input, this.isoWeek(), this.isoWeekday(), 1, 4);
    }

    function getISOWeeksInYear() {
        return weeksInYear(this.year(), 1, 4);
    }

    function getWeeksInYear() {
        var weekInfo = this.localeData()._week;
        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
    }

    function getSetWeekYearHelper(input, week, weekday, dow, doy) {
        var weeksTarget;
        if (input == null) {
            return weekOfYear(this, dow, doy).year;
        } else {
            weeksTarget = weeksInYear(input, dow, doy);
            if (week > weeksTarget) {
                week = weeksTarget;
            }
            return setWeekAll.call(this, input, week, weekday, dow, doy);
        }
    }

    function setWeekAll(weekYear, week, weekday, dow, doy) {
        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);
        this.year(date.getUTCFullYear());
        this.month(date.getUTCMonth());
        this.date(date.getUTCDate());
        return this;
    }
    addFormatToken('Q', 0, 'Qo', 'quarter');
    addUnitAlias('quarter', 'Q');
    addUnitPriority('quarter', 7);
    addRegexToken('Q', match1);
    addParseToken('Q', function(input, array) {
        array[MONTH] = (toInt(input) - 1) * 3;
    });

    function getSetQuarter(input) {
        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
    }
    addFormatToken('D', ['DD', 2], 'Do', 'date');
    addUnitAlias('date', 'D');
    addUnitPriority('date', 9);
    addRegexToken('D', match1to2);
    addRegexToken('DD', match1to2, match2);
    addRegexToken('Do', function(isStrict, locale) {
        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;
    });
    addParseToken(['D', 'DD'], DATE);
    addParseToken('Do', function(input, array) {
        array[DATE] = toInt(input.match(match1to2)[0], 10);
    });
    var getSetDayOfMonth = makeGetSet('Date', true);
    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');
    addUnitAlias('dayOfYear', 'DDD');
    addUnitPriority('dayOfYear', 4);
    addRegexToken('DDD', match1to3);
    addRegexToken('DDDD', match3);
    addParseToken(['DDD', 'DDDD'], function(input, array, config) {
        config._dayOfYear = toInt(input);
    });

    function getSetDayOfYear(input) {
        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
    }
    addFormatToken('m', ['mm', 2], 0, 'minute');
    addUnitAlias('minute', 'm');
    addUnitPriority('minute', 14);
    addRegexToken('m', match1to2);
    addRegexToken('mm', match1to2, match2);
    addParseToken(['m', 'mm'], MINUTE);
    var getSetMinute = makeGetSet('Minutes', false);
    addFormatToken('s', ['ss', 2], 0, 'second');
    addUnitAlias('second', 's');
    addUnitPriority('second', 15);
    addRegexToken('s', match1to2);
    addRegexToken('ss', match1to2, match2);
    addParseToken(['s', 'ss'], SECOND);
    var getSetSecond = makeGetSet('Seconds', false);
    addFormatToken('S', 0, 0, function() {
        return ~~(this.millisecond() / 100);
    });
    addFormatToken(0, ['SS', 2], 0, function() {
        return ~~(this.millisecond() / 10);
    });
    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
    addFormatToken(0, ['SSSS', 4], 0, function() {
        return this.millisecond() * 10;
    });
    addFormatToken(0, ['SSSSS', 5], 0, function() {
        return this.millisecond() * 100;
    });
    addFormatToken(0, ['SSSSSS', 6], 0, function() {
        return this.millisecond() * 1000;
    });
    addFormatToken(0, ['SSSSSSS', 7], 0, function() {
        return this.millisecond() * 10000;
    });
    addFormatToken(0, ['SSSSSSSS', 8], 0, function() {
        return this.millisecond() * 100000;
    });
    addFormatToken(0, ['SSSSSSSSS', 9], 0, function() {
        return this.millisecond() * 1000000;
    });
    addUnitAlias('millisecond', 'ms');
    addUnitPriority('millisecond', 16);
    addRegexToken('S', match1to3, match1);
    addRegexToken('SS', match1to3, match2);
    addRegexToken('SSS', match1to3, match3);
    var token;
    for (token = 'SSSS'; token.length <= 9; token += 'S') {
        addRegexToken(token, matchUnsigned);
    }

    function parseMs(input, array) {
        array[MILLISECOND] = toInt(('0.' + input) * 1000);
    }
    for (token = 'S'; token.length <= 9; token += 'S') {
        addParseToken(token, parseMs);
    }
    var getSetMillisecond = makeGetSet('Milliseconds', false);
    addFormatToken('z', 0, 0, 'zoneAbbr');
    addFormatToken('zz', 0, 0, 'zoneName');

    function getZoneAbbr() {
        return this._isUTC ? 'UTC' : '';
    }

    function getZoneName() {
        return this._isUTC ? 'Coordinated Universal Time' : '';
    }
    var momentPrototype__proto = Moment.prototype;
    momentPrototype__proto.add = add_subtract__add;
    momentPrototype__proto.calendar = moment_calendar__calendar;
    momentPrototype__proto.clone = clone;
    momentPrototype__proto.diff = diff;
    momentPrototype__proto.endOf = endOf;
    momentPrototype__proto.format = format;
    momentPrototype__proto.from = from;
    momentPrototype__proto.fromNow = fromNow;
    momentPrototype__proto.to = to;
    momentPrototype__proto.toNow = toNow;
    momentPrototype__proto.get = stringGet;
    momentPrototype__proto.invalidAt = invalidAt;
    momentPrototype__proto.isAfter = isAfter;
    momentPrototype__proto.isBefore = isBefore;
    momentPrototype__proto.isBetween = isBetween;
    momentPrototype__proto.isSame = isSame;
    momentPrototype__proto.isSameOrAfter = isSameOrAfter;
    momentPrototype__proto.isSameOrBefore = isSameOrBefore;
    momentPrototype__proto.isValid = moment_valid__isValid;
    momentPrototype__proto.lang = lang;
    momentPrototype__proto.locale = locale;
    momentPrototype__proto.localeData = localeData;
    momentPrototype__proto.max = prototypeMax;
    momentPrototype__proto.min = prototypeMin;
    momentPrototype__proto.parsingFlags = parsingFlags;
    momentPrototype__proto.set = stringSet;
    momentPrototype__proto.startOf = startOf;
    momentPrototype__proto.subtract = add_subtract__subtract;
    momentPrototype__proto.toArray = toArray;
    momentPrototype__proto.toObject = toObject;
    momentPrototype__proto.toDate = toDate;
    momentPrototype__proto.toISOString = moment_format__toISOString;
    momentPrototype__proto.toJSON = toJSON;
    momentPrototype__proto.toString = toString;
    momentPrototype__proto.unix = unix;
    momentPrototype__proto.valueOf = to_type__valueOf;
    momentPrototype__proto.creationData = creationData;
    momentPrototype__proto.year = getSetYear;
    momentPrototype__proto.isLeapYear = getIsLeapYear;
    momentPrototype__proto.weekYear = getSetWeekYear;
    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;
    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;
    momentPrototype__proto.month = getSetMonth;
    momentPrototype__proto.daysInMonth = getDaysInMonth;
    momentPrototype__proto.week = momentPrototype__proto.weeks = getSetWeek;
    momentPrototype__proto.isoWeek = momentPrototype__proto.isoWeeks = getSetISOWeek;
    momentPrototype__proto.weeksInYear = getWeeksInYear;
    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;
    momentPrototype__proto.date = getSetDayOfMonth;
    momentPrototype__proto.day = momentPrototype__proto.days = getSetDayOfWeek;
    momentPrototype__proto.weekday = getSetLocaleDayOfWeek;
    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;
    momentPrototype__proto.dayOfYear = getSetDayOfYear;
    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;
    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;
    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;
    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;
    momentPrototype__proto.utcOffset = getSetOffset;
    momentPrototype__proto.utc = setOffsetToUTC;
    momentPrototype__proto.local = setOffsetToLocal;
    momentPrototype__proto.parseZone = setOffsetToParsedOffset;
    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;
    momentPrototype__proto.isDST = isDaylightSavingTime;
    momentPrototype__proto.isLocal = isLocal;
    momentPrototype__proto.isUtcOffset = isUtcOffset;
    momentPrototype__proto.isUtc = isUtc;
    momentPrototype__proto.isUTC = isUtc;
    momentPrototype__proto.zoneAbbr = getZoneAbbr;
    momentPrototype__proto.zoneName = getZoneName;
    momentPrototype__proto.dates = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
    momentPrototype__proto.years = deprecate('years accessor is deprecated. Use year instead', getSetYear);
    momentPrototype__proto.zone = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);
    momentPrototype__proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);
    var momentPrototype = momentPrototype__proto;

    function moment__createUnix(input) {
        return local__createLocal(input * 1000);
    }

    function moment__createInZone() {
        return local__createLocal.apply(null, arguments).parseZone();
    }

    function preParsePostFormat(string) {
        return string;
    }
    var prototype__proto = Locale.prototype;
    prototype__proto.calendar = locale_calendar__calendar;
    prototype__proto.longDateFormat = longDateFormat;
    prototype__proto.invalidDate = invalidDate;
    prototype__proto.ordinal = ordinal;
    prototype__proto.preparse = preParsePostFormat;
    prototype__proto.postformat = preParsePostFormat;
    prototype__proto.relativeTime = relative__relativeTime;
    prototype__proto.pastFuture = pastFuture;
    prototype__proto.set = locale_set__set;
    prototype__proto.months = localeMonths;
    prototype__proto.monthsShort = localeMonthsShort;
    prototype__proto.monthsParse = localeMonthsParse;
    prototype__proto.monthsRegex = monthsRegex;
    prototype__proto.monthsShortRegex = monthsShortRegex;
    prototype__proto.week = localeWeek;
    prototype__proto.firstDayOfYear = localeFirstDayOfYear;
    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;
    prototype__proto.weekdays = localeWeekdays;
    prototype__proto.weekdaysMin = localeWeekdaysMin;
    prototype__proto.weekdaysShort = localeWeekdaysShort;
    prototype__proto.weekdaysParse = localeWeekdaysParse;
    prototype__proto.weekdaysRegex = weekdaysRegex;
    prototype__proto.weekdaysShortRegex = weekdaysShortRegex;
    prototype__proto.weekdaysMinRegex = weekdaysMinRegex;
    prototype__proto.isPM = localeIsPM;
    prototype__proto.meridiem = localeMeridiem;

    function lists__get(format, index, field, setter) {
        var locale = locale_locales__getLocale();
        var utc = create_utc__createUTC().set(setter, index);
        return locale[field](utc, format);
    }

    function listMonthsImpl(format, index, field) {
        if (typeof format === 'number') {
            index = format;
            format = undefined;
        }
        format = format || '';
        if (index != null) {
            return lists__get(format, index, field, 'month');
        }
        var i;
        var out = [];
        for (i = 0; i < 12; i++) {
            out[i] = lists__get(format, i, field, 'month');
        }
        return out;
    }

    function listWeekdaysImpl(localeSorted, format, index, field) {
        if (typeof localeSorted === 'boolean') {
            if (typeof format === 'number') {
                index = format;
                format = undefined;
            }
            format = format || '';
        } else {
            format = localeSorted;
            index = format;
            localeSorted = false;
            if (typeof format === 'number') {
                index = format;
                format = undefined;
            }
            format = format || '';
        }
        var locale = locale_locales__getLocale(),
            shift = localeSorted ? locale._week.dow : 0;
        if (index != null) {
            return lists__get(format, (index + shift) % 7, field, 'day');
        }
        var i;
        var out = [];
        for (i = 0; i < 7; i++) {
            out[i] = lists__get(format, (i + shift) % 7, field, 'day');
        }
        return out;
    }

    function lists__listMonths(format, index) {
        return listMonthsImpl(format, index, 'months');
    }

    function lists__listMonthsShort(format, index) {
        return listMonthsImpl(format, index, 'monthsShort');
    }

    function lists__listWeekdays(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
    }

    function lists__listWeekdaysShort(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
    }

    function lists__listWeekdaysMin(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
    }
    locale_locales__getSetGlobalLocale('en', {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' : (b === 1) ? 'st' : (b === 2) ? 'nd' : (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });
    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);
    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);
    var mathAbs = Math.abs;

    function duration_abs__abs() {
        var data = this._data;
        this._milliseconds = mathAbs(this._milliseconds);
        this._days = mathAbs(this._days);
        this._months = mathAbs(this._months);
        data.milliseconds = mathAbs(data.milliseconds);
        data.seconds = mathAbs(data.seconds);
        data.minutes = mathAbs(data.minutes);
        data.hours = mathAbs(data.hours);
        data.months = mathAbs(data.months);
        data.years = mathAbs(data.years);
        return this;
    }

    function duration_add_subtract__addSubtract(duration, input, value, direction) {
        var other = create__createDuration(input, value);
        duration._milliseconds += direction * other._milliseconds;
        duration._days += direction * other._days;
        duration._months += direction * other._months;
        return duration._bubble();
    }

    function duration_add_subtract__add(input, value) {
        return duration_add_subtract__addSubtract(this, input, value, 1);
    }

    function duration_add_subtract__subtract(input, value) {
        return duration_add_subtract__addSubtract(this, input, value, -1);
    }

    function absCeil(number) {
        if (number < 0) {
            return Math.floor(number);
        } else {
            return Math.ceil(number);
        }
    }

    function bubble() {
        var milliseconds = this._milliseconds;
        var days = this._days;
        var months = this._months;
        var data = this._data;
        var seconds, minutes, hours, years, monthsFromDays;
        if (!((milliseconds >= 0 && days >= 0 && months >= 0) || (milliseconds <= 0 && days <= 0 && months <= 0))) {
            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
            days = 0;
            months = 0;
        }
        data.milliseconds = milliseconds % 1000;
        seconds = absFloor(milliseconds / 1000);
        data.seconds = seconds % 60;
        minutes = absFloor(seconds / 60);
        data.minutes = minutes % 60;
        hours = absFloor(minutes / 60);
        data.hours = hours % 24;
        days += absFloor(hours / 24);
        monthsFromDays = absFloor(daysToMonths(days));
        months += monthsFromDays;
        days -= absCeil(monthsToDays(monthsFromDays));
        years = absFloor(months / 12);
        months %= 12;
        data.days = days;
        data.months = months;
        data.years = years;
        return this;
    }

    function daysToMonths(days) {
        return days * 4800 / 146097;
    }

    function monthsToDays(months) {
        return months * 146097 / 4800;
    }

    function as(units) {
        var days;
        var months;
        var milliseconds = this._milliseconds;
        units = normalizeUnits(units);
        if (units === 'month' || units === 'year') {
            days = this._days + milliseconds / 864e5;
            months = this._months + daysToMonths(days);
            return units === 'month' ? months : months / 12;
        } else {
            days = this._days + Math.round(monthsToDays(this._months));
            switch (units) {
                case 'week':
                    return days / 7 + milliseconds / 6048e5;
                case 'day':
                    return days + milliseconds / 864e5;
                case 'hour':
                    return days * 24 + milliseconds / 36e5;
                case 'minute':
                    return days * 1440 + milliseconds / 6e4;
                case 'second':
                    return days * 86400 + milliseconds / 1000;
                case 'millisecond':
                    return Math.floor(days * 864e5) + milliseconds;
                default:
                    throw new Error('Unknown unit ' + units);
            }
        }
    }

    function duration_as__valueOf() {
        return (this._milliseconds +
            this._days * 864e5 +
            (this._months % 12) * 2592e6 +
            toInt(this._months / 12) * 31536e6);
    }

    function makeAs(alias) {
        return function() {
            return this.as(alias);
        };
    }
    var asMilliseconds = makeAs('ms');
    var asSeconds = makeAs('s');
    var asMinutes = makeAs('m');
    var asHours = makeAs('h');
    var asDays = makeAs('d');
    var asWeeks = makeAs('w');
    var asMonths = makeAs('M');
    var asYears = makeAs('y');

    function duration_get__get(units) {
        units = normalizeUnits(units);
        return this[units + 's']();
    }

    function makeGetter(name) {
        return function() {
            return this._data[name];
        };
    }
    var milliseconds = makeGetter('milliseconds');
    var seconds = makeGetter('seconds');
    var minutes = makeGetter('minutes');
    var hours = makeGetter('hours');
    var days = makeGetter('days');
    var months = makeGetter('months');
    var years = makeGetter('years');

    function weeks() {
        return absFloor(this.days() / 7);
    }
    var round = Math.round;
    var thresholds = {
        s: 45,
        m: 45,
        h: 22,
        d: 26,
        M: 11
    };

    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function duration_humanize__relativeTime(posNegDuration, withoutSuffix, locale) {
        var duration = create__createDuration(posNegDuration).abs();
        var seconds = round(duration.as('s'));
        var minutes = round(duration.as('m'));
        var hours = round(duration.as('h'));
        var days = round(duration.as('d'));
        var months = round(duration.as('M'));
        var years = round(duration.as('y'));
        var a = seconds < thresholds.s && ['s', seconds] || minutes <= 1 && ['m'] || minutes < thresholds.m && ['mm', minutes] || hours <= 1 && ['h'] || hours < thresholds.h && ['hh', hours] || days <= 1 && ['d'] || days < thresholds.d && ['dd', days] || months <= 1 && ['M'] || months < thresholds.M && ['MM', months] || years <= 1 && ['y'] || ['yy', years];
        a[2] = withoutSuffix;
        a[3] = +posNegDuration > 0;
        a[4] = locale;
        return substituteTimeAgo.apply(null, a);
    }

    function duration_humanize__getSetRelativeTimeRounding(roundingFunction) {
        if (roundingFunction === undefined) {
            return round;
        }
        if (typeof(roundingFunction) === 'function') {
            round = roundingFunction;
            return true;
        }
        return false;
    }

    function duration_humanize__getSetRelativeTimeThreshold(threshold, limit) {
        if (thresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return thresholds[threshold];
        }
        thresholds[threshold] = limit;
        return true;
    }

    function humanize(withSuffix) {
        var locale = this.localeData();
        var output = duration_humanize__relativeTime(this, !withSuffix, locale);
        if (withSuffix) {
            output = locale.pastFuture(+this, output);
        }
        return locale.postformat(output);
    }
    var iso_string__abs = Math.abs;

    function iso_string__toISOString() {
        var seconds = iso_string__abs(this._milliseconds) / 1000;
        var days = iso_string__abs(this._days);
        var months = iso_string__abs(this._months);
        var minutes, hours, years;
        minutes = absFloor(seconds / 60);
        hours = absFloor(minutes / 60);
        seconds %= 60;
        minutes %= 60;
        years = absFloor(months / 12);
        months %= 12;
        var Y = years;
        var M = months;
        var D = days;
        var h = hours;
        var m = minutes;
        var s = seconds;
        var total = this.asSeconds();
        if (!total) {
            return 'P0D';
        }
        return (total < 0 ? '-' : '') + 'P' +
            (Y ? Y + 'Y' : '') +
            (M ? M + 'M' : '') +
            (D ? D + 'D' : '') +
            ((h || m || s) ? 'T' : '') +
            (h ? h + 'H' : '') +
            (m ? m + 'M' : '') +
            (s ? s + 'S' : '');
    }
    var duration_prototype__proto = Duration.prototype;
    duration_prototype__proto.abs = duration_abs__abs;
    duration_prototype__proto.add = duration_add_subtract__add;
    duration_prototype__proto.subtract = duration_add_subtract__subtract;
    duration_prototype__proto.as = as;
    duration_prototype__proto.asMilliseconds = asMilliseconds;
    duration_prototype__proto.asSeconds = asSeconds;
    duration_prototype__proto.asMinutes = asMinutes;
    duration_prototype__proto.asHours = asHours;
    duration_prototype__proto.asDays = asDays;
    duration_prototype__proto.asWeeks = asWeeks;
    duration_prototype__proto.asMonths = asMonths;
    duration_prototype__proto.asYears = asYears;
    duration_prototype__proto.valueOf = duration_as__valueOf;
    duration_prototype__proto._bubble = bubble;
    duration_prototype__proto.get = duration_get__get;
    duration_prototype__proto.milliseconds = milliseconds;
    duration_prototype__proto.seconds = seconds;
    duration_prototype__proto.minutes = minutes;
    duration_prototype__proto.hours = hours;
    duration_prototype__proto.days = days;
    duration_prototype__proto.weeks = weeks;
    duration_prototype__proto.months = months;
    duration_prototype__proto.years = years;
    duration_prototype__proto.humanize = humanize;
    duration_prototype__proto.toISOString = iso_string__toISOString;
    duration_prototype__proto.toString = iso_string__toISOString;
    duration_prototype__proto.toJSON = iso_string__toISOString;
    duration_prototype__proto.locale = locale;
    duration_prototype__proto.localeData = localeData;
    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);
    duration_prototype__proto.lang = lang;
    addFormatToken('X', 0, 0, 'unix');
    addFormatToken('x', 0, 0, 'valueOf');
    addRegexToken('x', matchSigned);
    addRegexToken('X', matchTimestamp);
    addParseToken('X', function(input, array, config) {
        config._d = new Date(parseFloat(input, 10) * 1000);
    });
    addParseToken('x', function(input, array, config) {
        config._d = new Date(toInt(input));
    });
    utils_hooks__hooks.version = '2.14.1';
    setHookCallback(local__createLocal);
    utils_hooks__hooks.fn = momentPrototype;
    utils_hooks__hooks.min = min;
    utils_hooks__hooks.max = max;
    utils_hooks__hooks.now = now;
    utils_hooks__hooks.utc = create_utc__createUTC;
    utils_hooks__hooks.unix = moment__createUnix;
    utils_hooks__hooks.months = lists__listMonths;
    utils_hooks__hooks.isDate = isDate;
    utils_hooks__hooks.locale = locale_locales__getSetGlobalLocale;
    utils_hooks__hooks.invalid = valid__createInvalid;
    utils_hooks__hooks.duration = create__createDuration;
    utils_hooks__hooks.isMoment = isMoment;
    utils_hooks__hooks.weekdays = lists__listWeekdays;
    utils_hooks__hooks.parseZone = moment__createInZone;
    utils_hooks__hooks.localeData = locale_locales__getLocale;
    utils_hooks__hooks.isDuration = isDuration;
    utils_hooks__hooks.monthsShort = lists__listMonthsShort;
    utils_hooks__hooks.weekdaysMin = lists__listWeekdaysMin;
    utils_hooks__hooks.defineLocale = defineLocale;
    utils_hooks__hooks.updateLocale = updateLocale;
    utils_hooks__hooks.locales = locale_locales__listLocales;
    utils_hooks__hooks.weekdaysShort = lists__listWeekdaysShort;
    utils_hooks__hooks.normalizeUnits = normalizeUnits;
    utils_hooks__hooks.relativeTimeRounding = duration_humanize__getSetRelativeTimeRounding;
    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;
    utils_hooks__hooks.calendarFormat = getCalendarFormat;
    utils_hooks__hooks.prototype = momentPrototype;
    var _moment = utils_hooks__hooks;
    return _moment;
}));;
(function($, undefined) {
    var $window = $(window);

    function UTCDate() {
        return new Date(Date.UTC.apply(Date, arguments));
    }

    function UTCToday() {
        var today = new Date();
        return UTCDate(today.getFullYear(), today.getMonth(), today.getDate());
    }

    function alias(method) {
        return function() {
            return this[method].apply(this, arguments);
        };
    }
    var DateArray = (function() {
        var extras = {
            get: function(i) {
                return this.slice(i)[0];
            },
            contains: function(d) {
                var val = d && d.valueOf();
                for (var i = 0, l = this.length; i < l; i++)
                    if (this[i].valueOf() === val)
                        return i;
                return -1;
            },
            remove: function(i) {
                this.splice(i, 1);
            },
            replace: function(new_array) {
                if (!new_array)
                    return;
                if (!$.isArray(new_array))
                    new_array = [new_array];
                this.clear();
                this.push.apply(this, new_array);
            },
            clear: function() {
                this.splice(0);
            },
            copy: function() {
                var a = new DateArray();
                a.replace(this);
                return a;
            }
        };
        return function() {
            var a = [];
            a.push.apply(a, arguments);
            $.extend(a, extras);
            return a;
        };
    })();
    var Datepicker = function(element, options) {
        this.dates = new DateArray();
        this.viewDate = UTCToday();
        this.focusDate = null;
        this._process_options(options);
        this.element = $(element);
        this.isInline = false;
        this.isInput = this.element.is('input');
        this.component = this.element.is('.date') ? this.element.find('.add-on, .input-group-addon, .btn') : false;
        this.hasInput = this.component && this.element.find('input').length;
        if (this.component && this.component.length === 0)
            this.component = false;
        this.picker = $(DPGlobal.template);
        this._buildEvents();
        this._attachEvents();
        if (this.isInline) {
            this.picker.addClass('datepicker-inline').appendTo(this.element);
        } else {
            this.picker.addClass('datepicker-dropdown dropdown-menu');
        }
        if (this.o.rtl) {
            this.picker.addClass('datepicker-rtl');
        }
        this.viewMode = this.o.startView;
        if (this.o.calendarWeeks)
            this.picker.find('tfoot th.today').attr('colspan', function(i, val) {
                return parseInt(val) + 1;
            });
        this._allow_update = false;
        this.setStartDate(this._o.startDate);
        this.setEndDate(this._o.endDate);
        this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);
        this.fillDow();
        this.fillMonths();
        this._allow_update = true;
        this.update();
        this.showMode();
        if (this.isInline) {
            this.show();
        }
    };
    Datepicker.prototype = {
        constructor: Datepicker,
        _process_options: function(opts) {
            this._o = $.extend({}, this._o, opts);
            var o = this.o = $.extend({}, this._o);
            var lang = o.language;
            if (!dates[lang]) {
                lang = lang.split('-')[0];
                if (!dates[lang])
                    lang = defaults.language;
            }
            o.language = lang;
            switch (o.startView) {
                case 2:
                case 'decade':
                    o.startView = 2;
                    break;
                case 1:
                case 'year':
                    o.startView = 1;
                    break;
                default:
                    o.startView = 0;
            }
            switch (o.minViewMode) {
                case 1:
                case 'months':
                    o.minViewMode = 1;
                    break;
                case 2:
                case 'years':
                    o.minViewMode = 2;
                    break;
                default:
                    o.minViewMode = 0;
            }
            o.startView = Math.max(o.startView, o.minViewMode);
            if (o.multidate !== true) {
                o.multidate = Number(o.multidate) || false;
                if (o.multidate !== false)
                    o.multidate = Math.max(0, o.multidate);
                else
                    o.multidate = 1;
            }
            o.multidateSeparator = String(o.multidateSeparator);
            o.weekStart %= 7;
            o.weekEnd = ((o.weekStart + 6) % 7);
            var format = DPGlobal.parseFormat(o.format);
            if (o.startDate !== -Infinity) {
                if (!!o.startDate) {
                    if (o.startDate instanceof Date)
                        o.startDate = this._local_to_utc(this._zero_time(o.startDate));
                    else
                        o.startDate = DPGlobal.parseDate(o.startDate, format, o.language);
                } else {
                    o.startDate = -Infinity;
                }
            }
            if (o.endDate !== Infinity) {
                if (!!o.endDate) {
                    if (o.endDate instanceof Date)
                        o.endDate = this._local_to_utc(this._zero_time(o.endDate));
                    else
                        o.endDate = DPGlobal.parseDate(o.endDate, format, o.language);
                } else {
                    o.endDate = Infinity;
                }
            }
            o.daysOfWeekDisabled = o.daysOfWeekDisabled || [];
            if (!$.isArray(o.daysOfWeekDisabled))
                o.daysOfWeekDisabled = o.daysOfWeekDisabled.split(/[,\s]*/);
            o.daysOfWeekDisabled = $.map(o.daysOfWeekDisabled, function(d) {
                return parseInt(d, 10);
            });
            var plc = String(o.orientation).toLowerCase().split(/\s+/g),
                _plc = o.orientation.toLowerCase();
            plc = $.grep(plc, function(word) {
                return (/^auto|left|right|top|bottom$/).test(word);
            });
            o.orientation = {
                x: 'auto',
                y: 'auto'
            };
            if (!_plc || _plc === 'auto');
            else if (plc.length === 1) {
                switch (plc[0]) {
                    case 'top':
                    case 'bottom':
                        o.orientation.y = plc[0];
                        break;
                    case 'left':
                    case 'right':
                        o.orientation.x = plc[0];
                        break;
                }
            } else {
                _plc = $.grep(plc, function(word) {
                    return (/^left|right$/).test(word);
                });
                o.orientation.x = _plc[0] || 'auto';
                _plc = $.grep(plc, function(word) {
                    return (/^top|bottom$/).test(word);
                });
                o.orientation.y = _plc[0] || 'auto';
            }
        },
        _events: [],
        _secondaryEvents: [],
        _applyEvents: function(evs) {
            for (var i = 0, el, ch, ev; i < evs.length; i++) {
                el = evs[i][0];
                if (evs[i].length === 2) {
                    ch = undefined;
                    ev = evs[i][1];
                } else if (evs[i].length === 3) {
                    ch = evs[i][1];
                    ev = evs[i][2];
                }
                el.on(ev, ch);
            }
        },
        _unapplyEvents: function(evs) {
            for (var i = 0, el, ev, ch; i < evs.length; i++) {
                el = evs[i][0];
                if (evs[i].length === 2) {
                    ch = undefined;
                    ev = evs[i][1];
                } else if (evs[i].length === 3) {
                    ch = evs[i][1];
                    ev = evs[i][2];
                }
                el.off(ev, ch);
            }
        },
        _buildEvents: function() {
            if (this.isInput) {
                this._events = [
                    [this.element, {
                        focus: $.proxy(this.show, this),
                        keyup: $.proxy(function(e) {
                            if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)
                                this.update();
                        }, this),
                        keydown: $.proxy(this.keydown, this)
                    }]
                ];
            } else if (this.component && this.hasInput) {
                this._events = [
                    [this.element.find('input'), {
                        focus: $.proxy(this.show, this),
                        keyup: $.proxy(function(e) {
                            if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)
                                this.update();
                        }, this),
                        keydown: $.proxy(this.keydown, this)
                    }],
                    [this.component, {
                        click: $.proxy(this.show, this)
                    }]
                ];
            } else if (this.element.is('div')) {
                this.isInline = true;
            } else {
                this._events = [
                    [this.element, {
                        click: $.proxy(this.show, this)
                    }]
                ];
            }
            this._events.push([this.element, '*', {
                blur: $.proxy(function(e) {
                    this._focused_from = e.target;
                }, this)
            }], [this.element, {
                blur: $.proxy(function(e) {
                    this._focused_from = e.target;
                }, this)
            }]);
            this._secondaryEvents = [
                [this.picker, {
                    click: $.proxy(this.click, this)
                }],
                [$(window), {
                    resize: $.proxy(this.place, this)
                }],
                [$(document), {
                    'mousedown touchstart': $.proxy(function(e) {
                        if (!(this.element.is(e.target) || this.element.find(e.target).length || this.picker.is(e.target) || this.picker.find(e.target).length)) {
                            this.hide();
                        }
                    }, this)
                }]
            ];
        },
        _attachEvents: function() {
            this._detachEvents();
            this._applyEvents(this._events);
        },
        _detachEvents: function() {
            this._unapplyEvents(this._events);
        },
        _attachSecondaryEvents: function() {
            this._detachSecondaryEvents();
            this._applyEvents(this._secondaryEvents);
        },
        _detachSecondaryEvents: function() {
            this._unapplyEvents(this._secondaryEvents);
        },
        _trigger: function(event, altdate) {
            var date = altdate || this.dates.get(-1),
                local_date = this._utc_to_local(date);
            this.element.trigger({
                type: event,
                date: local_date,
                dates: $.map(this.dates, this._utc_to_local),
                format: $.proxy(function(ix, format) {
                    if (arguments.length === 0) {
                        ix = this.dates.length - 1;
                        format = this.o.format;
                    } else if (typeof ix === 'string') {
                        format = ix;
                        ix = this.dates.length - 1;
                    }
                    format = format || this.o.format;
                    var date = this.dates.get(ix);
                    return DPGlobal.formatDate(date, format, this.o.language);
                }, this)
            });
        },
        show: function() {
            if (!this.isInline)
                this.picker.appendTo('body');
            this.picker.show();
            this.place();
            this._attachSecondaryEvents();
            this._trigger('show');
        },
        hide: function() {
            if (this.isInline)
                return;
            if (!this.picker.is(':visible'))
                return;
            this.focusDate = null;
            this.picker.hide().detach();
            this._detachSecondaryEvents();
            this.viewMode = this.o.startView;
            this.showMode();
            if (this.o.forceParse && (this.isInput && this.element.val() || this.hasInput && this.element.find('input').val()))
                this.setValue();
            this._trigger('hide');
        },
        remove: function() {
            this.hide();
            this._detachEvents();
            this._detachSecondaryEvents();
            this.picker.remove();
            delete this.element.data().datepicker;
            if (!this.isInput) {
                delete this.element.data().date;
            }
        },
        _utc_to_local: function(utc) {
            return utc && new Date(utc.getTime() + (utc.getTimezoneOffset() * 60000));
        },
        _local_to_utc: function(local) {
            return local && new Date(local.getTime() - (local.getTimezoneOffset() * 60000));
        },
        _zero_time: function(local) {
            return local && new Date(local.getFullYear(), local.getMonth(), local.getDate());
        },
        _zero_utc_time: function(utc) {
            return utc && new Date(Date.UTC(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate()));
        },
        getDates: function() {
            return $.map(this.dates, this._utc_to_local);
        },
        getUTCDates: function() {
            return $.map(this.dates, function(d) {
                return new Date(d);
            });
        },
        getDate: function() {
            return this._utc_to_local(this.getUTCDate());
        },
        getUTCDate: function() {
            return new Date(this.dates.get(-1));
        },
        setDates: function() {
            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, args);
            this._trigger('changeDate');
            this.setValue();
        },
        setUTCDates: function() {
            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, $.map(args, this._utc_to_local));
            this._trigger('changeDate');
            this.setValue();
        },
        setDate: alias('setDates'),
        setUTCDate: alias('setUTCDates'),
        setValue: function() {
            var formatted = this.getFormattedDate();
            if (!this.isInput) {
                if (this.component) {
                    this.element.find('input').val(formatted).change();
                }
            } else {
                this.element.val(formatted).change();
            }
        },
        getFormattedDate: function(format) {
            if (format === undefined)
                format = this.o.format;
            var lang = this.o.language;
            return $.map(this.dates, function(d) {
                return DPGlobal.formatDate(d, format, lang);
            }).join(this.o.multidateSeparator);
        },
        setStartDate: function(startDate) {
            this._process_options({
                startDate: startDate
            });
            this.update();
            this.updateNavArrows();
        },
        setEndDate: function(endDate) {
            this._process_options({
                endDate: endDate
            });
            this.update();
            this.updateNavArrows();
        },
        setDaysOfWeekDisabled: function(daysOfWeekDisabled) {
            this._process_options({
                daysOfWeekDisabled: daysOfWeekDisabled
            });
            this.update();
            this.updateNavArrows();
        },
        place: function() {
            if (this.isInline)
                return;
            var calendarWidth = this.picker.outerWidth(),
                calendarHeight = this.picker.outerHeight(),
                visualPadding = 10,
                windowWidth = $window.width(),
                windowHeight = $window.height(),
                scrollTop = $window.scrollTop();
            var zIndex = parseInt(this.element.parents().filter(function() {
                return $(this).css('z-index') !== 'auto';
            }).first().css('z-index')) + 10;
            var offset = this.component ? this.component.parent().offset() : this.element.offset();
            var height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);
            var width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);
            var left = offset.left,
                top = offset.top;
            this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom ' + 'datepicker-orient-right datepicker-orient-left');
            if (this.o.orientation.x !== 'auto') {
                this.picker.addClass('datepicker-orient-' + this.o.orientation.x);
                if (this.o.orientation.x === 'right')
                    left -= calendarWidth - width;
            } else {
                this.picker.addClass('datepicker-orient-left');
                if (offset.left < 0)
                    left -= offset.left - visualPadding;
                else if (offset.left + calendarWidth > windowWidth)
                    left = windowWidth - calendarWidth - visualPadding;
            }
            var yorient = this.o.orientation.y,
                top_overflow, bottom_overflow;
            if (yorient === 'auto') {
                top_overflow = -scrollTop + offset.top - calendarHeight;
                bottom_overflow = scrollTop + windowHeight - (offset.top + height + calendarHeight);
                if (Math.max(top_overflow, bottom_overflow) === bottom_overflow)
                    yorient = 'top';
                else
                    yorient = 'bottom';
            }
            this.picker.addClass('datepicker-orient-' + yorient);
            if (yorient === 'top')
                top += height;
            else
                top -= calendarHeight + parseInt(this.picker.css('padding-top'));
            this.picker.css({
                top: top,
                left: left,
                zIndex: zIndex
            });
        },
        _allow_update: true,
        update: function() {
            if (!this._allow_update)
                return;
            var oldDates = this.dates.copy(),
                dates = [],
                fromArgs = false;
            if (arguments.length) {
                $.each(arguments, $.proxy(function(i, date) {
                    if (date instanceof Date)
                        date = this._local_to_utc(date);
                    dates.push(date);
                }, this));
                fromArgs = true;
            } else {
                dates = this.isInput ? this.element.val() : this.element.data('date') || this.element.find('input').val();
                if (dates && this.o.multidate)
                    dates = dates.split(this.o.multidateSeparator);
                else
                    dates = [dates];
                delete this.element.data().date;
            }
            dates = $.map(dates, $.proxy(function(date) {
                return DPGlobal.parseDate(date, this.o.format, this.o.language);
            }, this));
            dates = $.grep(dates, $.proxy(function(date) {
                return (date < this.o.startDate || date > this.o.endDate || !date);
            }, this), true);
            this.dates.replace(dates);
            if (this.dates.length)
                this.viewDate = new Date(this.dates.get(-1));
            else if (this.viewDate < this.o.startDate)
                this.viewDate = new Date(this.o.startDate);
            else if (this.viewDate > this.o.endDate)
                this.viewDate = new Date(this.o.endDate);
            if (fromArgs) {
                this.setValue();
            } else if (dates.length) {
                if (String(oldDates) !== String(this.dates))
                    this._trigger('changeDate');
            }
            if (!this.dates.length && oldDates.length)
                this._trigger('clearDate');
            this.fill();
        },
        fillDow: function() {
            var dowCnt = this.o.weekStart,
                html = '<tr>';
            if (this.o.calendarWeeks) {
                var cell = '<th class="cw">&nbsp;</th>';
                html += cell;
                this.picker.find('.datepicker-days thead tr:first-child').prepend(cell);
            }
            while (dowCnt < this.o.weekStart + 7) {
                html += '<th class="dow">' + dates[this.o.language].daysMin[(dowCnt++) % 7] + '</th>';
            }
            html += '</tr>';
            this.picker.find('.datepicker-days thead').append(html);
        },
        fillMonths: function() {
            var html = '',
                i = 0;
            while (i < 12) {
                html += '<span class="month">' + dates[this.o.language].monthsShort[i++] + '</span>';
            }
            this.picker.find('.datepicker-months td').html(html);
        },
        setRange: function(range) {
            if (!range || !range.length)
                delete this.range;
            else
                this.range = $.map(range, function(d) {
                    return d.valueOf();
                });
            this.fill();
        },
        getClassNames: function(date) {
            var cls = [],
                year = this.viewDate.getUTCFullYear(),
                month = this.viewDate.getUTCMonth(),
                today = new Date();
            if (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)) {
                cls.push('old');
            } else if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)) {
                cls.push('new');
            }
            if (this.focusDate && date.valueOf() === this.focusDate.valueOf())
                cls.push('focused');
            if (this.o.todayHighlight && date.getUTCFullYear() === today.getFullYear() && date.getUTCMonth() === today.getMonth() && date.getUTCDate() === today.getDate()) {
                cls.push('today');
            }
            if (this.dates.contains(date) !== -1)
                cls.push('active');
            if (date.valueOf() < this.o.startDate || date.valueOf() > this.o.endDate || $.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1) {
                cls.push('disabled');
            }
            if (this.range) {
                if (date > this.range[0] && date < this.range[this.range.length - 1]) {
                    cls.push('range');
                }
                if ($.inArray(date.valueOf(), this.range) !== -1) {
                    cls.push('selected');
                }
            }
            return cls;
        },
        fill: function() {
            var d = new Date(this.viewDate),
                year = d.getUTCFullYear(),
                month = d.getUTCMonth(),
                startYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,
                startMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,
                endYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,
                endMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,
                todaytxt = dates[this.o.language].today || dates['en'].today || '',
                cleartxt = dates[this.o.language].clear || dates['en'].clear || '',
                tooltip;
            this.picker.find('.datepicker-days thead th.datepicker-switch').text(dates[this.o.language].months[month] + ' ' + year);
            this.picker.find('tfoot th.today').text(todaytxt).toggle(this.o.todayBtn !== false);
            this.picker.find('tfoot th.clear').text(cleartxt).toggle(this.o.clearBtn !== false);
            this.updateNavArrows();
            this.fillMonths();
            var prevMonth = UTCDate(year, month - 1, 28),
                day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());
            prevMonth.setUTCDate(day);
            prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7) % 7);
            var nextMonth = new Date(prevMonth);
            nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);
            nextMonth = nextMonth.valueOf();
            var html = [];
            var clsName;
            while (prevMonth.valueOf() < nextMonth) {
                if (prevMonth.getUTCDay() === this.o.weekStart) {
                    html.push('<tr>');
                    if (this.o.calendarWeeks) {
                        var
                            ws = new Date(+prevMonth + (this.o.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),
                            th = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),
                            yth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay()) % 7 * 864e5),
                            calWeek = (th - yth) / 864e5 / 7 + 1;
                        html.push('<td class="cw">' + calWeek + '</td>');
                    }
                }
                clsName = this.getClassNames(prevMonth);
                clsName.push('day');
                if (this.o.beforeShowDay !== $.noop) {
                    var before = this.o.beforeShowDay(this._utc_to_local(prevMonth));
                    if (before === undefined)
                        before = {};
                    else if (typeof(before) === 'boolean')
                        before = {
                            enabled: before
                        };
                    else if (typeof(before) === 'string')
                        before = {
                            classes: before
                        };
                    if (before.enabled === false)
                        clsName.push('disabled');
                    if (before.classes)
                        clsName = clsName.concat(before.classes.split(/\s+/));
                    if (before.tooltip)
                        tooltip = before.tooltip;
                }
                clsName = $.unique(clsName);
                html.push('<td class="' + clsName.join(' ') + '"' + (tooltip ? ' title="' + tooltip + '"' : '') + '>' + prevMonth.getUTCDate() + '</td>');
                if (prevMonth.getUTCDay() === this.o.weekEnd) {
                    html.push('</tr>');
                }
                prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);
            }
            this.picker.find('.datepicker-days tbody').empty().append(html.join(''));
            var months = this.picker.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');
            $.each(this.dates, function(i, d) {
                if (d.getUTCFullYear() === year)
                    months.eq(d.getUTCMonth()).addClass('active');
            });
            if (year < startYear || year > endYear) {
                months.addClass('disabled');
            }
            if (year === startYear) {
                months.slice(0, startMonth).addClass('disabled');
            }
            if (year === endYear) {
                months.slice(endMonth + 1).addClass('disabled');
            }
            html = '';
            year = parseInt(year / 10, 10) * 10;
            var yearCont = this.picker.find('.datepicker-years').find('th:eq(1)').text(year + '-' + (year + 9)).end().find('td');
            year -= 1;
            var years = $.map(this.dates, function(d) {
                    return d.getUTCFullYear();
                }),
                classes;
            for (var i = -1; i < 11; i++) {
                classes = ['year'];
                if (i === -1)
                    classes.push('old');
                else if (i === 10)
                    classes.push('new');
                if ($.inArray(year, years) !== -1)
                    classes.push('active');
                if (year < startYear || year > endYear)
                    classes.push('disabled');
                html += '<span class="' + classes.join(' ') + '">' + year + '</span>';
                year += 1;
            }
            yearCont.html(html);
        },
        updateNavArrows: function() {
            if (!this._allow_update)
                return;
            var d = new Date(this.viewDate),
                year = d.getUTCFullYear(),
                month = d.getUTCMonth();
            switch (this.viewMode) {
                case 0:
                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() && month <= this.o.startDate.getUTCMonth()) {
                        this.picker.find('.prev').css({
                            visibility: 'hidden'
                        });
                    } else {
                        this.picker.find('.prev').css({
                            visibility: 'visible'
                        });
                    }
                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() && month >= this.o.endDate.getUTCMonth()) {
                        this.picker.find('.next').css({
                            visibility: 'hidden'
                        });
                    } else {
                        this.picker.find('.next').css({
                            visibility: 'visible'
                        });
                    }
                    break;
                case 1:
                case 2:
                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear()) {
                        this.picker.find('.prev').css({
                            visibility: 'hidden'
                        });
                    } else {
                        this.picker.find('.prev').css({
                            visibility: 'visible'
                        });
                    }
                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear()) {
                        this.picker.find('.next').css({
                            visibility: 'hidden'
                        });
                    } else {
                        this.picker.find('.next').css({
                            visibility: 'visible'
                        });
                    }
                    break;
            }
        },
        click: function(e) {
            e.preventDefault();
            var target = $(e.target).closest('span, td, th'),
                year, month, day;
            if (target.length === 1) {
                switch (target[0].nodeName.toLowerCase()) {
                    case 'th':
                        switch (target[0].className) {
                            case 'datepicker-switch':
                                this.showMode(1);
                                break;
                            case 'prev':
                            case 'next':
                                var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);
                                switch (this.viewMode) {
                                    case 0:
                                        this.viewDate = this.moveMonth(this.viewDate, dir);
                                        this._trigger('changeMonth', this.viewDate);
                                        break;
                                    case 1:
                                    case 2:
                                        this.viewDate = this.moveYear(this.viewDate, dir);
                                        if (this.viewMode === 1)
                                            this._trigger('changeYear', this.viewDate);
                                        break;
                                }
                                this.fill();
                                break;
                            case 'today':
                                var date = new Date();
                                date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);
                                this.showMode(-2);
                                var which = this.o.todayBtn === 'linked' ? null : 'view';
                                this._setDate(date, which);
                                break;
                            case 'clear':
                                var element;
                                if (this.isInput)
                                    element = this.element;
                                else if (this.component)
                                    element = this.element.find('input');
                                if (element)
                                    element.val("").change();
                                this.update();
                                this._trigger('changeDate');
                                if (this.o.autoclose)
                                    this.hide();
                                break;
                        }
                        break;
                    case 'span':
                        if (!target.is('.disabled')) {
                            this.viewDate.setUTCDate(1);
                            if (target.is('.month')) {
                                day = 1;
                                month = target.parent().find('span').index(target);
                                year = this.viewDate.getUTCFullYear();
                                this.viewDate.setUTCMonth(month);
                                this._trigger('changeMonth', this.viewDate);
                                if (this.o.minViewMode === 1) {
                                    this._setDate(UTCDate(year, month, day));
                                }
                            } else {
                                day = 1;
                                month = 0;
                                year = parseInt(target.text(), 10) || 0;
                                this.viewDate.setUTCFullYear(year);
                                this._trigger('changeYear', this.viewDate);
                                if (this.o.minViewMode === 2) {
                                    this._setDate(UTCDate(year, month, day));
                                }
                            }
                            this.showMode(-1);
                            this.fill();
                        }
                        break;
                    case 'td':
                        if (target.is('.day') && !target.is('.disabled')) {
                            day = parseInt(target.text(), 10) || 1;
                            year = this.viewDate.getUTCFullYear();
                            month = this.viewDate.getUTCMonth();
                            if (target.is('.old')) {
                                if (month === 0) {
                                    month = 11;
                                    year -= 1;
                                } else {
                                    month -= 1;
                                }
                            } else if (target.is('.new')) {
                                if (month === 11) {
                                    month = 0;
                                    year += 1;
                                } else {
                                    month += 1;
                                }
                            }
                            this._setDate(UTCDate(year, month, day));
                        }
                        break;
                }
            }
            if (this.picker.is(':visible') && this._focused_from) {
                $(this._focused_from).focus();
            }
            delete this._focused_from;
        },
        _toggle_multidate: function(date) {
            var ix = this.dates.contains(date);
            if (!date) {
                this.dates.clear();
            } else if (ix !== -1) {
                this.dates.remove(ix);
            } else {
                this.dates.push(date);
            }
            if (typeof this.o.multidate === 'number')
                while (this.dates.length > this.o.multidate)
                    this.dates.remove(0);
        },
        _setDate: function(date, which) {
            if (!which || which === 'date')
                this._toggle_multidate(date && new Date(date));
            if (!which || which === 'view')
                this.viewDate = date && new Date(date);
            this.fill();
            this.setValue();
            this._trigger('changeDate');
            var element;
            if (this.isInput) {
                element = this.element;
            } else if (this.component) {
                element = this.element.find('input');
            }
            if (element) {
                element.change();
            }
            if (this.o.autoclose && (!which || which === 'date')) {
                this.hide();
            }
        },
        moveMonth: function(date, dir) {
            if (!date)
                return undefined;
            if (!dir)
                return date;
            var new_date = new Date(date.valueOf()),
                day = new_date.getUTCDate(),
                month = new_date.getUTCMonth(),
                mag = Math.abs(dir),
                new_month, test;
            dir = dir > 0 ? 1 : -1;
            if (mag === 1) {
                test = dir === -1 ? function() {
                    return new_date.getUTCMonth() === month;
                } : function() {
                    return new_date.getUTCMonth() !== new_month;
                };
                new_month = month + dir;
                new_date.setUTCMonth(new_month);
                if (new_month < 0 || new_month > 11)
                    new_month = (new_month + 12) % 12;
            } else {
                for (var i = 0; i < mag; i++)
                    new_date = this.moveMonth(new_date, dir);
                new_month = new_date.getUTCMonth();
                new_date.setUTCDate(day);
                test = function() {
                    return new_month !== new_date.getUTCMonth();
                };
            }
            while (test()) {
                new_date.setUTCDate(--day);
                new_date.setUTCMonth(new_month);
            }
            return new_date;
        },
        moveYear: function(date, dir) {
            return this.moveMonth(date, dir * 12);
        },
        dateWithinRange: function(date) {
            return date >= this.o.startDate && date <= this.o.endDate;
        },
        keydown: function(e) {
            if (this.picker.is(':not(:visible)')) {
                if (e.keyCode === 27)
                    this.show();
                return;
            }
            var dateChanged = false,
                dir, newDate, newViewDate, focusDate = this.focusDate || this.viewDate;
            switch (e.keyCode) {
                case 27:
                    if (this.focusDate) {
                        this.focusDate = null;
                        this.viewDate = this.dates.get(-1) || this.viewDate;
                        this.fill();
                    } else
                        this.hide();
                    e.preventDefault();
                    break;
                case 37:
                case 39:
                    if (!this.o.keyboardNavigation)
                        break;
                    dir = e.keyCode === 37 ? -1 : 1;
                    if (e.ctrlKey) {
                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveYear(focusDate, dir);
                        this._trigger('changeYear', this.viewDate);
                    } else if (e.shiftKey) {
                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveMonth(focusDate, dir);
                        this._trigger('changeMonth', this.viewDate);
                    } else {
                        newDate = new Date(this.dates.get(-1) || UTCToday());
                        newDate.setUTCDate(newDate.getUTCDate() + dir);
                        newViewDate = new Date(focusDate);
                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir);
                    }
                    if (this.dateWithinRange(newDate)) {
                        this.focusDate = this.viewDate = newViewDate;
                        this.setValue();
                        this.fill();
                        e.preventDefault();
                    }
                    break;
                case 38:
                case 40:
                    if (!this.o.keyboardNavigation)
                        break;
                    dir = e.keyCode === 38 ? -1 : 1;
                    if (e.ctrlKey) {
                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveYear(focusDate, dir);
                        this._trigger('changeYear', this.viewDate);
                    } else if (e.shiftKey) {
                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveMonth(focusDate, dir);
                        this._trigger('changeMonth', this.viewDate);
                    } else {
                        newDate = new Date(this.dates.get(-1) || UTCToday());
                        newDate.setUTCDate(newDate.getUTCDate() + dir * 7);
                        newViewDate = new Date(focusDate);
                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir * 7);
                    }
                    if (this.dateWithinRange(newDate)) {
                        this.focusDate = this.viewDate = newViewDate;
                        this.setValue();
                        this.fill();
                        e.preventDefault();
                    }
                    break;
                case 32:
                    break;
                case 13:
                    focusDate = this.focusDate || this.dates.get(-1) || this.viewDate;
                    this._toggle_multidate(focusDate);
                    dateChanged = true;
                    this.focusDate = null;
                    this.viewDate = this.dates.get(-1) || this.viewDate;
                    this.setValue();
                    this.fill();
                    if (this.picker.is(':visible')) {
                        e.preventDefault();
                        if (this.o.autoclose)
                            this.hide();
                    }
                    break;
                case 9:
                    this.focusDate = null;
                    this.viewDate = this.dates.get(-1) || this.viewDate;
                    this.fill();
                    this.hide();
                    break;
            }
            if (dateChanged) {
                if (this.dates.length)
                    this._trigger('changeDate');
                else
                    this._trigger('clearDate');
                var element;
                if (this.isInput) {
                    element = this.element;
                } else if (this.component) {
                    element = this.element.find('input');
                }
                if (element) {
                    element.change();
                }
            }
        },
        showMode: function(dir) {
            if (dir) {
                this.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + dir));
            }
            this.picker.find('>div').hide().filter('.datepicker-' + DPGlobal.modes[this.viewMode].clsName).css('display', 'block');
            this.updateNavArrows();
        }
    };
    var DateRangePicker = function(element, options) {
        this.element = $(element);
        this.inputs = $.map(options.inputs, function(i) {
            return i.jquery ? i[0] : i;
        });
        delete options.inputs;
        $(this.inputs).datepicker(options).bind('changeDate', $.proxy(this.dateUpdated, this));
        this.pickers = $.map(this.inputs, function(i) {
            return $(i).data('datepicker');
        });
        this.updateDates();
    };
    DateRangePicker.prototype = {
        updateDates: function() {
            this.dates = $.map(this.pickers, function(i) {
                return i.getUTCDate();
            });
            this.updateRanges();
        },
        updateRanges: function() {
            var range = $.map(this.dates, function(d) {
                return d.valueOf();
            });
            $.each(this.pickers, function(i, p) {
                p.setRange(range);
            });
        },
        dateUpdated: function(e) {
            if (this.updating)
                return;
            this.updating = true;
            var dp = $(e.target).data('datepicker'),
                new_date = dp.getUTCDate(),
                i = $.inArray(e.target, this.inputs),
                l = this.inputs.length;
            if (i === -1)
                return;
            $.each(this.pickers, function(i, p) {
                if (!p.getUTCDate())
                    p.setUTCDate(new_date);
            });
            if (new_date < this.dates[i]) {
                while (i >= 0 && new_date < this.dates[i]) {
                    this.pickers[i--].setUTCDate(new_date);
                }
            } else if (new_date > this.dates[i]) {
                while (i < l && new_date > this.dates[i]) {
                    this.pickers[i++].setUTCDate(new_date);
                }
            }
            this.updateDates();
            delete this.updating;
        },
        remove: function() {
            $.map(this.pickers, function(p) {
                p.remove();
            });
            delete this.element.data().datepicker;
        }
    };

    function opts_from_el(el, prefix) {
        var data = $(el).data(),
            out = {},
            inkey, replace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');
        prefix = new RegExp('^' + prefix.toLowerCase());

        function re_lower(_, a) {
            return a.toLowerCase();
        }
        for (var key in data)
            if (prefix.test(key)) {
                inkey = key.replace(replace, re_lower);
                out[inkey] = data[key];
            }
        return out;
    }

    function opts_from_locale(lang) {
        var out = {};
        if (!dates[lang]) {
            lang = lang.split('-')[0];
            if (!dates[lang])
                return;
        }
        var d = dates[lang];
        $.each(locale_opts, function(i, k) {
            if (k in d)
                out[k] = d[k];
        });
        return out;
    }
    var old = $.fn.datepicker;
    $.fn.datepicker = function(option) {
        var args = Array.apply(null, arguments);
        args.shift();
        var internal_return;
        this.each(function() {
            var $this = $(this),
                data = $this.data('datepicker'),
                options = typeof option === 'object' && option;
            if (!data) {
                var elopts = opts_from_el(this, 'date'),
                    xopts = $.extend({}, defaults, elopts, options),
                    locopts = opts_from_locale(xopts.language),
                    opts = $.extend({}, defaults, locopts, elopts, options);
                if ($this.is('.input-daterange') || opts.inputs) {
                    var ropts = {
                        inputs: opts.inputs || $this.find('input').toArray()
                    };
                    $this.data('datepicker', (data = new DateRangePicker(this, $.extend(opts, ropts))));
                } else {
                    $this.data('datepicker', (data = new Datepicker(this, opts)));
                }
            }
            if (typeof option === 'string' && typeof data[option] === 'function') {
                internal_return = data[option].apply(data, args);
                if (internal_return !== undefined)
                    return false;
            }
        });
        if (internal_return !== undefined)
            return internal_return;
        else
            return this;
    };
    var defaults = $.fn.datepicker.defaults = {
        autoclose: false,
        beforeShowDay: $.noop,
        calendarWeeks: false,
        clearBtn: false,
        daysOfWeekDisabled: [],
        endDate: Infinity,
        forceParse: true,
        format: 'mm/dd/yyyy',
        keyboardNavigation: true,
        language: 'en',
        minViewMode: 0,
        multidate: false,
        multidateSeparator: ',',
        orientation: "auto",
        rtl: false,
        startDate: -Infinity,
        startView: 0,
        todayBtn: false,
        todayHighlight: false,
        weekStart: 0
    };
    var locale_opts = $.fn.datepicker.locale_opts = ['format', 'rtl', 'weekStart'];
    $.fn.datepicker.Constructor = Datepicker;
    var dates = $.fn.datepicker.dates = {
        en: {
            days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
            months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            today: "Today",
            clear: "Clear"
        }
    };
    var DPGlobal = {
        modes: [{
            clsName: 'days',
            navFnc: 'Month',
            navStep: 1
        }, {
            clsName: 'months',
            navFnc: 'FullYear',
            navStep: 1
        }, {
            clsName: 'years',
            navFnc: 'FullYear',
            navStep: 10
        }],
        isLeapYear: function(year) {
            return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));
        },
        getDaysInMonth: function(year, month) {
            return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
        },
        validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,
        nonpunctuation: /[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,
        parseFormat: function(format) {
            var separators = format.replace(this.validParts, '\0').split('\0'),
                parts = format.match(this.validParts);
            if (!separators || !separators.length || !parts || parts.length === 0) {
                throw new Error("Invalid date format.");
            }
            return {
                separators: separators,
                parts: parts
            };
        },
        parseDate: function(date, format, language) {
            if (!date)
                return undefined;
            if (date instanceof Date)
                return date;
            if (typeof format === 'string')
                format = DPGlobal.parseFormat(format);
            var part_re = /([\-+]\d+)([dmwy])/,
                parts = date.match(/([\-+]\d+)([dmwy])/g),
                part, dir, i;
            if (/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)) {
                date = new Date();
                for (i = 0; i < parts.length; i++) {
                    part = part_re.exec(parts[i]);
                    dir = parseInt(part[1]);
                    switch (part[2]) {
                        case 'd':
                            date.setUTCDate(date.getUTCDate() + dir);
                            break;
                        case 'm':
                            date = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);
                            break;
                        case 'w':
                            date.setUTCDate(date.getUTCDate() + dir * 7);
                            break;
                        case 'y':
                            date = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);
                            break;
                    }
                }
                return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
            }
            parts = date && date.match(this.nonpunctuation) || [];
            date = new Date();
            var parsed = {},
                setters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],
                setters_map = {
                    yyyy: function(d, v) {
                        return d.setUTCFullYear(v);
                    },
                    yy: function(d, v) {
                        return d.setUTCFullYear(2000 + v);
                    },
                    m: function(d, v) {
                        if (isNaN(d))
                            return d;
                        v -= 1;
                        while (v < 0) v += 12;
                        v %= 12;
                        d.setUTCMonth(v);
                        while (d.getUTCMonth() !== v)
                            d.setUTCDate(d.getUTCDate() - 1);
                        return d;
                    },
                    d: function(d, v) {
                        return d.setUTCDate(v);
                    }
                },
                val, filtered;
            setters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];
            setters_map['dd'] = setters_map['d'];
            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);
            var fparts = format.parts.slice();
            if (parts.length !== fparts.length) {
                fparts = $(fparts).filter(function(i, p) {
                    return $.inArray(p, setters_order) !== -1;
                }).toArray();
            }

            function match_part() {
                var m = this.slice(0, parts[i].length),
                    p = parts[i].slice(0, m.length);
                return m === p;
            }
            if (parts.length === fparts.length) {
                var cnt;
                for (i = 0, cnt = fparts.length; i < cnt; i++) {
                    val = parseInt(parts[i], 10);
                    part = fparts[i];
                    if (isNaN(val)) {
                        switch (part) {
                            case 'MM':
                                filtered = $(dates[language].months).filter(match_part);
                                val = $.inArray(filtered[0], dates[language].months) + 1;
                                break;
                            case 'M':
                                filtered = $(dates[language].monthsShort).filter(match_part);
                                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;
                                break;
                        }
                    }
                    parsed[part] = val;
                }
                var _date, s;
                for (i = 0; i < setters_order.length; i++) {
                    s = setters_order[i];
                    if (s in parsed && !isNaN(parsed[s])) {
                        _date = new Date(date);
                        setters_map[s](_date, parsed[s]);
                        if (!isNaN(_date))
                            date = _date;
                    }
                }
            }
            return date;
        },
        formatDate: function(date, format, language) {
            if (!date)
                return '';
            if (typeof format === 'string')
                format = DPGlobal.parseFormat(format);
            var val = {
                d: date.getUTCDate(),
                D: dates[language].daysShort[date.getUTCDay()],
                DD: dates[language].days[date.getUTCDay()],
                m: date.getUTCMonth() + 1,
                M: dates[language].monthsShort[date.getUTCMonth()],
                MM: dates[language].months[date.getUTCMonth()],
                yy: date.getUTCFullYear().toString().substring(2),
                yyyy: date.getUTCFullYear()
            };
            val.dd = (val.d < 10 ? '0' : '') + val.d;
            val.mm = (val.m < 10 ? '0' : '') + val.m;
            date = [];
            var seps = $.extend([], format.separators);
            for (var i = 0, cnt = format.parts.length; i <= cnt; i++) {
                if (seps.length)
                    date.push(seps.shift());
                date.push(val[format.parts[i]]);
            }
            return date.join('');
        },
        headTemplate: '<thead>' + '<tr>' + '<th class="prev">&laquo;</th>' + '<th colspan="5" class="datepicker-switch"></th>' + '<th class="next">&raquo;</th>' + '</tr>' + '</thead>',
        contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
        footTemplate: '<tfoot>' + '<tr>' + '<th colspan="7" class="today"></th>' + '</tr>' + '<tr>' + '<th colspan="7" class="clear"></th>' + '</tr>' + '</tfoot>'
    };
    DPGlobal.template = '<div class="datepicker">' + '<div class="datepicker-days">' + '<table class="table table-condensed">' +
        DPGlobal.headTemplate + '<tbody></tbody>' +
        DPGlobal.footTemplate + '</table>' + '</div>' + '<div class="datepicker-months">' + '<table class="table table-condensed">' +
        DPGlobal.headTemplate +
        DPGlobal.contTemplate +
        DPGlobal.footTemplate + '</table>' + '</div>' + '<div class="datepicker-years">' + '<table class="table table-condensed">' +
        DPGlobal.headTemplate +
        DPGlobal.contTemplate +
        DPGlobal.footTemplate + '</table>' + '</div>' + '</div>';
    $.fn.datepicker.DPGlobal = DPGlobal;
    $.fn.datepicker.noConflict = function() {
        $.fn.datepicker = old;
        return this;
    };
    $(document).on('focus.datepicker.data-api click.datepicker.data-api', '[data-provide="datepicker"]', function(e) {
        var $this = $(this);
        if ($this.data('datepicker'))
            return;
        e.preventDefault();
        $this.datepicker('show');
    });
    $(function() {
        $('[data-provide="datepicker-inline"]').datepicker();
    });
}(window.jQuery));;
(function(root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['publisher-web/public/js/moment', 'jquery', 'exports'], function(momentjs, $, exports) {
            root.daterangepicker = factory(root, exports, momentjs, $);
        });
    } else if (typeof exports !== 'undefined') {
        var momentjs = require('publisher-web/public/js/moment');
        var jQuery;
        try {
            jQuery = require('publisher-web/public/js/jquery');
        } catch (err) {
            jQuery = window.jQuery;
            if (!jQuery) throw new Error('jQuery dependency not found');
        }
        factory(root, exports, momentjs, jQuery);
    } else {
        root.daterangepicker = factory(root, {}, root.moment, (root.jQuery || root.Zepto || root.ender || root.$));
    }
}(this, function(root, daterangepicker, moment, $) {
    var DateRangePicker = function(element, options, cb) {
        this.parentEl = 'body';
        this.element = $(element);
        this.isShowing = false;
        var DRPTemplate = '<div class="daterangepicker dropdown-menu">' + '<div class="calendar first left"></div>' + '<div class="calendar second right"></div>' + '<div class="ranges">' + '<div class="range_inputs">' + '<div class="daterangepicker_start_input">' + '<label for="daterangepicker_start"></label>' + '<input class="input-mini" type="text" name="daterangepicker_start" value="" />' + '</div>' + '<div class="daterangepicker_end_input">' + '<label for="daterangepicker_end"></label>' + '<input class="input-mini" type="text" name="daterangepicker_end" value="" />' + '</div>' + '<button class="applyBtn" disabled="disabled"></button>&nbsp;' + '<button class="cancelBtn"></button>' + '</div>' + '</div>' + '</div>';
        if (typeof options !== 'object' || options === null)
            options = {};
        this.parentEl = (typeof options === 'object' && options.parentEl && $(options.parentEl).length) ? $(options.parentEl) : $(this.parentEl);
        this.container = $(DRPTemplate).appendTo(this.parentEl);
        this.setOptions(options, cb);
        this.container.find('.calendar').on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this)).on('click.daterangepicker', '.next', $.proxy(this.clickNext, this)).on('click.daterangepicker', 'td.available', $.proxy(this.clickDate, this)).on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this)).on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this)).on('change.daterangepicker', 'select.yearselect', $.proxy(this.updateMonthYear, this)).on('change.daterangepicker', 'select.monthselect', $.proxy(this.updateMonthYear, this)).on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.secondselect,select.ampmselect', $.proxy(this.updateTime, this));
        this.container.find('.ranges').on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this)).on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this)).on('click.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.showCalendars, this)).on('change.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsChanged, this)).on('keydown.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsKeydown, this)).on('click.daterangepicker', 'li', $.proxy(this.clickRange, this)).on('mouseenter.daterangepicker', 'li', $.proxy(this.enterRange, this)).on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));
        if (this.element.is('input')) {
            this.element.on({
                'click.daterangepicker': $.proxy(this.show, this),
                'focus.daterangepicker': $.proxy(this.show, this),
                'keyup.daterangepicker': $.proxy(this.updateFromControl, this),
                'keydown.daterangepicker': $.proxy(this.keydown, this)
            });
        } else {
            this.element.on('click.daterangepicker', $.proxy(this.toggle, this));
        }
    };
    DateRangePicker.prototype = {
        constructor: DateRangePicker,
        setOptions: function(options, callback) {
            this.startDate = moment().startOf('day');
            this.endDate = moment().endOf('day');
            this.timeZone = moment().utcOffset();
            this.minDate = false;
            this.maxDate = false;
            this.dateLimit = false;
            this.showDropdowns = false;
            this.showWeekNumbers = false;
            this.timePicker = false;
            this.timePickerSeconds = false;
            this.timePickerIncrement = 30;
            this.timePicker12Hour = true;
            this.singleDatePicker = false;
            this.ranges = {};
            this.opens = 'right';
            if (this.element.hasClass('pull-right'))
                this.opens = 'left';
            this.drops = 'down';
            if (this.element.hasClass('dropup'))
                this.drops = 'up';
            this.buttonClasses = ['btn', 'btn-small btn-sm'];
            this.applyClass = 'btn-success';
            this.cancelClass = 'btn-default';
            this.format = 'MM/DD/YYYY';
            this.separator = ' - ';
            this.locale = {
                applyLabel: 'Apply',
                cancelLabel: 'Cancel',
                fromLabel: 'From',
                toLabel: 'To',
                weekLabel: 'W',
                customRangeLabel: 'Custom Range',
                daysOfWeek: moment.weekdaysMin(),
                monthNames: moment.monthsShort(),
                firstDay: moment.localeData()._week.dow
            };
            this.cb = function() {};
            if (typeof options.format === 'string')
                this.format = options.format;
            if (typeof options.separator === 'string')
                this.separator = options.separator;
            if (typeof options.startDate === 'string')
                this.startDate = moment(options.startDate, this.format);
            if (typeof options.endDate === 'string')
                this.endDate = moment(options.endDate, this.format);
            if (typeof options.minDate === 'string')
                this.minDate = moment(options.minDate, this.format);
            if (typeof options.maxDate === 'string')
                this.maxDate = moment(options.maxDate, this.format);
            if (typeof options.startDate === 'object')
                this.startDate = moment(options.startDate);
            if (typeof options.endDate === 'object')
                this.endDate = moment(options.endDate);
            if (typeof options.minDate === 'object')
                this.minDate = moment(options.minDate);
            if (typeof options.maxDate === 'object')
                this.maxDate = moment(options.maxDate);
            if (typeof options.applyClass === 'string')
                this.applyClass = options.applyClass;
            if (typeof options.cancelClass === 'string')
                this.cancelClass = options.cancelClass;
            if (typeof options.dateLimit === 'object')
                this.dateLimit = options.dateLimit;
            if (typeof options.locale === 'object') {
                if (typeof options.locale.daysOfWeek === 'object') {
                    this.locale.daysOfWeek = options.locale.daysOfWeek.slice();
                }
                if (typeof options.locale.monthNames === 'object') {
                    this.locale.monthNames = options.locale.monthNames.slice();
                }
                if (typeof options.locale.firstDay === 'number') {
                    this.locale.firstDay = options.locale.firstDay;
                }
                if (typeof options.locale.applyLabel === 'string') {
                    this.locale.applyLabel = options.locale.applyLabel;
                }
                if (typeof options.locale.cancelLabel === 'string') {
                    this.locale.cancelLabel = options.locale.cancelLabel;
                }
                if (typeof options.locale.fromLabel === 'string') {
                    this.locale.fromLabel = options.locale.fromLabel;
                }
                if (typeof options.locale.toLabel === 'string') {
                    this.locale.toLabel = options.locale.toLabel;
                }
                if (typeof options.locale.weekLabel === 'string') {
                    this.locale.weekLabel = options.locale.weekLabel;
                }
                if (typeof options.locale.customRangeLabel === 'string') {
                    this.locale.customRangeLabel = options.locale.customRangeLabel;
                }
            }
            if (typeof options.opens === 'string')
                this.opens = options.opens;
            if (typeof options.drops === 'string')
                this.drops = options.drops;
            if (typeof options.showWeekNumbers === 'boolean') {
                this.showWeekNumbers = options.showWeekNumbers;
            }
            if (typeof options.buttonClasses === 'string') {
                this.buttonClasses = [options.buttonClasses];
            }
            if (typeof options.buttonClasses === 'object') {
                this.buttonClasses = options.buttonClasses;
            }
            if (typeof options.showDropdowns === 'boolean') {
                this.showDropdowns = options.showDropdowns;
            }
            if (typeof options.singleDatePicker === 'boolean') {
                this.singleDatePicker = options.singleDatePicker;
                if (this.singleDatePicker) {
                    this.endDate = this.startDate.clone();
                }
            }
            if (typeof options.timePicker === 'boolean') {
                this.timePicker = options.timePicker;
            }
            if (typeof options.timePickerSeconds === 'boolean') {
                this.timePickerSeconds = options.timePickerSeconds;
            }
            if (typeof options.timePickerIncrement === 'number') {
                this.timePickerIncrement = options.timePickerIncrement;
            }
            if (typeof options.timePicker12Hour === 'boolean') {
                this.timePicker12Hour = options.timePicker12Hour;
            }
            if (this.locale.firstDay != 0) {
                var iterator = this.locale.firstDay;
                while (iterator > 0) {
                    this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());
                    iterator--;
                }
            }
            var start, end, range;
            if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {
                if ($(this.element).is('input[type=text]')) {
                    var val = $(this.element).val(),
                        split = val.split(this.separator);
                    start = end = null;
                    if (split.length == 2) {
                        start = moment(split[0], this.format);
                        end = moment(split[1], this.format);
                    } else if (this.singleDatePicker && val !== "") {
                        start = moment(val, this.format);
                        end = moment(val, this.format);
                    }
                    if (start !== null && end !== null) {
                        this.startDate = start;
                        this.endDate = end;
                    }
                }
            }
            if (typeof options.timeZone === 'string' || typeof options.timeZone === 'number') {
                if (typeof options.timeZone === 'string' && typeof moment.tz !== 'undefined') {
                    this.timeZone = moment.tz.zone(options.timeZone).parse(new Date) * -1;
                } else {
                    this.timeZone = options.timeZone;
                }
                this.startDate.utcOffset(this.timeZone);
                this.endDate.utcOffset(this.timeZone);
            } else {
                this.timeZone = moment(this.startDate).utcOffset();
            }
            if (typeof options.ranges === 'object') {
                for (range in options.ranges) {
                    if (typeof options.ranges[range][0] === 'string')
                        start = moment(options.ranges[range][0], this.format);
                    else
                        start = moment(options.ranges[range][0]);
                    if (typeof options.ranges[range][1] === 'string')
                        end = moment(options.ranges[range][1], this.format);
                    else
                        end = moment(options.ranges[range][1]);
                    if (this.minDate && start.isBefore(this.minDate))
                        start = moment(this.minDate);
                    if (this.maxDate && end.isAfter(this.maxDate))
                        end = moment(this.maxDate);
                    if ((this.minDate && end.isBefore(this.minDate)) || (this.maxDate && start.isAfter(this.maxDate))) {
                        continue;
                    }
                    this.ranges[range] = [start, end];
                }
                var list = '<ul>';
                for (range in this.ranges) {
                    list += '<li>' + range + '</li>';
                }
                list += '<li>' + this.locale.customRangeLabel + '</li>';
                list += '</ul>';
                this.container.find('.ranges ul').remove();
                this.container.find('.ranges').prepend(list);
            }
            if (typeof callback === 'function') {
                this.cb = callback;
            }
            if (!this.timePicker) {
                this.startDate = this.startDate.startOf('day');
                this.endDate = this.endDate.endOf('day');
            }
            if (this.singleDatePicker) {
                this.opens = 'right';
                this.container.addClass('single');
                this.container.find('.calendar.right').show();
                this.container.find('.calendar.left').hide();
                if (!this.timePicker) {
                    this.container.find('.ranges').hide();
                } else {
                    this.container.find('.ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input').hide();
                }
                if (!this.container.find('.calendar.right').hasClass('single'))
                    this.container.find('.calendar.right').addClass('single');
            } else {
                this.container.removeClass('single');
                this.container.find('.calendar.right').removeClass('single');
                this.container.find('.ranges').show();
            }
            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();
            this.oldChosenLabel = this.chosenLabel;
            this.leftCalendar = {
                month: moment([this.startDate.year(), this.startDate.month(), 1, this.startDate.hour(), this.startDate.minute(), this.startDate.second()]),
                calendar: []
            };
            this.rightCalendar = {
                month: moment([this.endDate.year(), this.endDate.month(), 1, this.endDate.hour(), this.endDate.minute(), this.endDate.second()]),
                calendar: []
            };
            if (this.opens == 'right' || this.opens == 'center') {
                var first = this.container.find('.calendar.first');
                var second = this.container.find('.calendar.second');
                if (second.hasClass('single')) {
                    second.removeClass('single');
                    first.addClass('single');
                }
                first.removeClass('left').addClass('right');
                second.removeClass('right').addClass('left');
                if (this.singleDatePicker) {
                    first.show();
                    second.hide();
                }
            }
            if (typeof options.ranges === 'undefined' && !this.singleDatePicker) {
                this.container.addClass('show-calendar');
            }
            this.container.removeClass('opensleft opensright').addClass('opens' + this.opens);
            this.updateView();
            this.updateCalendars();
            var c = this.container;
            $.each(this.buttonClasses, function(idx, val) {
                c.find('button').addClass(val);
            });
            this.container.find('.daterangepicker_start_input label').html(this.locale.fromLabel);
            this.container.find('.daterangepicker_end_input label').html(this.locale.toLabel);
            if (this.applyClass.length)
                this.container.find('.applyBtn').addClass(this.applyClass);
            if (this.cancelClass.length)
                this.container.find('.cancelBtn').addClass(this.cancelClass);
            this.container.find('.applyBtn').html(this.locale.applyLabel);
            this.container.find('.cancelBtn').html(this.locale.cancelLabel);
        },
        setStartDate: function(startDate) {
            if (typeof startDate === 'string')
                this.startDate = moment(startDate, this.format).utcOffset(this.timeZone);
            if (typeof startDate === 'object')
                this.startDate = moment(startDate);
            if (!this.timePicker)
                this.startDate = this.startDate.startOf('day');
            this.oldStartDate = this.startDate.clone();
            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },
        setEndDate: function(endDate) {
            if (typeof endDate === 'string')
                this.endDate = moment(endDate, this.format).utcOffset(this.timeZone);
            if (typeof endDate === 'object')
                this.endDate = moment(endDate);
            if (!this.timePicker)
                this.endDate = this.endDate.endOf('day');
            this.oldEndDate = this.endDate.clone();
            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },
        updateView: function() {
            this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
            this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
            this.updateFormInputs();
        },
        updateFormInputs: function() {
            this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.format));
            this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.format));
            if (this.startDate.isSame(this.endDate) || this.startDate.isBefore(this.endDate)) {
                this.container.find('button.applyBtn').removeAttr('disabled');
            } else {
                this.container.find('button.applyBtn').attr('disabled', 'disabled');
            }
        },
        updateFromControl: function() {
            if (!this.element.is('input')) return;
            if (!this.element.val().length) return;
            var dateString = this.element.val().split(this.separator),
                start = null,
                end = null;
            if (dateString.length === 2) {
                start = moment(dateString[0], this.format).utcOffset(this.timeZone);
                end = moment(dateString[1], this.format).utcOffset(this.timeZone);
            }
            if (this.singleDatePicker || start === null || end === null) {
                start = moment(this.element.val(), this.format).utcOffset(this.timeZone);
                end = start;
            }
            if (end.isBefore(start)) return;
            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();
            this.startDate = start;
            this.endDate = end;
            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();
            this.updateCalendars();
        },
        keydown: function(e) {
            if ((e.keyCode === 9) || (e.keyCode === 13)) {
                this.hide();
            }
        },
        notify: function() {
            this.updateView();
            this.cb(this.startDate, this.endDate, this.chosenLabel);
        },
        move: function() {
            var parentOffset = {
                    top: 0,
                    left: 0
                },
                containerTop;
            var parentRightEdge = $(window).width();
            if (!this.parentEl.is('body')) {
                parentOffset = {
                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),
                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()
                };
                parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;
            }
            if (this.drops == 'up')
                containerTop = this.element.offset().top - this.container.outerHeight() - parentOffset.top;
            else
                containerTop = this.element.offset().top + this.element.outerHeight() - parentOffset.top;
            this.container[this.drops == 'up' ? 'addClass' : 'removeClass']('dropup');
            if (this.opens == 'left') {
                this.container.css({
                    top: containerTop,
                    right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),
                    left: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else if (this.opens == 'center') {
                this.container.css({
                    top: containerTop,
                    left: this.element.offset().left - parentOffset.left + this.element.outerWidth() / 2 -
                        this.container.outerWidth() / 2,
                    right: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else {
                this.container.css({
                    top: containerTop,
                    left: this.element.offset().left - parentOffset.left,
                    right: 'auto'
                });
                if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {
                    this.container.css({
                        left: 'auto',
                        right: 0
                    });
                }
            }
        },
        toggle: function(e) {
            if (this.element.hasClass('active')) {
                this.hide();
            } else {
                this.show();
            }
        },
        show: function(e) {
            if (this.isShowing) return;
            this.element.addClass('active');
            this.container.show();
            this.move();
            this._outsideClickProxy = $.proxy(function(e) {
                this.outsideClick(e);
            }, this);
            $(document).on('mousedown.daterangepicker', this._outsideClickProxy).on('touchend.daterangepicker', this._outsideClickProxy).on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy).on('focusin.daterangepicker', this._outsideClickProxy);
            this.isShowing = true;
            this.element.trigger('show.daterangepicker', this);
        },
        outsideClick: function(e) {
            var target = $(e.target);
            if (e.type == "focusin" || target.closest(this.element).length || target.closest(this.container).length || target.closest('.calendar-date').length) return;
            this.hide();
        },
        hide: function(e) {
            if (!this.isShowing) return;
            $(document).off('.daterangepicker');
            this.element.removeClass('active');
            this.container.hide();
            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();
            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();
            this.isShowing = false;
            this.element.trigger('hide.daterangepicker', this);
        },
        enterRange: function(e) {
            var label = e.target.innerHTML;
            if (label == this.locale.customRangeLabel) {
                this.updateView();
            } else {
                var dates = this.ranges[label];
                this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.format));
                this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.format));
            }
        },
        showCalendars: function() {
            this.container.addClass('show-calendar');
            this.move();
            this.element.trigger('showCalendar.daterangepicker', this);
        },
        hideCalendars: function() {
            this.container.removeClass('show-calendar');
            this.element.trigger('hideCalendar.daterangepicker', this);
        },
        inputsChanged: function(e) {
            var el = $(e.target);
            var date = moment(el.val(), this.format);
            if (!date.isValid()) return;
            var startDate, endDate;
            if (el.attr('name') === 'daterangepicker_start') {
                startDate = (false !== this.minDate && date.isBefore(this.minDate)) ? this.minDate : date;
                endDate = this.endDate;
            } else {
                startDate = this.startDate;
                endDate = (false !== this.maxDate && date.isAfter(this.maxDate)) ? this.maxDate : date;
            }
            this.setCustomDates(startDate, endDate);
        },
        inputsKeydown: function(e) {
            if (e.keyCode === 13) {
                this.inputsChanged(e);
                this.notify();
            }
        },
        updateInputText: function() {
            if (this.element.is('input') && !this.singleDatePicker) {
                this.element.val(this.startDate.format(this.format) + this.separator + this.endDate.format(this.format));
                this.element.trigger('change');
            } else if (this.element.is('input')) {
                this.element.val(this.endDate.format(this.format));
                this.element.trigger('change');
            }
        },
        clickRange: function(e) {
            var label = e.target.innerHTML;
            this.chosenLabel = label;
            if (label == this.locale.customRangeLabel) {
                this.showCalendars();
            } else {
                var dates = this.ranges[label];
                this.startDate = dates[0];
                this.endDate = dates[1];
                if (!this.timePicker) {
                    this.startDate.startOf('day');
                    this.endDate.endOf('day');
                }
                this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
                this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
                this.updateCalendars();
                this.updateInputText();
                this.hideCalendars();
                this.hide();
                this.element.trigger('apply.daterangepicker', this);
            }
        },
        clickPrev: function(e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.subtract(1, 'month');
            } else {
                this.rightCalendar.month.subtract(1, 'month');
            }
            this.updateCalendars();
        },
        clickNext: function(e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.add(1, 'month');
            } else {
                this.rightCalendar.month.add(1, 'month');
            }
            this.updateCalendars();
        },
        hoverDate: function(e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.container.find('input[name=daterangepicker_start]').val(this.leftCalendar.calendar[row][col].format(this.format));
            } else {
                this.container.find('input[name=daterangepicker_end]').val(this.rightCalendar.calendar[row][col].format(this.format));
            }
        },
        setCustomDates: function(startDate, endDate) {
            this.chosenLabel = this.locale.customRangeLabel;
            if (startDate.isAfter(endDate)) {
                var difference = this.endDate.diff(this.startDate);
                endDate = moment(startDate).add(difference, 'ms');
                if (this.maxDate && endDate.isAfter(this.maxDate)) {
                    endDate = this.maxDate.clone();
                }
            }
            this.startDate = startDate;
            this.endDate = endDate;
            this.updateView();
            this.updateCalendars();
        },
        clickDate: function(e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');
            var startDate, endDate;
            if (cal.hasClass('left')) {
                startDate = this.leftCalendar.calendar[row][col];
                endDate = this.endDate;
                if (typeof this.dateLimit === 'object') {
                    var maxDate = moment(startDate).add(this.dateLimit).startOf('day');
                    if (endDate.isAfter(maxDate)) {
                        endDate = maxDate;
                    }
                }
            } else {
                startDate = this.startDate;
                endDate = this.rightCalendar.calendar[row][col];
                if (typeof this.dateLimit === 'object') {
                    var minDate = moment(endDate).subtract(this.dateLimit).startOf('day');
                    if (startDate.isBefore(minDate)) {
                        startDate = minDate;
                    }
                }
            }
            if (this.singleDatePicker && cal.hasClass('left')) {
                endDate = startDate.clone();
            } else if (this.singleDatePicker && cal.hasClass('right')) {
                startDate = endDate.clone();
            }
            cal.find('td').removeClass('active');
            $(e.target).addClass('active');
            this.setCustomDates(startDate, endDate);
            if (!this.timePicker)
                endDate.endOf('day');
            if (this.singleDatePicker && !this.timePicker)
                this.clickApply();
        },
        clickApply: function(e) {
            this.updateInputText();
            this.hide();
            this.element.trigger('apply.daterangepicker', this);
        },
        clickCancel: function(e) {
            this.startDate = this.oldStartDate;
            this.endDate = this.oldEndDate;
            this.chosenLabel = this.oldChosenLabel;
            this.updateView();
            this.updateCalendars();
            this.hide();
            this.element.trigger('cancel.daterangepicker', this);
        },
        updateMonthYear: function(e) {
            var isLeft = $(e.target).closest('.calendar').hasClass('left'),
                leftOrRight = isLeft ? 'left' : 'right',
                cal = this.container.find('.calendar.' + leftOrRight);
            var month = parseInt(cal.find('.monthselect').val(), 10);
            var year = cal.find('.yearselect').val();
            if (!isLeft && !this.singleDatePicker) {
                if (year < this.startDate.year() || (year == this.startDate.year() && month < this.startDate.month())) {
                    month = this.startDate.month();
                    year = this.startDate.year();
                }
            }
            if (this.minDate) {
                if (year < this.minDate.year() || (year == this.minDate.year() && month < this.minDate.month())) {
                    month = this.minDate.month();
                    year = this.minDate.year();
                }
            }
            if (this.maxDate) {
                if (year > this.maxDate.year() || (year == this.maxDate.year() && month > this.maxDate.month())) {
                    month = this.maxDate.month();
                    year = this.maxDate.year();
                }
            }
            this[leftOrRight + 'Calendar'].month.month(month).year(year);
            this.updateCalendars();
        },
        updateTime: function(e) {
            var cal = $(e.target).closest('.calendar'),
                isLeft = cal.hasClass('left');
            var hour = parseInt(cal.find('.hourselect').val(), 10);
            var minute = parseInt(cal.find('.minuteselect').val(), 10);
            var second = 0;
            if (this.timePickerSeconds) {
                second = parseInt(cal.find('.secondselect').val(), 10);
            }
            if (this.timePicker12Hour) {
                var ampm = cal.find('.ampmselect').val();
                if (ampm === 'PM' && hour < 12)
                    hour += 12;
                if (ampm === 'AM' && hour === 12)
                    hour = 0;
            }
            if (isLeft) {
                var start = this.startDate.clone();
                start.hour(hour);
                start.minute(minute);
                start.second(second);
                this.startDate = start;
                this.leftCalendar.month.hour(hour).minute(minute).second(second);
                if (this.singleDatePicker)
                    this.endDate = start.clone();
            } else {
                var end = this.endDate.clone();
                end.hour(hour);
                end.minute(minute);
                end.second(second);
                this.endDate = end;
                if (this.singleDatePicker)
                    this.startDate = end.clone();
                this.rightCalendar.month.hour(hour).minute(minute).second(second);
            }
            this.updateView();
            this.updateCalendars();
        },
        updateCalendars: function() {
            this.leftCalendar.calendar = this.buildCalendar(this.leftCalendar.month.month(), this.leftCalendar.month.year(), this.leftCalendar.month.hour(), this.leftCalendar.month.minute(), this.leftCalendar.month.second(), 'left');
            this.rightCalendar.calendar = this.buildCalendar(this.rightCalendar.month.month(), this.rightCalendar.month.year(), this.rightCalendar.month.hour(), this.rightCalendar.month.minute(), this.rightCalendar.month.second(), 'right');
            this.container.find('.calendar.left').empty().html(this.renderCalendar(this.leftCalendar.calendar, this.startDate, this.minDate, this.maxDate, 'left'));
            this.container.find('.calendar.right').empty().html(this.renderCalendar(this.rightCalendar.calendar, this.endDate, this.singleDatePicker ? this.minDate : this.startDate, this.maxDate, 'right'));
            this.container.find('.ranges li').removeClass('active');
            var customRange = true;
            var i = 0;
            for (var range in this.ranges) {
                if (this.timePicker) {
                    if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();
                    }
                } else {
                    if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();
                    }
                }
                i++;
            }
            if (customRange) {
                this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();
                this.showCalendars();
            }
        },
        buildCalendar: function(month, year, hour, minute, second, side) {
            var daysInMonth = moment([year, month]).daysInMonth();
            var firstDay = moment([year, month, 1]);
            var lastDay = moment([year, month, daysInMonth]);
            var lastMonth = moment(firstDay).subtract(1, 'month').month();
            var lastYear = moment(firstDay).subtract(1, 'month').year();
            var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();
            var dayOfWeek = firstDay.day();
            var i;
            var calendar = [];
            calendar.firstDay = firstDay;
            calendar.lastDay = lastDay;
            for (i = 0; i < 6; i++) {
                calendar[i] = [];
            }
            var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;
            if (startDay > daysInLastMonth)
                startDay -= 7;
            if (dayOfWeek == this.locale.firstDay)
                startDay = daysInLastMonth - 6;
            var curDate = moment([lastYear, lastMonth, startDay, 12, minute, second]).utcOffset(this.timeZone);
            var col, row;
            for (i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {
                if (i > 0 && col % 7 === 0) {
                    col = 0;
                    row++;
                }
                calendar[row][col] = curDate.clone().hour(hour);
                curDate.hour(12);
                if (this.minDate && calendar[row][col].format('YYYY-MM-DD') == this.minDate.format('YYYY-MM-DD') && calendar[row][col].isBefore(this.minDate) && side == 'left') {
                    calendar[row][col] = this.minDate.clone();
                }
                if (this.maxDate && calendar[row][col].format('YYYY-MM-DD') == this.maxDate.format('YYYY-MM-DD') && calendar[row][col].isAfter(this.maxDate) && side == 'right') {
                    calendar[row][col] = this.maxDate.clone();
                }
            }
            return calendar;
        },
        renderDropdowns: function(selected, minDate, maxDate) {
            var currentMonth = selected.month();
            var currentYear = selected.year();
            var maxYear = (maxDate && maxDate.year()) || (currentYear + 5);
            var minYear = (minDate && minDate.year()) || (currentYear - 50);
            var monthHtml = '<select class="monthselect">';
            var inMinYear = currentYear == minYear;
            var inMaxYear = currentYear == maxYear;
            for (var m = 0; m < 12; m++) {
                if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {
                    monthHtml += "<option value='" + m + "'" +
                        (m === currentMonth ? " selected='selected'" : "") + ">" + this.locale.monthNames[m] + "</option>";
                }
            }
            monthHtml += "</select>";
            var yearHtml = '<select class="yearselect">';
            for (var y = minYear; y <= maxYear; y++) {
                yearHtml += '<option value="' + y + '"' +
                    (y === currentYear ? ' selected="selected"' : '') + '>' + y + '</option>';
            }
            yearHtml += '</select>';
            return monthHtml + yearHtml;
        },
        renderCalendar: function(calendar, selected, minDate, maxDate, side) {
            var html = '<div class="calendar-date">';
            html += '<table class="table-condensed">';
            html += '<thead>';
            html += '<tr>';
            if (this.showWeekNumbers)
                html += '<th></th>';
            if (!minDate || minDate.isBefore(calendar.firstDay)) {
                html += '<th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>';
            } else {
                html += '<th></th>';
            }
            var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(" YYYY");
            if (this.showDropdowns) {
                dateHtml = this.renderDropdowns(calendar[1][1], minDate, maxDate);
            }
            html += '<th colspan="5" class="month">' + dateHtml + '</th>';
            if (!maxDate || maxDate.isAfter(calendar.lastDay)) {
                html += '<th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>';
            } else {
                html += '<th></th>';
            }
            html += '</tr>';
            html += '<tr>';
            if (this.showWeekNumbers)
                html += '<th class="week">' + this.locale.weekLabel + '</th>';
            $.each(this.locale.daysOfWeek, function(index, dayOfWeek) {
                html += '<th>' + dayOfWeek + '</th>';
            });
            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';
            for (var row = 0; row < 6; row++) {
                html += '<tr>';
                if (this.showWeekNumbers)
                    html += '<td class="week">' + calendar[row][0].week() + '</td>';
                for (var col = 0; col < 7; col++) {
                    var cname = 'available ';
                    cname += (calendar[row][col].month() == calendar[1][1].month()) ? '' : 'off';
                    if ((minDate && calendar[row][col].isBefore(minDate, 'day')) || (maxDate && calendar[row][col].isAfter(maxDate, 'day'))) {
                        cname = ' off disabled ';
                    } else if (calendar[row][col].format('YYYY-MM-DD') == selected.format('YYYY-MM-DD')) {
                        cname += ' active ';
                        if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD')) {
                            cname += ' start-date ';
                        }
                        if (calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD')) {
                            cname += ' end-date ';
                        }
                    } else if (calendar[row][col] >= this.startDate && calendar[row][col] <= this.endDate) {
                        cname += ' in-range ';
                        if (calendar[row][col].isSame(this.startDate)) {
                            cname += ' start-date ';
                        }
                        if (calendar[row][col].isSame(this.endDate)) {
                            cname += ' end-date ';
                        }
                    }
                    var title = 'r' + row + 'c' + col;
                    html += '<td class="' + cname.replace(/\s+/g, ' ').replace(/^\s?(.*?)\s?$/, '$1') + '" data-title="' + title + '">' + calendar[row][col].date() + '</td>';
                }
                html += '</tr>';
            }
            html += '</tbody>';
            html += '</table>';
            html += '</div>';
            var i;
            if (this.timePicker) {
                html += '<div class="calendar-time">';
                html += '<select class="hourselect">';
                var min_hour = 0;
                var max_hour = 23;
                if (minDate && (side == 'left' || this.singleDatePicker) && selected.format('YYYY-MM-DD') == minDate.format('YYYY-MM-DD')) {
                    min_hour = minDate.hour();
                    if (selected.hour() < min_hour)
                        selected.hour(min_hour);
                    if (this.timePicker12Hour && min_hour >= 12 && selected.hour() >= 12)
                        min_hour -= 12;
                    if (this.timePicker12Hour && min_hour == 12)
                        min_hour = 1;
                }
                if (maxDate && (side == 'right' || this.singleDatePicker) && selected.format('YYYY-MM-DD') == maxDate.format('YYYY-MM-DD')) {
                    max_hour = maxDate.hour();
                    if (selected.hour() > max_hour)
                        selected.hour(max_hour);
                    if (this.timePicker12Hour && max_hour >= 12 && selected.hour() >= 12)
                        max_hour -= 12;
                }
                var start = 0;
                var end = 23;
                var selected_hour = selected.hour();
                if (this.timePicker12Hour) {
                    start = 1;
                    end = 12;
                    if (selected_hour >= 12)
                        selected_hour -= 12;
                    if (selected_hour === 0)
                        selected_hour = 12;
                }
                for (i = start; i <= end; i++) {
                    if (i == selected_hour) {
                        html += '<option value="' + i + '" selected="selected">' + i + '</option>';
                    } else if (i < min_hour || i > max_hour) {
                        html += '<option value="' + i + '" disabled="disabled" class="disabled">' + i + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + i + '</option>';
                    }
                }
                html += '</select> : ';
                html += '<select class="minuteselect">';
                var min_minute = 0;
                var max_minute = 59;
                if (minDate && (side == 'left' || this.singleDatePicker) && selected.format('YYYY-MM-DD h A') == minDate.format('YYYY-MM-DD h A')) {
                    min_minute = minDate.minute();
                    if (selected.minute() < min_minute)
                        selected.minute(min_minute);
                }
                if (maxDate && (side == 'right' || this.singleDatePicker) && selected.format('YYYY-MM-DD h A') == maxDate.format('YYYY-MM-DD h A')) {
                    max_minute = maxDate.minute();
                    if (selected.minute() > max_minute)
                        selected.minute(max_minute);
                }
                for (i = 0; i < 60; i += this.timePickerIncrement) {
                    var num = i;
                    if (num < 10)
                        num = '0' + num;
                    if (i == selected.minute()) {
                        html += '<option value="' + i + '" selected="selected">' + num + '</option>';
                    } else if (i < min_minute || i > max_minute) {
                        html += '<option value="' + i + '" disabled="disabled" class="disabled">' + num + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + num + '</option>';
                    }
                }
                html += '</select> ';
                if (this.timePickerSeconds) {
                    html += ': <select class="secondselect">';
                    for (i = 0; i < 60; i += this.timePickerIncrement) {
                        var num = i;
                        if (num < 10)
                            num = '0' + num;
                        if (i == selected.second()) {
                            html += '<option value="' + i + '" selected="selected">' + num + '</option>';
                        } else {
                            html += '<option value="' + i + '">' + num + '</option>';
                        }
                    }
                    html += '</select>';
                }
                if (this.timePicker12Hour) {
                    html += '<select class="ampmselect">';
                    var am_html = '';
                    var pm_html = '';
                    if (minDate && (side == 'left' || this.singleDatePicker) && selected.format('YYYY-MM-DD') == minDate.format('YYYY-MM-DD') && minDate.hour() >= 12) {
                        am_html = ' disabled="disabled" class="disabled"';
                    }
                    if (maxDate && (side == 'right' || this.singleDatePicker) && selected.format('YYYY-MM-DD') == maxDate.format('YYYY-MM-DD') && maxDate.hour() < 12) {
                        pm_html = ' disabled="disabled" class="disabled"';
                    }
                    if (selected.hour() >= 12) {
                        html += '<option value="AM"' + am_html + '>AM</option><option value="PM" selected="selected"' + pm_html + '>PM</option>';
                    } else {
                        html += '<option value="AM" selected="selected"' + am_html + '>AM</option><option value="PM"' + pm_html + '>PM</option>';
                    }
                    html += '</select>';
                }
                html += '</div>';
            }
            return html;
        },
        remove: function() {
            this.container.remove();
            this.element.off('.daterangepicker');
            this.element.removeData('daterangepicker');
        }
    };
    $.fn.daterangepicker = function(options, cb) {
        this.each(function() {
            var el = $(this);
            if (el.data('daterangepicker'))
                el.data('daterangepicker').remove();
            el.data('daterangepicker', new DateRangePicker(el, options, cb));
        });
        return this;
    };
}));;
! function(a) {
    "use strict";
    if ("function" == typeof define && define.amd) define(["publisher-web/public/js/jquery", "moment"], a);
    else if ("object" == typeof exports) a(require("publisher-web/public/js/jquery"), require("publisher-web/public/js/moment"));
    else {
        if ("undefined" == typeof jQuery) throw "bootstrap-datetimepicker requires jQuery to be loaded first";
        if ("undefined" == typeof moment) throw "bootstrap-datetimepicker requires Moment.js to be loaded first";
        a(jQuery, moment)
    }
}(function(a, b) {
    "use strict";
    if (!b) throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");
    var c = function(c, d) {
        var e, f, g, h, i, j, k, l = {},
            m = !0,
            n = !1,
            o = !1,
            p = 0,
            q = [{
                clsName: "days",
                navFnc: "M",
                navStep: 1
            }, {
                clsName: "months",
                navFnc: "y",
                navStep: 1
            }, {
                clsName: "years",
                navFnc: "y",
                navStep: 10
            }, {
                clsName: "decades",
                navFnc: "y",
                navStep: 100
            }],
            r = ["days", "months", "years", "decades"],
            s = ["top", "bottom", "auto"],
            t = ["left", "right", "auto"],
            u = ["default", "top", "bottom"],
            v = {
                up: 38,
                38: "up",
                down: 40,
                40: "down",
                left: 37,
                37: "left",
                right: 39,
                39: "right",
                tab: 9,
                9: "tab",
                escape: 27,
                27: "escape",
                enter: 13,
                13: "enter",
                pageUp: 33,
                33: "pageUp",
                pageDown: 34,
                34: "pageDown",
                shift: 16,
                16: "shift",
                control: 17,
                17: "control",
                space: 32,
                32: "space",
                t: 84,
                84: "t",
                "delete": 46,
                46: "delete"
            },
            w = {},
            x = function(a) {
                var c, e, f, g, h, i = !1;
                return void 0 !== b.tz && void 0 !== d.timeZone && null !== d.timeZone && "" !== d.timeZone && (i = !0), void 0 === a || null === a ? c = i ? b().tz(d.timeZone).startOf("d") : b().startOf("d") : i ? (e = b().tz(d.timeZone).utcOffset(), f = b(a, j, d.useStrict).utcOffset(), f !== e ? (g = b().tz(d.timeZone).format("Z"), h = b(a, j, d.useStrict).format("YYYY-MM-DD[T]HH:mm:ss") + g, c = b(h, j, d.useStrict).tz(d.timeZone)) : c = b(a, j, d.useStrict).tz(d.timeZone)) : c = b(a, j, d.useStrict), c
            },
            y = function(a) {
                if ("string" != typeof a || a.length > 1) throw new TypeError("isEnabled expects a single character string parameter");
                switch (a) {
                    case "y":
                        return -1 !== i.indexOf("Y");
                    case "M":
                        return -1 !== i.indexOf("M");
                    case "d":
                        return -1 !== i.toLowerCase().indexOf("d");
                    case "h":
                    case "H":
                        return -1 !== i.toLowerCase().indexOf("h");
                    case "m":
                        return -1 !== i.indexOf("m");
                    case "s":
                        return -1 !== i.indexOf("s");
                    default:
                        return !1
                }
            },
            z = function() {
                return y("h") || y("m") || y("s")
            },
            A = function() {
                return y("y") || y("M") || y("d")
            },
            B = function() {
                var b = a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action", "previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action", "pickerSwitch").attr("colspan", d.calendarWeeks ? "6" : "5")).append(a("<th>").addClass("next").attr("data-action", "next").append(a("<span>").addClass(d.icons.next)))),
                    c = a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan", d.calendarWeeks ? "8" : "7")));
                return [a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))), a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())), a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())), a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]
            },
            C = function() {
                var b = a("<tr>"),
                    c = a("<tr>"),
                    e = a("<tr>");
                return y("h") && (b.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.incrementHour
                }).addClass("btn").attr("data-action", "incrementHours").append(a("<span>").addClass(d.icons.up)))), c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({
                    "data-time-component": "hours",
                    title: d.tooltips.pickHour
                }).attr("data-action", "showHours"))), e.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.decrementHour
                }).addClass("btn").attr("data-action", "decrementHours").append(a("<span>").addClass(d.icons.down))))), y("m") && (y("h") && (b.append(a("<td>").addClass("separator")), c.append(a("<td>").addClass("separator").html(":")), e.append(a("<td>").addClass("separator"))), b.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.incrementMinute
                }).addClass("btn").attr("data-action", "incrementMinutes").append(a("<span>").addClass(d.icons.up)))), c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({
                    "data-time-component": "minutes",
                    title: d.tooltips.pickMinute
                }).attr("data-action", "showMinutes"))), e.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.decrementMinute
                }).addClass("btn").attr("data-action", "decrementMinutes").append(a("<span>").addClass(d.icons.down))))), y("s") && (y("m") && (b.append(a("<td>").addClass("separator")), c.append(a("<td>").addClass("separator").html(":")), e.append(a("<td>").addClass("separator"))), b.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.incrementSecond
                }).addClass("btn").attr("data-action", "incrementSeconds").append(a("<span>").addClass(d.icons.up)))), c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({
                    "data-time-component": "seconds",
                    title: d.tooltips.pickSecond
                }).attr("data-action", "showSeconds"))), e.append(a("<td>").append(a("<a>").attr({
                    href: "#",
                    tabindex: "-1",
                    title: d.tooltips.decrementSecond
                }).addClass("btn").attr("data-action", "decrementSeconds").append(a("<span>").addClass(d.icons.down))))), h || (b.append(a("<td>").addClass("separator")), c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({
                    "data-action": "togglePeriod",
                    tabindex: "-1",
                    title: d.tooltips.togglePeriod
                }))), e.append(a("<td>").addClass("separator"))), a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b, c, e]))
            },
            D = function() {
                var b = a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),
                    c = a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),
                    d = a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),
                    e = [C()];
                return y("h") && e.push(b), y("m") && e.push(c), y("s") && e.push(d), e
            },
            E = function() {
                var b = [];
                return d.showTodayButton && b.push(a("<td>").append(a("<a>").attr({
                    "data-action": "today",
                    title: d.tooltips.today
                }).append(a("<span>").addClass(d.icons.today)))), !d.sideBySide && A() && z() && b.push(a("<td>").append(a("<a>").attr({
                    "data-action": "togglePicker",
                    title: d.tooltips.selectTime
                }).append(a("<span>").addClass(d.icons.time)))), d.showClear && b.push(a("<td>").append(a("<a>").attr({
                    "data-action": "clear",
                    title: d.tooltips.clear
                }).append(a("<span>").addClass(d.icons.clear)))), d.showClose && b.push(a("<td>").append(a("<a>").attr({
                    "data-action": "close",
                    title: d.tooltips.close
                }).append(a("<span>").addClass(d.icons.close)))), a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))
            },
            F = function() {
                var b = a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),
                    c = a("<div>").addClass("datepicker").append(B()),
                    e = a("<div>").addClass("timepicker").append(D()),
                    f = a("<ul>").addClass("list-unstyled"),
                    g = a("<li>").addClass("picker-switch" + (d.collapse ? " accordion-toggle" : "")).append(E());
                return d.inline && b.removeClass("dropdown-menu"), h && b.addClass("usetwentyfour"), y("s") && !h && b.addClass("wider"), d.sideBySide && A() && z() ? (b.addClass("timepicker-sbs"), "top" === d.toolbarPlacement && b.append(g), b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))), "bottom" === d.toolbarPlacement && b.append(g), b) : ("top" === d.toolbarPlacement && f.append(g), A() && f.append(a("<li>").addClass(d.collapse && z() ? "collapse in" : "").append(c)), "default" === d.toolbarPlacement && f.append(g), z() && f.append(a("<li>").addClass(d.collapse && A() ? "collapse" : "").append(e)), "bottom" === d.toolbarPlacement && f.append(g), b.append(f))
            },
            G = function() {
                var b, e = {};
                return b = c.is("input") || d.inline ? c.data() : c.find("input").data(), b.dateOptions && b.dateOptions instanceof Object && (e = a.extend(!0, e, b.dateOptions)), a.each(d, function(a) {
                    var c = "date" + a.charAt(0).toUpperCase() + a.slice(1);
                    void 0 !== b[c] && (e[a] = b[c])
                }), e
            },
            H = function() {
                var b, e = (n || c).position(),
                    f = (n || c).offset(),
                    g = d.widgetPositioning.vertical,
                    h = d.widgetPositioning.horizontal;
                if (d.widgetParent) b = d.widgetParent.append(o);
                else if (c.is("input")) b = c.after(o).parent();
                else {
                    if (d.inline) return void(b = c.append(o));
                    b = c, c.children().first().after(o)
                }
                if ("auto" === g && (g = f.top + 1.5 * o.height() >= a(window).height() + a(window).scrollTop() && o.height() + c.outerHeight() < f.top ? "top" : "bottom"), "auto" === h && (h = b.width() < f.left + o.outerWidth() / 2 && f.left + o.outerWidth() > a(window).width() ? "right" : "left"), "top" === g ? o.addClass("top").removeClass("bottom") : o.addClass("bottom").removeClass("top"), "right" === h ? o.addClass("pull-right") : o.removeClass("pull-right"), "relative" !== b.css("position") && (b = b.parents().filter(function() {
                    return "relative" === a(this).css("position")
                }).first()), 0 === b.length) throw new Error("datetimepicker component should be placed within a relative positioned container");
                o.css({
                    top: "top" === g ? "auto" : e.top + c.outerHeight(),
                    bottom: "top" === g ? e.top + c.outerHeight() : "auto",
                    left: "left" === h ? b === c ? 0 : e.left : "auto",
                    right: "left" === h ? "auto" : b.outerWidth() - c.outerWidth() - (b === c ? 0 : e.left)
                })
            },
            I = function(a) {
                "dp.change" === a.type && (a.date && a.date.isSame(a.oldDate) || !a.date && !a.oldDate) || c.trigger(a)
            },
            J = function(a) {
                "y" === a && (a = "YYYY"), I({
                    type: "dp.update",
                    change: a,
                    viewDate: f.clone()
                })
            },
            K = function(a) {
                o && (a && (k = Math.max(p, Math.min(3, k + a))), o.find(".datepicker > div").hide().filter(".datepicker-" + q[k].clsName).show())
            },
            L = function() {
                var b = a("<tr>"),
                    c = f.clone().startOf("w").startOf("d");
                for (d.calendarWeeks === !0 && b.append(a("<th>").addClass("cw").text("#")); c.isBefore(f.clone().endOf("w"));) b.append(a("<th>").addClass("dow").text(c.format("dd"))), c.add(1, "d");
                o.find(".datepicker-days thead").append(b)
            },
            M = function(a) {
                return d.disabledDates[a.format("YYYY-MM-DD")] === !0
            },
            N = function(a) {
                return d.enabledDates[a.format("YYYY-MM-DD")] === !0
            },
            O = function(a) {
                return d.disabledHours[a.format("H")] === !0
            },
            P = function(a) {
                return d.enabledHours[a.format("H")] === !0
            },
            Q = function(b, c) {
                if (!b.isValid()) return !1;
                if (d.disabledDates && "d" === c && M(b)) return !1;
                if (d.enabledDates && "d" === c && !N(b)) return !1;
                if (d.minDate && b.isBefore(d.minDate, c)) return !1;
                if (d.maxDate && b.isAfter(d.maxDate, c)) return !1;
                if (d.daysOfWeekDisabled && "d" === c && -1 !== d.daysOfWeekDisabled.indexOf(b.day())) return !1;
                if (d.disabledHours && ("h" === c || "m" === c || "s" === c) && O(b)) return !1;
                if (d.enabledHours && ("h" === c || "m" === c || "s" === c) && !P(b)) return !1;
                if (d.disabledTimeIntervals && ("h" === c || "m" === c || "s" === c)) {
                    var e = !1;
                    if (a.each(d.disabledTimeIntervals, function() {
                        return b.isBetween(this[0], this[1]) ? (e = !0, !1) : void 0
                    }), e) return !1
                }
                return !0
            },
            R = function() {
                for (var b = [], c = f.clone().startOf("y").startOf("d"); c.isSame(f, "y");) b.push(a("<span>").attr("data-action", "selectMonth").addClass("month").text(c.format("MMM"))), c.add(1, "M");
                o.find(".datepicker-months td").empty().append(b)
            },
            S = function() {
                var b = o.find(".datepicker-months"),
                    c = b.find("th"),
                    g = b.find("tbody").find("span");
                c.eq(0).find("span").attr("title", d.tooltips.prevYear), c.eq(1).attr("title", d.tooltips.selectYear), c.eq(2).find("span").attr("title", d.tooltips.nextYear), b.find(".disabled").removeClass("disabled"), Q(f.clone().subtract(1, "y"), "y") || c.eq(0).addClass("disabled"), c.eq(1).text(f.year()), Q(f.clone().add(1, "y"), "y") || c.eq(2).addClass("disabled"), g.removeClass("active"), e.isSame(f, "y") && !m && g.eq(e.month()).addClass("active"), g.each(function(b) {
                    Q(f.clone().month(b), "M") || a(this).addClass("disabled")
                })
            },
            T = function() {
                var a = o.find(".datepicker-years"),
                    b = a.find("th"),
                    c = f.clone().subtract(5, "y"),
                    g = f.clone().add(6, "y"),
                    h = "";
                for (b.eq(0).find("span").attr("title", d.tooltips.prevDecade), b.eq(1).attr("title", d.tooltips.selectDecade), b.eq(2).find("span").attr("title", d.tooltips.nextDecade), a.find(".disabled").removeClass("disabled"), d.minDate && d.minDate.isAfter(c, "y") && b.eq(0).addClass("disabled"), b.eq(1).text(c.year() + "-" + g.year()), d.maxDate && d.maxDate.isBefore(g, "y") && b.eq(2).addClass("disabled"); !c.isAfter(g, "y");) h += '<span data-action="selectYear" class="year' + (c.isSame(e, "y") && !m ? " active" : "") + (Q(c, "y") ? "" : " disabled") + '">' + c.year() + "</span>", c.add(1, "y");
                a.find("td").html(h)
            },
            U = function() {
                var a = o.find(".datepicker-decades"),
                    c = a.find("th"),
                    g = b({
                        y: f.year() - f.year() % 100 - 1
                    }),
                    h = g.clone().add(100, "y"),
                    i = g.clone(),
                    j = "";
                for (c.eq(0).find("span").attr("title", d.tooltips.prevCentury), c.eq(2).find("span").attr("title", d.tooltips.nextCentury), a.find(".disabled").removeClass("disabled"), (g.isSame(b({
                    y: 1900
                })) || d.minDate && d.minDate.isAfter(g, "y")) && c.eq(0).addClass("disabled"), c.eq(1).text(g.year() + "-" + h.year()), (g.isSame(b({
                    y: 2e3
                })) || d.maxDate && d.maxDate.isBefore(h, "y")) && c.eq(2).addClass("disabled"); !g.isAfter(h, "y");) j += '<span data-action="selectDecade" class="decade' + (g.isSame(e, "y") ? " active" : "") + (Q(g, "y") ? "" : " disabled") + '" data-selection="' + (g.year() + 6) + '">' + (g.year() + 1) + " - " + (g.year() + 12) + "</span>", g.add(12, "y");
                j += "<span></span><span></span><span></span>", a.find("td").html(j), c.eq(1).text(i.year() + 1 + "-" + g.year())
            },
            V = function() {
                var b, c, g, h, i = o.find(".datepicker-days"),
                    j = i.find("th"),
                    k = [];
                if (A()) {
                    for (j.eq(0).find("span").attr("title", d.tooltips.prevMonth), j.eq(1).attr("title", d.tooltips.selectMonth), j.eq(2).find("span").attr("title", d.tooltips.nextMonth), i.find(".disabled").removeClass("disabled"), j.eq(1).text(f.format(d.dayViewHeaderFormat)), Q(f.clone().subtract(1, "M"), "M") || j.eq(0).addClass("disabled"), Q(f.clone().add(1, "M"), "M") || j.eq(2).addClass("disabled"), b = f.clone().startOf("M").startOf("w").startOf("d"), h = 0; 42 > h; h++) 0 === b.weekday() && (c = a("<tr>"), d.calendarWeeks && c.append('<td class="cw">' + b.week() + "</td>"), k.push(c)), g = "", b.isBefore(f, "M") && (g += " old"), b.isAfter(f, "M") && (g += " new"), b.isSame(e, "d") && !m && (g += " active"), Q(b, "d") || (g += " disabled"), b.isSame(x(), "d") && (g += " today"), (0 === b.day() || 6 === b.day()) && (g += " weekend"), c.append('<td data-action="selectDay" data-day="' + b.format("L") + '" class="day' + g + '">' + b.date() + "</td>"), b.add(1, "d");
                    i.find("tbody").empty().append(k), S(), T(), U()
                }
            },
            W = function() {
                var b = o.find(".timepicker-hours table"),
                    c = f.clone().startOf("d"),
                    d = [],
                    e = a("<tr>");
                for (f.hour() > 11 && !h && c.hour(12); c.isSame(f, "d") && (h || f.hour() < 12 && c.hour() < 12 || f.hour() > 11);) c.hour() % 4 === 0 && (e = a("<tr>"), d.push(e)), e.append('<td data-action="selectHour" class="hour' + (Q(c, "h") ? "" : " disabled") + '">' + c.format(h ? "HH" : "hh") + "</td>"), c.add(1, "h");
                b.empty().append(d)
            },
            X = function() {
                for (var b = o.find(".timepicker-minutes table"), c = f.clone().startOf("h"), e = [], g = a("<tr>"), h = 1 === d.stepping ? 5 : d.stepping; f.isSame(c, "h");) c.minute() % (4 * h) === 0 && (g = a("<tr>"), e.push(g)), g.append('<td data-action="selectMinute" class="minute' + (Q(c, "m") ? "" : " disabled") + '">' + c.format("mm") + "</td>"), c.add(h, "m");
                b.empty().append(e)
            },
            Y = function() {
                for (var b = o.find(".timepicker-seconds table"), c = f.clone().startOf("m"), d = [], e = a("<tr>"); f.isSame(c, "m");) c.second() % 20 === 0 && (e = a("<tr>"), d.push(e)), e.append('<td data-action="selectSecond" class="second' + (Q(c, "s") ? "" : " disabled") + '">' + c.format("ss") + "</td>"), c.add(5, "s");
                b.empty().append(d)
            },
            Z = function() {
                var a, b, c = o.find(".timepicker span[data-time-component]");
                h || (a = o.find(".timepicker [data-action=togglePeriod]"), b = e.clone().add(e.hours() >= 12 ? -12 : 12, "h"), a.text(e.format("A")), Q(b, "h") ? a.removeClass("disabled") : a.addClass("disabled")), c.filter("[data-time-component=hours]").text(e.format(h ? "HH" : "hh")), c.filter("[data-time-component=minutes]").text(e.format("mm")), c.filter("[data-time-component=seconds]").text(e.format("ss")), W(), X(), Y()
            },
            $ = function() {
                o && (V(), Z())
            },
            _ = function(a) {
                var b = m ? null : e;
                return a ? (a = a.clone().locale(d.locale), 1 !== d.stepping && a.minutes(Math.round(a.minutes() / d.stepping) * d.stepping % 60).seconds(0), void(Q(a) ? (e = a, f = e.clone(), g.val(e.format(i)), c.data("date", e.format(i)), m = !1, $(), I({
                    type: "dp.change",
                    date: e.clone(),
                    oldDate: b
                })) : (d.keepInvalid || g.val(m ? "" : e.format(i)), I({
                    type: "dp.error",
                    date: a
                })))) : (m = !0, g.val(""), c.data("date", ""), I({
                    type: "dp.change",
                    date: !1,
                    oldDate: b
                }), void $())
            },
            aa = function() {
                var b = !1;
                return o ? (o.find(".collapse").each(function() {
                    var c = a(this).data("collapse");
                    return c && c.transitioning ? (b = !0, !1) : !0
                }), b ? l : (n && n.hasClass("btn") && n.toggleClass("active"), o.hide(), a(window).off("resize", H), o.off("click", "[data-action]"), o.off("mousedown", !1), o.remove(), o = !1, I({
                    type: "dp.hide",
                    date: e.clone()
                }), g.blur(), l)) : l
            },
            ba = function() {
                _(null)
            },
            ca = {
                next: function() {
                    var a = q[k].navFnc;
                    f.add(q[k].navStep, a), V(), J(a)
                },
                previous: function() {
                    var a = q[k].navFnc;
                    f.subtract(q[k].navStep, a), V(), J(a)
                },
                pickerSwitch: function() {
                    K(1)
                },
                selectMonth: function(b) {
                    var c = a(b.target).closest("tbody").find("span").index(a(b.target));
                    f.month(c), k === p ? (_(e.clone().year(f.year()).month(f.month())), d.inline || aa()) : (K(-1), V()), J("M")
                },
                selectYear: function(b) {
                    var c = parseInt(a(b.target).text(), 10) || 0;
                    f.year(c), k === p ? (_(e.clone().year(f.year())), d.inline || aa()) : (K(-1), V()), J("YYYY")
                },
                selectDecade: function(b) {
                    var c = parseInt(a(b.target).data("selection"), 10) || 0;
                    f.year(c), k === p ? (_(e.clone().year(f.year())), d.inline || aa()) : (K(-1), V()), J("YYYY")
                },
                selectDay: function(b) {
                    var c = f.clone();
                    a(b.target).is(".old") && c.subtract(1, "M"), a(b.target).is(".new") && c.add(1, "M"), _(c.date(parseInt(a(b.target).text(), 10))), z() || d.keepOpen || d.inline || aa()
                },
                incrementHours: function() {
                    var a = e.clone().add(1, "h");
                    Q(a, "h") && _(a)
                },
                incrementMinutes: function() {
                    var a = e.clone().add(d.stepping, "m");
                    Q(a, "m") && _(a)
                },
                incrementSeconds: function() {
                    var a = e.clone().add(1, "s");
                    Q(a, "s") && _(a)
                },
                decrementHours: function() {
                    var a = e.clone().subtract(1, "h");
                    Q(a, "h") && _(a)
                },
                decrementMinutes: function() {
                    var a = e.clone().subtract(d.stepping, "m");
                    Q(a, "m") && _(a)
                },
                decrementSeconds: function() {
                    var a = e.clone().subtract(1, "s");
                    Q(a, "s") && _(a)
                },
                togglePeriod: function() {
                    _(e.clone().add(e.hours() >= 12 ? -12 : 12, "h"))
                },
                togglePicker: function(b) {
                    var c, e = a(b.target),
                        f = e.closest("ul"),
                        g = f.find(".in"),
                        h = f.find(".collapse:not(.in)");
                    if (g && g.length) {
                        if (c = g.data("collapse"), c && c.transitioning) return;
                        g.collapse ? (g.collapse("hide"), h.collapse("show")) : (g.removeClass("in"), h.addClass("in")), e.is("span") ? e.toggleClass(d.icons.time + " " + d.icons.date) : e.find("span").toggleClass(d.icons.time + " " + d.icons.date)
                    }
                },
                showPicker: function() {
                    o.find(".timepicker > div:not(.timepicker-picker)").hide(), o.find(".timepicker .timepicker-picker").show()
                },
                showHours: function() {
                    o.find(".timepicker .timepicker-picker").hide(), o.find(".timepicker .timepicker-hours").show()
                },
                showMinutes: function() {
                    o.find(".timepicker .timepicker-picker").hide(), o.find(".timepicker .timepicker-minutes").show()
                },
                showSeconds: function() {
                    o.find(".timepicker .timepicker-picker").hide(), o.find(".timepicker .timepicker-seconds").show()
                },
                selectHour: function(b) {
                    var c = parseInt(a(b.target).text(), 10);
                    h || (e.hours() >= 12 ? 12 !== c && (c += 12) : 12 === c && (c = 0)), _(e.clone().hours(c)), ca.showPicker.call(l)
                },
                selectMinute: function(b) {
                    _(e.clone().minutes(parseInt(a(b.target).text(), 10))), ca.showPicker.call(l)
                },
                selectSecond: function(b) {
                    _(e.clone().seconds(parseInt(a(b.target).text(), 10))), ca.showPicker.call(l)
                },
                clear: ba,
                today: function() {
                    var a = x();
                    Q(a, "d") && _(a)
                },
                close: aa
            },
            da = function(b) {
                return a(b.currentTarget).is(".disabled") ? !1 : (ca[a(b.currentTarget).data("action")].apply(l, arguments), !1)
            },
            ea = function() {
                var b, c = {
                    year: function(a) {
                        return a.month(0).date(1).hours(0).seconds(0).minutes(0)
                    },
                    month: function(a) {
                        return a.date(1).hours(0).seconds(0).minutes(0)
                    },
                    day: function(a) {
                        return a.hours(0).seconds(0).minutes(0)
                    },
                    hour: function(a) {
                        return a.seconds(0).minutes(0)
                    },
                    minute: function(a) {
                        return a.seconds(0)
                    }
                };
                return g.prop("disabled") || !d.ignoreReadonly && g.prop("readonly") || o ? l : (void 0 !== g.val() && 0 !== g.val().trim().length ? _(ga(g.val().trim())) : d.useCurrent && m && (g.is("input") && 0 === g.val().trim().length || d.inline) && (b = x(), "string" == typeof d.useCurrent && (b = c[d.useCurrent](b)), _(b)), o = F(), L(), R(), o.find(".timepicker-hours").hide(), o.find(".timepicker-minutes").hide(), o.find(".timepicker-seconds").hide(), $(), K(), a(window).on("resize", H), o.on("click", "[data-action]", da), o.on("mousedown", !1), n && n.hasClass("btn") && n.toggleClass("active"), o.show(), H(), d.focusOnShow && !g.is(":focus") && g.focus(), I({
                    type: "dp.show"
                }), l)
            },
            fa = function() {
                return o ? aa() : ea()
            },
            ga = function(a) {
                return a = void 0 === d.parseInputDate ? b.isMoment(a) || a instanceof Date ? b(a) : x(a) : d.parseInputDate(a), a.locale(d.locale), a
            },
            ha = function(a) {
                var b, c, e, f, g = null,
                    h = [],
                    i = {},
                    j = a.which,
                    k = "p";
                w[j] = k;
                for (b in w) w.hasOwnProperty(b) && w[b] === k && (h.push(b), parseInt(b, 10) !== j && (i[b] = !0));
                for (b in d.keyBinds)
                    if (d.keyBinds.hasOwnProperty(b) && "function" == typeof d.keyBinds[b] && (e = b.split(" "), e.length === h.length && v[j] === e[e.length - 1])) {
                        for (f = !0, c = e.length - 2; c >= 0; c--)
                            if (!(v[e[c]] in i)) {
                                f = !1;
                                break
                            } if (f) {
                            g = d.keyBinds[b];
                            break
                        }
                    } g && (g.call(l, o), a.stopPropagation(), a.preventDefault())
            },
            ia = function(a) {
                w[a.which] = "r", a.stopPropagation(), a.preventDefault()
            },
            ja = function(b) {
                var c = a(b.target).val().trim(),
                    d = c ? ga(c) : null;
                return _(d), b.stopImmediatePropagation(), !1
            },
            ka = function() {
                g.on({
                    change: ja,
                    blur: d.debug ? "" : aa,
                    keydown: ha,
                    keyup: ia,
                    focus: d.allowInputToggle ? ea : ""
                }), c.is("input") ? g.on({
                    focus: ea
                }) : n && (n.on("click", fa), n.on("mousedown", !1))
            },
            la = function() {
                g.off({
                    change: ja,
                    blur: blur,
                    keydown: ha,
                    keyup: ia,
                    focus: d.allowInputToggle ? aa : ""
                }), c.is("input") ? g.off({
                    focus: ea
                }) : n && (n.off("click", fa), n.off("mousedown", !1))
            },
            ma = function(b) {
                var c = {};
                return a.each(b, function() {
                    var a = ga(this);
                    a.isValid() && (c[a.format("YYYY-MM-DD")] = !0)
                }), Object.keys(c).length ? c : !1
            },
            na = function(b) {
                var c = {};
                return a.each(b, function() {
                    c[this] = !0
                }), Object.keys(c).length ? c : !1
            },
            oa = function() {
                var a = d.format || "L LT";
                i = a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function(a) {
                    var b = e.localeData().longDateFormat(a) || a;
                    return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function(a) {
                        return e.localeData().longDateFormat(a) || a
                    })
                }), j = d.extraFormats ? d.extraFormats.slice() : [], j.indexOf(a) < 0 && j.indexOf(i) < 0 && j.push(i), h = i.toLowerCase().indexOf("a") < 1 && i.replace(/\[.*?\]/g, "").indexOf("h") < 1, y("y") && (p = 2), y("M") && (p = 1), y("d") && (p = 0), k = Math.max(p, k), m || _(e)
            };
        if (l.destroy = function() {
            aa(), la(), c.removeData("DateTimePicker"), c.removeData("date")
        }, l.toggle = fa, l.show = ea, l.hide = aa, l.disable = function() {
            return aa(), n && n.hasClass("btn") && n.addClass("disabled"), g.prop("disabled", !0), l
        }, l.enable = function() {
            return n && n.hasClass("btn") && n.removeClass("disabled"), g.prop("disabled", !1), l
        }, l.ignoreReadonly = function(a) {
            if (0 === arguments.length) return d.ignoreReadonly;
            if ("boolean" != typeof a) throw new TypeError("ignoreReadonly () expects a boolean parameter");
            return d.ignoreReadonly = a, l
        }, l.options = function(b) {
            if (0 === arguments.length) return a.extend(!0, {}, d);
            if (!(b instanceof Object)) throw new TypeError("options() options parameter should be an object");
            return a.extend(!0, d, b), a.each(d, function(a, b) {
                if (void 0 === l[a]) throw new TypeError("option " + a + " is not recognized!");
                l[a](b)
            }), l
        }, l.date = function(a) {
            if (0 === arguments.length) return m ? null : e.clone();
            if (!(null === a || "string" == typeof a || b.isMoment(a) || a instanceof Date)) throw new TypeError("date() parameter must be one of [null, string, moment or Date]");
            return _(null === a ? null : ga(a)), l
        }, l.format = function(a) {
            if (0 === arguments.length) return d.format;
            if ("string" != typeof a && ("boolean" != typeof a || a !== !1)) throw new TypeError("format() expects a sting or boolean:false parameter " + a);
            return d.format = a, i && oa(), l
        }, l.timeZone = function(a) {
            return 0 === arguments.length ? d.timeZone : (d.timeZone = a, l)
        }, l.dayViewHeaderFormat = function(a) {
            if (0 === arguments.length) return d.dayViewHeaderFormat;
            if ("string" != typeof a) throw new TypeError("dayViewHeaderFormat() expects a string parameter");
            return d.dayViewHeaderFormat = a, l
        }, l.extraFormats = function(a) {
            if (0 === arguments.length) return d.extraFormats;
            if (a !== !1 && !(a instanceof Array)) throw new TypeError("extraFormats() expects an array or false parameter");
            return d.extraFormats = a, j && oa(), l
        }, l.disabledDates = function(b) {
            if (0 === arguments.length) return d.disabledDates ? a.extend({}, d.disabledDates) : d.disabledDates;
            if (!b) return d.disabledDates = !1, $(), l;
            if (!(b instanceof Array)) throw new TypeError("disabledDates() expects an array parameter");
            return d.disabledDates = ma(b), d.enabledDates = !1, $(), l
        }, l.enabledDates = function(b) {
            if (0 === arguments.length) return d.enabledDates ? a.extend({}, d.enabledDates) : d.enabledDates;
            if (!b) return d.enabledDates = !1, $(), l;
            if (!(b instanceof Array)) throw new TypeError("enabledDates() expects an array parameter");
            return d.enabledDates = ma(b), d.disabledDates = !1, $(), l
        }, l.daysOfWeekDisabled = function(a) {
            if (0 === arguments.length) return d.daysOfWeekDisabled.splice(0);
            if ("boolean" == typeof a && !a) return d.daysOfWeekDisabled = !1, $(), l;
            if (!(a instanceof Array)) throw new TypeError("daysOfWeekDisabled() expects an array parameter");
            if (d.daysOfWeekDisabled = a.reduce(function(a, b) {
                return b = parseInt(b, 10), b > 6 || 0 > b || isNaN(b) ? a : (-1 === a.indexOf(b) && a.push(b), a)
            }, []).sort(), d.useCurrent && !d.keepInvalid) {
                for (var b = 0; !Q(e, "d");) {
                    if (e.add(1, "d"), 7 === b) throw "Tried 7 times to find a valid date";
                    b++
                }
                _(e)
            }
            return $(), l
        }, l.maxDate = function(a) {
            if (0 === arguments.length) return d.maxDate ? d.maxDate.clone() : d.maxDate;
            if ("boolean" == typeof a && a === !1) return d.maxDate = !1, $(), l;
            "string" == typeof a && ("now" === a || "moment" === a) && (a = x());
            var b = ga(a);
            if (!b.isValid()) throw new TypeError("maxDate() Could not parse date parameter: " + a);
            if (d.minDate && b.isBefore(d.minDate)) throw new TypeError("maxDate() date parameter is before options.minDate: " + b.format(i));
            return d.maxDate = b, d.useCurrent && !d.keepInvalid && e.isAfter(a) && _(d.maxDate), f.isAfter(b) && (f = b.clone().subtract(d.stepping, "m")), $(), l
        }, l.minDate = function(a) {
            if (0 === arguments.length) return d.minDate ? d.minDate.clone() : d.minDate;
            if ("boolean" == typeof a && a === !1) return d.minDate = !1, $(), l;
            "string" == typeof a && ("now" === a || "moment" === a) && (a = x());
            var b = ga(a);
            if (!b.isValid()) throw new TypeError("minDate() Could not parse date parameter: " + a);
            if (d.maxDate && b.isAfter(d.maxDate)) throw new TypeError("minDate() date parameter is after options.maxDate: " + b.format(i));
            return d.minDate = b, d.useCurrent && !d.keepInvalid && e.isBefore(a) && _(d.minDate), f.isBefore(b) && (f = b.clone().add(d.stepping, "m")), $(), l
        }, l.defaultDate = function(a) {
            if (0 === arguments.length) return d.defaultDate ? d.defaultDate.clone() : d.defaultDate;
            if (!a) return d.defaultDate = !1, l;
            "string" == typeof a && ("now" === a || "moment" === a) && (a = x());
            var b = ga(a);
            if (!b.isValid()) throw new TypeError("defaultDate() Could not parse date parameter: " + a);
            if (!Q(b)) throw new TypeError("defaultDate() date passed is invalid according to component setup validations");
            return d.defaultDate = b, (d.defaultDate && d.inline || "" === g.val().trim()) && _(d.defaultDate), l
        }, l.locale = function(a) {
            if (0 === arguments.length) return d.locale;
            if (!b.localeData(a)) throw new TypeError("locale() locale " + a + " is not loaded from moment locales!");
            return d.locale = a, e.locale(d.locale), f.locale(d.locale), i && oa(), o && (aa(), ea()), l
        }, l.stepping = function(a) {
            return 0 === arguments.length ? d.stepping : (a = parseInt(a, 10), (isNaN(a) || 1 > a) && (a = 1), d.stepping = a, l)
        }, l.useCurrent = function(a) {
            var b = ["year", "month", "day", "hour", "minute"];
            if (0 === arguments.length) return d.useCurrent;
            if ("boolean" != typeof a && "string" != typeof a) throw new TypeError("useCurrent() expects a boolean or string parameter");
            if ("string" == typeof a && -1 === b.indexOf(a.toLowerCase())) throw new TypeError("useCurrent() expects a string parameter of " + b.join(", "));
            return d.useCurrent = a, l
        }, l.collapse = function(a) {
            if (0 === arguments.length) return d.collapse;
            if ("boolean" != typeof a) throw new TypeError("collapse() expects a boolean parameter");
            return d.collapse === a ? l : (d.collapse = a, o && (aa(), ea()), l)
        }, l.icons = function(b) {
            if (0 === arguments.length) return a.extend({}, d.icons);
            if (!(b instanceof Object)) throw new TypeError("icons() expects parameter to be an Object");
            return a.extend(d.icons, b), o && (aa(), ea()), l
        }, l.tooltips = function(b) {
            if (0 === arguments.length) return a.extend({}, d.tooltips);
            if (!(b instanceof Object)) throw new TypeError("tooltips() expects parameter to be an Object");
            return a.extend(d.tooltips, b), o && (aa(), ea()), l
        }, l.useStrict = function(a) {
            if (0 === arguments.length) return d.useStrict;
            if ("boolean" != typeof a) throw new TypeError("useStrict() expects a boolean parameter");
            return d.useStrict = a, l
        }, l.sideBySide = function(a) {
            if (0 === arguments.length) return d.sideBySide;
            if ("boolean" != typeof a) throw new TypeError("sideBySide() expects a boolean parameter");
            return d.sideBySide = a, o && (aa(), ea()), l
        }, l.viewMode = function(a) {
            if (0 === arguments.length) return d.viewMode;
            if ("string" != typeof a) throw new TypeError("viewMode() expects a string parameter");
            if (-1 === r.indexOf(a)) throw new TypeError("viewMode() parameter must be one of (" + r.join(", ") + ") value");
            return d.viewMode = a, k = Math.max(r.indexOf(a), p), K(), l
        }, l.toolbarPlacement = function(a) {
            if (0 === arguments.length) return d.toolbarPlacement;
            if ("string" != typeof a) throw new TypeError("toolbarPlacement() expects a string parameter");
            if (-1 === u.indexOf(a)) throw new TypeError("toolbarPlacement() parameter must be one of (" + u.join(", ") + ") value");
            return d.toolbarPlacement = a, o && (aa(), ea()), l
        }, l.widgetPositioning = function(b) {
            if (0 === arguments.length) return a.extend({}, d.widgetPositioning);
            if ("[object Object]" !== {}.toString.call(b)) throw new TypeError("widgetPositioning() expects an object variable");
            if (b.horizontal) {
                if ("string" != typeof b.horizontal) throw new TypeError("widgetPositioning() horizontal variable must be a string");
                if (b.horizontal = b.horizontal.toLowerCase(), -1 === t.indexOf(b.horizontal)) throw new TypeError("widgetPositioning() expects horizontal parameter to be one of (" + t.join(", ") + ")");
                d.widgetPositioning.horizontal = b.horizontal
            }
            if (b.vertical) {
                if ("string" != typeof b.vertical) throw new TypeError("widgetPositioning() vertical variable must be a string");
                if (b.vertical = b.vertical.toLowerCase(), -1 === s.indexOf(b.vertical)) throw new TypeError("widgetPositioning() expects vertical parameter to be one of (" + s.join(", ") + ")");
                d.widgetPositioning.vertical = b.vertical
            }
            return $(), l
        }, l.calendarWeeks = function(a) {
            if (0 === arguments.length) return d.calendarWeeks;
            if ("boolean" != typeof a) throw new TypeError("calendarWeeks() expects parameter to be a boolean value");
            return d.calendarWeeks = a, $(), l
        }, l.showTodayButton = function(a) {
            if (0 === arguments.length) return d.showTodayButton;
            if ("boolean" != typeof a) throw new TypeError("showTodayButton() expects a boolean parameter");
            return d.showTodayButton = a, o && (aa(), ea()), l
        }, l.showClear = function(a) {
            if (0 === arguments.length) return d.showClear;
            if ("boolean" != typeof a) throw new TypeError("showClear() expects a boolean parameter");
            return d.showClear = a, o && (aa(), ea()), l
        }, l.widgetParent = function(b) {
            if (0 === arguments.length) return d.widgetParent;
            if ("string" == typeof b && (b = a(b)), null !== b && "string" != typeof b && !(b instanceof a)) throw new TypeError("widgetParent() expects a string or a jQuery object parameter");
            return d.widgetParent = b, o && (aa(), ea()), l
        }, l.keepOpen = function(a) {
            if (0 === arguments.length) return d.keepOpen;
            if ("boolean" != typeof a) throw new TypeError("keepOpen() expects a boolean parameter");
            return d.keepOpen = a, l
        }, l.focusOnShow = function(a) {
            if (0 === arguments.length) return d.focusOnShow;
            if ("boolean" != typeof a) throw new TypeError("focusOnShow() expects a boolean parameter");
            return d.focusOnShow = a, l
        }, l.inline = function(a) {
            if (0 === arguments.length) return d.inline;
            if ("boolean" != typeof a) throw new TypeError("inline() expects a boolean parameter");
            return d.inline = a, l
        }, l.clear = function() {
            return ba(), l
        }, l.keyBinds = function(a) {
            return d.keyBinds = a, l
        }, l.getMoment = function(a) {
            return x(a)
        }, l.debug = function(a) {
            if ("boolean" != typeof a) throw new TypeError("debug() expects a boolean parameter");
            return d.debug = a, l
        }, l.allowInputToggle = function(a) {
            if (0 === arguments.length) return d.allowInputToggle;
            if ("boolean" != typeof a) throw new TypeError("allowInputToggle() expects a boolean parameter");
            return d.allowInputToggle = a, l
        }, l.showClose = function(a) {
            if (0 === arguments.length) return d.showClose;
            if ("boolean" != typeof a) throw new TypeError("showClose() expects a boolean parameter");
            return d.showClose = a, l
        }, l.keepInvalid = function(a) {
            if (0 === arguments.length) return d.keepInvalid;
            if ("boolean" != typeof a) throw new TypeError("keepInvalid() expects a boolean parameter");
            return d.keepInvalid = a, l
        }, l.datepickerInput = function(a) {
            if (0 === arguments.length) return d.datepickerInput;
            if ("string" != typeof a) throw new TypeError("datepickerInput() expects a string parameter");
            return d.datepickerInput = a, l
        }, l.parseInputDate = function(a) {
            if (0 === arguments.length) return d.parseInputDate;
            if ("function" != typeof a) throw new TypeError("parseInputDate() sholud be as function");
            return d.parseInputDate = a, l
        }, l.disabledTimeIntervals = function(b) {
            if (0 === arguments.length) return d.disabledTimeIntervals ? a.extend({}, d.disabledTimeIntervals) : d.disabledTimeIntervals;
            if (!b) return d.disabledTimeIntervals = !1, $(), l;
            if (!(b instanceof Array)) throw new TypeError("disabledTimeIntervals() expects an array parameter");
            return d.disabledTimeIntervals = b, $(), l
        }, l.disabledHours = function(b) {
            if (0 === arguments.length) return d.disabledHours ? a.extend({}, d.disabledHours) : d.disabledHours;
            if (!b) return d.disabledHours = !1, $(), l;
            if (!(b instanceof Array)) throw new TypeError("disabledHours() expects an array parameter");
            if (d.disabledHours = na(b), d.enabledHours = !1, d.useCurrent && !d.keepInvalid) {
                for (var c = 0; !Q(e, "h");) {
                    if (e.add(1, "h"), 24 === c) throw "Tried 24 times to find a valid date";
                    c++
                }
                _(e)
            }
            return $(), l
        }, l.enabledHours = function(b) {
            if (0 === arguments.length) return d.enabledHours ? a.extend({}, d.enabledHours) : d.enabledHours;
            if (!b) return d.enabledHours = !1, $(), l;
            if (!(b instanceof Array)) throw new TypeError("enabledHours() expects an array parameter");
            if (d.enabledHours = na(b), d.disabledHours = !1, d.useCurrent && !d.keepInvalid) {
                for (var c = 0; !Q(e, "h");) {
                    if (e.add(1, "h"), 24 === c) throw "Tried 24 times to find a valid date";
                    c++
                }
                _(e)
            }
            return $(), l
        }, l.viewDate = function(a) {
            if (0 === arguments.length) return f.clone();
            if (!a) return f = e.clone(), l;
            if (!("string" == typeof a || b.isMoment(a) || a instanceof Date)) throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");
            return f = ga(a), J(), l
        }, c.is("input")) g = c;
        else if (g = c.find(d.datepickerInput), 0 === g.size()) g = c.find("input");
        else if (!g.is("input")) throw new Error('CSS class "' + d.datepickerInput + '" cannot be applied to non input element');
        if (c.hasClass("input-group") && (n = 0 === c.find(".datepickerbutton").size() ? c.find(".input-group-addon") : c.find(".datepickerbutton")), !d.inline && !g.is("input")) throw new Error("Could not initialize DateTimePicker without an input element");
        return e = x(), f = e.clone(), a.extend(!0, d, G()), l.options(d), oa(), ka(), g.prop("disabled") && l.disable(), g.is("input") && 0 !== g.val().trim().length ? _(ga(g.val().trim())) : d.defaultDate && void 0 === g.attr("placeholder") && _(d.defaultDate), d.inline && ea(), l
    };
    a.fn.datetimepicker = function(b) {
        return this.each(function() {
            var d = a(this);
            d.data("DateTimePicker") || (b = a.extend(!0, {}, a.fn.datetimepicker.defaults, b), d.data("DateTimePicker", c(d, b)))
        })
    }, a.fn.datetimepicker.defaults = {
        timeZone: "Etc/UTC",
        format: !1,
        dayViewHeaderFormat: "MMMM YYYY",
        extraFormats: !1,
        stepping: 1,
        minDate: !1,
        maxDate: !1,
        useCurrent: !0,
        collapse: !0,
        locale: b.locale(),
        defaultDate: !1,
        disabledDates: !1,
        enabledDates: !1,
        icons: {
            time: "glyphicon glyphicon-time",
            date: "glyphicon glyphicon-calendar",
            up: "glyphicon glyphicon-chevron-up",
            down: "glyphicon glyphicon-chevron-down",
            previous: "glyphicon glyphicon-chevron-left",
            next: "glyphicon glyphicon-chevron-right",
            today: "glyphicon glyphicon-screenshot",
            clear: "glyphicon glyphicon-trash",
            close: "glyphicon glyphicon-remove"
        },
        tooltips: {
            today: "Go to today",
            clear: "Clear selection",
            close: "Close the picker",
            selectMonth: "Select Month",
            prevMonth: "Previous Month",
            nextMonth: "Next Month",
            selectYear: "Select Year",
            prevYear: "Previous Year",
            nextYear: "Next Year",
            selectDecade: "Select Decade",
            prevDecade: "Previous Decade",
            nextDecade: "Next Decade",
            prevCentury: "Previous Century",
            nextCentury: "Next Century",
            pickHour: "Pick Hour",
            incrementHour: "Increment Hour",
            decrementHour: "Decrement Hour",
            pickMinute: "Pick Minute",
            incrementMinute: "Increment Minute",
            decrementMinute: "Decrement Minute",
            pickSecond: "Pick Second",
            incrementSecond: "Increment Second",
            decrementSecond: "Decrement Second",
            togglePeriod: "Toggle Period",
            selectTime: "Select Time"
        },
        useStrict: !1,
        sideBySide: !1,
        daysOfWeekDisabled: !1,
        calendarWeeks: !1,
        viewMode: "days",
        toolbarPlacement: "default",
        showTodayButton: !1,
        showClear: !1,
        showClose: !1,
        widgetPositioning: {
            horizontal: "auto",
            vertical: "auto"
        },
        widgetParent: null,
        ignoreReadonly: !1,
        keepOpen: !1,
        focusOnShow: !0,
        inline: !1,
        keepInvalid: !1,
        datepickerInput: ".datepickerinput",
        keyBinds: {
            up: function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") ? this.date(b.clone().subtract(7, "d")) : this.date(b.clone().add(this.stepping(), "m"))
                }
            },
            down: function(a) {
                if (!a) return void this.show();
                var b = this.date() || this.getMoment();
                a.find(".datepicker").is(":visible") ? this.date(b.clone().add(7, "d")) : this.date(b.clone().subtract(this.stepping(), "m"))
            },
            "control up": function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") ? this.date(b.clone().subtract(1, "y")) : this.date(b.clone().add(1, "h"))
                }
            },
            "control down": function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") ? this.date(b.clone().add(1, "y")) : this.date(b.clone().subtract(1, "h"))
                }
            },
            left: function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") && this.date(b.clone().subtract(1, "d"))
                }
            },
            right: function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") && this.date(b.clone().add(1, "d"))
                }
            },
            pageUp: function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") && this.date(b.clone().subtract(1, "M"))
                }
            },
            pageDown: function(a) {
                if (a) {
                    var b = this.date() || this.getMoment();
                    a.find(".datepicker").is(":visible") && this.date(b.clone().add(1, "M"))
                }
            },
            enter: function() {
                this.hide()
            },
            escape: function() {
                this.hide()
            },
            "control space": function(a) {
                a.find(".timepicker").is(":visible") && a.find('.btn[data-action="togglePeriod"]').click()
            },
            t: function() {
                this.date(this.getMoment())
            },
            "delete": function() {
                this.clear()
            }
        },
        debug: !1,
        allowInputToggle: !1,
        disabledTimeIntervals: !1,
        disabledHours: !1,
        enabledHours: !1,
        viewDate: !1
    }
});;
var wysihtml5, Base, Handlebars;
Object.defineProperty && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(Element.prototype, "textContent") && !Object.getOwnPropertyDescriptor(Element.prototype, "textContent").get && ! function() {
    var a = Object.getOwnPropertyDescriptor(Element.prototype, "innerText");
    Object.defineProperty(Element.prototype, "textContent", {
        get: function() {
            return a.get.call(this)
        },
        set: function(b) {
            return a.set.call(this, b)
        }
    })
}(), Array.isArray || (Array.isArray = function(a) {
    return "[object Array]" === Object.prototype.toString.call(a)
}), wysihtml5 = {
    version: "0.4.15",
    commands: {},
    dom: {},
    quirks: {},
    toolbar: {},
    lang: {},
    selection: {},
    views: {},
    INVISIBLE_SPACE: "",
    EMPTY_FUNCTION: function() {},
    ELEMENT_NODE: 1,
    TEXT_NODE: 3,
    BACKSPACE_KEY: 8,
    ENTER_KEY: 13,
    ESCAPE_KEY: 27,
    SPACE_KEY: 32,
    DELETE_KEY: 46
},
    function(a, b) {
        "function" == typeof define && define.amd ? define(a) : b.rangy = a()
    }(function() {
        function a(a, b) {
            var c = typeof a[b];
            return c == x || !(c != w || !a[b]) || "unknown" == c
        }

        function b(a, b) {
            return !(typeof a[b] != w || !a[b])
        }

        function c(a, b) {
            return typeof a[b] != y
        }

        function d(a) {
            return function(b, c) {
                for (var d = c.length; d--;)
                    if (!a(b, c[d])) return !1;
                return !0
            }
        }

        function e(a) {
            return a && D(a, C) && F(a, B)
        }

        function f(a) {
            return b(a, "body") ? a.body : a.getElementsByTagName("body")[0]
        }

        function g(c) {
            b(window, "console") && a(window.console, "log") && window.console.log(c)
        }

        function h(a, b) {
            b ? window.alert(a) : g(a)
        }

        function i(a) {
            H.initialized = !0, H.supported = !1, h("Rangy is not supported on this page in your browser. Reason: " + a, H.config.alertOnFail)
        }

        function j(a) {
            h("Rangy warning: " + a, H.config.alertOnWarn)
        }

        function k(a) {
            return a.message || a.description || a + ""
        }

        function l() {
            var b, c, d, h, j, l, m, o, p;
            if (!H.initialized) {
                if (c = !1, d = !1, a(document, "createRange") && (b = document.createRange(), D(b, A) && F(b, z) && (c = !0)), h = f(document), !h || "body" != h.nodeName.toLowerCase()) return i("No body element found"), void 0;
                if (h && a(h, "createTextRange") && (b = h.createTextRange(), e(b) && (d = !0)), !c && !d) return i("Neither Range nor TextRange are available"), void 0;
                H.initialized = !0, H.features = {
                    implementsDomRange: c,
                    implementsTextRange: d
                };
                for (m in G)(j = G[m]) instanceof n && j.init(j, H);
                for (o = 0, p = s.length; p > o; ++o) try {
                    s[o](H)
                } catch (q) {
                    l = "Rangy init listener threw an exception. Continuing. Detail: " + k(q), g(l)
                }
            }
        }

        function m(a) {
            a = a || window, l();
            for (var b = 0, c = t.length; c > b; ++b) t[b](a)
        }

        function n(a, b, c) {
            this.name = a, this.dependencies = b, this.initialized = !1, this.supported = !1, this.initializer = c
        }

        function o(a, b, c, d) {
            var e = new n(b, c, function(a) {
                if (!a.initialized) {
                    a.initialized = !0;
                    try {
                        d(H, a), a.supported = !0
                    } catch (c) {
                        var e = "Module '" + b + "' failed to load: " + k(c);
                        g(e)
                    }
                }
            });
            G[b] = e
        }

        function p() {}

        function q() {}
        var r, s, t, u, v, w = "object",
            x = "function",
            y = "undefined",
            z = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"],
            A = ["setStart", "setStartBefore", "setStartAfter", "setEnd", "setEndBefore", "setEndAfter", "collapse", "selectNode", "selectNodeContents", "compareBoundaryPoints", "deleteContents", "extractContents", "cloneContents", "insertNode", "surroundContents", "cloneRange", "toString", "detach"],
            B = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"],
            C = ["collapse", "compareEndPoints", "duplicate", "moveToElementText", "parentElement", "select", "setEndPoint", "getBoundingClientRect"],
            D = d(a),
            E = d(b),
            F = d(c),
            G = {},
            H = {
                version: "1.3alpha.20140804",
                initialized: !1,
                supported: !0,
                util: {
                    isHostMethod: a,
                    isHostObject: b,
                    isHostProperty: c,
                    areHostMethods: D,
                    areHostObjects: E,
                    areHostProperties: F,
                    isTextRange: e,
                    getBody: f
                },
                features: {},
                modules: G,
                config: {
                    alertOnFail: !0,
                    alertOnWarn: !1,
                    preferTextRange: !1,
                    autoInitialize: typeof rangyAutoInitialize == y ? !0 : rangyAutoInitialize
                }
            };
        return H.fail = i, H.warn = j, {}.hasOwnProperty ? H.util.extend = function(a, b, c) {
            var d, e, f;
            for (f in b) b.hasOwnProperty(f) && (d = a[f], e = b[f], c && null !== d && "object" == typeof d && null !== e && "object" == typeof e && H.util.extend(d, e, !0), a[f] = e);
            return b.hasOwnProperty("toString") && (a.toString = b.toString), a
        } : i("hasOwnProperty not supported"),
            function() {
                var a, b, c = document.createElement("div");
                c.appendChild(document.createElement("span")), a = [].slice;
                try {
                    1 == a.call(c.childNodes, 0)[0].nodeType && (b = function(b) {
                        return a.call(b, 0)
                    })
                } catch (d) {}
                b || (b = function(a) {
                    var b, c, d = [];
                    for (b = 0, c = a.length; c > b; ++b) d[b] = a[b];
                    return d
                }), H.util.toArray = b
            }(), a(document, "addEventListener") ? r = function(a, b, c) {
            a.addEventListener(b, c, !1)
        } : a(document, "attachEvent") ? r = function(a, b, c) {
            a.attachEvent("on" + b, c)
        } : i("Document does not have required addEventListener or attachEvent method"), H.util.addListener = r, s = [], H.init = l, H.addInitListener = function(a) {
            H.initialized ? a(H) : s.push(a)
        }, t = [], H.addShimListener = function(a) {
            t.push(a)
        }, H.shim = H.createMissingNativeApi = m, n.prototype = {
            init: function() {
                var a, b, c, d, e = this.dependencies || [];
                for (a = 0, b = e.length; b > a; ++a) {
                    if (d = e[a], c = G[d], !(c && c instanceof n)) throw Error("required module '" + d + "' not found");
                    if (c.init(), !c.supported) throw Error("required module '" + d + "' not supported")
                }
                this.initializer(this)
            },
            fail: function(a) {
                throw this.initialized = !0, this.supported = !1, Error("Module '" + this.name + "' failed to load: " + a)
            },
            warn: function(a) {
                H.warn("Module " + this.name + ": " + a)
            },
            deprecationNotice: function(a, b) {
                H.warn("DEPRECATED: " + a + " in module " + this.name + "is deprecated. Please use " + b + " instead")
            },
            createError: function(a) {
                return Error("Error in Rangy " + this.name + " module: " + a)
            }
        }, H.createModule = function(a) {
            var b, c, d;
            2 == arguments.length ? (b = arguments[1], c = []) : (b = arguments[2], c = arguments[1]), d = o(!1, a, c, b), H.initialized && d.init()
        }, H.createCoreModule = function(a, b, c) {
            o(!0, a, b, c)
        }, H.RangePrototype = p, H.rangePrototype = new p, H.selectionPrototype = new q, u = !1, v = function() {
            u || (u = !0, !H.initialized && H.config.autoInitialize && l())
        }, typeof window == y ? (i("No window found"), void 0) : typeof document == y ? (i("No document found"), void 0) : (a(document, "addEventListener") && document.addEventListener("DOMContentLoaded", v, !1), r(window, "load", v), H.createCoreModule("DomUtil", [], function(a, b) {
            function c(a) {
                var b;
                return typeof a.namespaceURI == I || null === (b = a.namespaceURI) || "http://www.w3.org/1999/xhtml" == b
            }

            function d(a) {
                var b = a.parentNode;
                return 1 == b.nodeType ? b : null
            }

            function e(a) {
                for (var b = 0; a = a.previousSibling;) ++b;
                return b
            }

            function f(a) {
                switch (a.nodeType) {
                    case 7:
                    case 10:
                        return 0;
                    case 3:
                    case 8:
                        return a.length;
                    default:
                        return a.childNodes.length
                }
            }

            function g(a, b) {
                var c, d = [];
                for (c = a; c; c = c.parentNode) d.push(c);
                for (c = b; c; c = c.parentNode)
                    if (F(d, c)) return c;
                return null
            }

            function h(a, b, c) {
                for (var d = c ? b : b.parentNode; d;) {
                    if (d === a) return !0;
                    d = d.parentNode
                }
                return !1
            }

            function i(a, b) {
                return h(a, b, !0)
            }

            function j(a, b, c) {
                for (var d, e = c ? a : a.parentNode; e;) {
                    if (d = e.parentNode, d === b) return e;
                    e = d
                }
                return null
            }

            function k(a) {
                var b = a.nodeType;
                return 3 == b || 4 == b || 8 == b
            }

            function l(a) {
                if (!a) return !1;
                var b = a.nodeType;
                return 3 == b || 8 == b
            }

            function m(a, b) {
                var c = b.nextSibling,
                    d = b.parentNode;
                return c ? d.insertBefore(a, c) : d.appendChild(a), a
            }

            function n(a, b, c) {
                var d, f, g = a.cloneNode(!1);
                if (g.deleteData(0, b), a.deleteData(b, a.length - b), m(g, a), c)
                    for (d = 0; f = c[d++];) f.node == a && f.offset > b ? (f.node = g, f.offset -= b) : f.node == a.parentNode && f.offset > e(a) && ++f.offset;
                return g
            }

            function o(a) {
                if (9 == a.nodeType) return a;
                if (typeof a.ownerDocument != I) return a.ownerDocument;
                if (typeof a.document != I) return a.document;
                if (a.parentNode) return o(a.parentNode);
                throw b.createError("getDocument: no document found for node")
            }

            function p(a) {
                var c = o(a);
                if (typeof c.defaultView != I) return c.defaultView;
                if (typeof c.parentWindow != I) return c.parentWindow;
                throw b.createError("Cannot get a window object for node")
            }

            function q(a) {
                if (typeof a.contentDocument != I) return a.contentDocument;
                if (typeof a.contentWindow != I) return a.contentWindow.document;
                throw b.createError("getIframeDocument: No Document object found for iframe element")
            }

            function r(a) {
                if (typeof a.contentWindow != I) return a.contentWindow;
                if (typeof a.contentDocument != I) return a.contentDocument.defaultView;
                throw b.createError("getIframeWindow: No Window object found for iframe element")
            }

            function s(a) {
                return a && J.isHostMethod(a, "setTimeout") && J.isHostObject(a, "document")
            }

            function t(a, b, c) {
                var d;
                if (a ? J.isHostProperty(a, "nodeType") ? d = 1 == a.nodeType && "iframe" == a.tagName.toLowerCase() ? q(a) : o(a) : s(a) && (d = a.document) : d = document, !d) throw b.createError(c + "(): Parameter must be a Window object or DOM node");
                return d
            }

            function u(a) {
                for (var b; b = a.parentNode;) a = b;
                return a
            }

            function v(a, c, d, f) {
                var h, i, k, l, m;
                if (a == d) return c === f ? 0 : f > c ? -1 : 1;
                if (h = j(d, a, !0)) return c <= e(h) ? -1 : 1;
                if (h = j(a, d, !0)) return e(h) < f ? -1 : 1;
                if (i = g(a, d), !i) throw Error("comparePoints error: nodes have no common ancestor");
                if (k = a === i ? i : j(a, i, !0), l = d === i ? i : j(d, i, !0), k === l) throw b.createError("comparePoints got to case 4 and childA and childB are the same!");
                for (m = i.firstChild; m;) {
                    if (m === k) return -1;
                    if (m === l) return 1;
                    m = m.nextSibling
                }
            }

            function w(a) {
                var b;
                try {
                    return b = a.parentNode, !1
                } catch (c) {
                    return !0
                }
            }

            function x(a) {
                if (!a) return "[No node]";
                if (G && w(a)) return "[Broken node]";
                if (k(a)) return '"' + a.data + '"';
                if (1 == a.nodeType) {
                    var b = a.id ? ' id="' + a.id + '"' : "";
                    return "<" + a.nodeName + b + ">[index:" + e(a) + ",length:" + a.childNodes.length + "][" + (a.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]"
                }
                return a.nodeName
            }

            function y(a) {
                for (var b, c = o(a).createDocumentFragment(); b = a.firstChild;) c.appendChild(b);
                return c
            }

            function z(a) {
                this.root = a, this._next = a
            }

            function A(a) {
                return new z(a)
            }

            function B(a, b) {
                this.node = a, this.offset = b
            }

            function C(a) {
                this.code = this[a], this.codeName = a, this.message = "DOMException: " + this.codeName
            }
            var D, E, F, G, H, I = "undefined",
                J = a.util;
            J.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || b.fail("document missing a Node creation method"), J.isHostMethod(document, "getElementsByTagName") || b.fail("document missing getElementsByTagName method"), D = document.createElement("div"), J.areHostMethods(D, ["insertBefore", "appendChild", "cloneNode"] || !J.areHostObjects(D, ["previousSibling", "nextSibling", "childNodes", "parentNode"])) || b.fail("Incomplete Element implementation"), J.isHostProperty(D, "innerHTML") || b.fail("Element is missing innerHTML property"), E = document.createTextNode("test"), J.areHostMethods(E, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"] || !J.areHostObjects(D, ["previousSibling", "nextSibling", "childNodes", "parentNode"]) || !J.areHostProperties(E, ["data"])) || b.fail("Incomplete Text Node implementation"), F = function(a, b) {
                for (var c = a.length; c--;)
                    if (a[c] === b) return !0;
                return !1
            }, G = !1,
                function() {
                    var b, c = document.createElement("b");
                    c.innerHTML = "1", b = c.firstChild, c.innerHTML = "<br>", G = w(b), a.features.crashyTextNodes = G
                }(), typeof window.getComputedStyle != I ? H = function(a, b) {
                return p(a).getComputedStyle(a, null)[b]
            } : typeof document.documentElement.currentStyle != I ? H = function(a, b) {
                return a.currentStyle[b]
            } : b.fail("No means of obtaining computed style properties found"), z.prototype = {
                _current: null,
                hasNext: function() {
                    return !!this._next
                },
                next: function() {
                    var a, b, c = this._current = this._next;
                    if (this._current)
                        if (a = c.firstChild, a) this._next = a;
                        else {
                            for (b = null; c !== this.root && !(b = c.nextSibling);) c = c.parentNode;
                            this._next = b
                        } return this._current
                },
                detach: function() {
                    this._current = this._next = this.root = null
                }
            }, B.prototype = {
                equals: function(a) {
                    return !!a && this.node === a.node && this.offset == a.offset
                },
                inspect: function() {
                    return "[DomPosition(" + x(this.node) + ":" + this.offset + ")]"
                },
                toString: function() {
                    return this.inspect()
                }
            }, C.prototype = {
                INDEX_SIZE_ERR: 1,
                HIERARCHY_REQUEST_ERR: 3,
                WRONG_DOCUMENT_ERR: 4,
                NO_MODIFICATION_ALLOWED_ERR: 7,
                NOT_FOUND_ERR: 8,
                NOT_SUPPORTED_ERR: 9,
                INVALID_STATE_ERR: 11,
                INVALID_NODE_TYPE_ERR: 24
            }, C.prototype.toString = function() {
                return this.message
            }, a.dom = {
                arrayContains: F,
                isHtmlNamespace: c,
                parentElement: d,
                getNodeIndex: e,
                getNodeLength: f,
                getCommonAncestor: g,
                isAncestorOf: h,
                isOrIsAncestorOf: i,
                getClosestAncestorIn: j,
                isCharacterDataNode: k,
                isTextOrCommentNode: l,
                insertAfter: m,
                splitDataNode: n,
                getDocument: o,
                getWindow: p,
                getIframeWindow: r,
                getIframeDocument: q,
                getBody: J.getBody,
                isWindow: s,
                getContentDocument: t,
                getRootContainer: u,
                comparePoints: v,
                isBrokenNode: w,
                inspectNode: x,
                getComputedStyleProperty: H,
                fragmentFromNodeChildren: y,
                createIterator: A,
                DomPosition: B
            }, a.DOMException = C
        }), H.createCoreModule("DomRange", ["DomUtil"], function(a) {
            function b(a, b) {
                return 3 != a.nodeType && (gb(a, b.startContainer) || gb(a, b.endContainer))
            }

            function c(a) {
                return a.document || hb(a.startContainer)
            }

            function d(a) {
                return new cb(a.parentNode, fb(a))
            }

            function e(a) {
                return new cb(a.parentNode, fb(a) + 1)
            }

            function f(a, b, c) {
                var d = 11 == a.nodeType ? a.firstChild : a;
                return eb(b) ? c == b.length ? ab.insertAfter(a, b) : b.parentNode.insertBefore(a, 0 == c ? b : jb(b, c)) : c >= b.childNodes.length ? b.appendChild(a) : b.insertBefore(a, b.childNodes[c]), d
            }

            function g(a, b, d) {
                if (y(a), y(b), c(b) != c(a)) throw new db("WRONG_DOCUMENT_ERR");
                var e = ib(a.startContainer, a.startOffset, b.endContainer, b.endOffset),
                    f = ib(a.endContainer, a.endOffset, b.startContainer, b.startOffset);
                return d ? 0 >= e && f >= 0 : 0 > e && f > 0
            }

            function h(a) {
                var b, d, e, f;
                for (e = c(a.range).createDocumentFragment(); d = a.next();) {
                    if (b = a.isPartiallySelectedSubtree(), d = d.cloneNode(!b), b && (f = a.getSubtreeIterator(), d.appendChild(h(f)), f.detach()), 10 == d.nodeType) throw new db("HIERARCHY_REQUEST_ERR");
                    e.appendChild(d)
                }
                return e
            }

            function i(a, b, c) {
                var d, e, f, g;
                for (c = c || {
                    stop: !1
                }; f = a.next();)
                    if (a.isPartiallySelectedSubtree()) {
                        if (b(f) === !1) return c.stop = !0, void 0;
                        if (g = a.getSubtreeIterator(), i(g, b, c), g.detach(), c.stop) return
                    } else
                        for (d = ab.createIterator(f); e = d.next();)
                            if (b(e) === !1) return c.stop = !0, void 0
            }

            function j(a) {
                for (var b; a.next();) a.isPartiallySelectedSubtree() ? (b = a.getSubtreeIterator(), j(b), b.detach()) : a.remove()
            }

            function k(a) {
                for (var b, d, e = c(a.range).createDocumentFragment(); b = a.next();) {
                    if (a.isPartiallySelectedSubtree() ? (b = b.cloneNode(!1), d = a.getSubtreeIterator(), b.appendChild(k(d)), d.detach()) : a.remove(), 10 == b.nodeType) throw new db("HIERARCHY_REQUEST_ERR");
                    e.appendChild(b)
                }
                return e
            }

            function l(a, b, c) {
                var d, e, f = !(!b || !b.length),
                    g = !!c;
                return f && (d = RegExp("^(" + b.join("|") + ")$")), e = [], i(new n(a, !1), function(b) {
                    var h, i;
                    (!f || d.test(b.nodeType)) && (!g || c(b)) && (h = a.startContainer, b == h && eb(h) && a.startOffset == h.length || (i = a.endContainer, b == i && eb(i) && 0 == a.endOffset || e.push(b)))
                }), e
            }

            function m(a) {
                var b = void 0 === a.getName ? "Range" : a.getName();
                return "[" + b + "(" + ab.inspectNode(a.startContainer) + ":" + a.startOffset + ", " + ab.inspectNode(a.endContainer) + ":" + a.endOffset + ")]"
            }

            function n(a, b) {
                if (this.range = a, this.clonePartiallySelectedTextNodes = b, !a.collapsed) {
                    this.sc = a.startContainer, this.so = a.startOffset, this.ec = a.endContainer, this.eo = a.endOffset;
                    var c = a.commonAncestorContainer;
                    this.sc === this.ec && eb(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc !== c || eb(this.sc) ? kb(this.sc, c, !0) : this.sc.childNodes[this.so], this._last = this.ec !== c || eb(this.ec) ? kb(this.ec, c, !0) : this.ec.childNodes[this.eo - 1])
                }
            }

            function o(a) {
                return function(b, c) {
                    for (var d, e = c ? b : b.parentNode; e;) {
                        if (d = e.nodeType, mb(a, d)) return e;
                        e = e.parentNode
                    }
                    return null
                }
            }

            function p(a, b) {
                if (P(a, b)) throw new db("INVALID_NODE_TYPE_ERR")
            }

            function q(a, b) {
                if (!mb(b, a.nodeType)) throw new db("INVALID_NODE_TYPE_ERR")
            }

            function r(a, b) {
                if (0 > b || b > (eb(a) ? a.length : a.childNodes.length)) throw new db("INDEX_SIZE_ERR")
            }

            function s(a, b) {
                if (N(a, !0) !== N(b, !0)) throw new db("WRONG_DOCUMENT_ERR")
            }

            function t(a) {
                if (O(a, !0)) throw new db("NO_MODIFICATION_ALLOWED_ERR")
            }

            function u(a, b) {
                if (!a) throw new db(b)
            }

            function v(a) {
                return ob && ab.isBrokenNode(a) || !mb(J, a.nodeType) && !N(a, !0)
            }

            function w(a, b) {
                return b <= (eb(a) ? a.length : a.childNodes.length)
            }

            function x(a) {
                return !!a.startContainer && !!a.endContainer && !v(a.startContainer) && !v(a.endContainer) && w(a.startContainer, a.startOffset) && w(a.endContainer, a.endOffset)
            }

            function y(a) {
                if (!x(a)) throw Error("Range error: Range is no longer valid after DOM mutation (" + a.inspect() + ")")
            }

            function z(a, b) {
                var c, d, e, f, g;
                y(a), c = a.startContainer, d = a.startOffset, e = a.endContainer, f = a.endOffset, g = c === e, eb(e) && f > 0 && f < e.length && jb(e, f, b), eb(c) && d > 0 && d < c.length && (c = jb(c, d, b), g ? (f -= d, e = c) : e == c.parentNode && f >= fb(c) && f++, d = 0), a.setStartAndEnd(c, d, e, f)
            }

            function A(a) {
                y(a);
                var b = a.commonAncestorContainer.parentNode.cloneNode(!1);
                return b.appendChild(a.cloneContents()), b.innerHTML
            }

            function B(a) {
                a.START_TO_START = U, a.START_TO_END = V, a.END_TO_END = W, a.END_TO_START = X, a.NODE_BEFORE = Y, a.NODE_AFTER = Z, a.NODE_BEFORE_AND_AFTER = $, a.NODE_INSIDE = _
            }

            function C(a) {
                B(a), B(a.prototype)
            }

            function D(a, b) {
                return function() {
                    var c, d, f, g, h, j, k;
                    return y(this), c = this.startContainer, d = this.startOffset, f = this.commonAncestorContainer, g = new n(this, !0), c !== f && (h = kb(c, f, !0), j = e(h), c = j.node, d = j.offset), i(g, t), g.reset(), k = a(g), g.detach(), b(this, c, d, c, d), k
                }
            }

            function E(c, f) {
                function g(a, b) {
                    return function(c) {
                        q(c, I), q(nb(c), J);
                        var f = (a ? d : e)(c);
                        (b ? h : i)(this, f.node, f.offset)
                    }
                }

                function h(a, b, c) {
                    var d = a.endContainer,
                        e = a.endOffset;
                    (b !== a.startContainer || c !== a.startOffset) && ((nb(b) != nb(d) || 1 == ib(b, c, d, e)) && (d = b, e = c), f(a, b, c, d, e))
                }

                function i(a, b, c) {
                    var d = a.startContainer,
                        e = a.startOffset;
                    (b !== a.endContainer || c !== a.endOffset) && ((nb(b) != nb(d) || -1 == ib(b, c, d, e)) && (d = b, e = c), f(a, d, e, b, c))
                }
                var l = function() {};
                l.prototype = a.rangePrototype, c.prototype = new l, bb.extend(c.prototype, {
                    setStart: function(a, b) {
                        p(a, !0), r(a, b), h(this, a, b)
                    },
                    setEnd: function(a, b) {
                        p(a, !0), r(a, b), i(this, a, b)
                    },
                    setStartAndEnd: function() {
                        var a = arguments,
                            b = a[0],
                            c = a[1],
                            d = b,
                            e = c;
                        switch (a.length) {
                            case 3:
                                e = a[2];
                                break;
                            case 4:
                                d = a[2], e = a[3]
                        }
                        f(this, b, c, d, e)
                    },
                    setBoundary: function(a, b, c) {
                        this["set" + (c ? "Start" : "End")](a, b)
                    },
                    setStartBefore: g(!0, !0),
                    setStartAfter: g(!1, !0),
                    setEndBefore: g(!0, !1),
                    setEndAfter: g(!1, !1),
                    collapse: function(a) {
                        y(this), a ? f(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : f(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset)
                    },
                    selectNodeContents: function(a) {
                        p(a, !0), f(this, a, 0, a, lb(a))
                    },
                    selectNode: function(a) {
                        p(a, !1), q(a, I);
                        var b = d(a),
                            c = e(a);
                        f(this, b.node, b.offset, c.node, c.offset)
                    },
                    extractContents: D(k, f),
                    deleteContents: D(j, f),
                    canSurroundContents: function() {
                        var a, c;
                        return y(this), t(this.startContainer), t(this.endContainer), a = new n(this, !0), c = a._first && b(a._first, this) || a._last && b(a._last, this), a.detach(), !c
                    },
                    splitBoundaries: function() {
                        z(this)
                    },
                    splitBoundariesPreservingPositions: function(a) {
                        z(this, a)
                    },
                    normalizeBoundaries: function() {
                        var a, b, c, d, e, g, h, i, j;
                        y(this), a = this.startContainer, b = this.startOffset, c = this.endContainer, d = this.endOffset, e = function(a) {
                            var b = a.nextSibling;
                            b && b.nodeType == a.nodeType && (c = a, d = a.length, a.appendData(b.data), b.parentNode.removeChild(b))
                        }, g = function(e) {
                            var f, g, h = e.previousSibling;
                            h && h.nodeType == e.nodeType && (a = e, f = e.length, b = h.length, e.insertData(0, h.data), h.parentNode.removeChild(h), a == c ? (d += b, c = a) : c == e.parentNode && (g = fb(e), d == g ? (c = e, d = f) : d > g && d--))
                        }, h = !0, eb(c) ? c.length == d && e(c) : (d > 0 && (i = c.childNodes[d - 1], i && eb(i) && e(i)), h = !this.collapsed), h ? eb(a) ? 0 == b && g(a) : b < a.childNodes.length && (j = a.childNodes[b], j && eb(j) && g(j)) : (a = c, b = d), f(this, a, b, c, d)
                    },
                    collapseToPoint: function(a, b) {
                        p(a, !0), r(a, b), this.setStartAndEnd(a, b)
                    }
                }), C(c)
            }

            function F(a) {
                a.collapsed = a.startContainer === a.endContainer && a.startOffset === a.endOffset, a.commonAncestorContainer = a.collapsed ? a.startContainer : ab.getCommonAncestor(a.startContainer, a.endContainer)
            }

            function G(a, b, c, d, e) {
                a.startContainer = b, a.startOffset = c, a.endContainer = d, a.endOffset = e, a.document = ab.getDocument(b), F(a)
            }

            function H(a) {
                this.startContainer = a, this.startOffset = 0, this.endContainer = a, this.endOffset = 0, this.document = a, F(this)
            }
            var I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, $, _, ab = a.dom,
                bb = a.util,
                cb = ab.DomPosition,
                db = a.DOMException,
                eb = ab.isCharacterDataNode,
                fb = ab.getNodeIndex,
                gb = ab.isOrIsAncestorOf,
                hb = ab.getDocument,
                ib = ab.comparePoints,
                jb = ab.splitDataNode,
                kb = ab.getClosestAncestorIn,
                lb = ab.getNodeLength,
                mb = ab.arrayContains,
                nb = ab.getRootContainer,
                ob = a.features.crashyTextNodes;
            n.prototype = {
                _current: null,
                _next: null,
                _first: null,
                _last: null,
                isSingleCharacterDataNode: !1,
                reset: function() {
                    this._current = null, this._next = this._first
                },
                hasNext: function() {
                    return !!this._next
                },
                next: function() {
                    var a = this._current = this._next;
                    return a && (this._next = a !== this._last ? a.nextSibling : null, eb(a) && this.clonePartiallySelectedTextNodes && (a === this.ec && (a = a.cloneNode(!0)).deleteData(this.eo, a.length - this.eo), this._current === this.sc && (a = a.cloneNode(!0)).deleteData(0, this.so))), a
                },
                remove: function() {
                    var a, b, c = this._current;
                    !eb(c) || c !== this.sc && c !== this.ec ? c.parentNode && c.parentNode.removeChild(c) : (a = c === this.sc ? this.so : 0, b = c === this.ec ? this.eo : c.length, a != b && c.deleteData(a, b - a))
                },
                isPartiallySelectedSubtree: function() {
                    var a = this._current;
                    return b(a, this.range)
                },
                getSubtreeIterator: function() {
                    var a, b, d, e, f, g;
                    return this.isSingleCharacterDataNode ? (a = this.range.cloneRange(), a.collapse(!1)) : (a = new H(c(this.range)), b = this._current, d = b, e = 0, f = b, g = lb(b), gb(b, this.sc) && (d = this.sc, e = this.so), gb(b, this.ec) && (f = this.ec, g = this.eo), G(a, d, e, f, g)), new n(a, this.clonePartiallySelectedTextNodes)
                },
                detach: function() {
                    this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null
                }
            }, I = [1, 3, 4, 5, 7, 8, 10], J = [2, 9, 11], K = [5, 6, 10, 12], L = [1, 3, 4, 5, 7, 8, 10, 11], M = [1, 3, 4, 5, 7, 8], N = o([9, 11]), O = o(K), P = o([6, 10, 12]), Q = document.createElement("style"), R = !1;
            try {
                Q.innerHTML = "<b>x</b>", R = 3 == Q.firstChild.nodeType
            } catch (pb) {}
            a.features.htmlParsingConforms = R, S = R ? function(a) {
                var b, c = this.startContainer,
                    d = hb(c);
                if (!c) throw new db("INVALID_STATE_ERR");
                return b = null, 1 == c.nodeType ? b = c : eb(c) && (b = ab.parentElement(c)), b = null === b || "HTML" == b.nodeName && ab.isHtmlNamespace(hb(b).documentElement) && ab.isHtmlNamespace(b) ? d.createElement("body") : b.cloneNode(!1), b.innerHTML = a, ab.fragmentFromNodeChildren(b)
            } : function(a) {
                var b = c(this),
                    d = b.createElement("body");
                return d.innerHTML = a, ab.fragmentFromNodeChildren(d)
            }, T = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"], U = 0, V = 1, W = 2, X = 3, Y = 0, Z = 1, $ = 2, _ = 3, bb.extend(a.rangePrototype, {
                compareBoundaryPoints: function(a, b) {
                    var c, d, e, f, g, h;
                    return y(this), s(this.startContainer, b.startContainer), g = a == X || a == U ? "start" : "end", h = a == V || a == U ? "start" : "end", c = this[g + "Container"], d = this[g + "Offset"], e = b[h + "Container"], f = b[h + "Offset"], ib(c, d, e, f)
                },
                insertNode: function(a) {
                    if (y(this), q(a, L), t(this.startContainer), gb(a, this.startContainer)) throw new db("HIERARCHY_REQUEST_ERR");
                    var b = f(a, this.startContainer, this.startOffset);
                    this.setStartBefore(b)
                },
                cloneContents: function() {
                    var a, b, d;
                    return y(this), this.collapsed ? c(this).createDocumentFragment() : this.startContainer === this.endContainer && eb(this.startContainer) ? (a = this.startContainer.cloneNode(!0), a.data = a.data.slice(this.startOffset, this.endOffset), b = c(this).createDocumentFragment(), b.appendChild(a), b) : (d = new n(this, !0), a = h(d), d.detach(), a)
                },
                canSurroundContents: function() {
                    var a, c;
                    return y(this), t(this.startContainer), t(this.endContainer), a = new n(this, !0), c = a._first && b(a._first, this) || a._last && b(a._last, this), a.detach(), !c
                },
                surroundContents: function(a) {
                    if (q(a, M), !this.canSurroundContents()) throw new db("INVALID_STATE_ERR");
                    var b = this.extractContents();
                    if (a.hasChildNodes())
                        for (; a.lastChild;) a.removeChild(a.lastChild);
                    f(a, this.startContainer, this.startOffset), a.appendChild(b), this.selectNode(a)
                },
                cloneRange: function() {
                    var a, b, d;
                    for (y(this), a = new H(c(this)), b = T.length; b--;) d = T[b], a[d] = this[d];
                    return a
                },
                toString: function() {
                    var a, b, c;
                    return y(this), a = this.startContainer, a === this.endContainer && eb(a) ? 3 == a.nodeType || 4 == a.nodeType ? a.data.slice(this.startOffset, this.endOffset) : "" : (b = [], c = new n(this, !0), i(c, function(a) {
                        (3 == a.nodeType || 4 == a.nodeType) && b.push(a.data)
                    }), c.detach(), b.join(""))
                },
                compareNode: function(a) {
                    var b, c, d, e;
                    if (y(this), b = a.parentNode, c = fb(a), !b) throw new db("NOT_FOUND_ERR");
                    return d = this.comparePoint(b, c), e = this.comparePoint(b, c + 1), 0 > d ? e > 0 ? $ : Y : e > 0 ? Z : _
                },
                comparePoint: function(a, b) {
                    return y(this), u(a, "HIERARCHY_REQUEST_ERR"), s(a, this.startContainer), ib(a, b, this.startContainer, this.startOffset) < 0 ? -1 : ib(a, b, this.endContainer, this.endOffset) > 0 ? 1 : 0
                },
                createContextualFragment: S,
                toHtml: function() {
                    return A(this)
                },
                intersectsNode: function(a, b) {
                    var d, e, f, g;
                    return y(this), u(a, "NOT_FOUND_ERR"), hb(a) !== c(this) ? !1 : (d = a.parentNode, e = fb(a), u(d, "NOT_FOUND_ERR"), f = ib(d, e, this.endContainer, this.endOffset), g = ib(d, e + 1, this.startContainer, this.startOffset), b ? 0 >= f && g >= 0 : 0 > f && g > 0)
                },
                isPointInRange: function(a, b) {
                    return y(this), u(a, "HIERARCHY_REQUEST_ERR"), s(a, this.startContainer), ib(a, b, this.startContainer, this.startOffset) >= 0 && ib(a, b, this.endContainer, this.endOffset) <= 0
                },
                intersectsRange: function(a) {
                    return g(this, a, !1)
                },
                intersectsOrTouchesRange: function(a) {
                    return g(this, a, !0)
                },
                intersection: function(a) {
                    var b, c, d;
                    return this.intersectsRange(a) ? (b = ib(this.startContainer, this.startOffset, a.startContainer, a.startOffset), c = ib(this.endContainer, this.endOffset, a.endContainer, a.endOffset), d = this.cloneRange(), -1 == b && d.setStart(a.startContainer, a.startOffset), 1 == c && d.setEnd(a.endContainer, a.endOffset), d) : null
                },
                union: function(a) {
                    if (this.intersectsOrTouchesRange(a)) {
                        var b = this.cloneRange();
                        return -1 == ib(a.startContainer, a.startOffset, this.startContainer, this.startOffset) && b.setStart(a.startContainer, a.startOffset), 1 == ib(a.endContainer, a.endOffset, this.endContainer, this.endOffset) && b.setEnd(a.endContainer, a.endOffset), b
                    }
                    throw new db("Ranges do not intersect")
                },
                containsNode: function(a, b) {
                    return b ? this.intersectsNode(a, !1) : this.compareNode(a) == _
                },
                containsNodeContents: function(a) {
                    return this.comparePoint(a, 0) >= 0 && this.comparePoint(a, lb(a)) <= 0
                },
                containsRange: function(a) {
                    var b = this.intersection(a);
                    return null !== b && a.equals(b)
                },
                containsNodeText: function(a) {
                    var b, c, d = this.cloneRange();
                    return d.selectNode(a), b = d.getNodes([3]), b.length > 0 ? (d.setStart(b[0], 0), c = b.pop(), d.setEnd(c, c.length), this.containsRange(d)) : this.containsNodeContents(a)
                },
                getNodes: function(a, b) {
                    return y(this), l(this, a, b)
                },
                getDocument: function() {
                    return c(this)
                },
                collapseBefore: function(a) {
                    this.setEndBefore(a), this.collapse(!1)
                },
                collapseAfter: function(a) {
                    this.setStartAfter(a), this.collapse(!0)
                },
                getBookmark: function(b) {
                    var d, e, f, g = c(this),
                        h = a.createRange(g);
                    return b = b || ab.getBody(g), h.selectNodeContents(b), d = this.intersection(h), e = 0, f = 0, d && (h.setEnd(d.startContainer, d.startOffset), e = ("" + h).length, f = e + ("" + d).length), {
                        start: e,
                        end: f,
                        containerNode: b
                    }
                },
                moveToBookmark: function(a) {
                    var b, c, d, e, f, g, h, i = a.containerNode,
                        j = 0;
                    for (this.setStart(i, 0), this.collapse(!0), b = [i], d = !1, e = !1; !e && (c = b.pop());)
                        if (3 == c.nodeType) f = j + c.length, !d && a.start >= j && a.start <= f && (this.setStart(c, a.start - j), d = !0), d && a.end >= j && a.end <= f && (this.setEnd(c, a.end - j), e = !0), j = f;
                        else
                            for (h = c.childNodes, g = h.length; g--;) b.push(h[g])
                },
                getName: function() {
                    return "DomRange"
                },
                equals: function(a) {
                    return H.rangesEqual(this, a)
                },
                isValid: function() {
                    return x(this)
                },
                inspect: function() {
                    return m(this)
                },
                detach: function() {}
            }), E(H, G), bb.extend(H, {
                rangeProperties: T,
                RangeIterator: n,
                copyComparisonConstants: C,
                createPrototypeRange: E,
                inspect: m,
                toHtml: A,
                getRangeDocument: c,
                rangesEqual: function(a, b) {
                    return a.startContainer === b.startContainer && a.startOffset === b.startOffset && a.endContainer === b.endContainer && a.endOffset === b.endOffset
                }
            }), a.DomRange = H
        }), H.createCoreModule("WrappedRange", ["DomRange"], function(a, b) {
            var c, d, e, f, g, h, i, j, k = a.dom,
                l = a.util,
                m = k.DomPosition,
                n = a.DomRange,
                o = k.getBody,
                p = k.getContentDocument,
                q = k.isCharacterDataNode;
            a.features.implementsDomRange && ! function() {
                function d(a) {
                    for (var b, c = s.length; c--;) b = s[c], a[b] = a.nativeRange[b];
                    a.collapsed = a.startContainer === a.endContainer && a.startOffset === a.endOffset
                }

                function e(a, b, c, d, e) {
                    var f = a.startContainer !== b || a.startOffset != c,
                        g = a.endContainer !== d || a.endOffset != e,
                        h = !a.equals(a.nativeRange);
                    (f || g || h) && (a.setEnd(d, e), a.setStart(b, c))
                }
                var f, g, h, i, j, m, q, r, s = n.rangeProperties;
                c = function(a) {
                    if (!a) throw b.createError("WrappedRange: Range must be specified");
                    this.nativeRange = a, d(this)
                }, n.createPrototypeRange(c, e), f = c.prototype, f.selectNode = function(a) {
                    this.nativeRange.selectNode(a), d(this)
                }, f.cloneContents = function() {
                    return this.nativeRange.cloneContents()
                }, f.surroundContents = function(a) {
                    this.nativeRange.surroundContents(a), d(this)
                }, f.collapse = function(a) {
                    this.nativeRange.collapse(a), d(this)
                }, f.cloneRange = function() {
                    return new c(this.nativeRange.cloneRange())
                }, f.refresh = function() {
                    d(this)
                }, f.toString = function() {
                    return "" + this.nativeRange
                }, h = document.createTextNode("test"), o(document).appendChild(h), i = document.createRange(), i.setStart(h, 0), i.setEnd(h, 0);
                try {
                    i.setStart(h, 1), f.setStart = function(a, b) {
                        this.nativeRange.setStart(a, b), d(this)
                    }, f.setEnd = function(a, b) {
                        this.nativeRange.setEnd(a, b), d(this)
                    }, g = function(a) {
                        return function(b) {
                            this.nativeRange[a](b), d(this)
                        }
                    }
                } catch (t) {
                    f.setStart = function(a, b) {
                        try {
                            this.nativeRange.setStart(a, b)
                        } catch (c) {
                            this.nativeRange.setEnd(a, b), this.nativeRange.setStart(a, b)
                        }
                        d(this)
                    }, f.setEnd = function(a, b) {
                        try {
                            this.nativeRange.setEnd(a, b)
                        } catch (c) {
                            this.nativeRange.setStart(a, b), this.nativeRange.setEnd(a, b)
                        }
                        d(this)
                    }, g = function(a, b) {
                        return function(c) {
                            try {
                                this.nativeRange[a](c)
                            } catch (e) {
                                this.nativeRange[b](c), this.nativeRange[a](c)
                            }
                            d(this)
                        }
                    }
                }
                f.setStartBefore = g("setStartBefore", "setEndBefore"), f.setStartAfter = g("setStartAfter", "setEndAfter"), f.setEndBefore = g("setEndBefore", "setStartBefore"), f.setEndAfter = g("setEndAfter", "setStartAfter"), f.selectNodeContents = function(a) {
                    this.setStartAndEnd(a, 0, k.getNodeLength(a))
                }, i.selectNodeContents(h), i.setEnd(h, 3), j = document.createRange(), j.selectNodeContents(h), j.setEnd(h, 4), j.setStart(h, 2), f.compareBoundaryPoints = -1 == i.compareBoundaryPoints(i.START_TO_END, j) && 1 == i.compareBoundaryPoints(i.END_TO_START, j) ? function(a, b) {
                    return b = b.nativeRange || b, a == b.START_TO_END ? a = b.END_TO_START : a == b.END_TO_START && (a = b.START_TO_END), this.nativeRange.compareBoundaryPoints(a, b)
                } : function(a, b) {
                    return this.nativeRange.compareBoundaryPoints(a, b.nativeRange || b)
                }, m = document.createElement("div"), m.innerHTML = "123", q = m.firstChild, r = o(document), r.appendChild(m), i.setStart(q, 1), i.setEnd(q, 2), i.deleteContents(), "13" == q.data && (f.deleteContents = function() {
                    this.nativeRange.deleteContents(), d(this)
                }, f.extractContents = function() {
                    var a = this.nativeRange.extractContents();
                    return d(this), a
                }), r.removeChild(m), r = null, l.isHostMethod(i, "createContextualFragment") && (f.createContextualFragment = function(a) {
                    return this.nativeRange.createContextualFragment(a)
                }), o(document).removeChild(h), f.getName = function() {
                    return "WrappedRange"
                }, a.WrappedRange = c, a.createNativeRange = function(a) {
                    return a = p(a, b, "createNativeRange"), a.createRange()
                }
            }(), a.features.implementsTextRange && (e = function(a) {
                var b, c, d, e = a.parentElement(),
                    f = a.duplicate();
                return f.collapse(!0), b = f.parentElement(), f = a.duplicate(), f.collapse(!1), c = f.parentElement(), d = b == c ? b : k.getCommonAncestor(b, c), d == e ? d : k.getCommonAncestor(e, d)
            }, f = function(a) {
                return 0 == a.compareEndPoints("StartToEnd", a)
            }, g = function(a, b, c, d, e) {
                var f, g, h, i, j, l, n, o, p, r, s, t, u, v, w, x, y = a.duplicate();
                if (y.collapse(c), f = y.parentElement(), k.isOrIsAncestorOf(b, f) || (f = b), !f.canHaveHTML) return g = new m(f.parentNode, k.getNodeIndex(f)), {
                    boundaryPosition: g,
                    nodeInfo: {
                        nodeIndex: g.offset,
                        containerElement: g.node
                    }
                };
                for (h = k.getDocument(f).createElement("span"), h.parentNode && h.parentNode.removeChild(h), j = c ? "StartToStart" : "StartToEnd", r = e && e.containerElement == f ? e.nodeIndex : 0, s = f.childNodes.length, t = s, u = t;;) {
                    if (u == s ? f.appendChild(h) : f.insertBefore(h, f.childNodes[u]), y.moveToElementText(h), i = y.compareEndPoints(j, a), 0 == i || r == t) break;
                    if (-1 == i) {
                        if (t == r + 1) break;
                        r = u
                    } else t = t == r + 1 ? r : u;
                    u = Math.floor((r + t) / 2), f.removeChild(h)
                }
                if (p = h.nextSibling, -1 == i && p && q(p)) {
                    if (y.setEndPoint(c ? "EndToStart" : "EndToEnd", a), /[\r\n]/.test(p.data))
                        for (w = y.duplicate(), x = w.text.replace(/\r\n/g, "\r").length, v = w.moveStart("character", x); - 1 == (i = w.compareEndPoints("StartToEnd", w));) v++, w.moveStart("character", 1);
                    else v = y.text.length;
                    o = new m(p, v)
                } else l = (d || !c) && h.previousSibling, n = (d || c) && h.nextSibling, o = n && q(n) ? new m(n, 0) : l && q(l) ? new m(l, l.data.length) : new m(f, k.getNodeIndex(h));
                return h.parentNode.removeChild(h), {
                    boundaryPosition: o,
                    nodeInfo: {
                        nodeIndex: u,
                        containerElement: f
                    }
                }
            }, h = function(a, b) {
                var c, d, e, f, g = a.offset,
                    h = k.getDocument(a.node),
                    i = o(h).createTextRange(),
                    j = q(a.node);
                return j ? (c = a.node, d = c.parentNode) : (f = a.node.childNodes, c = g < f.length ? f[g] : null, d = a.node), e = h.createElement("span"), e.innerHTML = "&#feff;", c ? d.insertBefore(e, c) : d.appendChild(e), i.moveToElementText(e), i.collapse(!b), d.removeChild(e), j && i[b ? "moveStart" : "moveEnd"]("character", g), i
            }, d = function(a) {
                this.textRange = a, this.refresh()
            }, d.prototype = new n(document), d.prototype.refresh = function() {
                var a, b, c, d = e(this.textRange);
                f(this.textRange) ? b = a = g(this.textRange, d, !0, !0).boundaryPosition : (c = g(this.textRange, d, !0, !1), a = c.boundaryPosition, b = g(this.textRange, d, !1, !1, c.nodeInfo).boundaryPosition), this.setStart(a.node, a.offset), this.setEnd(b.node, b.offset)
            }, d.prototype.getName = function() {
                return "WrappedTextRange"
            }, n.copyComparisonConstants(d), i = function(a) {
                var b, c, d;
                return a.collapsed ? h(new m(a.startContainer, a.startOffset), !0) : (b = h(new m(a.startContainer, a.startOffset), !0), c = h(new m(a.endContainer, a.endOffset), !1), d = o(n.getRangeDocument(a)).createTextRange(), d.setEndPoint("StartToStart", b), d.setEndPoint("EndToEnd", c), d)
            }, d.rangeToTextRange = i, d.prototype.toTextRange = function() {
                return i(this)
            }, a.WrappedTextRange = d, (!a.features.implementsDomRange || a.config.preferTextRange) && (j = function() {
                return this
            }(), void 0 === j.Range && (j.Range = d), a.createNativeRange = function(a) {
                return a = p(a, b, "createNativeRange"), o(a).createTextRange()
            }, a.WrappedRange = d)), a.createRange = function(c) {
                return c = p(c, b, "createRange"), new a.WrappedRange(a.createNativeRange(c))
            }, a.createRangyRange = function(a) {
                return a = p(a, b, "createRangyRange"), new n(a)
            }, a.createIframeRange = function(c) {
                return b.deprecationNotice("createIframeRange()", "createRange(iframeEl)"), a.createRange(c)
            }, a.createIframeRangyRange = function(c) {
                return b.deprecationNotice("createIframeRangyRange()", "createRangyRange(iframeEl)"), a.createRangyRange(c)
            }, a.addShimListener(function(b) {
                var c = b.document;
                void 0 === c.createRange && (c.createRange = function() {
                    return a.createRange(c)
                }), c = b = null
            })
        }), H.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function(a, b) {
            function c(a) {
                return "string" == typeof a ? /^backward(s)?$/i.test(a) : !!a
            }

            function d(a, c) {
                if (a) {
                    if (A.isWindow(a)) return a;
                    if (a instanceof r) return a.win;
                    var d = A.getContentDocument(a, b, c);
                    return A.getWindow(d)
                }
                return window
            }

            function e(a) {
                return d(a, "getWinSelection").getSelection()
            }

            function f(a) {
                return d(a, "getDocSelection").document.selection
            }

            function g(a) {
                var b = !1;
                return a.anchorNode && (b = 1 == A.comparePoints(a.anchorNode, a.anchorOffset, a.focusNode, a.focusOffset)), b
            }

            function h(a, b, c) {
                var d = c ? "end" : "start",
                    e = c ? "start" : "end";
                a.anchorNode = b[d + "Container"], a.anchorOffset = b[d + "Offset"], a.focusNode = b[e + "Container"], a.focusOffset = b[e + "Offset"]
            }

            function i(a) {
                var b = a.nativeSelection;
                a.anchorNode = b.anchorNode, a.anchorOffset = b.anchorOffset, a.focusNode = b.focusNode, a.focusOffset = b.focusOffset
            }

            function j(a) {
                a.anchorNode = a.focusNode = null, a.anchorOffset = a.focusOffset = 0, a.rangeCount = 0, a.isCollapsed = !0, a._ranges.length = 0
            }

            function k(b) {
                var c;
                return b instanceof D ? (c = a.createNativeRange(b.getDocument()), c.setEnd(b.endContainer, b.endOffset), c.setStart(b.startContainer, b.startOffset)) : b instanceof E ? c = b.nativeRange : J.implementsDomRange && b instanceof A.getWindow(b.startContainer).Range && (c = b), c
            }

            function l(a) {
                if (!a.length || 1 != a[0].nodeType) return !1;
                for (var b = 1, c = a.length; c > b; ++b)
                    if (!A.isAncestorOf(a[0], a[b])) return !1;
                return !0
            }

            function m(a) {
                var c = a.getNodes();
                if (!l(c)) throw b.createError("getSingleElementFromRange: range " + a.inspect() + " did not consist of a single element");
                return c[0]
            }

            function n(a) {
                return !!a && void 0 !== a.text
            }

            function o(a, b) {
                var c = new E(b);
                a._ranges = [c], h(a, c, !1), a.rangeCount = 1, a.isCollapsed = c.collapsed
            }

            function p(b) {
                var c, d, e, f;
                if (b._ranges.length = 0, "None" == b.docSelection.type) j(b);
                else if (c = b.docSelection.createRange(), n(c)) o(b, c);
                else {
                    for (b.rangeCount = c.length, e = L(c.item(0)), f = 0; f < b.rangeCount; ++f) d = a.createRange(e), d.selectNode(c.item(f)), b._ranges.push(d);
                    b.isCollapsed = 1 == b.rangeCount && b._ranges[0].collapsed, h(b, b._ranges[b.rangeCount - 1], !1)
                }
            }

            function q(a, c) {
                var d, e, f = a.docSelection.createRange(),
                    g = m(c),
                    h = L(f.item(0)),
                    i = M(h).createControlRange();
                for (d = 0, e = f.length; e > d; ++d) i.add(f.item(d));
                try {
                    i.add(g)
                } catch (j) {
                    throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
                }
                i.select(), p(a)
            }

            function r(a, b, c) {
                this.nativeSelection = a, this.docSelection = b, this._ranges = [], this.win = c, this.refresh()
            }

            function s(a) {
                a.win = a.anchorNode = a.focusNode = a._ranges = null, a.rangeCount = a.anchorOffset = a.focusOffset = 0, a.detached = !0
            }

            function t(a, b) {
                for (var c, d, e = bb.length; e--;)
                    if (c = bb[e], d = c.selection, "deleteAll" == b) s(d);
                    else if (c.win == a) return "delete" == b ? (bb.splice(e, 1), !0) : d;
                return "deleteAll" == b && (bb.length = 0), null
            }

            function u(a, c) {
                var d, e, f, g = L(c[0].startContainer),
                    h = M(g).createControlRange();
                for (d = 0, f = c.length; f > d; ++d) {
                    e = m(c[d]);
                    try {
                        h.add(e)
                    } catch (i) {
                        throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")
                    }
                }
                h.select(), p(a)
            }

            function v(a, b) {
                if (a.win.document != L(b)) throw new F("WRONG_DOCUMENT_ERR")
            }

            function w(b) {
                return function(c, d) {
                    var e;
                    this.rangeCount ? (e = this.getRangeAt(0), e["set" + (b ? "Start" : "End")](c, d)) : (e = a.createRange(this.win.document), e.setStartAndEnd(c, d)), this.setSingleRange(e, this.isBackward())
                }
            }

            function x(a) {
                var b, c, d = [],
                    e = new G(a.anchorNode, a.anchorOffset),
                    f = new G(a.focusNode, a.focusOffset),
                    g = "function" == typeof a.getName ? a.getName() : "Selection";
                if (void 0 !== a.rangeCount)
                    for (b = 0, c = a.rangeCount; c > b; ++b) d[b] = D.inspect(a.getRangeAt(b));
                return "[" + g + "(Ranges: " + d.join(", ") + ")(anchor: " + e.inspect() + ", focus: " + f.inspect() + "]"
            }
            var y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, $, _, ab, bb, cb, db, eb, fb, gb, hb;
            if (a.config.checkSelectionRanges = !0, y = "boolean", z = "number", A = a.dom, B = a.util, C = B.isHostMethod, D = a.DomRange, E = a.WrappedRange, F = a.DOMException, G = A.DomPosition, J = a.features, K = "Control", L = A.getDocument, M = A.getBody, N = D.rangesEqual, O = C(window, "getSelection"), P = B.isHostObject(document, "selection"), J.implementsWinGetSelection = O, J.implementsDocSelection = P, Q = P && (!O || a.config.preferTextRange), Q ? (H = f, a.isSelectionValid = function(a) {
                var b = d(a, "isSelectionValid").document,
                    c = b.selection;
                return "None" != c.type || L(c.createRange().parentElement()) == b
            }) : O ? (H = e, a.isSelectionValid = function() {
                return !0
            }) : b.fail("Neither document.selection or window.getSelection() detected."), a.getNativeSelection = H, R = H(), S = a.createNativeRange(document), T = M(document), U = B.areHostProperties(R, ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]), J.selectionHasAnchorAndFocus = U, V = C(R, "extend"), J.selectionHasExtend = V, W = typeof R.rangeCount == z, J.selectionHasRangeCount = W, X = !1, Y = !0, Z = V ? function(b, c) {
                var d = D.getRangeDocument(c),
                    e = a.createRange(d);
                e.collapseToPoint(c.endContainer, c.endOffset), b.addRange(k(e)), b.extend(c.startContainer, c.startOffset)
            } : null, B.areHostMethods(R, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof R.rangeCount == z && J.implementsDomRange && ! function() {
                var b, c, d, e, f, h, i, j, k, l, m, n = window.getSelection();
                if (n) {
                    for (b = n.rangeCount, c = b > 1, d = [], e = g(n), f = 0; b > f; ++f) d[f] = n.getRangeAt(f);
                    for (h = M(document), i = h.appendChild(document.createElement("div")), i.contentEditable = "false", j = i.appendChild(document.createTextNode("")), k = document.createRange(), k.setStart(j, 1), k.collapse(!0), n.addRange(k), Y = 1 == n.rangeCount, n.removeAllRanges(), c || (l = window.navigator.appVersion.match(/Chrome\/(.*?) /), l && parseInt(l[1]) >= 36 ? X = !1 : (m = k.cloneRange(), k.setStart(j, 0), m.setEnd(j, 3), m.setStart(j, 2), n.addRange(k), n.addRange(m), X = 2 == n.rangeCount)), h.removeChild(i), n.removeAllRanges(), f = 0; b > f; ++f) 0 == f && e ? Z ? Z(n, d[f]) : (a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"), n.addRange(d[f])) : n.addRange(d[f])
                }
            }(), J.selectionSupportsMultipleRanges = X, J.collapsedNonEditableSelectionsSupported = Y, $ = !1, T && C(T, "createControlRange") && (_ = T.createControlRange(), B.areHostProperties(_, ["item", "add"]) && ($ = !0)), J.implementsControlRange = $, I = U ? function(a) {
                return a.anchorNode === a.focusNode && a.anchorOffset === a.focusOffset
            } : function(a) {
                return a.rangeCount ? a.getRangeAt(a.rangeCount - 1).collapsed : !1
            }, C(R, "getRangeAt") ? ab = function(a, b) {
                try {
                    return a.getRangeAt(b)
                } catch (c) {
                    return null
                }
            } : U && (ab = function(b) {
                var c = L(b.anchorNode),
                    d = a.createRange(c);
                return d.setStartAndEnd(b.anchorNode, b.anchorOffset, b.focusNode, b.focusOffset), d.collapsed !== this.isCollapsed && d.setStartAndEnd(b.focusNode, b.focusOffset, b.anchorNode, b.anchorOffset), d
            }), r.prototype = a.selectionPrototype, bb = [], cb = function(a) {
                var b, c, e;
                return a && a instanceof r ? (a.refresh(), a) : (a = d(a, "getNativeSelection"), b = t(a), c = H(a), e = P ? f(a) : null, b ? (b.nativeSelection = c, b.docSelection = e, b.refresh()) : (b = new r(c, e, a), bb.push({
                    win: a,
                    selection: b
                })), b)
            }, a.getSelection = cb, a.getIframeSelection = function(c) {
                return b.deprecationNotice("getIframeSelection()", "getSelection(iframeEl)"), a.getSelection(A.getIframeWindow(c))
            }, db = r.prototype, !Q && U && B.areHostMethods(R, ["removeAllRanges", "addRange"])) db.removeAllRanges = function() {
                this.nativeSelection.removeAllRanges(), j(this)
            }, eb = function(a, b) {
                Z(a.nativeSelection, b), a.refresh()
            }, db.addRange = W ? function(b, d) {
                var e, f;
                $ && P && this.docSelection.type == K ? q(this, b) : c(d) && V ? eb(this, b) : (X ? e = this.rangeCount : (this.removeAllRanges(), e = 0), this.nativeSelection.addRange(k(b).cloneRange()), this.rangeCount = this.nativeSelection.rangeCount, this.rangeCount == e + 1 ? (a.config.checkSelectionRanges && (f = ab(this.nativeSelection, this.rangeCount - 1), f && !N(f, b) && (b = new E(f))), this._ranges[this.rangeCount - 1] = b, h(this, b, hb(this.nativeSelection)), this.isCollapsed = I(this)) : this.refresh())
            } : function(a, b) {
                c(b) && V ? eb(this, a) : (this.nativeSelection.addRange(k(a)), this.refresh())
            }, db.setRanges = function(a) {
                if ($ && P && a.length > 1) u(this, a);
                else {
                    this.removeAllRanges();
                    for (var b = 0, c = a.length; c > b; ++b) this.addRange(a[b])
                }
            };
            else {
                if (!(C(R, "empty") && C(S, "select") && $ && Q)) return b.fail("No means of selecting a Range or TextRange was found"), !1;
                db.removeAllRanges = function() {
                    var a, b, c;
                    try {
                        this.docSelection.empty(), "None" != this.docSelection.type && (this.anchorNode ? a = L(this.anchorNode) : this.docSelection.type == K && (b = this.docSelection.createRange(), b.length && (a = L(b.item(0)))), a && (c = M(a).createTextRange(), c.select(), this.docSelection.empty()))
                    } catch (d) {}
                    j(this)
                }, db.addRange = function(b) {
                    this.docSelection.type == K ? q(this, b) : (a.WrappedTextRange.rangeToTextRange(b).select(), this._ranges[0] = b, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, h(this, b, !1))
                }, db.setRanges = function(a) {
                    this.removeAllRanges();
                    var b = a.length;
                    b > 1 ? u(this, a) : b && this.addRange(a[0])
                }
            }
            if (db.getRangeAt = function(a) {
                if (0 > a || a >= this.rangeCount) throw new F("INDEX_SIZE_ERR");
                return this._ranges[a].cloneRange()
            }, Q) fb = function(b) {
                var c;
                a.isSelectionValid(b.win) ? c = b.docSelection.createRange() : (c = M(b.win.document).createTextRange(), c.collapse(!0)), b.docSelection.type == K ? p(b) : n(c) ? o(b, c) : j(b)
            };
            else if (C(R, "getRangeAt") && typeof R.rangeCount == z) fb = function(b) {
                if ($ && P && b.docSelection.type == K) p(b);
                else if (b._ranges.length = b.rangeCount = b.nativeSelection.rangeCount, b.rangeCount) {
                    for (var c = 0, d = b.rangeCount; d > c; ++c) b._ranges[c] = new a.WrappedRange(b.nativeSelection.getRangeAt(c));
                    h(b, b._ranges[b.rangeCount - 1], hb(b.nativeSelection)), b.isCollapsed = I(b)
                } else j(b)
            };
            else {
                if (!U || typeof R.isCollapsed != y || typeof S.collapsed != y || !J.implementsDomRange) return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
                fb = function(a) {
                    var b, c = a.nativeSelection;
                    c.anchorNode ? (b = ab(c, 0), a._ranges = [b], a.rangeCount = 1, i(a), a.isCollapsed = I(a)) : j(a)
                }
            }
            db.refresh = function(a) {
                var b, c = a ? this._ranges.slice(0) : null,
                    d = this.anchorNode,
                    e = this.anchorOffset;
                if (fb(this), a) {
                    if (b = c.length, b != this._ranges.length) return !0;
                    if (this.anchorNode != d || this.anchorOffset != e) return !0;
                    for (; b--;)
                        if (!N(c[b], this._ranges[b])) return !0;
                    return !1
                }
            }, gb = function(a, b) {
                var c, d, e = a.getAllRanges();
                for (a.removeAllRanges(), c = 0, d = e.length; d > c; ++c) N(b, e[c]) || a.addRange(e[c]);
                a.rangeCount || j(a)
            }, db.removeRange = $ && P ? function(a) {
                var b, c, d, e, f, g, h, i;
                if (this.docSelection.type == K) {
                    for (b = this.docSelection.createRange(), c = m(a), d = L(b.item(0)), e = M(d).createControlRange(), g = !1, h = 0, i = b.length; i > h; ++h) f = b.item(h), f !== c || g ? e.add(b.item(h)) : g = !0;
                    e.select(), p(this)
                } else gb(this, a)
            } : function(a) {
                gb(this, a)
            }, !Q && U && J.implementsDomRange ? (hb = g, db.isBackward = function() {
                return hb(this)
            }) : hb = db.isBackward = function() {
                return !1
            }, db.isBackwards = db.isBackward, db.toString = function() {
                var a, b, c = [];
                for (a = 0, b = this.rangeCount; b > a; ++a) c[a] = "" + this._ranges[a];
                return c.join("")
            }, db.collapse = function(b, c) {
                v(this, b);
                var d = a.createRange(b);
                d.collapseToPoint(b, c), this.setSingleRange(d), this.isCollapsed = !0
            }, db.collapseToStart = function() {
                if (!this.rangeCount) throw new F("INVALID_STATE_ERR");
                var a = this._ranges[0];
                this.collapse(a.startContainer, a.startOffset)
            }, db.collapseToEnd = function() {
                if (!this.rangeCount) throw new F("INVALID_STATE_ERR");
                var a = this._ranges[this.rangeCount - 1];
                this.collapse(a.endContainer, a.endOffset)
            }, db.selectAllChildren = function(b) {
                v(this, b);
                var c = a.createRange(b);
                c.selectNodeContents(b), this.setSingleRange(c)
            }, db.deleteFromDocument = function() {
                var a, b, c, d, e;
                if ($ && P && this.docSelection.type == K) {
                    for (a = this.docSelection.createRange(); a.length;) b = a.item(0), a.remove(b), b.parentNode.removeChild(b);
                    this.refresh()
                } else if (this.rangeCount && (c = this.getAllRanges(), c.length)) {
                    for (this.removeAllRanges(), d = 0, e = c.length; e > d; ++d) c[d].deleteContents();
                    this.addRange(c[e - 1])
                }
            }, db.eachRange = function(a, b) {
                for (var c = 0, d = this._ranges.length; d > c; ++c)
                    if (a(this.getRangeAt(c))) return b
            }, db.getAllRanges = function() {
                var a = [];
                return this.eachRange(function(b) {
                    a.push(b)
                }), a
            }, db.setSingleRange = function(a, b) {
                this.removeAllRanges(), this.addRange(a, b)
            }, db.callMethodOnEachRange = function(a, b) {
                var c = [];
                return this.eachRange(function(d) {
                    c.push(d[a].apply(d, b))
                }), c
            }, db.setStart = w(!0), db.setEnd = w(!1), a.rangePrototype.select = function(a) {
                cb(this.getDocument()).setSingleRange(this, a)
            }, db.changeEachRange = function(a) {
                var b = [],
                    c = this.isBackward();
                this.eachRange(function(c) {
                    a(c), b.push(c)
                }), this.removeAllRanges(), c && 1 == b.length ? this.addRange(b[0], "backward") : this.setRanges(b)
            }, db.containsNode = function(a, b) {
                return this.eachRange(function(c) {
                    return c.containsNode(a, b)
                }, !0) || !1
            }, db.getBookmark = function(a) {
                return {
                    backward: this.isBackward(),
                    rangeBookmarks: this.callMethodOnEachRange("getBookmark", [a])
                }
            }, db.moveToBookmark = function(b) {
                var c, d, e, f = [];
                for (c = 0; d = b.rangeBookmarks[c++];) e = a.createRange(this.win), e.moveToBookmark(d), f.push(e);
                b.backward ? this.setSingleRange(f[0], "backward") : this.setRanges(f)
            }, db.toHtml = function() {
                var a = [];
                return this.eachRange(function(b) {
                    a.push(D.toHtml(b))
                }), a.join("")
            }, J.implementsTextRange && (db.getNativeTextRange = function() {
                var c, d;
                if (c = this.docSelection) {
                    if (d = c.createRange(), n(d)) return d;
                    throw b.createError("getNativeTextRange: selection is a control selection")
                }
                if (this.rangeCount > 0) return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));
                throw b.createError("getNativeTextRange: selection contains no range")
            }), db.getName = function() {
                return "WrappedSelection"
            }, db.inspect = function() {
                return x(this)
            }, db.detach = function() {
                t(this.win, "delete"), s(this)
            }, r.detachAll = function() {
                t(null, "deleteAll")
            }, r.inspect = x, r.isDirectionBackward = c, a.Selection = r, a.selectionPrototype = db, a.addShimListener(function(a) {
                void 0 === a.getSelection && (a.getSelection = function() {
                    return cb(a)
                }), a = null
            })
        }), H)
    }, this),
    function(a, b) {
        "function" == typeof define && define.amd ? define(["rangy"], a) : a(b.rangy)
    }(function(a) {
        a.createModule("SaveRestore", ["WrappedRange"], function(a, b) {
            function c(a, b) {
                return (b || document).getElementById(a)
            }

            function d(a, b) {
                var c, d = "selectionBoundary_" + +new Date + "_" + ("" + Math.random()).slice(2),
                    e = o.getDocument(a.startContainer),
                    f = a.cloneRange();
                return f.collapse(b), c = e.createElement("span"), c.id = d, c.style.lineHeight = "0", c.style.display = "none", c.className = "rangySelectionBoundary", c.appendChild(e.createTextNode(p)), f.insertNode(c), c
            }

            function e(a, d, e, f) {
                var g = c(e, a);
                g ? (d[f ? "setStartBefore" : "setEndBefore"](g), g.parentNode.removeChild(g)) : b.warn("Marker element has been removed. Cannot restore selection.")
            }

            function f(a, b) {
                return b.compareBoundaryPoints(a.START_TO_START, a)
            }

            function g(b, c) {
                var e, f, g = a.DomRange.getRangeDocument(b),
                    h = "" + b;
                return b.collapsed ? (f = d(b, !1), {
                    document: g,
                    markerId: f.id,
                    collapsed: !0
                }) : (f = d(b, !1), e = d(b, !0), {
                    document: g,
                    startMarkerId: e.id,
                    endMarkerId: f.id,
                    collapsed: !1,
                    backward: c,
                    toString: function() {
                        return "original text: '" + h + "', new text: '" + b + "'"
                    }
                })
            }

            function h(d, f) {
                var g, h, i, j = d.document;
                return void 0 === f && (f = !0), g = a.createRange(j), d.collapsed ? (h = c(d.markerId, j), h ? (h.style.display = "inline", i = h.previousSibling, i && 3 == i.nodeType ? (h.parentNode.removeChild(h), g.collapseToPoint(i, i.length)) : (g.collapseBefore(h), h.parentNode.removeChild(h))) : b.warn("Marker element has been removed. Cannot restore selection.")) : (e(j, g, d.startMarkerId, !0), e(j, g, d.endMarkerId, !1)), f && g.normalizeBoundaries(), g
            }

            function i(b, d) {
                var e, h, i, j, k = [];
                for (b = b.slice(0), b.sort(f), i = 0, j = b.length; j > i; ++i) k[i] = g(b[i], d);
                for (i = j - 1; i >= 0; --i) e = b[i], h = a.DomRange.getRangeDocument(e), e.collapsed ? e.collapseAfter(c(k[i].markerId, h)) : (e.setEndBefore(c(k[i].endMarkerId, h)), e.setStartAfter(c(k[i].startMarkerId, h)));
                return k
            }

            function j(c) {
                var d, e, f, g;
                return a.isSelectionValid(c) ? (d = a.getSelection(c), e = d.getAllRanges(), f = 1 == e.length && d.isBackward(), g = i(e, f), f ? d.setSingleRange(e[0], "backward") : d.setRanges(e), {
                    win: c,
                    rangeInfos: g,
                    restored: !1
                }) : (b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."), null)
            }

            function k(a) {
                var b, c = [],
                    d = a.length;
                for (b = d - 1; b >= 0; b--) c[b] = h(a[b], !0);
                return c
            }

            function l(b, c) {
                var d, e, f, g;
                b.restored || (d = b.rangeInfos, e = a.getSelection(b.win), f = k(d), g = d.length, 1 == g && c && a.features.selectionHasExtend && d[0].backward ? (e.removeAllRanges(), e.addRange(f[0], !0)) : e.setRanges(f), b.restored = !0)
            }

            function m(a, b) {
                var d = c(b, a);
                d && d.parentNode.removeChild(d)
            }

            function n(a) {
                var b, c, d, e = a.rangeInfos;
                for (b = 0, c = e.length; c > b; ++b) d = e[b], d.collapsed ? m(a.doc, d.markerId) : (m(a.doc, d.startMarkerId), m(a.doc, d.endMarkerId))
            }
            var o = a.dom,
                p = "";
            a.util.extend(a, {
                saveRange: g,
                restoreRange: h,
                saveRanges: i,
                restoreRanges: k,
                saveSelection: j,
                restoreSelection: l,
                removeMarkerElement: m,
                removeMarkers: n
            })
        })
    }, this), Base = function() {}, Base.extend = function(a, b) {
    var c, d, e, f = Base.prototype.extend;
    return Base._prototyping = !0, c = new this, f.call(c, a), c.base = function() {}, delete Base._prototyping, d = c.constructor, e = c.constructor = function() {
        if (!Base._prototyping)
            if (this._constructing || this.constructor == e) this._constructing = !0, d.apply(this, arguments), delete this._constructing;
            else if (null != arguments[0]) return (arguments[0].extend || f).call(arguments[0], c)
    }, e.ancestor = this, e.extend = this.extend, e.forEach = this.forEach, e.implement = this.implement, e.prototype = c, e.toString = this.toString, e.valueOf = function(a) {
        return "object" == a ? e : d.valueOf()
    }, f.call(e, b), "function" == typeof e.init && e.init(), e
}, Base.prototype = {
    extend: function(a, b) {
        var c, d, e, f, g, h, i;
        if (arguments.length > 1) c = this[a], !c || "function" != typeof b || c.valueOf && c.valueOf() == b.valueOf() || !/\bbase\b/.test(b) || (d = b.valueOf(), b = function() {
            var a, b = this.base || Base.prototype.base;
            return this.base = c, a = d.apply(this, arguments), this.base = b, a
        }, b.valueOf = function(a) {
            return "object" == a ? b : d
        }, b.toString = Base.toString), this[a] = b;
        else if (a) {
            for (e = Base.prototype.extend, Base._prototyping || "function" == typeof this || (e = this.extend || e), f = {
                toSource: null
            }, g = ["constructor", "toString", "valueOf"], h = Base._prototyping ? 0 : 1; i = g[h++];) a[i] != f[i] && e.call(this, i, a[i]);
            for (i in a) f[i] || e.call(this, i, a[i])
        }
        return this
    }
}, Base = Base.extend({
    constructor: function() {
        this.extend(arguments[0])
    }
}, {
    ancestor: Object,
    version: "1.1",
    forEach: function(a, b, c) {
        for (var d in a) void 0 === this.prototype[d] && b.call(c, a[d], d, a)
    },
    implement: function() {
        for (var a = 0; a < arguments.length; a++) "function" == typeof arguments[a] ? arguments[a](this.prototype) : this.prototype.extend(arguments[a]);
        return this
    },
    toString: function() {
        return this.valueOf() + ""
    }
}), wysihtml5.browser = function() {
    function a(a) {
        return +(/ipad|iphone|ipod/.test(a) && a.match(/ os (\d+).+? like mac os x/) || [void 0, 0])[1]
    }

    function b(a) {
        return +(a.match(/android (\d+)/) || [void 0, 0])[1]
    }

    function c(a, b) {
        var c, d = -1;
        return "Microsoft Internet Explorer" == navigator.appName ? c = RegExp("MSIE ([0-9]{1,}[.0-9]{0,})") : "Netscape" == navigator.appName && (c = RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")), c && null != c.exec(navigator.userAgent) && (d = parseFloat(RegExp.$1)), -1 === d ? !1 : a ? b ? "<" === b ? d > a : ">" === b ? a > d : "<=" === b ? d >= a : ">=" === b ? a >= d : void 0 : a === d : !0
    }
    var d = navigator.userAgent,
        e = document.createElement("div"),
        f = -1 !== d.indexOf("Gecko") && -1 === d.indexOf("KHTML"),
        g = -1 !== d.indexOf("AppleWebKit/"),
        h = -1 !== d.indexOf("Chrome/"),
        i = -1 !== d.indexOf("Opera/");
    return {
        USER_AGENT: d,
        supported: function() {
            var c = this.USER_AGENT.toLowerCase(),
                d = "contentEditable" in e,
                f = document.execCommand && document.queryCommandSupported && document.queryCommandState,
                g = document.querySelector && document.querySelectorAll,
                h = this.isIos() && a(c) < 5 || this.isAndroid() && b(c) < 4 || -1 !== c.indexOf("opera mobi") || -1 !== c.indexOf("hpwos/");
            return d && f && g && !h
        },
        isTouchDevice: function() {
            return this.supportsEvent("touchmove")
        },
        isIos: function() {
            return /ipad|iphone|ipod/i.test(this.USER_AGENT)
        },
        isAndroid: function() {
            return -1 !== this.USER_AGENT.indexOf("Android")
        },
        supportsSandboxedIframes: function() {
            return c()
        },
        throwsMixedContentWarningWhenIframeSrcIsEmpty: function() {
            return !("querySelector" in document)
        },
        displaysCaretInEmptyContentEditableCorrectly: function() {
            return c()
        },
        hasCurrentStyleProperty: function() {
            return "currentStyle" in e
        },
        hasHistoryIssue: function() {
            return f && "Mac" === navigator.platform.substr(0, 3)
        },
        insertsLineBreaksOnReturn: function() {
            return f
        },
        supportsPlaceholderAttributeOn: function(a) {
            return "placeholder" in a
        },
        supportsEvent: function(a) {
            return "on" + a in e || function() {
                return e.setAttribute("on" + a, "return;"), "function" == typeof e["on" + a]
            }()
        },
        supportsEventsInIframeCorrectly: function() {
            return !i
        },
        supportsHTML5Tags: function(a) {
            var b = a.createElement("div"),
                c = "<article>foo</article>";
            return b.innerHTML = c, b.innerHTML.toLowerCase() === c
        },
        supportsCommand: function() {
            var a = {
                    formatBlock: c(10, "<="),
                    insertUnorderedList: c(),
                    insertOrderedList: c()
                },
                b = {
                    insertHTML: f
                };
            return function(c, d) {
                var e = a[d];
                if (!e) {
                    try {
                        return c.queryCommandSupported(d)
                    } catch (f) {}
                    try {
                        return c.queryCommandEnabled(d)
                    } catch (g) {
                        return !!b[d]
                    }
                }
                return !1
            }
        }(),
        doesAutoLinkingInContentEditable: function() {
            return c()
        },
        canDisableAutoLinking: function() {
            return this.supportsCommand(document, "AutoUrlDetect")
        },
        clearsContentEditableCorrectly: function() {
            return f || i || g
        },
        supportsGetAttributeCorrectly: function() {
            var a = document.createElement("td");
            return "1" != a.getAttribute("rowspan")
        },
        canSelectImagesInContentEditable: function() {
            return f || c() || i
        },
        autoScrollsToCaret: function() {
            return !g
        },
        autoClosesUnclosedTags: function() {
            var a, b, c = e.cloneNode(!1);
            return c.innerHTML = "<p><div></div>", b = c.innerHTML.toLowerCase(), a = "<p></p><div></div>" === b || "<p><div></div></p>" === b, this.autoClosesUnclosedTags = function() {
                return a
            }, a
        },
        supportsNativeGetElementsByClassName: function() {
            return -1 !== (document.getElementsByClassName + "").indexOf("[native code]")
        },
        supportsSelectionModify: function() {
            return "getSelection" in window && "modify" in window.getSelection()
        },
        needsSpaceAfterLineBreak: function() {
            return i
        },
        supportsSpeechApiOn: function(a) {
            var b = d.match(/Chrome\/(\d+)/) || [void 0, 0];
            return b[1] >= 11 && ("onwebkitspeechchange" in a || "speech" in a)
        },
        crashesWhenDefineProperty: function(a) {
            return c(9) && ("XMLHttpRequest" === a || "XDomainRequest" === a)
        },
        doesAsyncFocus: function() {
            return c()
        },
        hasProblemsSettingCaretAfterImg: function() {
            return c()
        },
        hasUndoInContextMenu: function() {
            return f || h || i
        },
        hasInsertNodeIssue: function() {
            return i
        },
        hasIframeFocusIssue: function() {
            return c()
        },
        createsNestedInvalidMarkupAfterPaste: function() {
            return g
        },
        supportsMutationEvents: function() {
            return "MutationEvent" in window
        },
        supportsModenPaste: function() {
            return !("clipboardData" in window)
        }
    }
}(), wysihtml5.lang.array = function(a) {
    return {
        contains: function(b) {
            if (Array.isArray(b)) {
                for (var c = b.length; c--;)
                    if (-1 !== wysihtml5.lang.array(a).indexOf(b[c])) return !0;
                return !1
            }
            return -1 !== wysihtml5.lang.array(a).indexOf(b)
        },
        indexOf: function(b) {
            if (a.indexOf) return a.indexOf(b);
            for (var c = 0, d = a.length; d > c; c++)
                if (a[c] === b) return c;
            return -1
        },
        without: function(b) {
            b = wysihtml5.lang.array(b);
            for (var c = [], d = 0, e = a.length; e > d; d++) b.contains(a[d]) || c.push(a[d]);
            return c
        },
        get: function() {
            for (var b = 0, c = a.length, d = []; c > b; b++) d.push(a[b]);
            return d
        },
        map: function(b, c) {
            if (Array.prototype.map) return a.map(b, c);
            for (var d = a.length >>> 0, e = Array(d), f = 0; d > f; f++) e[f] = b.call(c, a[f], f, a);
            return e
        },
        unique: function() {
            for (var b = [], c = a.length, d = 0; c > d;) wysihtml5.lang.array(b).contains(a[d]) || b.push(a[d]), d++;
            return b
        }
    }
}, wysihtml5.lang.Dispatcher = Base.extend({
    on: function(a, b) {
        return this.events = this.events || {}, this.events[a] = this.events[a] || [], this.events[a].push(b), this
    },
    off: function(a, b) {
        this.events = this.events || {};
        var c, d, e = 0;
        if (a) {
            for (c = this.events[a] || [], d = []; e < c.length; e++) c[e] !== b && b && d.push(c[e]);
            this.events[a] = d
        } else this.events = {};
        return this
    },
    fire: function(a, b) {
        this.events = this.events || {};
        for (var c = this.events[a] || [], d = 0; d < c.length; d++) c[d].call(this, b);
        return this
    },
    observe: function() {
        return this.on.apply(this, arguments)
    },
    stopObserving: function() {
        return this.off.apply(this, arguments)
    }
}), wysihtml5.lang.object = function(a) {
    return {
        merge: function(b) {
            for (var c in b) a[c] = b[c];
            return this
        },
        get: function() {
            return a
        },
        clone: function(b) {
            var c, d = {};
            if (null === a || !wysihtml5.lang.object(a).isPlainObject()) return a;
            for (c in a) a.hasOwnProperty(c) && (d[c] = b ? wysihtml5.lang.object(a[c]).clone(b) : a[c]);
            return d
        },
        isArray: function() {
            return "[object Array]" === Object.prototype.toString.call(a)
        },
        isFunction: function() {
            return "[object Function]" === Object.prototype.toString.call(a)
        },
        isPlainObject: function() {
            return "[object Object]" === Object.prototype.toString.call(a)
        }
    }
},
    function() {
        var a = /^\s+/,
            b = /\s+$/,
            c = /[&<>\t"]/g,
            d = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "	": "&nbsp; "
            };
        wysihtml5.lang.string = function(e) {
            return e += "", {
                trim: function() {
                    return e.replace(a, "").replace(b, "")
                },
                interpolate: function(a) {
                    for (var b in a) e = this.replace("#{" + b + "}").by(a[b]);
                    return e
                },
                replace: function(a) {
                    return {
                        by: function(b) {
                            return e.split(a).join(b)
                        }
                    }
                },
                escapeHTML: function(a, b) {
                    var f = e.replace(c, function(a) {
                        return d[a]
                    });
                    return a && (f = f.replace(/(?:\r\n|\r|\n)/g, "<br />")), b && (f = f.replace(/  /gi, "&nbsp; ")), f
                }
            }
        }
    }(),
    function(a) {
        function b(a, b) {
            return f(a, b) ? a : (a === a.ownerDocument.documentElement && (a = a.ownerDocument.body), g(a, b))
        }

        function c(a) {
            return a.replace(i, function(a, b) {
                var c, d, e = (b.match(j) || [])[1] || "",
                    f = l[e];
                return b = b.replace(j, ""), b.split(f).length > b.split(e).length && (b += e, e = ""), c = b, d = b, b.length > k && (d = d.substr(0, k) + "..."), "www." === c.substr(0, 4) && (c = "http://" + c), '<a href="' + c + '">' + d + "</a>" + e
            })
        }

        function d(a) {
            var b = a._wysihtml5_tempElement;
            return b || (b = a._wysihtml5_tempElement = a.createElement("div")), b
        }

        function e(b) {
            var e = b.parentNode,
                f = a.lang.string(b.data).escapeHTML(),
                g = d(e.ownerDocument);
            for (g.innerHTML = "<span></span>" + c(f), g.removeChild(g.firstChild); g.firstChild;) e.insertBefore(g.firstChild, b);
            e.removeChild(b)
        }

        function f(b, c) {
            for (var d; b.parentNode;) {
                if (b = b.parentNode, d = b.nodeName, b.className && a.lang.array(b.className.split(" ")).contains(c)) return !0;
                if (h.contains(d)) return !0;
                if ("body" === d) return !1
            }
            return !1
        }

        function g(b, c) {
            if (!(h.contains(b.nodeName) || b.className && a.lang.array(b.className.split(" ")).contains(c))) {
                if (b.nodeType === a.TEXT_NODE && b.data.match(i)) return e(b), void 0;
                for (var d = a.lang.array(b.childNodes).get(), f = d.length, j = 0; f > j; j++) g(d[j], c);
                return b
            }
        }
        var h = a.lang.array(["CODE", "PRE", "A", "SCRIPT", "HEAD", "TITLE", "STYLE"]),
            i = /((https?:\/\/|www\.)[^\s<]{3,})/gi,
            j = /([^\w\/\-](,?))$/i,
            k = 100,
            l = {
                ")": "(",
                "]": "[",
                "}": "{"
            };
        a.dom.autoLink = b, a.dom.autoLink.URL_REG_EXP = i
    }(wysihtml5),
    function(a) {
        var b = a.dom;
        b.addClass = function(a, c) {
            var d = a.classList;
            return d ? d.add(c) : (b.hasClass(a, c) || (a.className += " " + c), void 0)
        }, b.removeClass = function(a, b) {
            var c = a.classList;
            return c ? c.remove(b) : (a.className = a.className.replace(RegExp("(^|\\s+)" + b + "(\\s+|$)"), " "), void 0)
        }, b.hasClass = function(a, b) {
            var c, d = a.classList;
            return d ? d.contains(b) : (c = a.className, c.length > 0 && (c == b || RegExp("(^|\\s)" + b + "(\\s|$)").test(c)))
        }
    }(wysihtml5), wysihtml5.dom.contains = function() {
    var a = document.documentElement;
    return a.contains ? function(a, b) {
        return b.nodeType !== wysihtml5.ELEMENT_NODE && (b = b.parentNode), a !== b && a.contains(b)
    } : a.compareDocumentPosition ? function(a, b) {
        return !!(16 & a.compareDocumentPosition(b))
    } : void 0
}(), wysihtml5.dom.convertToList = function() {
    function a(a, b) {
        var c = a.createElement("li");
        return b.appendChild(c), c
    }

    function b(a, b) {
        return a.createElement(b)
    }

    function c(c, d, e) {
        if ("UL" === c.nodeName || "OL" === c.nodeName || "MENU" === c.nodeName) return c;
        var f, g, h, i, j, k, l, m, n, o = c.ownerDocument,
            p = b(o, d),
            q = c.querySelectorAll("br"),
            r = q.length;
        for (n = 0; r > n; n++)
            for (i = q[n];
                 (j = i.parentNode) && j !== c && j.lastChild === i;) {
                if ("block" === wysihtml5.dom.getStyle("display").from(j)) {
                    j.removeChild(i);
                    break
                }
                wysihtml5.dom.insert(i).after(i.parentNode)
            }
        for (f = wysihtml5.lang.array(c.childNodes).get(), g = f.length, n = 0; g > n; n++) m = m || a(o, p), h = f[n], k = "block" === wysihtml5.dom.getStyle("display").from(h), l = "BR" === h.nodeName, !k || e && wysihtml5.dom.hasClass(h, e) ? l ? m = m.firstChild ? null : m : m.appendChild(h) : (m = m.firstChild ? a(o, p) : m, m.appendChild(h), m = null);
        return 0 === f.length && a(o, p), c.parentNode.replaceChild(p, c), p
    }
    return c
}(), wysihtml5.dom.copyAttributes = function(a) {
    return {
        from: function(b) {
            return {
                to: function(c) {
                    for (var d, e = 0, f = a.length; f > e; e++) d = a[e], void 0 !== b[d] && "" !== b[d] && (c[d] = b[d]);
                    return {
                        andTo: arguments.callee
                    }
                }
            }
        }
    }
},
    function(a) {
        var b = ["-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing"],
            c = function(b) {
                return d(b) ? parseInt(a.getStyle("width").from(b), 10) < b.offsetWidth : !1
            },
            d = function(c) {
                for (var d = 0, e = b.length; e > d; d++)
                    if ("border-box" === a.getStyle(b[d]).from(c)) return b[d]
            };
        a.copyStyles = function(d) {
            return {
                from: function(e) {
                    c(e) && (d = wysihtml5.lang.array(d).without(b));
                    for (var f, g = "", h = d.length, i = 0; h > i; i++) f = d[i], g += f + ":" + a.getStyle(f).from(e) + ";";
                    return {
                        to: function(b) {
                            return a.setStyles(g).on(b), {
                                andTo: arguments.callee
                            }
                        }
                    }
                }
            }
        }
    }(wysihtml5.dom),
    function(a) {
        a.dom.delegate = function(b, c, d, e) {
            return a.dom.observe(b, d, function(d) {
                for (var f = d.target, g = a.lang.array(b.querySelectorAll(c)); f && f !== b;) {
                    if (g.contains(f)) {
                        e.call(f, d);
                        break
                    }
                    f = f.parentNode
                }
            })
        }
    }(wysihtml5),
    function(a) {
        a.dom.domNode = function(b) {
            var c = [a.ELEMENT_NODE, a.TEXT_NODE],
                d = function(b) {
                    return b.nodeType === a.TEXT_NODE && /^\s*$/g.test(b.data)
                };
            return {
                prev: function(e) {
                    var f = b.previousSibling,
                        g = e && e.nodeTypes ? e.nodeTypes : c;
                    return f ? !a.lang.array(g).contains(f.nodeType) || e && e.ignoreBlankTexts && d(f) ? a.dom.domNode(f).prev(e) : f : null
                },
                next: function(e) {
                    var f = b.nextSibling,
                        g = e && e.nodeTypes ? e.nodeTypes : c;
                    return f ? !a.lang.array(g).contains(f.nodeType) || e && e.ignoreBlankTexts && d(f) ? a.dom.domNode(f).next(e) : f : null
                }
            }
        }
    }(wysihtml5), wysihtml5.dom.getAsDom = function() {
    var a = function(a, b) {
            var c = b.createElement("div");
            c.style.display = "none", b.body.appendChild(c);
            try {
                c.innerHTML = a
            } catch (d) {}
            return b.body.removeChild(c), c
        },
        b = function(a) {
            if (!a._wysihtml5_supportsHTML5Tags) {
                for (var b = 0, d = c.length; d > b; b++) a.createElement(c[b]);
                a._wysihtml5_supportsHTML5Tags = !0
            }
        },
        c = ["abbr", "article", "aside", "audio", "bdi", "canvas", "command", "datalist", "details", "figcaption", "figure", "footer", "header", "hgroup", "keygen", "mark", "meter", "nav", "output", "progress", "rp", "rt", "ruby", "svg", "section", "source", "summary", "time", "track", "video", "wbr"];
    return function(c, d) {
        d = d || document;
        var e;
        return "object" == typeof c && c.nodeType ? (e = d.createElement("div"), e.appendChild(c)) : wysihtml5.browser.supportsHTML5Tags(d) ? (e = d.createElement("div"), e.innerHTML = c) : (b(d), e = a(c, d)), e
    }
}(), wysihtml5.dom.getParentElement = function() {
    function a(a, b) {
        return b && b.length ? "string" == typeof b ? a === b : wysihtml5.lang.array(b).contains(a) : !0
    }

    function b(a) {
        return a.nodeType === wysihtml5.ELEMENT_NODE
    }

    function c(a, b, c) {
        var d = (a.className || "").match(c) || [];
        return b ? d[d.length - 1] === b : !!d.length
    }

    function d(a, b, c) {
        var d = (a.getAttribute("style") || "").match(c) || [];
        return b ? d[d.length - 1] === b : !!d.length
    }
    return function(e, f, g, h) {
        var i = f.cssStyle || f.styleRegExp,
            j = f.className || f.classRegExp;
        for (g = g || 50; g-- && e && "BODY" !== e.nodeName && (!h || e !== h);) {
            if (b(e) && a(e.nodeName, f.nodeName) && (!i || d(e, f.cssStyle, f.styleRegExp)) && (!j || c(e, f.className, f.classRegExp))) return e;
            e = e.parentNode
        }
        return null
    }
}(), wysihtml5.dom.getStyle = function() {
    function a(a) {
        return a.replace(c, function(a) {
            return a.charAt(1).toUpperCase()
        })
    }
    var b = {
            "float": "styleFloat" in document.createElement("div").style ? "styleFloat" : "cssFloat"
        },
        c = /\-[a-z]/g;
    return function(c) {
        return {
            from: function(d) {
                var e, f, g, h, i, j, k, l, m;
                if (d.nodeType === wysihtml5.ELEMENT_NODE) {
                    if (e = d.ownerDocument, f = b[c] || a(c), g = d.style, h = d.currentStyle, i = g[f], i) return i;
                    if (h) try {
                        return h[f]
                    } catch (n) {}
                    return j = e.defaultView || e.parentWindow, k = ("height" === c || "width" === c) && "TEXTAREA" === d.nodeName, j.getComputedStyle ? (k && (l = g.overflow, g.overflow = "hidden"), m = j.getComputedStyle(d, null).getPropertyValue(c), k && (g.overflow = l || ""), m) : void 0
                }
            }
        }
    }
}(), wysihtml5.dom.getTextNodes = function(a, b) {
    var c = [];
    for (a = a.firstChild; a; a = a.nextSibling) 3 == a.nodeType ? b && /^\s*$/.test(a.innerText || a.textContent) || c.push(a) : c = c.concat(wysihtml5.dom.getTextNodes(a, b));
    return c
}, wysihtml5.dom.hasElementWithTagName = function() {
    function a(a) {
        return a._wysihtml5_identifier || (a._wysihtml5_identifier = c++)
    }
    var b = {},
        c = 1;
    return function(c, d) {
        var e = a(c) + ":" + d,
            f = b[e];
        return f || (f = b[e] = c.getElementsByTagName(d)), f.length > 0
    }
}(),
    function(a) {
        function b(a) {
            return a._wysihtml5_identifier || (a._wysihtml5_identifier = d++)
        }
        var c = {},
            d = 1;
        a.dom.hasElementWithClassName = function(d, e) {
            if (!a.browser.supportsNativeGetElementsByClassName()) return !!d.querySelector("." + e);
            var f = b(d) + ":" + e,
                g = c[f];
            return g || (g = c[f] = d.getElementsByClassName(e)), g.length > 0
        }
    }(wysihtml5), wysihtml5.dom.insert = function(a) {
    return {
        after: function(b) {
            b.parentNode.insertBefore(a, b.nextSibling)
        },
        before: function(b) {
            b.parentNode.insertBefore(a, b)
        },
        into: function(b) {
            b.appendChild(a)
        }
    }
}, wysihtml5.dom.insertCSS = function(a) {
    return a = a.join("\n"), {
        into: function(b) {
            var c, d, e = b.createElement("style");
            return e.type = "text/css", e.styleSheet ? e.styleSheet.cssText = a : e.appendChild(b.createTextNode(a)), c = b.querySelector("head link"), c ? (c.parentNode.insertBefore(e, c), void 0) : (d = b.querySelector("head"), d && d.appendChild(e), void 0)
        }
    }
},
    function(a) {
        a.dom.lineBreaks = function(b) {
            function c(a) {
                return "BR" === a.nodeName
            }

            function d(b) {
                return c(b) ? !0 : "block" === a.dom.getStyle("display").from(b) ? !0 : !1
            }
            return {
                add: function() {
                    var c = b.ownerDocument,
                        e = a.dom.domNode(b).next({
                            ignoreBlankTexts: !0
                        }),
                        f = a.dom.domNode(b).prev({
                            ignoreBlankTexts: !0
                        });
                    e && !d(e) && a.dom.insert(c.createElement("br")).after(b), f && !d(f) && a.dom.insert(c.createElement("br")).before(b)
                },
                remove: function() {
                    var d = a.dom.domNode(b).next({
                            ignoreBlankTexts: !0
                        }),
                        e = a.dom.domNode(b).prev({
                            ignoreBlankTexts: !0
                        });
                    d && c(d) && d.parentNode.removeChild(d), e && c(e) && e.parentNode.removeChild(e)
                }
            }
        }
    }(wysihtml5), wysihtml5.dom.observe = function(a, b, c) {
    b = "string" == typeof b ? [b] : b;
    for (var d, e, f = 0, g = b.length; g > f; f++) e = b[f], a.addEventListener ? a.addEventListener(e, c, !1) : (d = function(b) {
        "target" in b || (b.target = b.srcElement), b.preventDefault = b.preventDefault || function() {
            this.returnValue = !1
        }, b.stopPropagation = b.stopPropagation || function() {
            this.cancelBubble = !0
        }, c.call(a, b)
    }, a.attachEvent("on" + e, d));
    return {
        stop: function() {
            for (var e, f = 0, g = b.length; g > f; f++) e = b[f], a.removeEventListener ? a.removeEventListener(e, c, !1) : a.detachEvent("on" + e, d)
        }
    }
}, wysihtml5.dom.parse = function(a, b) {
    function c(a, b) {
        var c, f, g, h, i, j, k, l, m;
        for (wysihtml5.lang.object(t).merge(s).merge(b.rules).get(), c = b.context || a.ownerDocument || document, f = c.createDocumentFragment(), g = "string" == typeof a, h = !1, b.clearInternals === !0 && (h = !0), i = g ? wysihtml5.dom.getAsDom(a, c) : a, t.selectors && e(i, t.selectors); i.firstChild;) k = i.firstChild, j = d(k, b.cleanUp, h, b.uneditableClass), j && f.appendChild(j), k !== j && i.removeChild(k);
        if (b.unjoinNbsps)
            for (l = wysihtml5.dom.getTextNodes(f), m = l.length; m--;) l[m].nodeValue = l[m].nodeValue.replace(/([\S\u00A0])\u00A0/gi, "$1 ");
        return i.innerHTML = "", i.appendChild(f), g ? wysihtml5.quirks.getCorrectInnerHTML(i) : i
    }

    function d(a, b, c, e) {
        var f, g, h, i = a.nodeType,
            j = a.childNodes,
            k = j.length,
            l = p[i],
            m = 0;
        if (e && 1 === i && wysihtml5.dom.hasClass(a, e)) return a;
        if (g = l && l(a, c), !g) {
            if (g === !1) {
                for (f = a.ownerDocument.createDocumentFragment(), m = k; m--;) j[m] && (h = d(j[m], b, c, e), h && (j[m] === h && m--, f.insertBefore(h, f.firstChild)));
                return "block" === wysihtml5.dom.getStyle("display").from(a) && f.appendChild(a.ownerDocument.createElement("br")), wysihtml5.lang.array(["div", "pre", "p", "table", "td", "th", "ul", "ol", "li", "dd", "dl", "footer", "header", "section", "h1", "h2", "h3", "h4", "h5", "h6"]).contains(a.nodeName.toLowerCase()) && a.parentNode.lastChild !== a && (a.nextSibling && 3 === a.nextSibling.nodeType && /^\s/.test(a.nextSibling.nodeValue) || f.appendChild(a.ownerDocument.createTextNode(" "))), f.normalize && f.normalize(), f
            }
            return null
        }
        for (m = 0; k > m; m++) j[m] && (h = d(j[m], b, c, e), h && (j[m] === h && m--, g.appendChild(h)));
        if (b && g.nodeName.toLowerCase() === q && (!g.childNodes.length || /^\s*$/gi.test(g.innerHTML) && (c || "_wysihtml5-temp-placeholder" !== a.className && "rangySelectionBoundary" !== a.className) || !g.attributes.length)) {
            for (f = g.ownerDocument.createDocumentFragment(); g.firstChild;) f.appendChild(g.firstChild);
            return f.normalize && f.normalize(), f
        }
        return g.normalize && g.normalize(), g
    }

    function e(a, b) {
        var c, d, e, f;
        for (c in b)
            if (b.hasOwnProperty(c))
                for (wysihtml5.lang.object(b[c]).isFunction() ? d = b[c] : "string" == typeof b[c] && z[b[c]] && (d = z[b[c]]), e = a.querySelectorAll(c), f = e.length; f--;) d(e[f])
    }

    function f(a, b) {
        var c, d, e, f = t.tags,
            h = a.nodeName.toLowerCase(),
            j = a.scopeName;
        if (a._wysihtml5) return null;
        if (a._wysihtml5 = 1, "wysihtml5-temp" === a.className) return null;
        if (j && "HTML" != j && (h = j + ":" + h), "outerHTML" in a && (wysihtml5.browser.autoClosesUnclosedTags() || "P" !== a.nodeName || "</p>" === a.outerHTML.slice(-4).toLowerCase() || (h = "div")), h in f) {
            if (c = f[h], !c || c.remove) return null;
            if (c.unwrap) return !1;
            c = "string" == typeof c ? {
                rename_tag: c
            } : c
        } else {
            if (!a.firstChild) return null;
            c = {
                rename_tag: q
            }
        }
        if (c.one_of_type && !g(a, t, c.one_of_type, b)) {
            if (!c.remove_action) return null;
            if ("unwrap" === c.remove_action) return !1;
            if ("rename" !== c.remove_action) return null;
            e = c.remove_action_rename_to || q
        }
        return d = a.ownerDocument.createElement(e || c.rename_tag || h), m(a, d, c, b), i(a, d, c), a = null, d.normalize && d.normalize(), d
    }

    function g(a, b, c, d) {
        var e, f;
        if ("SPAN" === a.nodeName && !d && ("_wysihtml5-temp-placeholder" === a.className || "rangySelectionBoundary" === a.className)) return !0;
        for (f in c)
            if (c.hasOwnProperty(f) && b.type_definitions && b.type_definitions[f] && (e = b.type_definitions[f], h(a, e))) return !0;
        return !1
    }

    function h(a, b) {
        var c, d, e, f, g, h, i, j, k = a.getAttribute("class"),
            l = a.getAttribute("style");
        if (b.methods)
            for (h in b.methods)
                if (b.methods.hasOwnProperty(h) && y[h] && y[h](a)) return !0;
        if (k && b.classes)
            for (k = k.replace(/^\s+/g, "").replace(/\s+$/g, "").split(r), c = k.length, i = 0; c > i; i++)
                if (b.classes[k[i]]) return !0;
        if (l && b.styles) {
            l = l.split(";");
            for (d in b.styles)
                if (b.styles.hasOwnProperty(d))
                    for (j = l.length; j--;)
                        if (g = l[j].split(":"), g[0].replace(/\s/g, "").toLowerCase() === d && (b.styles[d] === !0 || 1 === b.styles[d] || wysihtml5.lang.array(b.styles[d]).contains(g[1].replace(/\s/g, "").toLowerCase()))) return !0
        }
        if (b.attrs)
            for (e in b.attrs)
                if (b.attrs.hasOwnProperty(e) && (f = wysihtml5.dom.getAttribute(a, e), "string" == typeof f && f.search(b.attrs[e]) > -1)) return !0;
        return !1
    }

    function i(a, b, c) {
        var d, e;
        if (c && c.keep_styles)
            for (d in c.keep_styles)
                if (c.keep_styles.hasOwnProperty(d)) {
                    if (e = "float" === d ? a.style.styleFloat || a.style.cssFloat : a.style[d], c.keep_styles[d] instanceof RegExp && !c.keep_styles[d].test(e)) continue;
                    "float" === d ? b.style[a.style.styleFloat ? "styleFloat" : "cssFloat"] = e : a.style[d] && (b.style[d] = e)
                }
    }

    function j(a, b) {
        var c, d = [];
        for (c in b) b.hasOwnProperty(c) && 0 === c.indexOf(a) && d.push(c);
        return d
    }

    function k(a, b, c, d) {
        var e, f = v[c];
        return f && (b || "alt" === a && "IMG" == d) && (e = f(b), "string" == typeof e) ? e : !1
    }

    function l(a, b) {
        var c, d, e, f, g, h = wysihtml5.lang.object(t.attributes || {}).clone(),
            i = wysihtml5.lang.object(h).merge(wysihtml5.lang.object(b || {}).clone()).get(),
            l = {},
            m = wysihtml5.dom.getAttributes(a);
        for (c in i)
            if (/\*$/.test(c))
                for (e = j(c.slice(0, -1), m), f = 0, g = e.length; g > f; f++) d = k(e[f], m[e[f]], i[c], a.nodeName), d !== !1 && (l[e[f]] = d);
            else d = k(c, m[c], i[c], a.nodeName), d !== !1 && (l[c] = d);
        return l
    }

    function m(a, b, c, d) {
        var e, f, g, h, i, j = {},
            k = c.set_class,
            m = c.add_class,
            n = c.add_style,
            o = c.set_attributes,
            p = t.classes,
            q = 0,
            s = [],
            u = [],
            v = [],
            y = [];
        if (o && (j = wysihtml5.lang.object(o).clone()), j = wysihtml5.lang.object(j).merge(l(a, c.check_attributes)).get(), k && s.push(k), m)
            for (h in m) i = x[m[h]], i && (g = i(wysihtml5.dom.getAttribute(a, h)), "string" == typeof g && s.push(g));
        if (n)
            for (h in n) i = w[n[h]], i && (newStyle = i(wysihtml5.dom.getAttribute(a, h)), "string" == typeof newStyle && u.push(newStyle));
        if ("string" == typeof p && "any" === p && a.getAttribute("class"))
            if (t.classes_blacklist) {
                for (y = a.getAttribute("class"), y && (s = s.concat(y.split(r))), e = s.length; e > q; q++) f = s[q], t.classes_blacklist[f] || v.push(f);
                v.length && (j["class"] = wysihtml5.lang.array(v).unique().join(" "))
            } else j["class"] = a.getAttribute("class");
        else {
            for (d || (p["_wysihtml5-temp-placeholder"] = 1, p._rangySelectionBoundary = 1, p["wysiwyg-tmp-selected-cell"] = 1), y = a.getAttribute("class"), y && (s = s.concat(y.split(r))), e = s.length; e > q; q++) f = s[q], p[f] && v.push(f);
            v.length && (j["class"] = wysihtml5.lang.array(v).unique().join(" "))
        }
        j["class"] && d && (j["class"] = j["class"].replace("wysiwyg-tmp-selected-cell", ""), /^\s*$/g.test(j["class"]) && delete j["class"]), u.length && (j.style = wysihtml5.lang.array(u).unique().join(" "));
        for (h in j) try {
            b.setAttribute(h, j[h])
        } catch (z) {}
        j.src && (void 0 !== j.width && b.setAttribute("width", j.width), void 0 !== j.height && b.setAttribute("height", j.height))
    }

    function n(a) {
        var b, c = a.nextSibling;
        return c && c.nodeType === wysihtml5.TEXT_NODE ? (c.data = a.data.replace(u, "") + c.data.replace(u, ""), void 0) : (b = a.data.replace(u, ""), a.ownerDocument.createTextNode(b))
    }

    function o(a) {
        return t.comments ? a.ownerDocument.createComment(a.nodeValue) : void 0
    }
    var p = {
            1: f,
            3: n,
            8: o
        },
        q = "span",
        r = /\s+/,
        s = {
            tags: {},
            classes: {}
        },
        t = {},
        u = /\uFEFF/g,
        v = {
            url: function() {
                var a = /^https?:\/\//i;
                return function(b) {
                    return b && b.match(a) ? b.replace(a, function(a) {
                        return a.toLowerCase()
                    }) : null
                }
            }(),
            src: function() {
                var a = /^(\/|https?:\/\/)/i;
                return function(b) {
                    return b && b.match(a) ? b.replace(a, function(a) {
                        return a.toLowerCase()
                    }) : null
                }
            }(),
            href: function() {
                var a = /^(#|\/|https?:\/\/|mailto:)/i;
                return function(b) {
                    return b && b.match(a) ? b.replace(a, function(a) {
                        return a.toLowerCase()
                    }) : null
                }
            }(),
            alt: function() {
                var a = /[^ a-z0-9_\-]/gi;
                return function(b) {
                    return b ? b.replace(a, "") : ""
                }
            }(),
            numbers: function() {
                var a = /\D/g;
                return function(b) {
                    return b = (b || "").replace(a, ""), b || null
                }
            }(),
            any: function() {
                return function(a) {
                    return a
                }
            }()
        },
        w = {
            align_text: function() {
                var a = {
                    left: "text-align: left;",
                    right: "text-align: right;",
                    center: "text-align: center;"
                };
                return function(b) {
                    return a[(b + "").toLowerCase()]
                }
            }()
        },
        x = {
            align_img: function() {
                var a = {
                    left: "wysiwyg-float-left",
                    right: "wysiwyg-float-right"
                };
                return function(b) {
                    return a[(b + "").toLowerCase()]
                }
            }(),
            align_text: function() {
                var a = {
                    left: "wysiwyg-text-align-left",
                    right: "wysiwyg-text-align-right",
                    center: "wysiwyg-text-align-center",
                    justify: "wysiwyg-text-align-justify"
                };
                return function(b) {
                    return a[(b + "").toLowerCase()]
                }
            }(),
            clear_br: function() {
                var a = {
                    left: "wysiwyg-clear-left",
                    right: "wysiwyg-clear-right",
                    both: "wysiwyg-clear-both",
                    all: "wysiwyg-clear-both"
                };
                return function(b) {
                    return a[(b + "").toLowerCase()]
                }
            }(),
            size_font: function() {
                var a = {
                    1: "wysiwyg-font-size-xx-small",
                    2: "wysiwyg-font-size-small",
                    3: "wysiwyg-font-size-medium",
                    4: "wysiwyg-font-size-large",
                    5: "wysiwyg-font-size-x-large",
                    6: "wysiwyg-font-size-xx-large",
                    7: "wysiwyg-font-size-xx-large",
                    "-": "wysiwyg-font-size-smaller",
                    "+": "wysiwyg-font-size-larger"
                };
                return function(b) {
                    return a[(b + "").charAt(0)]
                }
            }()
        },
        y = {
            has_visible_contet: function() {
                var a, b = ["img", "video", "picture", "br", "script", "noscript", "style", "table", "iframe", "object", "embed", "audio", "svg", "input", "button", "select", "textarea", "canvas"];
                return function(c) {
                    if (a = (c.innerText || c.textContent).replace(/\s/g, ""), a && a.length > 0) return !0;
                    for (var d = b.length; d--;)
                        if (c.querySelector(b[d])) return !0;
                    return c.offsetWidth && c.offsetWidth > 0 && c.offsetHeight && c.offsetHeight > 0 ? !0 : !1
                }
            }()
        },
        z = {
            unwrap: function(a) {
                wysihtml5.dom.unwrap(a)
            },
            remove: function(a) {
                a.parentNode.removeChild(a)
            }
        };
    return c(a, b)
}, wysihtml5.dom.removeEmptyTextNodes = function(a) {
    for (var b, c = wysihtml5.lang.array(a.childNodes).get(), d = c.length, e = 0; d > e; e++) b = c[e], b.nodeType === wysihtml5.TEXT_NODE && "" === b.data && b.parentNode.removeChild(b)
}, wysihtml5.dom.renameElement = function(a, b) {
    for (var c, d = a.ownerDocument.createElement(b); c = a.firstChild;) d.appendChild(c);
    return wysihtml5.dom.copyAttributes(["align", "className"]).from(a).to(d), a.parentNode.replaceChild(d, a), d
}, wysihtml5.dom.replaceWithChildNodes = function(a) {
    if (a.parentNode) {
        if (!a.firstChild) return a.parentNode.removeChild(a), void 0;
        for (var b = a.ownerDocument.createDocumentFragment(); a.firstChild;) b.appendChild(a.firstChild);
        a.parentNode.replaceChild(b, a), a = b = null
    }
},
    function(a) {
        function b(b) {
            return "block" === a.getStyle("display").from(b)
        }

        function c(a) {
            return "BR" === a.nodeName
        }

        function d(a) {
            var b = a.ownerDocument.createElement("br");
            a.appendChild(b)
        }

        function e(a, e) {
            if (a.nodeName.match(/^(MENU|UL|OL)$/)) {
                var f, g, h, i, j, k, l = a.ownerDocument,
                    m = l.createDocumentFragment(),
                    n = wysihtml5.dom.domNode(a).prev({
                        ignoreBlankTexts: !0
                    });
                if (e)
                    for (!n || b(n) || c(n) || d(m); k = a.firstElementChild || a.firstChild;) {
                        for (g = k.lastChild; f = k.firstChild;) h = f === g, i = h && !b(f) && !c(f), m.appendChild(f), i && d(m);
                        k.parentNode.removeChild(k)
                    } else
                    for (; k = a.firstElementChild || a.firstChild;) {
                        if (k.querySelector && k.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))
                            for (; f = k.firstChild;) m.appendChild(f);
                        else {
                            for (j = l.createElement("p"); f = k.firstChild;) j.appendChild(f);
                            m.appendChild(j)
                        }
                        k.parentNode.removeChild(k)
                    }
                a.parentNode.replaceChild(m, a)
            }
        }
        a.resolveList = e
    }(wysihtml5.dom),
    function(a) {
        var b = document,
            c = ["parent", "top", "opener", "frameElement", "frames", "localStorage", "globalStorage", "sessionStorage", "indexedDB"],
            d = ["open", "close", "openDialog", "showModalDialog", "alert", "confirm", "prompt", "openDatabase", "postMessage", "XMLHttpRequest", "XDomainRequest"],
            e = ["referrer", "write", "open", "close"];
        a.dom.Sandbox = Base.extend({
            constructor: function(b, c) {
                this.callback = b || a.EMPTY_FUNCTION, this.config = a.lang.object({}).merge(c).get(), this.editableArea = this._createIframe()
            },
            insertInto: function(a) {
                "string" == typeof a && (a = b.getElementById(a)), a.appendChild(this.editableArea)
            },
            getIframe: function() {
                return this.editableArea
            },
            getWindow: function() {
                this._readyError()
            },
            getDocument: function() {
                this._readyError()
            },
            destroy: function() {
                var a = this.getIframe();
                a.parentNode.removeChild(a)
            },
            _readyError: function() {
                throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")
            },
            _createIframe: function() {
                var c = this,
                    d = b.createElement("iframe");
                return d.className = "wysihtml5-sandbox", a.dom.setAttributes({
                    security: "restricted",
                    allowtransparency: "true",
                    frameborder: 0,
                    width: 0,
                    height: 0,
                    marginwidth: 0,
                    marginheight: 0
                }).on(d), a.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty() && (d.src = "javascript:'<html></html>'"), d.onload = function() {
                    d.onreadystatechange = d.onload = null, c._onLoadIframe(d)
                }, d.onreadystatechange = function() {
                    /loaded|complete/.test(d.readyState) && (d.onreadystatechange = d.onload = null, c._onLoadIframe(d))
                }, d
            },
            _onLoadIframe: function(f) {
                var g, h, i, j, k, l, m;
                if (a.dom.contains(b.documentElement, f)) {
                    if (g = this, h = f.contentWindow, i = f.contentWindow.document, j = b.characterSet || b.charset || "utf-8", k = this._getHtml({
                        charset: j,
                        stylesheets: this.config.stylesheets
                    }), i.open("text/html", "replace"), i.write(k), i.close(), this.getWindow = function() {
                        return f.contentWindow
                    }, this.getDocument = function() {
                        return f.contentWindow.document
                    }, h.onerror = function(a, b, c) {
                        throw Error("wysihtml5.Sandbox: " + a, b, c)
                    }, !a.browser.supportsSandboxedIframes()) {
                        for (l = 0, m = c.length; m > l; l++) this._unset(h, c[l]);
                        for (l = 0, m = d.length; m > l; l++) this._unset(h, d[l], a.EMPTY_FUNCTION);
                        for (l = 0, m = e.length; m > l; l++) this._unset(i, e[l]);
                        this._unset(i, "cookie", "", !0)
                    }
                    this.loaded = !0, setTimeout(function() {
                        g.callback(g)
                    }, 0)
                }
            },
            _getHtml: function(b) {
                var c, d = b.stylesheets,
                    e = "",
                    f = 0;
                if (d = "string" == typeof d ? [d] : d, d)
                    for (c = d.length; c > f; f++) e += '<link rel="stylesheet" href="' + d[f] + '">';
                return b.stylesheets = e, a.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(b)
            },
            _unset: function(b, c, d, e) {
                try {
                    b[c] = d
                } catch (f) {}
                try {
                    b.__defineGetter__(c, function() {
                        return d
                    })
                } catch (f) {}
                if (e) try {
                    b.__defineSetter__(c, function() {})
                } catch (f) {}
                if (!a.browser.crashesWhenDefineProperty(c)) try {
                    var g = {
                        get: function() {
                            return d
                        }
                    };
                    e && (g.set = function() {}), Object.defineProperty(b, c, g)
                } catch (f) {}
            }
        })
    }(wysihtml5),
    function(a) {
        var b = document;
        a.dom.ContentEditableArea = Base.extend({
            getContentEditable: function() {
                return this.element
            },
            getWindow: function() {
                return this.element.ownerDocument.defaultView
            },
            getDocument: function() {
                return this.element.ownerDocument
            },
            constructor: function(b, c, d) {
                this.callback = b || a.EMPTY_FUNCTION, this.config = a.lang.object({}).merge(c).get(), this.element = d ? this._bindElement(d) : this._createElement()
            },
            _createElement: function() {
                var a = b.createElement("div");
                return a.className = "wysihtml5-sandbox", this._loadElement(a), a
            },
            _bindElement: function(a) {
                return a.className = a.className && "" != a.className ? a.className + " wysihtml5-sandbox" : "wysihtml5-sandbox", this._loadElement(a, !0), a
            },
            _loadElement: function(a, b) {
                var c, d = this;
                b || (c = this._getHtml(), a.innerHTML = c), this.getWindow = function() {
                    return a.ownerDocument.defaultView
                }, this.getDocument = function() {
                    return a.ownerDocument
                }, this.loaded = !0, setTimeout(function() {
                    d.callback(d)
                }, 0)
            },
            _getHtml: function() {
                return ""
            }
        })
    }(wysihtml5),
    function() {
        var a = {
            className: "class"
        };
        wysihtml5.dom.setAttributes = function(b) {
            return {
                on: function(c) {
                    for (var d in b) c.setAttribute(a[d] || d, b[d])
                }
            }
        }
    }(), wysihtml5.dom.setStyles = function(a) {
    return {
        on: function(b) {
            var c, d = b.style;
            if ("string" == typeof a) return d.cssText += ";" + a, void 0;
            for (c in a) "float" === c ? (d.cssFloat = a[c], d.styleFloat = a[c]) : d[c] = a[c]
        }
    }
},
    function(a) {
        a.simulatePlaceholder = function(b, c, d) {
            var e = "placeholder",
                f = function() {
                    var b = c.element.offsetWidth > 0 && c.element.offsetHeight > 0;
                    c.hasPlaceholderSet() && (c.clear(), c.element.focus(), b && setTimeout(function() {
                        var a = c.selection.getSelection();
                        a.focusNode && a.anchorNode || c.selection.selectNode(c.element.firstChild || c.element)
                    }, 0)), c.placeholderSet = !1, a.removeClass(c.element, e)
                },
                g = function() {
                    c.isEmpty() && (c.placeholderSet = !0, c.setValue(d), a.addClass(c.element, e))
                };
            b.on("set_placeholder", g).on("unset_placeholder", f).on("focus:composer", f).on("paste:composer", f).on("blur:composer", g), g()
        }
    }(wysihtml5.dom),
    function(a) {
        var b = document.documentElement;
        "textContent" in b ? (a.setTextContent = function(a, b) {
            a.textContent = b
        }, a.getTextContent = function(a) {
            return a.textContent
        }) : "innerText" in b ? (a.setTextContent = function(a, b) {
            a.innerText = b
        }, a.getTextContent = function(a) {
            return a.innerText
        }) : (a.setTextContent = function(a, b) {
            a.nodeValue = b
        }, a.getTextContent = function(a) {
            return a.nodeValue
        })
    }(wysihtml5.dom), wysihtml5.dom.getAttribute = function(a, b) {
    var c, d, e, f = !wysihtml5.browser.supportsGetAttributeCorrectly();
    return b = b.toLowerCase(), c = a.nodeName, "IMG" == c && "src" == b && wysihtml5.dom.isLoadedImage(a) === !0 ? a.src : f && "outerHTML" in a ? (d = a.outerHTML.toLowerCase(), e = -1 != d.indexOf(" " + b + "="), e ? a.getAttribute(b) : null) : a.getAttribute(b)
}, wysihtml5.dom.getAttributes = function(a) {
    var b, c = !wysihtml5.browser.supportsGetAttributeCorrectly(),
        d = a.nodeName,
        e = [];
    for (b in a.attributes)(a.attributes.hasOwnProperty && a.attributes.hasOwnProperty(b) || !a.attributes.hasOwnProperty && Object.prototype.hasOwnProperty.call(a.attributes, b)) && a.attributes[b].specified && ("IMG" == d && "src" == a.attributes[b].name.toLowerCase() && wysihtml5.dom.isLoadedImage(a) === !0 ? e.src = a.src : wysihtml5.lang.array(["rowspan", "colspan"]).contains(a.attributes[b].name.toLowerCase()) && c ? 1 !== a.attributes[b].value && (e[a.attributes[b].name] = a.attributes[b].value) : e[a.attributes[b].name] = a.attributes[b].value);
    return e
}, wysihtml5.dom.isLoadedImage = function(a) {
    try {
        return a.complete && !a.mozMatchesSelector(":-moz-broken")
    } catch (b) {
        if (a.complete && "complete" === a.readyState) return !0
    }
},
    function(a) {
        function b(a, b) {
            var c, d, e, f, g = [];
            for (d = 0, e = a.length; e > d; d++)
                if (c = a[d].querySelectorAll(b), c)
                    for (f = c.length; f--; g.unshift(c[f]));
            return g
        }

        function d(a) {
            a.parentNode.removeChild(a)
        }

        function e(a, b) {
            a.parentNode.insertBefore(b, a.nextSibling)
        }

        function f(a, b) {
            for (var c = a.nextSibling; 1 != c.nodeType;)
                if (c = c.nextSibling, !b || b == c.tagName.toLowerCase()) return c;
            return null
        }
        var g = a.dom,
            h = function(a) {
                this.el = a, this.isColspan = !1, this.isRowspan = !1, this.firstCol = !0, this.lastCol = !0, this.firstRow = !0, this.lastRow = !0, this.isReal = !0, this.spanCollection = [], this.modified = !1
            },
            i = function(a, b) {
                a ? (this.cell = a, this.table = g.getParentElement(a, {
                    nodeName: ["TABLE"]
                })) : b && (this.table = b, this.cell = this.table.querySelectorAll("th, td")[0])
            };
        i.prototype = {
            addSpannedCellToMap: function(a, b, c, d, e, f) {
                var g, i, j = [],
                    k = c + (f ? parseInt(f, 10) - 1 : 0),
                    l = d + (e ? parseInt(e, 10) - 1 : 0);
                for (g = c; k >= g; g++)
                    for (void 0 === b[g] && (b[g] = []), i = d; l >= i; i++) b[g][i] = new h(a), b[g][i].isColspan = e && parseInt(e, 10) > 1, b[g][i].isRowspan = f && parseInt(f, 10) > 1, b[g][i].firstCol = i == d, b[g][i].lastCol = i == l, b[g][i].firstRow = g == c, b[g][i].lastRow = g == k, b[g][i].isReal = i == d && g == c, b[g][i].spanCollection = j, j.push(b[g][i])
            },
            setCellAsModified: function(a) {
                if (a.modified = !0, a.spanCollection.length > 0)
                    for (var b = 0, c = a.spanCollection.length; c > b; b++) a.spanCollection[b].modified = !0
            },
            setTableMap: function() {
                var a, b, c, d, e, f, i, j, k = [],
                    l = this.getTableRows();
                for (a = 0; a < l.length; a++)
                    for (b = l[a], c = this.getRowCells(b), f = 0, void 0 === k[a] && (k[a] = []), d = 0; d < c.length; d++) {
                        for (e = c[d]; void 0 !== k[a][f];) f++;
                        i = g.getAttribute(e, "colspan"), j = g.getAttribute(e, "rowspan"), i || j ? (this.addSpannedCellToMap(e, k, a, f, i, j), f += i ? parseInt(i, 10) : 1) : (k[a][f] = new h(e), f++)
                    }
                return this.map = k, k
            },
            getRowCells: function(c) {
                var d = this.table.querySelectorAll("table"),
                    e = d ? b(d, "th, td") : [],
                    f = c.querySelectorAll("th, td"),
                    g = e.length > 0 ? a.lang.array(f).without(e) : f;
                return g
            },
            getTableRows: function() {
                var c = this.table.querySelectorAll("table"),
                    d = c ? b(c, "tr") : [],
                    e = this.table.querySelectorAll("tr"),
                    f = d.length > 0 ? a.lang.array(e).without(d) : e;
                return f
            },
            getMapIndex: function(a) {
                var b, c, d = this.map.length,
                    e = this.map && this.map[0] ? this.map[0].length : 0;
                for (b = 0; d > b; b++)
                    for (c = 0; e > c; c++)
                        if (this.map[b][c].el === a) return {
                            row: b,
                            col: c
                        };
                return !1
            },
            getElementAtIndex: function(a) {
                return this.setTableMap(), this.map[a.row] && this.map[a.row][a.col] && this.map[a.row][a.col].el ? this.map[a.row][a.col].el : null
            },
            getMapElsTo: function(a) {
                var b, c, d, e, f, g, h = [];
                if (this.setTableMap(), this.idx_start = this.getMapIndex(this.cell), this.idx_end = this.getMapIndex(a), (this.idx_start.row > this.idx_end.row || this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col) && (b = this.idx_start, this.idx_start = this.idx_end, this.idx_end = b), this.idx_start.col > this.idx_end.col && (c = this.idx_start.col, this.idx_start.col = this.idx_end.col, this.idx_end.col = c), null != this.idx_start && null != this.idx_end)
                    for (d = this.idx_start.row, e = this.idx_end.row; e >= d; d++)
                        for (f = this.idx_start.col, g = this.idx_end.col; g >= f; f++) h.push(this.map[d][f].el);
                return h
            },
            orderSelectionEnds: function(a) {
                var b, c;
                return this.setTableMap(), this.idx_start = this.getMapIndex(this.cell), this.idx_end = this.getMapIndex(a), (this.idx_start.row > this.idx_end.row || this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col) && (b = this.idx_start, this.idx_start = this.idx_end, this.idx_end = b), this.idx_start.col > this.idx_end.col && (c = this.idx_start.col, this.idx_start.col = this.idx_end.col, this.idx_end.col = c), {
                    start: this.map[this.idx_start.row][this.idx_start.col].el,
                    end: this.map[this.idx_end.row][this.idx_end.col].el
                }
            },
            createCells: function(a, b, c) {
                var d, e, f, g = this.table.ownerDocument,
                    h = g.createDocumentFragment();
                for (e = 0; b > e; e++) {
                    if (d = g.createElement(a), c)
                        for (f in c) c.hasOwnProperty(f) && d.setAttribute(f, c[f]);
                    d.appendChild(document.createTextNode("")), h.appendChild(d)
                }
                return h
            },
            correctColIndexForUnreals: function(a, b) {
                var c, d, e = this.map[b],
                    f = -1;
                for (c = 0, d = a; a > c; c++) e[c].isReal && f++;
                return f
            },
            getLastNewCellOnRow: function(a, b) {
                var c, d, e, f, g = this.getRowCells(a);
                for (e = 0, f = g.length; f > e; e++)
                    if (c = g[e], d = this.getMapIndex(c), d === !1 || void 0 !== b && d.row != b) return c;
                return null
            },
            removeEmptyTable: function() {
                var a = this.table.querySelectorAll("td, th");
                return a && 0 != a.length ? !1 : (d(this.table), !0)
            },
            splitRowToCells: function(a) {
                var b, c, d;
                a.isColspan && (b = parseInt(g.getAttribute(a.el, "colspan") || 1, 10), c = a.el.tagName.toLowerCase(), b > 1 && (d = this.createCells(c, b - 1), e(a.el, d)), a.el.removeAttribute("colspan"))
            },
            getRealRowEl: function(a, b) {
                var c, d, e = null,
                    f = null;
                for (b = b || this.idx, c = 0, d = this.map[b.row].length; d > c; c++)
                    if (f = this.map[b.row][c], f.isReal && (e = g.getParentElement(f.el, {
                        nodeName: ["TR"]
                    }), e)) return e;
                return null === e && a && (e = g.getParentElement(this.map[b.row][b.col].el, {
                    nodeName: ["TR"]
                }) || null), e
            },
            injectRowAt: function(a, b, c, d, f) {
                var h, i, j = this.getRealRowEl(!1, {
                        row: a,
                        col: b
                    }),
                    k = this.createCells(d, c);
                j ? (h = this.correctColIndexForUnreals(b, a), h >= 0 ? e(this.getRowCells(j)[h], k) : j.insertBefore(k, j.firstChild)) : (i = this.table.ownerDocument.createElement("tr"), i.appendChild(k), e(g.getParentElement(f.el, {
                    nodeName: ["TR"]
                }), i))
            },
            canMerge: function(a) {
                var b, c, d, e, f, g;
                for (this.to = a, this.setTableMap(), this.idx_start = this.getMapIndex(this.cell), this.idx_end = this.getMapIndex(this.to), (this.idx_start.row > this.idx_end.row || this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col) && (b = this.idx_start, this.idx_start = this.idx_end, this.idx_end = b), this.idx_start.col > this.idx_end.col && (c = this.idx_start.col, this.idx_start.col = this.idx_end.col, this.idx_end.col = c), d = this.idx_start.row, e = this.idx_end.row; e >= d; d++)
                    for (f = this.idx_start.col, g = this.idx_end.col; g >= f; f++)
                        if (this.map[d][f].isColspan || this.map[d][f].isRowspan) return !1;
                return !0
            },
            decreaseCellSpan: function(a, b) {
                var c = parseInt(g.getAttribute(a.el, b), 10) - 1;
                c >= 1 ? a.el.setAttribute(b, c) : (a.el.removeAttribute(b), "colspan" == b && (a.isColspan = !1), "rowspan" == b && (a.isRowspan = !1), a.firstCol = !0, a.lastCol = !0, a.firstRow = !0, a.lastRow = !0, a.isReal = !0)
            },
            removeSurplusLines: function() {
                var a, b, c, e, f, h, i, j;
                if (this.setTableMap(), this.map) {
                    for (c = 0, e = this.map.length; e > c; c++) {
                        for (a = this.map[c], i = !0, f = 0, h = a.length; h > f; f++)
                            if (b = a[f], !(g.getAttribute(b.el, "rowspan") && parseInt(g.getAttribute(b.el, "rowspan"), 10) > 1 && b.firstRow !== !0)) {
                                i = !1;
                                break
                            } if (i)
                            for (f = 0; h > f; f++) this.decreaseCellSpan(a[f], "rowspan")
                    }
                    for (j = this.getTableRows(), c = 0, e = j.length; e > c; c++) a = j[c], 0 == a.childNodes.length && /^\s*$/.test(a.textContent || a.innerText) && d(a)
                }
            },
            fillMissingCells: function() {
                var a, b, c, d = 0,
                    f = 0,
                    g = null;
                if (this.setTableMap(), this.map) {
                    for (d = this.map.length, a = 0; d > a; a++) this.map[a].length > f && (f = this.map[a].length);
                    for (b = 0; d > b; b++)
                        for (c = 0; f > c; c++) this.map[b] && !this.map[b][c] && c > 0 && (this.map[b][c] = new h(this.createCells("td", 1)), g = this.map[b][c - 1], g && g.el && g.el.parent && e(this.map[b][c - 1].el, this.map[b][c].el))
                }
            },
            rectify: function() {
                return this.removeEmptyTable() ? !1 : (this.removeSurplusLines(), this.fillMissingCells(), !0)
            },
            unmerge: function() {
                var a, b, c, d, e, f;
                if (this.rectify() && (this.setTableMap(), this.idx = this.getMapIndex(this.cell), this.idx)) {
                    if (a = this.map[this.idx.row][this.idx.col], b = g.getAttribute(a.el, "colspan") ? parseInt(g.getAttribute(a.el, "colspan"), 10) : 1, c = a.el.tagName.toLowerCase(), a.isRowspan) {
                        if (d = parseInt(g.getAttribute(a.el, "rowspan"), 10), d > 1)
                            for (e = 1, f = d - 1; f >= e; e++) this.injectRowAt(this.idx.row + e, this.idx.col, b, c, a);
                        a.el.removeAttribute("rowspan")
                    }
                    this.splitRowToCells(a)
                }
            },
            merge: function(a) {
                var b, c, e, f, g, h;
                if (this.rectify())
                    if (this.canMerge(a)) {
                        for (b = this.idx_end.row - this.idx_start.row + 1, c = this.idx_end.col - this.idx_start.col + 1, e = this.idx_start.row, f = this.idx_end.row; f >= e; e++)
                            for (g = this.idx_start.col, h = this.idx_end.col; h >= g; g++) e == this.idx_start.row && g == this.idx_start.col ? (b > 1 && this.map[e][g].el.setAttribute("rowspan", b), c > 1 && this.map[e][g].el.setAttribute("colspan", c)) : (/^\s*<br\/?>\s*$/.test(this.map[e][g].el.innerHTML.toLowerCase()) || (this.map[this.idx_start.row][this.idx_start.col].el.innerHTML += " " + this.map[e][g].el.innerHTML), d(this.map[e][g].el));
                        this.rectify()
                    } else window.console && void 0
            },
            collapseCellToNextRow: function(a) {
                var b, c, d, f = this.getMapIndex(a.el),
                    h = f.row + 1,
                    i = {
                        row: h,
                        col: f.col
                    };
                h < this.map.length && (b = this.getRealRowEl(!1, i), null !== b && (c = this.correctColIndexForUnreals(i.col, i.row), c >= 0 ? e(this.getRowCells(b)[c], a.el) : (d = this.getLastNewCellOnRow(b, h), null !== d ? e(d, a.el) : b.insertBefore(a.el, b.firstChild)), parseInt(g.getAttribute(a.el, "rowspan"), 10) > 2 ? a.el.setAttribute("rowspan", parseInt(g.getAttribute(a.el, "rowspan"), 10) - 1) : a.el.removeAttribute("rowspan")))
            },
            removeRowCell: function(a) {
                a.isReal ? a.isRowspan ? this.collapseCellToNextRow(a) : d(a.el) : parseInt(g.getAttribute(a.el, "rowspan"), 10) > 2 ? a.el.setAttribute("rowspan", parseInt(g.getAttribute(a.el, "rowspan"), 10) - 1) : a.el.removeAttribute("rowspan")
            },
            getRowElementsByCell: function() {
                var a, b, c, d = [];
                if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), this.idx !== !1)
                    for (a = this.map[this.idx.row], b = 0, c = a.length; c > b; b++) a[b].isReal && d.push(a[b].el);
                return d
            },
            getColumnElementsByCell: function() {
                var a, b, c = [];
                if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), this.idx !== !1)
                    for (a = 0, b = this.map.length; b > a; a++) this.map[a][this.idx.col] && this.map[a][this.idx.col].isReal && c.push(this.map[a][this.idx.col].el);
                return c
            },
            removeRow: function() {
                var a, b, c, e = g.getParentElement(this.cell, {
                    nodeName: ["TR"]
                });
                if (e) {
                    if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), this.idx !== !1)
                        for (a = this.map[this.idx.row], b = 0, c = a.length; c > b; b++) a[b].modified || (this.setCellAsModified(a[b]), this.removeRowCell(a[b]));
                    d(e)
                }
            },
            removeColCell: function(a) {
                a.isColspan ? parseInt(g.getAttribute(a.el, "colspan"), 10) > 2 ? a.el.setAttribute("colspan", parseInt(g.getAttribute(a.el, "colspan"), 10) - 1) : a.el.removeAttribute("colspan") : a.isReal && d(a.el)
            },
            removeColumn: function() {
                if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), this.idx !== !1)
                    for (var a = 0, b = this.map.length; b > a; a++) this.map[a][this.idx.col].modified || (this.setCellAsModified(this.map[a][this.idx.col]), this.removeColCell(this.map[a][this.idx.col]))
            },
            remove: function(a) {
                if (this.rectify()) {
                    switch (a) {
                        case "row":
                            this.removeRow();
                            break;
                        case "column":
                            this.removeColumn()
                    }
                    this.rectify()
                }
            },
            addRow: function(a) {
                var b, c, d, f, h, i = this.table.ownerDocument;
                if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), "below" == a && g.getAttribute(this.cell, "rowspan") && (this.idx.row = this.idx.row + parseInt(g.getAttribute(this.cell, "rowspan"), 10) - 1), this.idx !== !1) {
                    for (b = this.map[this.idx.row], c = i.createElement("tr"), d = 0, f = b.length; f > d; d++) b[d].modified || (this.setCellAsModified(b[d]), this.addRowCell(b[d], c, a));
                    switch (a) {
                        case "below":
                            e(this.getRealRowEl(!0), c);
                            break;
                        case "above":
                            h = g.getParentElement(this.map[this.idx.row][this.idx.col].el, {
                                nodeName: ["TR"]
                            }), h && h.parentNode.insertBefore(c, h)
                    }
                }
            },
            addRowCell: function(a, b, d) {
                var e = a.isColspan ? {
                    colspan: g.getAttribute(a.el, "colspan")
                } : null;
                a.isReal ? "above" != d && a.isRowspan ? a.el.setAttribute("rowspan", parseInt(g.getAttribute(a.el, "rowspan"), 10) + 1) : b.appendChild(this.createCells("td", 1, e)) : "above" != d && a.isRowspan && a.lastRow ? b.appendChild(this.createCells("td", 1, e)) : c.isRowspan && a.el.attr("rowspan", parseInt(g.getAttribute(a.el, "rowspan"), 10) + 1)
            },
            add: function(a) {
                this.rectify() && (("below" == a || "above" == a) && this.addRow(a), ("before" == a || "after" == a) && this.addColumn(a))
            },
            addColCell: function(a, b, d) {
                var f, h = a.el.tagName.toLowerCase();
                switch (d) {
                    case "before":
                        f = !a.isColspan || a.firstCol;
                        break;
                    case "after":
                        f = !a.isColspan || a.lastCol || a.isColspan && c.el == this.cell
                }
                if (f) {
                    switch (d) {
                        case "before":
                            a.el.parentNode.insertBefore(this.createCells(h, 1), a.el);
                            break;
                        case "after":
                            e(a.el, this.createCells(h, 1))
                    }
                    a.isRowspan && this.handleCellAddWithRowspan(a, b + 1, d)
                } else a.el.setAttribute("colspan", parseInt(g.getAttribute(a.el, "colspan"), 10) + 1)
            },
            addColumn: function(a) {
                var b, c, d, e;
                if (this.setTableMap(), this.idx = this.getMapIndex(this.cell), "after" == a && g.getAttribute(this.cell, "colspan") && (this.idx.col = this.idx.col + parseInt(g.getAttribute(this.cell, "colspan"), 10) - 1), this.idx !== !1)
                    for (d = 0, e = this.map.length; e > d; d++) b = this.map[d], b[this.idx.col] && (c = b[this.idx.col], c.modified || (this.setCellAsModified(c), this.addColCell(c, d, a)))
            },
            handleCellAddWithRowspan: function(a, b, c) {
                var d, h, i, j, k = parseInt(g.getAttribute(this.cell, "rowspan"), 10) - 1,
                    l = g.getParentElement(a.el, {
                        nodeName: ["TR"]
                    }),
                    m = a.el.tagName.toLowerCase(),
                    n = this.table.ownerDocument;
                for (j = 0; k > j; j++)
                    if (d = this.correctColIndexForUnreals(this.idx.col, b + j), l = f(l, "tr"), l)
                        if (d > 0) switch (c) {
                            case "before":
                                h = this.getRowCells(l), d > 0 && this.map[b + j][this.idx.col].el != h[d] && d == h.length - 1 ? e(h[d], this.createCells(m, 1)) : h[d].parentNode.insertBefore(this.createCells(m, 1), h[d]);
                                break;
                            case "after":
                                e(this.getRowCells(l)[d], this.createCells(m, 1))
                        } else l.insertBefore(this.createCells(m, 1), l.firstChild);
                    else i = n.createElement("tr"), i.appendChild(this.createCells(m, 1)), this.table.appendChild(i)
            }
        }, g.table = {
            getCellsBetween: function(a, b) {
                var c = new i(a);
                return c.getMapElsTo(b)
            },
            addCells: function(a, b) {
                var c = new i(a);
                c.add(b)
            },
            removeCells: function(a, b) {
                var c = new i(a);
                c.remove(b)
            },
            mergeCellsBetween: function(a, b) {
                var c = new i(a);
                c.merge(b)
            },
            unmergeCell: function(a) {
                var b = new i(a);
                b.unmerge()
            },
            orderSelectionEnds: function(a, b) {
                var c = new i(a);
                return c.orderSelectionEnds(b)
            },
            indexOf: function(a) {
                var b = new i(a);
                return b.setTableMap(), b.getMapIndex(a)
            },
            findCell: function(a, b) {
                var c = new i(null, a);
                return c.getElementAtIndex(b)
            },
            findRowByCell: function(a) {
                var b = new i(a);
                return b.getRowElementsByCell()
            },
            findColumnByCell: function(a) {
                var b = new i(a);
                return b.getColumnElementsByCell()
            },
            canMerge: function(a, b) {
                var c = new i(a);
                return c.canMerge(b)
            }
        }
    }(wysihtml5), wysihtml5.dom.query = function(a, b) {
    var c, d, e, f, g = [];
    for (a.nodeType && (a = [a]), d = 0, e = a.length; e > d; d++)
        if (c = a[d].querySelectorAll(b), c)
            for (f = c.length; f--; g.unshift(c[f]));
    return g
}, wysihtml5.dom.compareDocumentPosition = function() {
    var a = document.documentElement;
    return a.compareDocumentPosition ? function(a, b) {
        return a.compareDocumentPosition(b)
    } : function(a, b) {
        var c, d, e, f, g, h, i, j, k;
        if (c = 9 === a.nodeType ? a : a.ownerDocument, d = 9 === b.nodeType ? b : b.ownerDocument, a === b) return 0;
        if (a === b.ownerDocument) return 20;
        if (a.ownerDocument === b) return 10;
        if (c !== d) return 1;
        if (2 === a.nodeType && a.childNodes && -1 !== wysihtml5.lang.array(a.childNodes).indexOf(b)) return 20;
        if (2 === b.nodeType && b.childNodes && -1 !== wysihtml5.lang.array(b.childNodes).indexOf(a)) return 10;
        for (e = a, f = [], g = null; e;) {
            if (e == b) return 10;
            f.push(e), e = e.parentNode
        }
        for (e = b, g = null; e;) {
            if (e == a) return 20;
            if (h = wysihtml5.lang.array(f).indexOf(e), -1 !== h) return i = f[h], j = wysihtml5.lang.array(i.childNodes).indexOf(f[h - 1]), k = wysihtml5.lang.array(i.childNodes).indexOf(g), j > k ? 2 : 4;
            g = e, e = e.parentNode
        }
        return 1
    }
}(), wysihtml5.dom.unwrap = function(a) {
    if (a.parentNode) {
        for (; a.lastChild;) wysihtml5.dom.insert(a.lastChild).after(a);
        a.parentNode.removeChild(a)
    }
}, wysihtml5.dom.getPastedHtml = function(a) {
    var b;
    return a.clipboardData && (wysihtml5.lang.array(a.clipboardData.types).contains("text/html") ? b = a.clipboardData.getData("text/html") : wysihtml5.lang.array(a.clipboardData.types).contains("text/plain") && (b = wysihtml5.lang.string(a.clipboardData.getData("text/plain")).escapeHTML(!0, !0))), b
}, wysihtml5.dom.getPastedHtmlWithDiv = function(a, b) {
    var c = a.selection.getBookmark(),
        d = a.element.ownerDocument,
        e = d.createElement("DIV");
    d.body.appendChild(e), e.style.width = "1px", e.style.height = "1px", e.style.overflow = "hidden", e.setAttribute("contenteditable", "true"), e.focus(), setTimeout(function() {
        a.selection.setBookmark(c), b(e.innerHTML), e.parentNode.removeChild(e)
    }, 0)
}, wysihtml5.quirks.cleanPastedHTML = function() {
    var a = function(a) {
            var b = wysihtml5.lang.string(a).trim(),
                c = b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            return RegExp("^((?!^" + c + "$).)*$", "i")
        },
        b = function(b, c) {
            var d, e, f = wysihtml5.lang.object(b).clone(!0);
            for (d in f.tags)
                if (f.tags.hasOwnProperty(d) && f.tags[d].keep_styles)
                    for (e in f.tags[d].keep_styles) f.tags[d].keep_styles.hasOwnProperty(e) && c[e] && (f.tags[d].keep_styles[e] = a(c[e]));
            return f
        },
        c = function(a, b) {
            var c, d, e;
            if (!a) return null;
            for (d = 0, e = a.length; e > d; d++)
                if (a[d].condition || (c = a[d].set), a[d].condition && a[d].condition.test(b)) return a[d].set;
            return c
        };
    return function(a, d) {
        var e, f = {
                color: wysihtml5.dom.getStyle("color").from(d.referenceNode),
                fontSize: wysihtml5.dom.getStyle("font-size").from(d.referenceNode)
            },
            g = b(c(d.rules, a) || {}, f);
        return e = wysihtml5.dom.parse(a, {
            rules: g,
            cleanUp: !0,
            context: d.referenceNode.ownerDocument,
            uneditableClass: d.uneditableClass,
            clearInternals: !0,
            unjoinNbsps: !0
        }), e
    }
}(), wysihtml5.quirks.ensureProperClearing = function() {
    var a = function() {
        var a = this;
        setTimeout(function() {
            var b = a.innerHTML.toLowerCase();
            ("<p>&nbsp;</p>" == b || "<p>&nbsp;</p><p>&nbsp;</p>" == b) && (a.innerHTML = "")
        }, 0)
    };
    return function(b) {
        wysihtml5.dom.observe(b.element, ["cut", "keydown"], a)
    }
}(),
    function(a) {
        var b = "%7E";
        a.quirks.getCorrectInnerHTML = function(c) {
            var d, e, f, g, h, i = c.innerHTML;
            if (-1 === i.indexOf(b)) return i;
            for (d = c.querySelectorAll("[href*='~'], [src*='~']"), h = 0, g = d.length; g > h; h++) e = d[h].href || d[h].src, f = a.lang.string(e).replace("~").by(b), i = a.lang.string(i).replace(f).by(e);
            return i
        }
    }(wysihtml5),
    function(a) {
        var b = "wysihtml5-quirks-redraw";
        a.quirks.redraw = function(c) {
            a.dom.addClass(c, b), a.dom.removeClass(c, b);
            try {
                var d = c.ownerDocument;
                d.execCommand("italic", !1, null), d.execCommand("italic", !1, null)
            } catch (e) {}
        }
    }(wysihtml5), wysihtml5.quirks.tableCellsSelection = function(a, b) {
    function c() {
        return k.observe(a, "mousedown", function(a) {
            var b = wysihtml5.dom.getParentElement(a.target, {
                nodeName: ["TD", "TH"]
            });
            b && d(b)
        }), l
    }

    function d(c) {
        l.start = c, l.end = c, l.cells = [c], l.table = k.getParentElement(l.start, {
            nodeName: ["TABLE"]
        }), l.table && (e(), k.addClass(c, m), n = k.observe(a, "mousemove", g), o = k.observe(a, "mouseup", h), b.fire("tableselectstart").fire("tableselectstart:composer"))
    }

    function e() {
        var b, c;
        if (a && (b = a.querySelectorAll("." + m), b.length > 0))
            for (c = 0; c < b.length; c++) k.removeClass(b[c], m)
    }

    function f(a) {
        for (var b = 0; b < a.length; b++) k.addClass(a[b], m)
    }

    function g(a) {
        var c, d = null,
            g = k.getParentElement(a.target, {
                nodeName: ["TD", "TH"]
            });
        g && l.table && l.start && (d = k.getParentElement(g, {
            nodeName: ["TABLE"]
        }), d && d === l.table && (e(), c = l.end, l.end = g, l.cells = k.table.getCellsBetween(l.start, g), l.cells.length > 1 && b.composer.selection.deselect(), f(l.cells), l.end !== c && b.fire("tableselectchange").fire("tableselectchange:composer")))
    }

    function h() {
        n.stop(), o.stop(), b.fire("tableselect").fire("tableselect:composer"), setTimeout(function() {
            i()
        }, 0)
    }

    function i() {
        var c = k.observe(a.ownerDocument, "click", function(a) {
            c.stop(), k.getParentElement(a.target, {
                nodeName: ["TABLE"]
            }) != l.table && (e(), l.table = null, l.start = null, l.end = null, b.fire("tableunselect").fire("tableunselect:composer"))
        })
    }

    function j(a, c) {
        l.start = a, l.end = c, l.table = k.getParentElement(l.start, {
            nodeName: ["TABLE"]
        }), selectedCells = k.table.getCellsBetween(l.start, l.end), f(selectedCells), i(), b.fire("tableselect").fire("tableselect:composer")
    }
    var k = wysihtml5.dom,
        l = {
            table: null,
            start: null,
            end: null,
            cells: null,
            select: j
        },
        m = "wysiwyg-tmp-selected-cell",
        n = null,
        o = null;
    return c()
},
    function(a) {
        var b = /^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,
            c = /^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,
            d = /^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,
            e = /^#([0-9a-f])([0-9a-f])([0-9a-f])/i,
            f = function(a) {
                return RegExp("(^|\\s|;)" + a + "\\s*:\\s*[^;$]+", "gi")
            };
        a.quirks.styleParser = {
            parseColor: function(g, h) {
                var i, j, k, l = f(h),
                    m = g.match(l),
                    n = 10;
                if (m) {
                    for (k = m.length; k--;) m[k] = a.lang.string(m[k].split(":")[1]).trim();
                    if (i = m[m.length - 1], b.test(i)) j = i.match(b);
                    else if (c.test(i)) j = i.match(c);
                    else if (d.test(i)) j = i.match(d), n = 16;
                    else if (e.test(i)) return j = i.match(e), j.shift(), j.push(1), a.lang.array(j).map(function(a, b) {
                        return 3 > b ? 16 * parseInt(a, 16) + parseInt(a, 16) : parseFloat(a)
                    });
                    if (j) return j.shift(), j[3] || j.push(1), a.lang.array(j).map(function(a, b) {
                        return 3 > b ? parseInt(a, n) : parseFloat(a)
                    })
                }
                return !1
            },
            unparseColor: function(a, b) {
                if (b) {
                    if ("hex" == b) return a[0].toString(16).toUpperCase() + a[1].toString(16).toUpperCase() + a[2].toString(16).toUpperCase();
                    if ("hash" == b) return "#" + a[0].toString(16).toUpperCase() + a[1].toString(16).toUpperCase() + a[2].toString(16).toUpperCase();
                    if ("rgb" == b) return "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")";
                    if ("rgba" == b) return "rgba(" + a[0] + "," + a[1] + "," + a[2] + "," + a[3] + ")";
                    if ("csv" == b) return a[0] + "," + a[1] + "," + a[2] + "," + a[3]
                }
                return a[3] && 1 !== a[3] ? "rgba(" + a[0] + "," + a[1] + "," + a[2] + "," + a[3] + ")" : "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")"
            },
            parseFontSize: function(b) {
                var c = b.match(f("font-size"));
                return c ? a.lang.string(c[c.length - 1].split(":")[1]).trim() : !1
            }
        }
    }(wysihtml5),
    function(a) {
        function b(a) {
            var b = 0;
            if (a.parentNode)
                do b += a.offsetTop || 0, a = a.offsetParent; while (a);
            return b
        }

        function c(a, b) {
            for (var c = 0; b !== a;)
                if (c++, b = b.parentNode, !b) throw Error("not a descendant of ancestor!");
            return c
        }

        function d(a) {
            if (!a.canSurroundContents())
                for (var b = a.commonAncestorContainer, d = c(b, a.startContainer), e = c(b, a.endContainer); !a.canSurroundContents();) d > e ? (a.setStartBefore(a.startContainer), d = c(b, a.startContainer)) : (a.setEndAfter(a.endContainer), e = c(b, a.endContainer))
        }
        var e = a.dom;
        a.Selection = Base.extend({
            constructor: function(a, b, c) {
                window.rangy.init(), this.editor = a, this.composer = a.composer, this.doc = this.composer.doc, this.contain = b, this.unselectableClass = c || !1
            },
            getBookmark: function() {
                var a = this.getRange();
                return a && d(a), a && a.cloneRange()
            },
            setBookmark: function(a) {
                a && this.setSelection(a)
            },
            setBefore: function(a) {
                var b = rangy.createRange(this.doc);
                return b.setStartBefore(a), b.setEndBefore(a), this.setSelection(b)
            },
            setAfter: function(a) {
                var b = rangy.createRange(this.doc);
                return b.setStartAfter(a), b.setEndAfter(a), this.setSelection(b)
            },
            selectNode: function(b, c) {
                var d = rangy.createRange(this.doc),
                    f = b.nodeType === a.ELEMENT_NODE,
                    g = "canHaveHTML" in b ? b.canHaveHTML : "IMG" !== b.nodeName,
                    h = f ? b.innerHTML : b.data,
                    i = "" === h || h === a.INVISIBLE_SPACE,
                    j = e.getStyle("display").from(b),
                    k = "block" === j || "list-item" === j;
                if (i && f && g && !c) try {
                    b.innerHTML = a.INVISIBLE_SPACE
                } catch (l) {}
                g ? d.selectNodeContents(b) : d.selectNode(b), g && i && f ? d.collapse(k) : g && i && (d.setStartAfter(b), d.setEndAfter(b)), this.setSelection(d)
            },
            getSelectedNode: function(a) {
                var b, c;
                return a && this.doc.selection && "Control" === this.doc.selection.type && (c = this.doc.selection.createRange(), c && c.length) ? c.item(0) : (b = this.getSelection(this.doc), b.focusNode === b.anchorNode ? b.focusNode : (c = this.getRange(this.doc), c ? c.commonAncestorContainer : this.doc.body))
            },
            fixSelBorders: function() {
                var a = this.getRange();
                d(a), this.setSelection(a)
            },
            getSelectedOwnNodes: function() {
                var a, b, c = this.getOwnRanges(),
                    d = [];
                for (a = 0, b = c.length; b > a; a++) d.push(c[a].commonAncestorContainer || this.doc.body);
                return d
            },
            findNodesInSelection: function(b) {
                var c, d, e, f = this.getOwnRanges(),
                    g = [];
                for (d = 0, e = f.length; e > d; d++) c = f[d].getNodes([1], function(c) {
                    return a.lang.array(b).contains(c.nodeName)
                }), g = g.concat(c);
                return g
            },
            containsUneditable: function() {
                var a, b, c = this.getOwnUneditables(),
                    d = this.getSelection();
                for (a = 0, b = c.length; b > a; a++)
                    if (d.containsNode(c[a])) return !0;
                return !1
            },
            deleteContents: function() {
                var a, b = this.getOwnRanges();
                for (a = b.length; a--;) b[a].deleteContents();
                this.setSelection(b[0])
            },
            getPreviousNode: function(b, c) {
                var d, e, f;
                return b || (d = this.getSelection(), b = d.anchorNode), b === this.contain ? !1 : (e = b.previousSibling, e === this.contain ? !1 : (e && 3 !== e.nodeType && 1 !== e.nodeType ? e = this.getPreviousNode(e, c) : e && 3 === e.nodeType && /^\s*$/.test(e.textContent) ? e = this.getPreviousNode(e, c) : c && e && 1 === e.nodeType && !a.lang.array(["BR", "HR", "IMG"]).contains(e.nodeName) && /^[\s]*$/.test(e.innerHTML) ? e = this.getPreviousNode(e, c) : e || b === this.contain || (f = b.parentNode, f !== this.contain && (e = this.getPreviousNode(f, c))), e !== this.contain ? e : !1))
            },
            getSelectionParentsByTag: function() {
                var b, c, d, e = this.getSelectedOwnNodes(),
                    f = [];
                for (c = 0, d = e.length; d > c; c++) b = e[c].nodeName && "LI" === e[c].nodeName ? e[c] : a.dom.getParentElement(e[c], {
                    nodeName: ["LI"]
                }, !1, this.contain), b && f.push(b);
                return f.length ? f : null
            },
            getRangeToNodeEnd: function() {
                if (this.isCollapsed()) {
                    var a = this.getRange(),
                        b = a.startContainer,
                        c = a.startOffset,
                        d = rangy.createRange(this.doc);
                    return d.selectNodeContents(b), d.setStart(b, c), d
                }
            },
            caretIsLastInSelection: function() {
                var a = (rangy.createRange(this.doc), this.getSelection(), this.getRangeToNodeEnd().cloneContents()),
                    b = a.textContent;
                return /^\s*$/.test(b)
            },
            caretIsFirstInSelection: function() {
                var b = rangy.createRange(this.doc),
                    c = this.getSelection(),
                    d = this.getRange(),
                    e = d.startContainer;
                return e.nodeType === a.TEXT_NODE ? this.isCollapsed() && e.nodeType === a.TEXT_NODE && /^\s*$/.test(e.data.substr(0, d.startOffset)) : (b.selectNodeContents(this.getRange().commonAncestorContainer), b.collapse(!0), this.isCollapsed() && (b.startContainer === c.anchorNode || b.endContainer === c.anchorNode) && b.startOffset === c.anchorOffset)
            },
            caretIsInTheBeginnig: function(b) {
                var c = this.getSelection(),
                    d = c.anchorNode,
                    e = c.anchorOffset;
                return b ? 0 === e && (d.nodeName && d.nodeName === b.toUpperCase() || a.dom.getParentElement(d.parentNode, {
                    nodeName: b
                }, 1)) : 0 === e && !this.getPreviousNode(d, !0)
            },
            caretIsBeforeUneditable: function() {
                var a, b, c, d, e = this.getSelection(),
                    f = e.anchorNode,
                    g = e.anchorOffset;
                if (0 === g && (a = this.getPreviousNode(f, !0), a))
                    for (b = this.getOwnUneditables(), c = 0, d = b.length; d > c; c++)
                        if (a === b[c]) return b[c];
                return !1
            },
            executeAndRestoreRangy: function(a) {
                var b = this.doc.defaultView || this.doc.parentWindow,
                    c = rangy.saveSelection(b);
                if (c) try {
                    a()
                } catch (d) {
                    setTimeout(function() {
                        throw d
                    }, 0)
                } else a();
                rangy.restoreSelection(c)
            },
            executeAndRestore: function(b, c) {
                var d, f, g, h, i, j, k, l, m, n = this.doc.body,
                    o = c && n.scrollTop,
                    p = c && n.scrollLeft,
                    q = "_wysihtml5-temp-placeholder",
                    r = '<span class="' + q + '">' + a.INVISIBLE_SPACE + "</span>",
                    s = this.getRange(!0);
                if (!s) return b(n, n), void 0;
                s.collapsed || (k = s.cloneRange(), j = k.createContextualFragment(r), k.collapse(!1), k.insertNode(j), k.detach()), i = s.createContextualFragment(r), s.insertNode(i), j && (d = this.contain.querySelectorAll("." + q), s.setStartBefore(d[0]), s.setEndAfter(d[d.length - 1])), this.setSelection(s);
                try {
                    b(s.startContainer, s.endContainer)
                } catch (t) {
                    setTimeout(function() {
                        throw t
                    }, 0)
                }
                if (d = this.contain.querySelectorAll("." + q), d && d.length)
                    for (l = rangy.createRange(this.doc), g = d[0].nextSibling, d.length > 1 && (h = d[d.length - 1].previousSibling), h && g ? (l.setStartBefore(g), l.setEndAfter(h)) : (f = this.doc.createTextNode(a.INVISIBLE_SPACE), e.insert(f).after(d[0]), l.setStartBefore(f), l.setEndAfter(f)), this.setSelection(l), m = d.length; m--;) d[m].parentNode.removeChild(d[m]);
                else this.contain.focus();
                c && (n.scrollTop = o, n.scrollLeft = p);
                try {
                    d.parentNode.removeChild(d)
                } catch (u) {}
            },
            set: function(a, b) {
                var c = rangy.createRange(this.doc);
                c.setStart(a, b || 0), this.setSelection(c)
            },
            insertHTML: function(a) {
                var b, c = (rangy.createRange(this.doc), this.doc.createElement("DIV")),
                    d = this.doc.createDocumentFragment();
                for (c.innerHTML = a, b = c.lastChild; c.firstChild;) d.appendChild(c.firstChild);
                this.insertNode(d), b && this.setAfter(b)
            },
            insertNode: function(a) {
                var b = this.getRange();
                b && b.insertNode(a)
            },
            surround: function(a) {
                var b, c, d = this.getOwnRanges(),
                    e = [];
                if (0 == d.length) return e;
                for (c = d.length; c--;) {
                    b = this.doc.createElement(a.nodeName), e.push(b), a.className && (b.className = a.className), a.cssStyle && b.setAttribute("style", a.cssStyle);
                    try {
                        d[c].surroundContents(b), this.selectNode(b)
                    } catch (f) {
                        b.appendChild(d[c].extractContents()), d[c].insertNode(b)
                    }
                }
                return e
            },
            deblockAndSurround: function(b) {
                var c, d, e, f = this.doc.createElement("div"),
                    g = rangy.createRange(this.doc);
                if (f.className = b.className, this.composer.commands.exec("formatBlock", b.nodeName, b.className), c = this.contain.querySelectorAll("." + b.className), c[0])
                    for (c[0].parentNode.insertBefore(f, c[0]), g.setStartBefore(c[0]), g.setEndAfter(c[c.length - 1]), d = g.extractContents(); d.firstChild;)
                        if (e = d.firstChild, 1 == e.nodeType && a.dom.hasClass(e, b.className)) {
                            for (; e.firstChild;) f.appendChild(e.firstChild);
                            "BR" !== e.nodeName && f.appendChild(this.doc.createElement("br")), d.removeChild(e)
                        } else f.appendChild(e);
                else f = null;
                return f
            },
            scrollIntoView: function() {
                var c, d = this.doc,
                    e = 5,
                    f = d.documentElement.scrollHeight > d.documentElement.offsetHeight,
                    g = d._wysihtml5ScrollIntoViewElement = d._wysihtml5ScrollIntoViewElement || function() {
                        var b = d.createElement("span");
                        return b.innerHTML = a.INVISIBLE_SPACE, b
                    }();
                f && (this.insertNode(g), c = b(g), g.parentNode.removeChild(g), c >= d.body.scrollTop + d.documentElement.offsetHeight - e && (d.body.scrollTop = c))
            },
            selectLine: function() {
                a.browser.supportsSelectionModify() ? this._selectLine_W3C() : this.doc.selection && this._selectLine_MSIE()
            },
            _selectLine_W3C: function() {
                var a = this.doc.defaultView,
                    b = a.getSelection();
                b.modify("move", "left", "lineboundary"), b.modify("extend", "right", "lineboundary")
            },
            _selectLine_MSIE: function() {
                var a, b, c, d, e, f = this.doc.selection.createRange(),
                    g = f.boundingTop,
                    h = this.doc.body.scrollWidth;
                if (f.moveToPoint) {
                    for (0 === g && (c = this.doc.createElement("span"), this.insertNode(c), g = c.offsetTop, c.parentNode.removeChild(c)), g += 1, d = -10; h > d; d += 2) try {
                        f.moveToPoint(d, g);
                        break
                    } catch (i) {}
                    for (a = g, b = this.doc.selection.createRange(), e = h; e >= 0; e--) try {
                        b.moveToPoint(e, a);
                        break
                    } catch (j) {}
                    f.setEndPoint("EndToEnd", b), f.select()
                }
            },
            getText: function() {
                var a = this.getSelection();
                return a ? "" + a : ""
            },
            getNodes: function(a, b) {
                var c = this.getRange();
                return c ? c.getNodes([a], b) : []
            },
            fixRangeOverflow: function(a) {
                var b, c;
                this.contain && this.contain.firstChild && a && (b = a.compareNode(this.contain), 2 !== b ? (1 === b && a.setStartBefore(this.contain.firstChild), 0 === b && a.setEndAfter(this.contain.lastChild), 3 === b && (a.setStartBefore(this.contain.firstChild), a.setEndAfter(this.contain.lastChild))) : this._detectInlineRangeProblems(a) && (c = a.endContainer.previousElementSibling, c && a.setEnd(c, this._endOffsetForNode(c))))
            },
            _endOffsetForNode: function(a) {
                var b = document.createRange();
                return b.selectNodeContents(a), b.endOffset
            },
            _detectInlineRangeProblems: function(a) {
                var b = e.compareDocumentPosition(a.startContainer, a.endContainer);
                return 0 == a.endOffset && 4 & b
            },
            getRange: function(a) {
                var b = this.getSelection(),
                    c = b && b.rangeCount && b.getRangeAt(0);
                return a !== !0 && this.fixRangeOverflow(c), c
            },
            getOwnUneditables: function() {
                var b = e.query(this.contain, "." + this.unselectableClass),
                    c = e.query(b, "." + this.unselectableClass);
                return a.lang.array(b).without(c)
            },
            getOwnRanges: function() {
                var a, b, c, d, e, f, g, h = [],
                    i = this.getRange();
                if (i && h.push(i), this.unselectableClass && this.contain && i && (b = this.getOwnUneditables(), b.length > 0))
                    for (d = 0, e = b.length; e > d; d++)
                        for (a = [], f = 0, g = h.length; g > f; f++) {
                            if (h[f]) switch (h[f].compareNode(b[d])) {
                                case 2:
                                    break;
                                case 3:
                                    c = h[f].cloneRange(), c.setEndBefore(b[d]), a.push(c), c = h[f].cloneRange(), c.setStartAfter(b[d]), a.push(c);
                                    break;
                                default:
                                    a.push(h[f])
                            }
                            h = a
                        }
                return h
            },
            getSelection: function() {
                return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow)
            },
            setSelection: function(a) {
                var b = this.doc.defaultView || this.doc.parentWindow,
                    c = rangy.getSelection(b);
                return c.setSingleRange(a)
            },
            createRange: function() {
                return rangy.createRange(this.doc)
            },
            isCollapsed: function() {
                return this.getSelection().isCollapsed
            },
            getHtml: function() {
                return this.getSelection().toHtml()
            },
            isEndToEndInNode: function(b) {
                var c = this.getRange(),
                    d = c.commonAncestorContainer,
                    e = c.startContainer,
                    f = c.endContainer;
                if (d.nodeType === a.TEXT_NODE && (d = d.parentNode), e.nodeType === a.TEXT_NODE && !/^\s*$/.test(e.data.substr(c.startOffset))) return !1;
                if (f.nodeType === a.TEXT_NODE && !/^\s*$/.test(f.data.substr(c.endOffset))) return !1;
                for (; e && e !== d;) {
                    if (e.nodeType !== a.TEXT_NODE && !a.dom.contains(d, e)) return !1;
                    if (a.dom.domNode(e).prev({
                        ignoreBlankTexts: !0
                    })) return !1;
                    e = e.parentNode
                }
                for (; f && f !== d;) {
                    if (f.nodeType !== a.TEXT_NODE && !a.dom.contains(d, f)) return !1;
                    if (a.dom.domNode(f).next({
                        ignoreBlankTexts: !0
                    })) return !1;
                    f = f.parentNode
                }
                return a.lang.array(b).contains(d.nodeName) ? d : !1
            },
            deselect: function() {
                var a = this.getSelection();
                a && a.removeAllRanges()
            }
        })
    }(wysihtml5),
    function(a, b) {
        function c(a, b, c) {
            if (!a.className) return !1;
            var d = a.className.match(c) || [];
            return d[d.length - 1] === b
        }

        function d(a, b) {
            if (!a.getAttribute || !a.getAttribute("style")) return !1;
            a.getAttribute("style").match(b);
            return a.getAttribute("style").match(b) ? !0 : !1
        }

        function e(a, b, c) {
            a.getAttribute("style") ? (h(a, c), a.getAttribute("style") && !/^\s*$/.test(a.getAttribute("style")) ? a.setAttribute("style", b + ";" + a.getAttribute("style")) : a.setAttribute("style", b)) : a.setAttribute("style", b)
        }

        function f(a, b, c) {
            a.className ? (g(a, c), a.className += " " + b) : a.className = b
        }

        function g(a, b) {
            a.className && (a.className = a.className.replace(b, ""))
        }

        function h(a, b) {
            var c, d, e = [];
            if (a.getAttribute("style")) {
                for (c = a.getAttribute("style").split(";"), d = c.length; d--;) c[d].match(b) || /^\s*$/.test(c[d]) || e.push(c[d]);
                e.length ? a.setAttribute("style", e.join(";")) : a.removeAttribute("style")
            }
        }

        function i(a, b) {
            var c, d, e, f = [],
                g = b.split(";"),
                h = a.getAttribute("style");
            if (h) {
                for (h = h.replace(/\s/gi, "").toLowerCase(), f.push(RegExp("(^|\\s|;)" + b.replace(/\s/gi, "").replace(/([\(\)])/gi, "\\$1").toLowerCase().replace(";", ";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi, "\\s?rgb\\($1,\\s?$2,\\s?$3\\)"), "gi")), c = g.length; c-- > 0;) /^\s*$/.test(g[c]) || f.push(RegExp("(^|\\s|;)" + g[c].replace(/\s/gi, "").replace(/([\(\)])/gi, "\\$1").toLowerCase().replace(";", ";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi, "\\s?rgb\\($1,\\s?$2,\\s?$3\\)"), "gi"));
                for (d = 0, e = f.length; e > d; d++)
                    if (h.match(f[d])) return f[d]
            }
            return !1
        }

        function j(c, d, e, f) {
            return e ? i(c, e) : f ? a.dom.hasClass(c, f) : b.dom.arrayContains(d, c.tagName.toLowerCase())
        }

        function k(a, b, c, d) {
            for (var e = a.length; e--;)
                if (!j(a[e], b, c, d)) return !1;
            return a.length ? !0 : !1
        }

        function l(a, b, c) {
            var d = i(a, b);
            return d ? (h(a, d), "remove") : (e(a, b, c), "change")
        }

        function m(a, b) {
            return a.className.replace(u, " ") == b.className.replace(u, " ")
        }

        function n(a) {
            for (var b = a.parentNode; a.firstChild;) b.insertBefore(a.firstChild, a);
            b.removeChild(a)
        }

        function o(a, b) {
            if (a.attributes.length != b.attributes.length) return !1;
            for (var c, d, e, f = 0, g = a.attributes.length; g > f; ++f)
                if (c = a.attributes[f], e = c.name, "class" != e) {
                    if (d = b.attributes.getNamedItem(e), c.specified != d.specified) return !1;
                    if (c.specified && c.nodeValue !== d.nodeValue) return !1
                } return !0
        }

        function p(a, c) {
            return b.dom.isCharacterDataNode(a) ? 0 == c ? !!a.previousSibling : c == a.length ? !!a.nextSibling : !0 : c > 0 && c < a.childNodes.length
        }

        function q(a, c, d, e) {
            var f, g;
            if (b.dom.isCharacterDataNode(c) && (0 == d ? (d = b.dom.getNodeIndex(c), c = c.parentNode) : d == c.length ? (d = b.dom.getNodeIndex(c) + 1, c = c.parentNode) : f = b.dom.splitDataNode(c, d)), !(f || e && c === e)) {
                for (f = c.cloneNode(!1), f.id && f.removeAttribute("id"); g = c.childNodes[d];) f.appendChild(g);
                b.dom.insertAfter(f, c)
            }
            return c == a ? f : q(a, f.parentNode, b.dom.getNodeIndex(f), e)
        }

        function r(b) {
            this.isElementMerge = b.nodeType == a.ELEMENT_NODE, this.firstTextNode = this.isElementMerge ? b.lastChild : b, this.textNodes = [this.firstTextNode]
        }

        function s(a, b, c, d, e, f, g) {
            this.tagNames = a || [t], this.cssClass = b || (b === !1 ? !1 : ""), this.similarClassRegExp = c, this.cssStyle = e || "", this.similarStyleRegExp = f, this.normalize = d, this.applyToAnyTagName = !1, this.container = g
        }
        var t = "span",
            u = /\s+/g;
        r.prototype = {
            doMerge: function() {
                var a, b, c, d, e, f = [];
                for (d = 0, e = this.textNodes.length; e > d; ++d) a = this.textNodes[d], b = a.parentNode, f[d] = a.data, d && (b.removeChild(a), b.hasChildNodes() || b.parentNode.removeChild(b));
                return this.firstTextNode.data = c = f.join(""), c
            },
            getLength: function() {
                for (var a = this.textNodes.length, b = 0; a--;) b += this.textNodes[a].length;
                return b
            },
            toString: function() {
                var a, b, c = [];
                for (a = 0, b = this.textNodes.length; b > a; ++a) c[a] = "'" + this.textNodes[a].data + "'";
                return "[Merge(" + c.join(",") + ")]"
            }
        }, s.prototype = {
            getAncestorWithClass: function(d) {
                for (var e; d;) {
                    if (e = this.cssClass ? c(d, this.cssClass, this.similarClassRegExp) : "" !== this.cssStyle ? !1 : !0, d.nodeType == a.ELEMENT_NODE && "false" != d.getAttribute("contenteditable") && b.dom.arrayContains(this.tagNames, d.tagName.toLowerCase()) && e) return d;
                    d = d.parentNode
                }
                return !1
            },
            getAncestorWithStyle: function(c) {
                for (var e; c;) {
                    if (e = this.cssStyle ? d(c, this.similarStyleRegExp) : !1, c.nodeType == a.ELEMENT_NODE && "false" != c.getAttribute("contenteditable") && b.dom.arrayContains(this.tagNames, c.tagName.toLowerCase()) && e) return c;
                    c = c.parentNode
                }
                return !1
            },
            getMatchingAncestor: function(a) {
                var b = this.getAncestorWithClass(a),
                    c = !1;
                return b ? this.cssStyle && (c = "class") : (b = this.getAncestorWithStyle(a), b && (c = "style")), {
                    element: b,
                    type: c
                }
            },
            postApply: function(a, b) {
                var c, d, e, f, g, h, i = a[0],
                    j = a[a.length - 1],
                    k = [],
                    l = i,
                    m = j,
                    n = 0,
                    o = j.length;
                for (f = 0, g = a.length; g > f; ++f) d = a[f], e = null, d && d.parentNode && (e = this.getAdjacentMergeableTextNode(d.parentNode, !1)), e ? (c || (c = new r(e), k.push(c)), c.textNodes.push(d), d === i && (l = c.firstTextNode, n = l.length), d === j && (m = c.firstTextNode, o = c.getLength())) : c = null;
                if (j && j.parentNode && (h = this.getAdjacentMergeableTextNode(j.parentNode, !0), h && (c || (c = new r(j), k.push(c)), c.textNodes.push(h))), k.length) {
                    for (f = 0, g = k.length; g > f; ++f) k[f].doMerge();
                    b.setStart(l, n), b.setEnd(m, o)
                }
            },
            getAdjacentMergeableTextNode: function(b, c) {
                var d, e = b.nodeType == a.TEXT_NODE,
                    f = e ? b.parentNode : b,
                    g = c ? "nextSibling" : "previousSibling";
                if (e) {
                    if (d = b[g], d && d.nodeType == a.TEXT_NODE) return d
                } else if (d = f[g], d && this.areElementsMergeable(b, d)) return d[c ? "firstChild" : "lastChild"];
                return null
            },
            areElementsMergeable: function(a, c) {
                return b.dom.arrayContains(this.tagNames, (a.tagName || "").toLowerCase()) && b.dom.arrayContains(this.tagNames, (c.tagName || "").toLowerCase()) && m(a, c) && o(a, c)
            },
            createContainer: function(a) {
                var b = a.createElement(this.tagNames[0]);
                return this.cssClass && (b.className = this.cssClass), this.cssStyle && b.setAttribute("style", this.cssStyle), b
            },
            applyToTextNode: function(a) {
                var c, d = a.parentNode;
                1 == d.childNodes.length && b.dom.arrayContains(this.tagNames, d.tagName.toLowerCase()) ? (this.cssClass && f(d, this.cssClass, this.similarClassRegExp), this.cssStyle && e(d, this.cssStyle, this.similarStyleRegExp)) : (c = this.createContainer(b.dom.getDocument(a)), a.parentNode.insertBefore(c, a), c.appendChild(a))
            },
            isRemovable: function(c) {
                return b.dom.arrayContains(this.tagNames, c.tagName.toLowerCase()) && "" === a.lang.string(c.className).trim() && (!c.getAttribute("style") || "" === a.lang.string(c.getAttribute("style")).trim())
            },
            undoToTextNode: function(a, b, c, d) {
                var e, f = c ? !1 : !0,
                    h = c || d,
                    i = !1;
                b.containsNode(h) || (e = b.cloneRange(), e.selectNode(h), e.isPointInRange(b.endContainer, b.endOffset) && p(b.endContainer, b.endOffset) && (q(h, b.endContainer, b.endOffset, this.container), b.setEndAfter(h)), e.isPointInRange(b.startContainer, b.startOffset) && p(b.startContainer, b.startOffset) && (h = q(h, b.startContainer, b.startOffset, this.container))), !f && this.similarClassRegExp && g(h, this.similarClassRegExp), f && this.similarStyleRegExp && (i = "change" === l(h, this.cssStyle, this.similarStyleRegExp)), this.isRemovable(h) && !i && n(h)
            },
            applyToRange: function(b) {
                var c, d, e, f, g, h;
                for (d = b.length; d--;) {
                    if (c = b[d].getNodes([a.TEXT_NODE]), !c.length) try {
                        return e = this.createContainer(b[d].endContainer.ownerDocument), b[d].surroundContents(e), this.selectNode(b[d], e), void 0
                    } catch (i) {}
                    if (b[d].splitBoundaries(), c = b[d].getNodes([a.TEXT_NODE]), c.length) {
                        for (g = 0, h = c.length; h > g; ++g) f = c[g], this.getMatchingAncestor(f).element || this.applyToTextNode(f);
                        b[d].setStart(c[0], 0), f = c[c.length - 1], b[d].setEnd(f, f.length), this.normalize && this.postApply(c, b[d])
                    }
                }
            },
            undoToRange: function(b) {
                var c, d, e, f, g, h, i, j;
                for (f = b.length; f--;) {
                    for (c = b[f].getNodes([a.TEXT_NODE]), c.length ? (b[f].splitBoundaries(), c = b[f].getNodes([a.TEXT_NODE])) : (g = b[f].endContainer.ownerDocument, h = g.createTextNode(a.INVISIBLE_SPACE), b[f].insertNode(h), b[f].selectNode(h), c = [h]), i = 0, j = c.length; j > i; ++i) b[f].isValid() && (d = c[i], e = this.getMatchingAncestor(d), "style" === e.type ? this.undoToTextNode(d, b[f], !1, e.element) : e.element && this.undoToTextNode(d, b[f], e.element));
                    1 == j ? this.selectNode(b[f], c[0]) : (b[f].setStart(c[0], 0), d = c[c.length - 1], b[f].setEnd(d, d.length), this.normalize && this.postApply(c, b[f]))
                }
            },
            selectNode: function(b, c) {
                var d = c.nodeType === a.ELEMENT_NODE,
                    e = "canHaveHTML" in c ? c.canHaveHTML : !0,
                    f = d ? c.innerHTML : c.data,
                    g = "" === f || f === a.INVISIBLE_SPACE;
                if (g && d && e) try {
                    c.innerHTML = a.INVISIBLE_SPACE
                } catch (h) {}
                b.selectNodeContents(c), g && d ? b.collapse(!1) : g && (b.setStartAfter(c), b.setEndAfter(c))
            },
            getTextSelectedByRange: function(a, b) {
                var c, d, e = b.cloneRange();
                return e.selectNodeContents(a), c = e.intersection(b), d = c ? "" + c : "", e.detach(), d
            },
            isAppliedToRange: function(b) {
                var c, d, e, f, g, h, i = [],
                    j = "full";
                for (e = b.length; e--;) {
                    if (d = b[e].getNodes([a.TEXT_NODE]), !d.length) return c = this.getMatchingAncestor(b[e].startContainer).element, c ? {
                        elements: [c],
                        coverage: j
                    } : !1;
                    for (f = 0, g = d.length; g > f; ++f) h = this.getTextSelectedByRange(d[f], b[e]), c = this.getMatchingAncestor(d[f]).element, c && "" != h ? (i.push(c), 1 === a.dom.getTextNodes(c, !0).length ? j = "full" : "full" === j && (j = "inline")) : c || (j = "partial")
                }
                return i.length ? {
                    elements: i,
                    coverage: j
                } : !1
            },
            toggleRange: function(a) {
                var b, c = this.isAppliedToRange(a);
                c ? "full" === c.coverage ? this.undoToRange(a) : "inline" === c.coverage ? (b = k(c.elements, this.tagNames, this.cssStyle, this.cssClass), this.undoToRange(a), b || this.applyToRange(a)) : (k(c.elements, this.tagNames, this.cssStyle, this.cssClass) || this.undoToRange(a), this.applyToRange(a)) : this.applyToRange(a)
            }
        }, a.selection.HTMLApplier = s
    }(wysihtml5, rangy), wysihtml5.Commands = Base.extend({
    constructor: function(a) {
        this.editor = a, this.composer = a.composer, this.doc = this.composer.doc
    },
    support: function(a) {
        return wysihtml5.browser.supportsCommand(this.doc, a)
    },
    exec: function(a, b) {
        var c = wysihtml5.commands[a],
            d = wysihtml5.lang.array(arguments).get(),
            e = c && c.exec,
            f = null;
        if (this.editor.fire("beforecommand:composer"), e) d.unshift(this.composer), f = e.apply(c, d);
        else try {
            f = this.doc.execCommand(a, !1, b)
        } catch (g) {}
        return this.editor.fire("aftercommand:composer"), f
    },
    state: function(a) {
        var b = wysihtml5.commands[a],
            c = wysihtml5.lang.array(arguments).get(),
            d = b && b.state;
        if (d) return c.unshift(this.composer), d.apply(b, c);
        try {
            return this.doc.queryCommandState(a)
        } catch (e) {
            return !1
        }
    },
    stateValue: function(a) {
        var b = wysihtml5.commands[a],
            c = wysihtml5.lang.array(arguments).get(),
            d = b && b.stateValue;
        return d ? (c.unshift(this.composer), d.apply(b, c)) : !1
    }
}), wysihtml5.commands.bold = {
    exec: function(a, b) {
        wysihtml5.commands.formatInline.execWithToggle(a, b, "b")
    },
    state: function(a, b) {
        return wysihtml5.commands.formatInline.state(a, b, "b")
    }
},
    function(a) {
        function b(b, c) {
            var g, h, i, j, k, l, m, n, o, p = b.doc,
                q = "_wysihtml5-temp-" + +new Date,
                r = /non-matching-class/g,
                s = 0;
            for (a.commands.formatInline.exec(b, d, e, q, r, d, d, !0, !0), h = p.querySelectorAll(e + "." + q), g = h.length; g > s; s++) {
                i = h[s], i.removeAttribute("class");
                for (o in c) "text" !== o && i.setAttribute(o, c[o])
            }
            l = i, 1 === g && (m = f.getTextContent(i), j = !!i.querySelector("*"), k = "" === m || m === a.INVISIBLE_SPACE, !j && k && (f.setTextContent(i, c.text || i.href), n = p.createTextNode(" "), b.selection.setAfter(i), f.insert(n).after(i), l = n)), b.selection.setAfter(l)
        }

        function c(a, b, c) {
            var d, e, f, g;
            for (e = b.length; e--;) {
                for (d = b[e].attributes, f = d.length; f--;) b[e].removeAttribute(d.item(f).name);
                for (g in c) c.hasOwnProperty(g) && b[e].setAttribute(g, c[g])
            }
        }
        var d, e = "A",
            f = a.dom;
        a.commands.createLink = {
            exec: function(a, d, e) {
                var f = this.state(a, d);
                f ? a.selection.executeAndRestore(function() {
                    c(a, f, e)
                }) : (e = "object" == typeof e ? e : {
                    href: e
                }, b(a, e))
            },
            state: function(b, c) {
                return a.commands.formatInline.state(b, c, "A")
            }
        }
    }(wysihtml5),
    function(a) {
        function b(a, b) {
            for (var d, e, f, g = b.length, h = 0; g > h; h++) d = b[h], e = c.getParentElement(d, {
                nodeName: "code"
            }), f = c.getTextContent(d), f.match(c.autoLink.URL_REG_EXP) && !e ? e = c.renameElement(d, "code") : c.replaceWithChildNodes(d)
        }
        var c = a.dom;
        a.commands.removeLink = {
            exec: function(a, c) {
                var d = this.state(a, c);
                d && a.selection.executeAndRestore(function() {
                    b(a, d)
                })
            },
            state: function(b, c) {
                return a.commands.formatInline.state(b, c, "A")
            }
        }
    }(wysihtml5),
    function(a) {
        var b = /wysiwyg-font-size-[0-9a-z\-]+/g;
        a.commands.fontSize = {
            exec: function(c, d, e) {
                a.commands.formatInline.execWithToggle(c, d, "span", "wysiwyg-font-size-" + e, b)
            },
            state: function(c, d, e) {
                return a.commands.formatInline.state(c, d, "span", "wysiwyg-font-size-" + e, b)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = /(\s|^)font-size\s*:\s*[^;\s]+;?/gi;
        a.commands.fontSizeStyle = {
            exec: function(c, d, e) {
                e = "object" == typeof e ? e.size : e, /^\s*$/.test(e) || a.commands.formatInline.execWithToggle(c, d, "span", !1, !1, "font-size:" + e, b)
            },
            state: function(c, d) {
                return a.commands.formatInline.state(c, d, "span", !1, !1, "font-size", b)
            },
            stateValue: function(b, c) {
                var d, e = this.state(b, c);
                return e && a.lang.object(e).isArray() && (e = e[0]), e && (d = e.getAttribute("style"), d) ? a.quirks.styleParser.parseFontSize(d) : !1
            }
        }
    }(wysihtml5),
    function(a) {
        var b = /wysiwyg-color-[0-9a-z]+/g;
        a.commands.foreColor = {
            exec: function(c, d, e) {
                a.commands.formatInline.execWithToggle(c, d, "span", "wysiwyg-color-" + e, b)
            },
            state: function(c, d, e) {
                return a.commands.formatInline.state(c, d, "span", "wysiwyg-color-" + e, b)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = /(\s|^)color\s*:\s*[^;\s]+;?/gi;
        a.commands.foreColorStyle = {
            exec: function(c, d, e) {
                var f, g = a.quirks.styleParser.parseColor("object" == typeof e ? "color:" + e.color : "color:" + e, "color");
                g && (f = "color: rgb(" + g[0] + "," + g[1] + "," + g[2] + ");", 1 !== g[3] && (f += "color: rgba(" + g[0] + "," + g[1] + "," + g[2] + "," + g[3] + ");"), a.commands.formatInline.execWithToggle(c, d, "span", !1, !1, f, b))
            },
            state: function(c, d) {
                return a.commands.formatInline.state(c, d, "span", !1, !1, "color", b)
            },
            stateValue: function(b, c, d) {
                var e, f = this.state(b, c);
                return f && a.lang.object(f).isArray() && (f = f[0]), f && (e = f.getAttribute("style"), e && e) ? (val = a.quirks.styleParser.parseColor(e, "color"), a.quirks.styleParser.unparseColor(val, d)) : !1
            }
        }
    }(wysihtml5),
    function(a) {
        var b = /(\s|^)background-color\s*:\s*[^;\s]+;?/gi;
        a.commands.bgColorStyle = {
            exec: function(c, d, e) {
                var f, g = a.quirks.styleParser.parseColor("object" == typeof e ? "background-color:" + e.color : "background-color:" + e, "background-color");
                g && (f = "background-color: rgb(" + g[0] + "," + g[1] + "," + g[2] + ");", 1 !== g[3] && (f += "background-color: rgba(" + g[0] + "," + g[1] + "," + g[2] + "," + g[3] + ");"), a.commands.formatInline.execWithToggle(c, d, "span", !1, !1, f, b))
            },
            state: function(c, d) {
                return a.commands.formatInline.state(c, d, "span", !1, !1, "background-color", b)
            },
            stateValue: function(b, c, d) {
                var e, f = this.state(b, c),
                    g = !1;
                return f && a.lang.object(f).isArray() && (f = f[0]), f && (e = f.getAttribute("style"), e) ? (g = a.quirks.styleParser.parseColor(e, "background-color"), a.quirks.styleParser.unparseColor(g, d)) : !1
            }
        }
    }(wysihtml5),
    function(a) {
        function b(b, c, e) {
            b.className ? (d(b, e), b.className = a.lang.string(b.className + " " + c).trim()) : b.className = c
        }

        function c(b, c, d) {
            e(b, d), b.getAttribute("style") ? b.setAttribute("style", a.lang.string(b.getAttribute("style") + " " + c).trim()) : b.setAttribute("style", c)
        }

        function d(b, c) {
            var d = c.test(b.className);
            return b.className = b.className.replace(c, ""), "" == a.lang.string(b.className).trim() && b.removeAttribute("class"), d
        }

        function e(b, c) {
            var d = c.test(b.getAttribute("style"));
            return b.setAttribute("style", (b.getAttribute("style") || "").replace(c, "")), "" == a.lang.string(b.getAttribute("style") || "").trim() && b.removeAttribute("style"), d
        }

        function f(a) {
            var b = a.lastChild;
            b && g(b) && b.parentNode.removeChild(b)
        }

        function g(a) {
            return "BR" === a.nodeName
        }

        function h(b, c) {
            var d, e, g;
            for (b.selection.isCollapsed() && b.selection.selectLine(), d = b.selection.surround(c), e = 0, g = d.length; g > e; e++) a.dom.lineBreaks(d[e]).remove(), f(d[e])
        }

        function i(b) {
            return !!a.lang.string(b.className).trim()
        }

        function j(b) {
            return !!a.lang.string(b.getAttribute("style") || "").trim()
        }
        var k = a.dom,
            l = ["H1", "H2", "H3", "H4", "H5", "H6", "P", "PRE", "DIV"];
        a.commands.formatBlock = {
            exec: function(f, g, m, n, o, p, q) {
                var r, s, t, u, v, w = (f.doc, this.state(f, g, m, n, o, p, q)),
                    x = f.config.useLineBreaks,
                    y = x ? "DIV" : "P";
                return m = "string" == typeof m ? m.toUpperCase() : m, w.length ? (f.selection.executeAndRestoreRangy(function() {
                    var b, c, f;
                    for (b = w.length; b--;) {
                        if (o && (s = d(w[b], o)), q && (u = e(w[b], q)), (u || s) && null === m && w[b].nodeName != y) return;
                        c = i(w[b]), f = j(w[b]), c || f || !x && "P" !== m ? k.renameElement(w[b], "P" === m ? "DIV" : y) : (a.dom.lineBreaks(w[b]).add(), k.replaceWithChildNodes(w[b]))
                    }
                }), void 0) : ((null !== m && !a.lang.array(l).contains(m) || (r = f.selection.findNodesInSelection(l).concat(f.selection.getSelectedOwnNodes()), f.selection.executeAndRestoreRangy(function() {
                    for (var a = r.length; a--;) v = k.getParentElement(r[a], {
                        nodeName: l
                    }), v == f.element && (v = null), v && (m && (v = k.renameElement(v, m)), n && b(v, n, o), p && c(v, p, q), t = !0)
                }), !t)) && h(f, {
                    nodeName: m || y,
                    className: n || null,
                    cssStyle: p || null
                }), void 0)
            },
            state: function(b, c, d, e, f, g, h) {
                var i, j, l, m = b.selection.getSelectedOwnNodes(),
                    n = [];
                for (d = "string" == typeof d ? d.toUpperCase() : d, j = 0, l = m.length; l > j; j++) i = k.getParentElement(m[j], {
                    nodeName: d,
                    className: e,
                    classRegExp: f,
                    cssStyle: g,
                    styleRegExp: h
                }), i && -1 == a.lang.array(n).indexOf(i) && n.push(i);
                return 0 == n.length ? !1 : n
            }
        }
    }(wysihtml5), wysihtml5.commands.formatCode = {
    exec: function(a, b, c) {
        var d, e, f, g = this.state(a);
        g ? a.selection.executeAndRestore(function() {
            d = g.querySelector("code"), wysihtml5.dom.replaceWithChildNodes(g), d && wysihtml5.dom.replaceWithChildNodes(d)
        }) : (e = a.selection.getRange(), f = e.extractContents(), g = a.doc.createElement("pre"), d = a.doc.createElement("code"), c && (d.className = c), g.appendChild(d), d.appendChild(f), e.insertNode(g), a.selection.selectNode(g))
    },
    state: function(a) {
        var b = a.selection.getSelectedNode();
        return b && b.nodeName && "PRE" == b.nodeName && b.firstChild && b.firstChild.nodeName && "CODE" == b.firstChild.nodeName ? b : wysihtml5.dom.getParentElement(b, {
            nodeName: "CODE"
        }) && wysihtml5.dom.getParentElement(b, {
            nodeName: "PRE"
        })
    }
},
    function(a) {
        function b(a) {
            var b = d[a];
            return b ? [a.toLowerCase(), b.toLowerCase()] : [a.toLowerCase()]
        }

        function c(c, d, f, g, h, i) {
            var j = c;
            return d && (j += ":" + d), g && (j += ":" + g), e[j] || (e[j] = new a.selection.HTMLApplier(b(c), d, f, !0, g, h, i)), e[j]
        }
        var d = {
                strong: "b",
                em: "i",
                b: "strong",
                i: "em"
            },
            e = {};
        a.commands.formatInline = {
            exec: function(a, b, d, e, f, g, h, i, j) {
                var k = a.selection.createRange(),
                    l = a.selection.getOwnRanges();
                return l && 0 != l.length ? (a.selection.getSelection().removeAllRanges(), c(d, e, f, g, h, a.element).toggleRange(l), i ? j || a.cleanUp() : (k.setStart(l[0].startContainer, l[0].startOffset), k.setEnd(l[l.length - 1].endContainer, l[l.length - 1].endOffset), a.selection.setSelection(k), a.selection.executeAndRestore(function() {
                    j || a.cleanUp()
                }, !0, !0)), void 0) : !1
            },
            execWithToggle: function(b, c, d, e, f, g, h) {
                var i, j = this;
                this.state(b, c, d, e, f, g, h) && b.selection.isCollapsed() && !b.selection.caretIsLastInSelection() && !b.selection.caretIsFirstInSelection() ? (i = j.state(b, c, d, e, f)[0], b.selection.executeAndRestoreRangy(function() {
                    i.parentNode;
                    b.selection.selectNode(i, !0), a.commands.formatInline.exec(b, c, d, e, f, g, h, !0, !0)
                })) : this.state(b, c, d, e, f, g, h) && !b.selection.isCollapsed() ? b.selection.executeAndRestoreRangy(function() {
                    a.commands.formatInline.exec(b, c, d, e, f, g, h, !0, !0)
                }) : a.commands.formatInline.exec(b, c, d, e, f, g, h)
            },
            state: function(b, e, f, g, h, i, j) {
                var k, l, m = b.doc,
                    n = d[f] || f;
                return a.dom.hasElementWithTagName(m, f) || a.dom.hasElementWithTagName(m, n) ? g && !a.dom.hasElementWithClassName(m, g) ? !1 : (k = b.selection.getOwnRanges(), k && 0 !== k.length ? (l = c(f, g, h, i, j, b.element).isAppliedToRange(k), l && l.elements ? l.elements : !1) : !1) : !1
            }
        }
    }(wysihtml5),
    function(a) {
        a.commands.insertBlockQuote = {
            exec: function(b, c) {
                var d = this.state(b, c),
                    e = b.selection.isEndToEndInNode(["H1", "H2", "H3", "H4", "H5", "H6", "P"]);
                b.selection.executeAndRestore(function() {
                    if (d) b.config.useLineBreaks && a.dom.lineBreaks(d).add(), a.dom.unwrap(d);
                    else if (b.selection.isCollapsed() && b.selection.selectLine(), e) {
                        var c = e.ownerDocument.createElement("blockquote");
                        a.dom.insert(c).after(e), c.appendChild(e)
                    } else b.selection.surround({
                        nodeName: "blockquote"
                    })
                })
            },
            state: function(b) {
                var c = b.selection.getSelectedNode(),
                    d = a.dom.getParentElement(c, {
                        nodeName: "BLOCKQUOTE"
                    }, !1, b.element);
                return d ? d : !1
            }
        }
    }(wysihtml5), wysihtml5.commands.insertHTML = {
    exec: function(a, b, c) {
        a.commands.support(b) ? a.doc.execCommand(b, !1, c) : a.selection.insertHTML(c)
    },
    state: function() {
        return !1
    }
},
    function(a) {
        var b = "IMG";
        a.commands.insertImage = {
            exec: function(c, d, e) {
                var f, g, h, i, j;
                if (e = "object" == typeof e ? e : {
                    src: e
                }, f = c.doc, g = this.state(c), g) return c.selection.setBefore(g), i = g.parentNode, i.removeChild(g), a.dom.removeEmptyTextNodes(i), "A" !== i.nodeName || i.firstChild || (c.selection.setAfter(i), i.parentNode.removeChild(i)), a.quirks.redraw(c.element), void 0;
                g = f.createElement(b);
                for (j in e) g.setAttribute("className" === j ? "class" : j, e[j]);
                c.selection.insertNode(g), a.browser.hasProblemsSettingCaretAfterImg() ? (h = f.createTextNode(a.INVISIBLE_SPACE), c.selection.insertNode(h), c.selection.setAfter(h)) : c.selection.setAfter(g)
            },
            state: function(c) {
                var d, e, f, g = c.doc;
                return a.dom.hasElementWithTagName(g, b) ? (d = c.selection.getSelectedNode(), d ? d.nodeName === b ? d : d.nodeType !== a.ELEMENT_NODE ? !1 : (e = c.selection.getText(), e = a.lang.string(e).trim(), e ? !1 : (f = c.selection.getNodes(a.ELEMENT_NODE, function(a) {
                    return "IMG" === a.nodeName
                }), 1 !== f.length ? !1 : f[0])) : !1) : !1
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "<br>" + (a.browser.needsSpaceAfterLineBreak() ? " " : "");
        a.commands.insertLineBreak = {
            exec: function(c, d) {
                c.commands.support(d) ? (c.doc.execCommand(d, !1, null), a.browser.autoScrollsToCaret() || c.selection.scrollIntoView()) : c.commands.exec("insertHTML", b)
            },
            state: function() {
                return !1
            }
        }
    }(wysihtml5), wysihtml5.commands.insertOrderedList = {
    exec: function(a, b) {
        wysihtml5.commands.insertList.exec(a, b, "OL")
    },
    state: function(a, b) {
        return wysihtml5.commands.insertList.state(a, b, "OL")
    }
}, wysihtml5.commands.insertUnorderedList = {
    exec: function(a, b) {
        wysihtml5.commands.insertList.exec(a, b, "UL")
    },
    state: function(a, b) {
        return wysihtml5.commands.insertList.state(a, b, "UL")
    }
}, wysihtml5.commands.insertList = function(a) {
    var b = function(a, b) {
            if (a && a.nodeName) {
                "string" == typeof b && (b = [b]);
                for (var c = b.length; c--;)
                    if (a.nodeName === b[c]) return !0
            }
            return !1
        },
        c = function(c, d, e) {
            var f, g, h = {
                el: null,
                other: !1
            };
            return c && (f = a.dom.getParentElement(c, {
                nodeName: "LI"
            }), g = "UL" === d ? "OL" : "UL", b(c, d) ? h.el = c : b(c, g) ? h = {
                el: c,
                other: !0
            } : f && (b(f.parentNode, d) ? h.el = f.parentNode : b(f.parentNode, g) && (h = {
                el: f.parentNode,
                other: !0
            }))), h.el && !e.element.contains(h.el) && (h.el = null), h
        },
        d = function(b, c, d) {
            var e, g = "UL" === c ? "OL" : "UL";
            d.selection.executeAndRestore(function() {
                var h, i, j = f(g, d);
                if (j.length)
                    for (h = j.length; h--;) a.dom.renameElement(j[h], c.toLowerCase());
                else {
                    for (e = f(["OL", "UL"], d), i = e.length; i--;) a.dom.resolveList(e[i], d.config.useLineBreaks);
                    a.dom.resolveList(b, d.config.useLineBreaks)
                }
            })
        },
        e = function(b, c, d) {
            var e = "UL" === c ? "OL" : "UL";
            d.selection.executeAndRestore(function() {
                var g, h = [b].concat(f(e, d));
                for (g = h.length; g--;) a.dom.renameElement(h[g], c.toLowerCase())
            })
        },
        f = function(a, c) {
            var d, e = c.selection.getOwnRanges(),
                f = [];
            for (d = e.length; d--;) f = f.concat(e[d].getNodes([1], function(c) {
                return b(c, a)
            }));
            return f
        },
        g = function(b, c) {
            c.selection.executeAndRestoreRangy(function() {
                var d, e, f = "_wysihtml5-temp-" + (new Date).getTime(),
                    g = c.selection.deblockAndSurround({
                        nodeName: "div",
                        className: f
                    }),
                    h = /\uFEFF/g;
                g.innerHTML = g.innerHTML.replace(h, ""), g && (d = a.lang.array(["", "<br>", a.INVISIBLE_SPACE]).contains(g.innerHTML), e = a.dom.convertToList(g, b.toLowerCase(), c.parent.config.uneditableContainerClassname), d && c.selection.selectNode(e.querySelector("li"), !0))
            })
        };
    return {
        exec: function(a, b, f) {
            var h = a.doc,
                i = "OL" === f ? "insertOrderedList" : "insertUnorderedList",
                j = a.selection.getSelectedNode(),
                k = c(j, f, a);
            k.el ? k.other ? e(k.el, f, a) : d(k.el, f, a) : a.commands.support(i) ? h.execCommand(i, !1, null) : g(f, a)
        },
        state: function(a, b, d) {
            var e = a.selection.getSelectedNode(),
                f = c(e, d, a);
            return f.el && !f.other ? f.el : !1
        }
    }
}(wysihtml5), wysihtml5.commands.italic = {
    exec: function(a, b) {
        wysihtml5.commands.formatInline.execWithToggle(a, b, "i")
    },
    state: function(a, b) {
        return wysihtml5.commands.formatInline.state(a, b, "i")
    }
},
    function(a) {
        var b = "wysiwyg-text-align-center",
            c = /wysiwyg-text-align-[0-9a-z]+/g;
        a.commands.justifyCenter = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "wysiwyg-text-align-left",
            c = /wysiwyg-text-align-[0-9a-z]+/g;
        a.commands.justifyLeft = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "wysiwyg-text-align-right",
            c = /wysiwyg-text-align-[0-9a-z]+/g;
        a.commands.justifyRight = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "wysiwyg-text-align-justify",
            c = /wysiwyg-text-align-[0-9a-z]+/g;
        a.commands.justifyFull = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "text-align: right;",
            c = /(\s|^)text-align\s*:\s*[^;\s]+;?/gi;
        a.commands.alignRightStyle = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, null, null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, null, null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "text-align: left;",
            c = /(\s|^)text-align\s*:\s*[^;\s]+;?/gi;
        a.commands.alignLeftStyle = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, null, null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, null, null, b, c)
            }
        }
    }(wysihtml5),
    function(a) {
        var b = "text-align: center;",
            c = /(\s|^)text-align\s*:\s*[^;\s]+;?/gi;
        a.commands.alignCenterStyle = {
            exec: function(d) {
                return a.commands.formatBlock.exec(d, "formatBlock", null, null, null, b, c)
            },
            state: function(d) {
                return a.commands.formatBlock.state(d, "formatBlock", null, null, null, b, c)
            }
        }
    }(wysihtml5), wysihtml5.commands.redo = {
    exec: function(a) {
        return a.undoManager.redo()
    },
    state: function() {
        return !1
    }
}, wysihtml5.commands.underline = {
    exec: function(a, b) {
        wysihtml5.commands.formatInline.execWithToggle(a, b, "u")
    },
    state: function(a, b) {
        return wysihtml5.commands.formatInline.state(a, b, "u")
    }
}, wysihtml5.commands.undo = {
    exec: function(a) {
        return a.undoManager.undo()
    },
    state: function() {
        return !1
    }
}, wysihtml5.commands.createTable = {
    exec: function(a, b, c) {
        var d, e, f;
        if (c && c.cols && c.rows && parseInt(c.cols, 10) > 0 && parseInt(c.rows, 10) > 0) {
            for (f = c.tableStyle ? '<table style="' + c.tableStyle + '">' : "<table>", f += "<tbody>", e = 0; e < c.rows; e++) {
                for (f += "<tr>", d = 0; d < c.cols; d++) f += "<td>&nbsp;</td>";
                f += "</tr>"
            }
            f += "</tbody></table>", a.commands.exec("insertHTML", f)
        }
    },
    state: function() {
        return !1
    }
}, wysihtml5.commands.mergeTableCells = {
    exec: function(a, b) {
        a.tableSelection && a.tableSelection.start && a.tableSelection.end && (this.state(a, b) ? wysihtml5.dom.table.unmergeCell(a.tableSelection.start) : wysihtml5.dom.table.mergeCellsBetween(a.tableSelection.start, a.tableSelection.end))
    },
    state: function(a) {
        if (a.tableSelection) {
            var b = a.tableSelection.start,
                c = a.tableSelection.end;
            if (b && c && b == c && (wysihtml5.dom.getAttribute(b, "colspan") && parseInt(wysihtml5.dom.getAttribute(b, "colspan"), 10) > 1 || wysihtml5.dom.getAttribute(b, "rowspan") && parseInt(wysihtml5.dom.getAttribute(b, "rowspan"), 10) > 1)) return [b]
        }
        return !1
    }
}, wysihtml5.commands.addTableCells = {
    exec: function(a, b, c) {
        if (a.tableSelection && a.tableSelection.start && a.tableSelection.end) {
            var d = wysihtml5.dom.table.orderSelectionEnds(a.tableSelection.start, a.tableSelection.end);
            "before" == c || "above" == c ? wysihtml5.dom.table.addCells(d.start, c) : ("after" == c || "below" == c) && wysihtml5.dom.table.addCells(d.end, c), setTimeout(function() {
                a.tableSelection.select(d.start, d.end)
            }, 0)
        }
    },
    state: function() {
        return !1
    }
}, wysihtml5.commands.deleteTableCells = {
    exec: function(a, b, c) {
        if (a.tableSelection && a.tableSelection.start && a.tableSelection.end) {
            var d, e = wysihtml5.dom.table.orderSelectionEnds(a.tableSelection.start, a.tableSelection.end),
                f = wysihtml5.dom.table.indexOf(e.start),
                g = a.tableSelection.table;
            wysihtml5.dom.table.removeCells(e.start, c), setTimeout(function() {
                d = wysihtml5.dom.table.findCell(g, f), d || ("row" == c && (d = wysihtml5.dom.table.findCell(g, {
                    row: f.row - 1,
                    col: f.col
                })), "column" == c && (d = wysihtml5.dom.table.findCell(g, {
                    row: f.row,
                    col: f.col - 1
                }))), d && a.tableSelection.select(d, d)
            }, 0)
        }
    },
    state: function() {
        return !1
    }
}, wysihtml5.commands.indentList = {
    exec: function(a) {
        var b = a.selection.getSelectionParentsByTag("LI");
        return b ? this.tryToPushLiLevel(b, a.selection) : !1
    },
    state: function() {
        return !1
    },
    tryToPushLiLevel: function(a, b) {
        var c, d, e, f, g, h = !1;
        return b.executeAndRestoreRangy(function() {
            for (var b = a.length; b--;) f = a[b], c = "OL" === f.parentNode.nodeName ? "OL" : "UL", d = f.ownerDocument.createElement(c), e = wysihtml5.dom.domNode(f).prev({
                nodeTypes: [wysihtml5.ELEMENT_NODE]
            }), g = e ? e.querySelector("ul, ol") : null, e && (g ? g.appendChild(f) : (d.appendChild(f), e.appendChild(d)), h = !0)
        }), h
    }
}, wysihtml5.commands.outdentList = {
    exec: function(a) {
        var b = a.selection.getSelectionParentsByTag("LI");
        return b ? this.tryToPullLiLevel(b, a) : !1
    },
    state: function() {
        return !1
    },
    tryToPullLiLevel: function(a, b) {
        var c, d, e, f, g, h = !1,
            i = this;
        return b.selection.executeAndRestoreRangy(function() {
            var j, k;
            for (j = a.length; j--;)
                if (f = a[j], f.parentNode && (c = f.parentNode, "OL" === c.tagName || "UL" === c.tagName)) {
                    if (h = !0, d = wysihtml5.dom.getParentElement(c.parentNode, {
                        nodeName: ["OL", "UL"]
                    }, !1, b.element), e = wysihtml5.dom.getParentElement(c.parentNode, {
                        nodeName: ["LI"]
                    }, !1, b.element), d && e) f.nextSibling && (g = i.getAfterList(c, f), f.appendChild(g)), d.insertBefore(f, e.nextSibling);
                    else {
                        for (f.nextSibling && (g = i.getAfterList(c, f), f.appendChild(g)), k = f.childNodes.length; k--;) c.parentNode.insertBefore(f.childNodes[k], c.nextSibling);
                        c.parentNode.insertBefore(document.createElement("br"), c.nextSibling), f.parentNode.removeChild(f)
                    }
                    0 === c.childNodes.length && c.parentNode.removeChild(c)
                }
        }), h
    },
    getAfterList: function(a, b) {
        for (var c = a.nodeName, d = document.createElement(c); b.nextSibling;) d.appendChild(b.nextSibling);
        return d
    }
},
    function(a) {
        var b = 90,
            c = 89,
            d = 8,
            e = 46,
            f = 25,
            g = "data-wysihtml5-selection-node",
            h = "data-wysihtml5-selection-offset",
            i = ('<span id="_wysihtml5-undo" class="_wysihtml5-temp">' + a.INVISIBLE_SPACE + "</span>", '<span id="_wysihtml5-redo" class="_wysihtml5-temp">' + a.INVISIBLE_SPACE + "</span>", a.dom);
        a.UndoManager = a.lang.Dispatcher.extend({
            constructor: function(a) {
                this.editor = a, this.composer = a.composer, this.element = this.composer.element, this.position = 0, this.historyStr = [], this.historyDom = [], this.transact(), this._observe()
            },
            _observe: function() {
                {
                    var a, f = this;
                    this.composer.sandbox.getDocument()
                }
                i.observe(this.element, "keydown", function(a) {
                    if (!a.altKey && (a.ctrlKey || a.metaKey)) {
                        var d = a.keyCode,
                            e = d === b && !a.shiftKey,
                            g = d === b && a.shiftKey || d === c;
                        e ? (f.undo(), a.preventDefault()) : g && (f.redo(), a.preventDefault())
                    }
                }), i.observe(this.element, "keydown", function(b) {
                    var c = b.keyCode;
                    c !== a && (a = c, (c === d || c === e) && f.transact())
                }), this.editor.on("newword:composer", function() {
                    f.transact()
                }).on("beforecommand:composer", function() {
                    f.transact()
                })
            },
            transact: function() {
                var b, c, d, e, i, j, k, l = this.historyStr[this.position - 1],
                    m = this.composer.getValue(!1, !1),
                    n = this.element.offsetWidth > 0 && this.element.offsetHeight > 0;
                m !== l && (j = this.historyStr.length = this.historyDom.length = this.position, j > f && (this.historyStr.shift(), this.historyDom.shift(), this.position--), this.position++, n && (b = this.composer.selection.getRange(), c = b && b.startContainer ? b.startContainer : this.element, d = b && b.startOffset ? b.startOffset : 0, c.nodeType === a.ELEMENT_NODE ? e = c : (e = c.parentNode, i = this.getChildNodeIndex(e, c)), e.setAttribute(h, d), void 0 !== i && e.setAttribute(g, i)), k = this.element.cloneNode(!!m), this.historyDom.push(k), this.historyStr.push(m), e && (e.removeAttribute(h), e.removeAttribute(g)))
            },
            undo: function() {
                this.transact(), this.undoPossible() && (this.set(this.historyDom[--this.position - 1]), this.editor.fire("undo:composer"))
            },
            redo: function() {
                this.redoPossible() && (this.set(this.historyDom[++this.position - 1]), this.editor.fire("redo:composer"))
            },
            undoPossible: function() {
                return this.position > 1
            },
            redoPossible: function() {
                return this.position < this.historyStr.length
            },
            set: function(a) {
                var b, c, d, e, f, i;
                for (this.element.innerHTML = "", b = 0, c = a.childNodes, d = a.childNodes.length; d > b; b++) this.element.appendChild(c[b].cloneNode(!0));
                a.hasAttribute(h) ? (e = a.getAttribute(h), i = a.getAttribute(g), f = this.element) : (f = this.element.querySelector("[" + h + "]") || this.element, e = f.getAttribute(h), i = f.getAttribute(g), f.removeAttribute(h), f.removeAttribute(g)), null !== i && (f = this.getChildNodeByIndex(f, +i)), this.composer.selection.set(f, e)
            },
            getChildNodeIndex: function(a, b) {
                for (var c = 0, d = a.childNodes, e = d.length; e > c; c++)
                    if (d[c] === b) return c
            },
            getChildNodeByIndex: function(a, b) {
                return a.childNodes[b]
            }
        })
    }(wysihtml5), wysihtml5.views.View = Base.extend({
    constructor: function(a, b, c) {
        this.parent = a, this.element = b, this.config = c, this.config.noTextarea || this._observeViewChange()
    },
    _observeViewChange: function() {
        var a = this;
        this.parent.on("beforeload", function() {
            a.parent.on("change_view", function(b) {
                b === a.name ? (a.parent.currentView = a, a.show(), setTimeout(function() {
                    a.focus()
                }, 0)) : a.hide()
            })
        })
    },
    focus: function() {
        if (this.element.ownerDocument.querySelector(":focus") !== this.element) try {
            this.element.focus()
        } catch (a) {}
    },
    hide: function() {
        this.element.style.display = "none"
    },
    show: function() {
        this.element.style.display = ""
    },
    disable: function() {
        this.element.setAttribute("disabled", "disabled")
    },
    enable: function() {
        this.element.removeAttribute("disabled")
    }
}),
    function(a) {
        var b = a.dom,
            c = a.browser;
        a.views.Composer = a.views.View.extend({
            name: "composer",
            CARET_HACK: "<br>",
            constructor: function(a, b, c) {
                this.base(a, b, c), this.config.noTextarea ? this.editableArea = b : this.textarea = this.parent.textarea, this.config.contentEditableMode ? this._initContentEditableArea() : this._initSandbox()
            },
            clear: function() {
                this.element.innerHTML = c.displaysCaretInEmptyContentEditableCorrectly() ? "" : this.CARET_HACK
            },
            getValue: function(b, c) {
                var d = this.isEmpty() ? "" : a.quirks.getCorrectInnerHTML(this.element);
                return b !== !1 && (d = this.parent.parse(d, c === !1 ? !1 : !0)), d
            },
            setValue: function(a, b) {
                b && (a = this.parent.parse(a));
                try {
                    this.element.innerHTML = a
                } catch (c) {
                    this.element.innerText = a
                }
            },
            cleanUp: function() {
                this.parent.parse(this.element)
            },
            show: function() {
                this.editableArea.style.display = this._displayStyle || "", this.config.noTextarea || this.textarea.element.disabled || (this.disable(), this.enable())
            },
            hide: function() {
                this._displayStyle = b.getStyle("display").from(this.editableArea), "none" === this._displayStyle && (this._displayStyle = null), this.editableArea.style.display = "none"
            },
            disable: function() {
                this.parent.fire("disable:composer"), this.element.removeAttribute("contentEditable")
            },
            enable: function() {
                this.parent.fire("enable:composer"), this.element.setAttribute("contentEditable", "true")
            },
            focus: function(b) {
                a.browser.doesAsyncFocus() && this.hasPlaceholderSet() && this.clear(), this.base();
                var c = this.element.lastChild;
                b && c && this.selection && ("BR" === c.nodeName ? this.selection.setBefore(this.element.lastChild) : this.selection.setAfter(this.element.lastChild))
            },
            getTextContent: function() {
                return b.getTextContent(this.element)
            },
            hasPlaceholderSet: function() {
                return this.getTextContent() == (this.config.noTextarea ? this.editableArea.getAttribute("data-placeholder") : this.textarea.element.getAttribute("placeholder")) && this.placeholderSet
            },
            isEmpty: function() {
                var a = this.element.innerHTML.toLowerCase();
                return /^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(a) || "" === a || "<br>" === a || "<p></p>" === a || "<p><br></p>" === a || this.hasPlaceholderSet()
            },
            _initContentEditableArea: function() {
                var a = this;
                this.config.noTextarea ? this.sandbox = new b.ContentEditableArea(function() {
                    a._create()
                }, {}, this.editableArea) : (this.sandbox = new b.ContentEditableArea(function() {
                    a._create()
                }), this.editableArea = this.sandbox.getContentEditable(), b.insert(this.editableArea).after(this.textarea.element), this._createWysiwygFormField())
            },
            _initSandbox: function() {
                var a, c = this;
                this.sandbox = new b.Sandbox(function() {
                    c._create()
                }, {
                    stylesheets: this.config.stylesheets
                }), this.editableArea = this.sandbox.getIframe(), a = this.textarea.element, b.insert(this.editableArea).after(a), this._createWysiwygFormField()
            },
            _createWysiwygFormField: function() {
                if (this.textarea.element.form) {
                    var a = document.createElement("input");
                    a.type = "hidden", a.name = "_wysihtml5_mode", a.value = 1, b.insert(a).after(this.textarea.element)
                }
            },
            _create: function() {
                var d, e, f = this;
                this.doc = this.sandbox.getDocument(), this.element = this.config.contentEditableMode ? this.sandbox.getContentEditable() : this.doc.body, this.config.noTextarea ? this.cleanUp() : (this.textarea = this.parent.textarea, this.element.innerHTML = this.textarea.getValue(!0, !1)), this.selection = new a.Selection(this.parent, this.element, this.config.uneditableContainerClassname), this.commands = new a.Commands(this.parent), this.config.noTextarea || b.copyAttributes(["className", "spellcheck", "title", "lang", "dir", "accessKey"]).from(this.textarea.element).to(this.element), b.addClass(this.element, this.config.composerClassName), this.config.style && !this.config.contentEditableMode && this.style(), this.observe(), d = this.config.name, d && (b.addClass(this.element, d), this.config.contentEditableMode || b.addClass(this.editableArea, d)), this.enable(), !this.config.noTextarea && this.textarea.element.disabled && this.disable(), e = "string" == typeof this.config.placeholder ? this.config.placeholder : this.config.noTextarea ? this.editableArea.getAttribute("data-placeholder") : this.textarea.element.getAttribute("placeholder"), e && b.simulatePlaceholder(this.parent, this, e), this.commands.exec("styleWithCSS", !1), this._initAutoLinking(), this._initObjectResizing(), this._initUndoManager(), this._initLineBreaking(), this.config.noTextarea || !this.textarea.element.hasAttribute("autofocus") && document.querySelector(":focus") != this.textarea.element || c.isIos() || setTimeout(function() {
                    f.focus(!0)
                }, 100), c.clearsContentEditableCorrectly() || a.quirks.ensureProperClearing(this), this.initSync && this.config.sync && this.initSync(), this.config.noTextarea || this.textarea.hide(), this.parent.fire("beforeload").fire("load")
            },
            _initAutoLinking: function() {
                var d, e, f, g = this,
                    h = c.canDisableAutoLinking(),
                    i = c.doesAutoLinkingInContentEditable();
                h && this.commands.exec("autoUrlDetect", !1), this.config.autoLink && ((!i || i && h) && (this.parent.on("newword:composer", function() {
                    b.getTextContent(g.element).match(b.autoLink.URL_REG_EXP) && g.selection.executeAndRestore(function(c, d) {
                        var e, f = g.element.querySelectorAll("." + g.config.uneditableContainerClassname),
                            h = !1;
                        for (e = f.length; e--;) a.dom.contains(f[e], d) && (h = !0);
                        h || b.autoLink(d.parentNode, [g.config.uneditableContainerClassname])
                    })
                }), b.observe(this.element, "blur", function() {
                    b.autoLink(g.element, [g.config.uneditableContainerClassname])
                })), d = this.sandbox.getDocument().getElementsByTagName("a"), e = b.autoLink.URL_REG_EXP, f = function(c) {
                    var d = a.lang.string(b.getTextContent(c)).trim();
                    return "www." === d.substr(0, 4) && (d = "http://" + d), d
                }, b.observe(this.element, "keydown", function(a) {
                    if (d.length) {
                        var c, h = g.selection.getSelectedNode(a.target.ownerDocument),
                            i = b.getParentElement(h, {
                                nodeName: "A"
                            }, 4);
                        i && (c = f(i), setTimeout(function() {
                            var a = f(i);
                            a !== c && a.match(e) && i.setAttribute("href", a)
                        }, 0))
                    }
                }))
            },
            _initObjectResizing: function() {
                if (this.commands.exec("enableObjectResizing", !0), c.supportsEvent("resizeend")) {
                    var d = ["width", "height"],
                        e = d.length,
                        f = this.element;
                    b.observe(f, "resizeend", function(b) {
                        var c, g = b.target || b.srcElement,
                            h = g.style,
                            i = 0;
                        if ("IMG" === g.nodeName) {
                            for (; e > i; i++) c = d[i], h[c] && (g.setAttribute(c, parseInt(h[c], 10)), h[c] = "");
                            a.quirks.redraw(f)
                        }
                    })
                }
            },
            _initUndoManager: function() {
                this.undoManager = new a.UndoManager(this.parent)
            },
            _initLineBreaking: function() {
                function d(a) {
                    var c = b.getParentElement(a, {
                        nodeName: ["P", "DIV"]
                    }, 2);
                    c && b.contains(e.element, c) && e.selection.executeAndRestore(function() {
                        e.config.useLineBreaks ? b.replaceWithChildNodes(c) : "P" !== c.nodeName && b.renameElement(c, "p")
                    })
                }
                var e = this,
                    f = ["LI", "P", "H1", "H2", "H3", "H4", "H5", "H6"],
                    g = ["UL", "OL", "MENU"];
                this.config.useLineBreaks || b.observe(this.element, ["focus", "keydown"], function() {
                    if (e.isEmpty()) {
                        var a = e.doc.createElement("P");
                        e.element.innerHTML = "", e.element.appendChild(a), c.displaysCaretInEmptyContentEditableCorrectly() ? e.selection.selectNode(a, !0) : (a.innerHTML = "<br>", e.selection.setBefore(a.firstChild))
                    }
                }), b.observe(this.element, "keydown", function(c) {
                    var h, i = c.keyCode;
                    if (!c.shiftKey && (i === a.ENTER_KEY || i === a.BACKSPACE_KEY)) return h = b.getParentElement(e.selection.getSelectedNode(), {
                        nodeName: f
                    }, 4), h ? (setTimeout(function() {
                        var c, f = e.selection.getSelectedNode();
                        if ("LI" === h.nodeName) {
                            if (!f) return;
                            c = b.getParentElement(f, {
                                nodeName: g
                            }, 2), c || d(f)
                        }
                        i === a.ENTER_KEY && h.nodeName.match(/^H[1-6]$/) && d(f)
                    }, 0), void 0) : (e.config.useLineBreaks && i === a.ENTER_KEY && !a.browser.insertsLineBreaksOnReturn() && (c.preventDefault(), e.commands.exec("insertLineBreak")), void 0)
                })
            }
        })
    }(wysihtml5),
    function(a) {
        var b = a.dom,
            c = document,
            d = window,
            e = c.createElement("div"),
            f = ["background-color", "color", "cursor", "font-family", "font-size", "font-style", "font-variant", "font-weight", "line-height", "letter-spacing", "text-align", "text-decoration", "text-indent", "text-rendering", "word-break", "word-wrap", "word-spacing"],
            g = ["background-color", "border-collapse", "border-bottom-color", "border-bottom-style", "border-bottom-width", "border-left-color", "border-left-style", "border-left-width", "border-right-color", "border-right-style", "border-right-width", "border-top-color", "border-top-style", "border-top-width", "clear", "display", "float", "margin-bottom", "margin-left", "margin-right", "margin-top", "outline-color", "outline-offset", "outline-width", "outline-style", "padding-left", "padding-right", "padding-top", "padding-bottom", "position", "top", "left", "right", "bottom", "z-index", "vertical-align", "text-align", "-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing", "-webkit-box-shadow", "-moz-box-shadow", "-ms-box-shadow", "box-shadow", "-webkit-border-top-right-radius", "-moz-border-radius-topright", "border-top-right-radius", "-webkit-border-bottom-right-radius", "-moz-border-radius-bottomright", "border-bottom-right-radius", "-webkit-border-bottom-left-radius", "-moz-border-radius-bottomleft", "border-bottom-left-radius", "-webkit-border-top-left-radius", "-moz-border-radius-topleft", "border-top-left-radius", "width", "height"],
            h = ["html                 { height: 100%; }", "body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }", "body > p:first-child { margin-top: 0; }", "._wysihtml5-temp     { display: none; }", a.browser.isGecko ? "body.placeholder { color: graytext !important; }" : "body.placeholder { color: #a9a9a9 !important; }", "img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],
            i = function(a) {
                if (a.setActive) try {
                    a.setActive()
                } catch (e) {} else {
                    var f = a.style,
                        g = c.documentElement.scrollTop || c.body.scrollTop,
                        h = c.documentElement.scrollLeft || c.body.scrollLeft,
                        i = {
                            position: f.position,
                            top: f.top,
                            left: f.left,
                            WebkitUserSelect: f.WebkitUserSelect
                        };
                    b.setStyles({
                        position: "absolute",
                        top: "-99999px",
                        left: "-99999px",
                        WebkitUserSelect: "none"
                    }).on(a), a.focus(), b.setStyles(i).on(a), d.scrollTo && d.scrollTo(h, g)
                }
            };
        a.views.Composer.prototype.style = function() {
            var d, j, k = this,
                l = c.querySelector(":focus"),
                m = this.textarea.element,
                n = m.hasAttribute("placeholder"),
                o = n && m.getAttribute("placeholder"),
                p = m.style.display,
                q = m.disabled;
            return this.focusStylesHost = e.cloneNode(!1), this.blurStylesHost = e.cloneNode(!1), this.disabledStylesHost = e.cloneNode(!1), n && m.removeAttribute("placeholder"), m === l && m.blur(), m.disabled = !1, m.style.display = d = "none", (m.getAttribute("rows") && "auto" === b.getStyle("height").from(m) || m.getAttribute("cols") && "auto" === b.getStyle("width").from(m)) && (m.style.display = d = p), b.copyStyles(g).from(m).to(this.editableArea).andTo(this.blurStylesHost), b.copyStyles(f).from(m).to(this.element).andTo(this.blurStylesHost), b.insertCSS(h).into(this.element.ownerDocument), m.disabled = !0, b.copyStyles(g).from(m).to(this.disabledStylesHost), b.copyStyles(f).from(m).to(this.disabledStylesHost), m.disabled = q, m.style.display = p, i(m), m.style.display = d, b.copyStyles(g).from(m).to(this.focusStylesHost), b.copyStyles(f).from(m).to(this.focusStylesHost), m.style.display = p, b.copyStyles(["display"]).from(m).to(this.editableArea), j = a.lang.array(g).without(["display"]), l ? l.focus() : m.blur(), n && m.setAttribute("placeholder", o), this.parent.on("focus:composer", function() {
                b.copyStyles(j).from(k.focusStylesHost).to(k.editableArea), b.copyStyles(f).from(k.focusStylesHost).to(k.element)
            }), this.parent.on("blur:composer", function() {
                b.copyStyles(j).from(k.blurStylesHost).to(k.editableArea), b.copyStyles(f).from(k.blurStylesHost).to(k.element)
            }), this.parent.observe("disable:composer", function() {
                b.copyStyles(j).from(k.disabledStylesHost).to(k.editableArea), b.copyStyles(f).from(k.disabledStylesHost).to(k.element)
            }), this.parent.observe("enable:composer", function() {
                b.copyStyles(j).from(k.blurStylesHost).to(k.editableArea), b.copyStyles(f).from(k.blurStylesHost).to(k.element)
            }), this
        }
    }(wysihtml5),
    function(a) {
        var b = a.dom,
            c = a.browser,
            d = {
                66: "bold",
                73: "italic",
                85: "underline"
            },
            e = function(a, b, c) {
                var d, e = a.getPreviousNode(b, !0),
                    f = a.getSelectedNode();
                if (1 !== f.nodeType && f.parentNode !== c && (f = f.parentNode), e)
                    if (1 == f.nodeType) {
                        if (d = f.firstChild, 1 == e.nodeType)
                            for (; f.firstChild;) e.appendChild(f.firstChild);
                        else
                            for (; f.firstChild;) b.parentNode.insertBefore(f.firstChild, b);
                        f.parentNode && f.parentNode.removeChild(f), a.setBefore(d)
                    } else 1 == e.nodeType ? e.appendChild(f) : b.parentNode.insertBefore(f, b), a.setBefore(f)
            },
            f = function(a, b, c, d) {
                var f, g, h;
                b.isCollapsed() ? b.caretIsInTheBeginnig("LI") ? (a.preventDefault(), d.commands.exec("outdentList")) : b.caretIsInTheBeginnig() ? a.preventDefault() : (b.caretIsFirstInSelection() && b.getPreviousNode() && b.getPreviousNode().nodeName && /^H\d$/gi.test(b.getPreviousNode().nodeName) && (f = b.getPreviousNode(), a.preventDefault(), /^\s*$/.test(f.textContent || f.innerText) ? f.parentNode.removeChild(f) : (g = f.ownerDocument.createRange(), g.selectNodeContents(f), g.collapse(!1), b.setSelection(g))), h = b.caretIsBeforeUneditable(), h && (a.preventDefault(), e(b, h, c))) : b.containsUneditable() && (a.preventDefault(), b.deleteContents())
            },
            g = function(a) {
                if (a.selection.isCollapsed()) {
                    if (a.selection.caretIsInTheBeginnig("LI") && a.commands.exec("indentList")) return
                } else a.selection.deleteContents();
                a.commands.exec("insertHTML", "&emsp;")
            };
        a.views.Composer.prototype.observe = function() {
            var e, h, i = this,
                j = this.getValue(!1, !1),
                k = this.sandbox.getIframe ? this.sandbox.getIframe() : this.sandbox.getContentEditable(),
                l = this.element,
                m = c.supportsEventsInIframeCorrectly() || this.sandbox.getContentEditable ? l : this.sandbox.getWindow(),
                n = ["drop", "paste", "beforepaste"],
                o = ["drop", "paste", "mouseup", "focus", "keyup"];
            b.observe(k, "DOMNodeRemoved", function() {
                clearInterval(e), i.parent.fire("destroy:composer")
            }), c.supportsMutationEvents() || (e = setInterval(function() {
                b.contains(document.documentElement, k) || (clearInterval(e), i.parent.fire("destroy:composer"))
            }, 250)), b.observe(m, o, function() {
                setTimeout(function() {
                    i.parent.fire("interaction").fire("interaction:composer")
                }, 0)
            }), this.config.handleTables && (!this.tableClickHandle && this.doc.execCommand && a.browser.supportsCommand(this.doc, "enableObjectResizing") && a.browser.supportsCommand(this.doc, "enableInlineTableEditing") && (this.sandbox.getIframe ? this.tableClickHandle = b.observe(k, ["focus", "mouseup", "mouseover"], function() {
                i.doc.execCommand("enableObjectResizing", !1, "false"), i.doc.execCommand("enableInlineTableEditing", !1, "false"), i.tableClickHandle.stop()
            }) : setTimeout(function() {
                i.doc.execCommand("enableObjectResizing", !1, "false"), i.doc.execCommand("enableInlineTableEditing", !1, "false")
            }, 0)), this.tableSelection = a.quirks.tableCellsSelection(l, i.parent)), b.observe(m, "focus", function(a) {
                i.parent.fire("focus", a).fire("focus:composer", a), setTimeout(function() {
                    j = i.getValue(!1, !1)
                }, 0)
            }), b.observe(m, "blur", function(a) {
                if (j !== i.getValue(!1, !1)) {
                    var b = a;
                    "function" == typeof Object.create && (b = Object.create(a, {
                        type: {
                            value: "change"
                        }
                    })), i.parent.fire("change", b).fire("change:composer", b)
                }
                i.parent.fire("blur", a).fire("blur:composer", a)
            }), b.observe(l, "dragenter", function() {
                i.parent.fire("unset_placeholder")
            }), b.observe(l, n, function(a) {
                i.parent.fire(a.type, a).fire(a.type + ":composer", a)
            }), this.config.copyedFromMarking && b.observe(l, "copy", function(a) {
                a.clipboardData && (a.clipboardData.setData("text/html", i.config.copyedFromMarking + i.selection.getHtml()), a.preventDefault()), i.parent.fire(a.type, a).fire(a.type + ":composer", a)
            }), b.observe(l, "keyup", function(b) {
                var c = b.keyCode;
                (c === a.SPACE_KEY || c === a.ENTER_KEY) && i.parent.fire("newword:composer")
            }), this.parent.on("paste:composer", function() {
                setTimeout(function() {
                    i.parent.fire("newword:composer")
                }, 0)
            }), c.canSelectImagesInContentEditable() || b.observe(l, "mousedown", function(b) {
                var c = b.target,
                    d = l.querySelectorAll("img"),
                    e = l.querySelectorAll("." + i.config.uneditableContainerClassname + " img"),
                    f = a.lang.array(d).without(e);
                "IMG" === c.nodeName && a.lang.array(f).contains(c) && i.selection.selectNode(c)
            }), c.canSelectImagesInContentEditable() || b.observe(l, "drop", function() {
                setTimeout(function() {
                    i.selection.getSelection().removeAllRanges()
                }, 0)
            }), c.hasHistoryIssue() && c.supportsSelectionModify() && b.observe(l, "keydown", function(a) {
                if (a.metaKey || a.ctrlKey) {
                    var b = a.keyCode,
                        c = l.ownerDocument.defaultView,
                        d = c.getSelection();
                    (37 === b || 39 === b) && (37 === b && (d.modify("extend", "left", "lineboundary"), a.shiftKey || d.collapseToStart()), 39 === b && (d.modify("extend", "right", "lineboundary"), a.shiftKey || d.collapseToEnd()), a.preventDefault())
                }
            }), b.observe(l, "keydown", function(a) {
                var b = a.keyCode,
                    c = d[b];
                (a.ctrlKey || a.metaKey) && !a.altKey && c && (i.commands.exec(c), a.preventDefault()), 8 === b ? f(a, i.selection, l, i) : i.config.handleTabKey && 9 === b && (a.preventDefault(), g(i, l))
            }), b.observe(l, "keydown", function(b) {
                var c, d = i.selection.getSelectedNode(!0),
                    e = b.keyCode;
                !d || "IMG" !== d.nodeName || e !== a.BACKSPACE_KEY && e !== a.DELETE_KEY || (c = d.parentNode, c.removeChild(d), "A" !== c.nodeName || c.firstChild || c.parentNode.removeChild(c), setTimeout(function() {
                    a.quirks.redraw(l)
                }, 0), b.preventDefault())
            }), !this.config.contentEditableMode && c.hasIframeFocusIssue() && (b.observe(k, "focus", function() {
                setTimeout(function() {
                    i.doc.querySelector(":focus") !== i.element && i.focus()
                }, 0)
            }), b.observe(this.element, "blur", function() {
                setTimeout(function() {
                    i.selection.getSelection().removeAllRanges()
                }, 0)
            })), h = {
                IMG: "Image: ",
                A: "Link: "
            }, b.observe(l, "mouseover", function(a) {
                var b, c, d = a.target,
                    e = d.nodeName;
                ("A" === e || "IMG" === e) && (c = d.hasAttribute("title"), c || (b = h[e] + (d.getAttribute("href") || d.getAttribute("src")), d.setAttribute("title", b)))
            })
        }
    }(wysihtml5),
function(a) {
    var b = 400;
    a.views.Synchronizer = Base.extend({
        constructor: function(a, b, c) {
            this.editor = a, this.textarea = b, this.composer = c, this._observe()
        },
        fromComposerToTextarea: function(b) {
            this.textarea.setValue(a.lang.string(this.composer.getValue(!1, !1)).trim(), b)
        },
        fromTextareaToComposer: function(a) {
            var b = this.textarea.getValue(!1, !1);
            b ? this.composer.setValue(b, a) : (this.composer.clear(), this.editor.fire("set_placeholder"))
        },
        sync: function(a) {
            "textarea" === this.editor.currentView.name ? this.fromTextareaToComposer(a) : this.fromComposerToTextarea(a)
        },
        _observe: function() {
            var c, d = this,
                e = this.textarea.element.form,
                f = function() {
                    c = setInterval(function() {
                        d.fromComposerToTextarea()
                    }, b)
                },
                g = function() {
                    clearInterval(c), c = null
                };
            f(), e && (a.dom.observe(e, "submit", function() {
                d.sync(!0)
            }), a.dom.observe(e, "reset", function() {
                setTimeout(function() {
                    d.fromTextareaToComposer()
                }, 0)
            })), this.editor.on("change_view", function(a) {
                "composer" !== a || c ? "textarea" === a && (d.fromComposerToTextarea(!0), g()) : (d.fromTextareaToComposer(!0), f())
            }), this.editor.on("destroy:composer", g)
        }
    })
}(wysihtml5), wysihtml5.views.Textarea = wysihtml5.views.View.extend({
    name: "textarea",
    constructor: function(a, b, c) {
        this.base(a, b, c), this._observe()
    },
    clear: function() {
        this.element.value = ""
    },
    getValue: function(a) {
        var b = this.isEmpty() ? "" : this.element.value;
        return a !== !1 && (b = this.parent.parse(b)), b
    },
    setValue: function(a, b) {
        b && (a = this.parent.parse(a)), this.element.value = a
    },
    cleanUp: function() {
        var a = this.parent.parse(this.element.value);
        this.element.value = a
    },
    hasPlaceholderSet: function() {
        var a = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),
            b = this.element.getAttribute("placeholder") || null,
            c = this.element.value,
            d = !c;
        return a && d || c === b
    },
    isEmpty: function() {
        return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet()
    },
    _observe: function() {
        var a = this.element,
            b = this.parent,
            c = {
                focusin: "focus",
                focusout: "blur"
            },
            d = wysihtml5.browser.supportsEvent("focusin") ? ["focusin", "focusout", "change"] : ["focus", "blur", "change"];
        b.on("beforeload", function() {
            wysihtml5.dom.observe(a, d, function(a) {
                var d = c[a.type] || a.type;
                b.fire(d).fire(d + ":textarea")
            }), wysihtml5.dom.observe(a, ["paste", "drop"], function() {
                setTimeout(function() {
                    b.fire("paste").fire("paste:textarea")
                }, 0)
            })
        })
    }
}),
function(a) {
    var b, c = {
        name: b,
        style: !0,
        toolbar: b,
        showToolbarAfterInit: !0,
        autoLink: !0,
        handleTables: !0,
        handleTabKey: !0,
        parserRules: {
            tags: {
                br: {},
                span: {},
                div: {},
                p: {}
            },
            classes: {}
        },
        pasteParserRulesets: null,
        parser: a.dom.parse,
        composerClassName: "wysihtml5-editor",
        bodyClassName: "wysihtml5-supported",
        useLineBreaks: !0,
        stylesheets: [],
        placeholderText: b,
        supportTouchDevices: !0,
        cleanUp: !0,
        contentEditableMode: !1,
        uneditableContainerClassname: "wysihtml5-uneditable-container",
        copyedFromMarking: '<meta name="copied-from" content="wysihtml5">'
    };
    a.Editor = a.lang.Dispatcher.extend({
        constructor: function(b, d) {
            if (this.editableElement = "string" == typeof b ? document.getElementById(b) : b, this.config = a.lang.object({}).merge(c).merge(d).get(), this._isCompatible = a.browser.supported(), "textarea" != this.editableElement.nodeName.toLowerCase() && (this.config.contentEditableMode = !0, this.config.noTextarea = !0), this.config.noTextarea || (this.textarea = new a.views.Textarea(this, this.editableElement, this.config), this.currentView = this.textarea), !this._isCompatible || !this.config.supportTouchDevices && a.browser.isTouchDevice()) {
                var e = this;
                return setTimeout(function() {
                    e.fire("beforeload").fire("load")
                }, 0), void 0
            }
            a.dom.addClass(document.body, this.config.bodyClassName), this.composer = new a.views.Composer(this, this.editableElement, this.config), this.currentView = this.composer, "function" == typeof this.config.parser && this._initParser(), this.on("beforeload", this.handleBeforeLoad)
        },
        handleBeforeLoad: function() {
            this.config.noTextarea || (this.synchronizer = new a.views.Synchronizer(this, this.textarea, this.composer)), this.config.toolbar && (this.toolbar = new a.toolbar.Toolbar(this, this.config.toolbar, this.config.showToolbarAfterInit))
        },
        isCompatible: function() {
            return this._isCompatible
        },
        clear: function() {
            return this.currentView.clear(), this
        },
        getValue: function(a, b) {
            return this.currentView.getValue(a, b)
        },
        setValue: function(a, b) {
            return this.fire("unset_placeholder"), a ? (this.currentView.setValue(a, b), this) : this.clear()
        },
        cleanUp: function() {
            this.currentView.cleanUp()
        },
        focus: function(a) {
            return this.currentView.focus(a), this
        },
        disable: function() {
            return this.currentView.disable(), this
        },
        enable: function() {
            return this.currentView.enable(), this
        },
        isEmpty: function() {
            return this.currentView.isEmpty()
        },
        hasPlaceholderSet: function() {
            return this.currentView.hasPlaceholderSet()
        },
        parse: function(b, c) {
            var d = this.config.contentEditableMode ? document : this.composer ? this.composer.sandbox.getDocument() : null,
                e = this.config.parser(b, {
                    rules: this.config.parserRules,
                    cleanUp: this.config.cleanUp,
                    context: d,
                    uneditableClass: this.config.uneditableContainerClassname,
                    clearInternals: c
                });
            return "object" == typeof b && a.quirks.redraw(b), e
        },
        _initParser: function() {
            var b, c = this;
            a.browser.supportsModenPaste() ? this.on("paste:composer", function(d) {
                d.preventDefault(), b = a.dom.getPastedHtml(d), b && c._cleanAndPaste(b)
            }) : this.on("beforepaste:composer", function(b) {
                b.preventDefault(), a.dom.getPastedHtmlWithDiv(c.composer, function(a) {
                    a && c._cleanAndPaste(a)
                })
            })
        },
        _cleanAndPaste: function(b) {
            var c = a.quirks.cleanPastedHTML(b, {
                referenceNode: this.composer.element,
                rules: this.config.pasteParserRulesets || [{
                    set: this.config.parserRules
                }],
                uneditableClass: this.config.uneditableContainerClassname
            });
            this.composer.selection.deleteContents(), this.composer.selection.insertHTML(c)
        }
    })
}(wysihtml5),
function(a) {
    var b = a.dom,
        c = "wysihtml5-command-dialog-opened",
        d = "input, select, textarea",
        e = "[data-wysihtml5-dialog-field]",
        f = "data-wysihtml5-dialog-field";
    a.toolbar.Dialog = a.lang.Dispatcher.extend({
        constructor: function(a, b) {
            this.link = a, this.container = b
        },
        _observe: function() {
            var e, f, g, h, i, j;
            if (!this._observed) {
                for (e = this, f = function(a) {
                    var b = e._serialize();
                    b == e.elementToChange ? e.fire("edit", b) : e.fire("save", b), e.hide(), a.preventDefault(), a.stopPropagation()
                }, b.observe(e.link, "click", function() {
                    b.hasClass(e.link, c) && setTimeout(function() {
                        e.hide()
                    }, 0)
                }), b.observe(this.container, "keydown", function(b) {
                    var c = b.keyCode;
                    c === a.ENTER_KEY && f(b), c === a.ESCAPE_KEY && (e.fire("cancel"), e.hide())
                }), b.delegate(this.container, "[data-wysihtml5-dialog-action=save]", "click", f), b.delegate(this.container, "[data-wysihtml5-dialog-action=cancel]", "click", function(a) {
                    e.fire("cancel"), e.hide(), a.preventDefault(), a.stopPropagation()
                }), g = this.container.querySelectorAll(d), h = 0, i = g.length, j = function() {
                    clearInterval(e.interval)
                }; i > h; h++) b.observe(g[h], "change", j);
                this._observed = !0
            }
        },
        _serialize: function() {
            for (var a = this.elementToChange || {}, b = this.container.querySelectorAll(e), c = b.length, d = 0; c > d; d++) a[b[d].getAttribute(f)] = b[d].value;
            return a
        },
        _interpolate: function(a) {
            for (var b, c, d, g = document.querySelector(":focus"), h = this.container.querySelectorAll(e), i = h.length, j = 0; i > j; j++) b = h[j], b !== g && (a && "hidden" === b.type || (c = b.getAttribute(f), d = this.elementToChange && "boolean" != typeof this.elementToChange ? this.elementToChange.getAttribute(c) || "" : b.defaultValue, b.value = d))
        },
        show: function(a) {
            if (!b.hasClass(this.link, c)) {
                var e = this,
                    f = this.container.querySelector(d);
                if (this.elementToChange = a, this._observe(), this._interpolate(), a && (this.interval = setInterval(function() {
                    e._interpolate(!0)
                }, 500)), b.addClass(this.link, c), this.container.style.display = "", this.fire("show"), f && !a) try {
                    f.focus()
                } catch (g) {}
            }
        },
        hide: function() {
            clearInterval(this.interval), this.elementToChange = null, b.removeClass(this.link, c), this.container.style.display = "none", this.fire("hide")
        }
    })
}(wysihtml5),
function(a) {
    var b = a.dom,
        c = {
            position: "relative"
        },
        d = {
            left: 0,
            margin: 0,
            opacity: 0,
            overflow: "hidden",
            padding: 0,
            position: "absolute",
            top: 0,
            zIndex: 1
        },
        e = {
            cursor: "inherit",
            fontSize: "50px",
            height: "50px",
            marginTop: "-25px",
            outline: 0,
            padding: 0,
            position: "absolute",
            right: "-4px",
            top: "50%"
        },
        f = {
            "x-webkit-speech": "",
            speech: ""
        };
    a.toolbar.Speech = function(g, h) {
        var i, j, k, l = document.createElement("input");
        return a.browser.supportsSpeechApiOn(l) ? (i = g.editor.textarea.element.getAttribute("lang"), i && (f.lang = i), j = document.createElement("div"), a.lang.object(d).merge({
            width: h.offsetWidth + "px",
            height: h.offsetHeight + "px"
        }), b.insert(l).into(j), b.insert(j).into(h), b.setStyles(e).on(l), b.setAttributes(f).on(l), b.setStyles(d).on(j), b.setStyles(c).on(h), k = "onwebkitspeechchange" in l ? "webkitspeechchange" : "speechchange", b.observe(l, k, function() {
            g.execCommand("insertText", l.value), l.value = ""
        }), b.observe(l, "click", function(a) {
            b.hasClass(h, "wysihtml5-command-disabled") && a.preventDefault(), a.stopPropagation()
        }), void 0) : (h.style.display = "none", void 0)
    }
}(wysihtml5),
function(a) {
    var b = "wysihtml5-command-disabled",
        c = "wysihtml5-commands-disabled",
        d = "wysihtml5-command-active",
        e = "wysihtml5-action-active",
        f = a.dom;
    a.toolbar.Toolbar = Base.extend({
        constructor: function(f, g, h) {
            this.editor = f, this.container = "string" == typeof g ? document.getElementById(g) : g, this.composer = f.composer, this._getLinks("command"), this._getLinks("action"), this._observe(), h && this.show(), null != f.config.classNameCommandDisabled && (b = f.config.classNameCommandDisabled), null != f.config.classNameCommandsDisabled && (c = f.config.classNameCommandsDisabled), null != f.config.classNameCommandActive && (d = f.config.classNameCommandActive), null != f.config.classNameActionActive && (e = f.config.classNameActionActive);
            for (var i = this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"), j = i.length, k = 0; j > k; k++) new a.toolbar.Speech(this, i[k])
        },
        _getLinks: function(b) {
            for (var c, d, e, f, g, h = this[b + "Links"] = a.lang.array(this.container.querySelectorAll("[data-wysihtml5-" + b + "]")).get(), i = h.length, j = 0, k = this[b + "Mapping"] = {}; i > j; j++) c = h[j], e = c.getAttribute("data-wysihtml5-" + b), f = c.getAttribute("data-wysihtml5-" + b + "-value"), d = this.container.querySelector("[data-wysihtml5-" + b + "-group='" + e + "']"), g = this._getDialog(c, e), k[e + ":" + f] = {
                link: c,
                group: d,
                name: e,
                value: f,
                dialog: g,
                state: !1
            }
        },
        _getDialog: function(b, c) {
            var d, e, f = this,
                g = this.container.querySelector("[data-wysihtml5-dialog='" + c + "']");
            return g && (d = a.toolbar["Dialog_" + c] ? new a.toolbar["Dialog_" + c](b, g) : new a.toolbar.Dialog(b, g), d.on("show", function() {
                e = f.composer.selection.getBookmark(), f.editor.fire("show:dialog", {
                    command: c,
                    dialogContainer: g,
                    commandLink: b
                })
            }), d.on("save", function(a) {
                e && f.composer.selection.setBookmark(e), f._execCommand(c, a), f.editor.fire("save:dialog", {
                    command: c,
                    dialogContainer: g,
                    commandLink: b
                })
            }), d.on("cancel", function() {
                f.editor.focus(!1), f.editor.fire("cancel:dialog", {
                    command: c,
                    dialogContainer: g,
                    commandLink: b
                })
            })), d
        },
        execCommand: function(a, b) {
            if (!this.commandsDisabled) {
                var c = this.commandMapping[a + ":" + b];
                c && c.dialog && !c.state ? c.dialog.show() : this._execCommand(a, b)
            }
        },
        _execCommand: function(a, b) {
            this.editor.focus(!1), this.composer.commands.exec(a, b), this._updateLinkStates()
        },
        execAction: function(a) {
            var b = this.editor;
            "change_view" === a && b.textarea && (b.currentView === b.textarea ? b.fire("change_view", "composer") : b.fire("change_view", "textarea")), "showSource" == a && b.fire("showSource")
        },
        _observe: function() {
            for (var a = this, b = this.editor, d = this.container, e = this.commandLinks.concat(this.actionLinks), g = e.length, h = 0; g > h; h++) "A" === e[h].nodeName ? f.setAttributes({
                href: "javascript:;",
                unselectable: "on"
            }).on(e[h]) : f.setAttributes({
                unselectable: "on"
            }).on(e[h]);
            f.delegate(d, "[data-wysihtml5-command], [data-wysihtml5-action]", "mousedown", function(a) {
                a.preventDefault()
            }), f.delegate(d, "[data-wysihtml5-command]", "click", function(b) {
                var c = this,
                    d = c.getAttribute("data-wysihtml5-command"),
                    e = c.getAttribute("data-wysihtml5-command-value");
                a.execCommand(d, e), b.preventDefault()
            }), f.delegate(d, "[data-wysihtml5-action]", "click", function(b) {
                var c = this.getAttribute("data-wysihtml5-action");
                a.execAction(c), b.preventDefault()
            }), b.on("interaction:composer", function() {
                a._updateLinkStates()
            }), b.on("focus:composer", function() {
                a.bookmark = null
            }), this.editor.config.handleTables && (b.on("tableselect:composer", function() {
                a.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display = ""
            }), b.on("tableunselect:composer", function() {
                a.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display = "none"
            })), b.on("change_view", function(e) {
                b.textarea && setTimeout(function() {
                    a.commandsDisabled = "composer" !== e, a._updateLinkStates(), a.commandsDisabled ? f.addClass(d, c) : f.removeClass(d, c)
                }, 0)
            })
        },
        _updateLinkStates: function() {
            var c, g, h, i, j = this.commandMapping,
                k = this.actionMapping;
            for (c in j) i = j[c], this.commandsDisabled ? (g = !1, f.removeClass(i.link, d), i.group && f.removeClass(i.group, d), i.dialog && i.dialog.hide()) : (g = this.composer.commands.state(i.name, i.value), f.removeClass(i.link, b), i.group && f.removeClass(i.group, b)), i.state !== g && (i.state = g, g ? (f.addClass(i.link, d), i.group && f.addClass(i.group, d), i.dialog && ("object" == typeof g || a.lang.object(g).isArray() ? (!i.dialog.multiselect && a.lang.object(g).isArray() && (g = 1 === g.length ? g[0] : !0, i.state = g), i.dialog.show(g)) : i.dialog.hide())) : (f.removeClass(i.link, d), i.group && f.removeClass(i.group, d), i.dialog && i.dialog.hide()));
            for (c in k) h = k[c], "change_view" === h.name && (h.state = this.editor.currentView === this.editor.textarea, h.state ? f.addClass(h.link, e) : f.removeClass(h.link, e))
        },
        show: function() {
            this.container.style.display = ""
        },
        hide: function() {
            this.container.style.display = "none"
        }
    })
}(wysihtml5),
function(a) {
    a.toolbar.Dialog_createTable = a.toolbar.Dialog.extend({
        show: function(a) {
            this.base(a)
        }
    })
}(wysihtml5),
function(a) {
    var b = (a.dom, "[data-wysihtml5-dialog-field]"),
        c = "data-wysihtml5-dialog-field";
    a.toolbar.Dialog_foreColorStyle = a.toolbar.Dialog.extend({
        multiselect: !0,
        _serialize: function() {
            for (var a = {}, d = this.container.querySelectorAll(b), e = d.length, f = 0; e > f; f++) a[d[f].getAttribute(c)] = d[f].value;
            return a
        },
        _interpolate: function(d) {
            for (var e, f = document.querySelector(":focus"), g = this.container.querySelectorAll(b), h = g.length, i = 0, j = this.elementToChange ? a.lang.object(this.elementToChange).isArray() ? this.elementToChange[0] : this.elementToChange : null, k = j ? j.getAttribute("style") : null, l = k ? a.quirks.styleParser.parseColor(k, "color") : null; h > i; i++) e = g[i], e !== f && (d && "hidden" === e.type || "color" === e.getAttribute(c) && (e.value = l ? l[3] && 1 != l[3] ? "rgba(" + l[0] + "," + l[1] + "," + l[2] + "," + l[3] + ");" : "rgb(" + l[0] + "," + l[1] + "," + l[2] + ");" : "rgb(0,0,0);"))
        }
    })
}(wysihtml5),
function(a) {
    a.dom;
    a.toolbar.Dialog_fontSizeStyle = a.toolbar.Dialog.extend({
        multiselect: !0,
        _serialize: function() {
            return {
                size: this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value
            }
        },
        _interpolate: function() {
            var b = document.querySelector(":focus"),
                c = this.container.querySelector("[data-wysihtml5-dialog-field='size']"),
                d = this.elementToChange ? a.lang.object(this.elementToChange).isArray() ? this.elementToChange[0] : this.elementToChange : null,
                e = d ? d.getAttribute("style") : null,
                f = e ? a.quirks.styleParser.parseFontSize(e) : null;
            c && c !== b && f && !/^\s*$/.test(f) && (c.value = f)
        }
    })
}(wysihtml5), Handlebars = function() {
    var a = function() {
            "use strict";

            function a(a) {
                this.string = a
            }
            var b;
            return a.prototype.toString = function() {
                return "" + this.string
            }, b = a
        }(),
        b = function(a) {
            "use strict";

            function b(a) {
                return k[a] || "&amp;"
            }

            function c(a, b) {
                for (var c in b) Object.prototype.hasOwnProperty.call(b, c) && (a[c] = b[c])
            }

            function d(a) {
                return a instanceof j ? "" + a : a || 0 === a ? (a = "" + a, m.test(a) ? a.replace(l, b) : a) : ""
            }

            function e(a) {
                return a || 0 === a ? h(a) && 0 === a.length ? !0 : !1 : !0
            }
            var f, g, h, i = {},
                j = a,
                k = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#x27;",
                    "`": "&#x60;"
                },
                l = /[&<>"'`]/g,
                m = /[&<>"'`]/;
            return i.extend = c, f = Object.prototype.toString, i.toString = f, g = function(a) {
                return "function" == typeof a
            }, g(/x/) && (g = function(a) {
                return "function" == typeof a && "[object Function]" === f.call(a)
            }), i.isFunction = g, h = Array.isArray || function(a) {
                return a && "object" == typeof a ? "[object Array]" === f.call(a) : !1
            }, i.isArray = h, i.escapeExpression = d, i.isEmpty = e, i
        }(a),
        c = function() {
            "use strict";

            function a(a, b) {
                var d, e, f;
                for (b && b.firstLine && (d = b.firstLine, a += " - " + d + ":" + b.firstColumn), e = Error.prototype.constructor.call(this, a), f = 0; f < c.length; f++) this[c[f]] = e[c[f]];
                d && (this.lineNumber = d, this.column = b.firstColumn)
            }
            var b, c = ["description", "fileName", "lineNumber", "message", "name", "number", "stack"];
            return a.prototype = Error(), b = a
        }(),
        d = function(a, b) {
            "use strict";

            function c(a, b) {
                this.helpers = a || {}, this.partials = b || {}, d(this)
            }

            function d(a) {
                a.registerHelper("helperMissing", function(a) {
                    if (2 === arguments.length) return void 0;
                    throw new p("Missing helper: '" + a + "'")
                }), a.registerHelper("blockHelperMissing", function(b, c) {
                    var d = c.inverse || function() {},
                        e = c.fn;
                    return i(b) && (b = b.call(this)), b === !0 ? e(this) : b === !1 || null == b ? d(this) : h(b) ? b.length > 0 ? a.helpers.each(b, c) : d(this) : e(b)
                }), a.registerHelper("each", function(a, b) {
                    var c, d, e, f = b.fn,
                        g = b.inverse,
                        j = 0,
                        k = "";
                    if (i(a) && (a = a.call(this)), b.data && (c = m(b.data)), a && "object" == typeof a)
                        if (h(a))
                            for (d = a.length; d > j; j++) c && (c.index = j, c.first = 0 === j, c.last = j === a.length - 1), k += f(a[j], {
                                data: c
                            });
                        else
                            for (e in a) a.hasOwnProperty(e) && (c && (c.key = e, c.index = j, c.first = 0 === j), k += f(a[e], {
                                data: c
                            }), j++);
                    return 0 === j && (k = g(this)), k
                }), a.registerHelper("if", function(a, b) {
                    return i(a) && (a = a.call(this)), !b.hash.includeZero && !a || o.isEmpty(a) ? b.inverse(this) : b.fn(this)
                }), a.registerHelper("unless", function(b, c) {
                    return a.helpers["if"].call(this, b, {
                        fn: c.inverse,
                        inverse: c.fn,
                        hash: c.hash
                    })
                }), a.registerHelper("with", function(a, b) {
                    return i(a) && (a = a.call(this)), o.isEmpty(a) ? void 0 : b.fn(a)
                }), a.registerHelper("log", function(b, c) {
                    var d = c.data && null != c.data.level ? parseInt(c.data.level, 10) : 1;
                    a.log(d, b)
                })
            }

            function e(a, b) {
                l.log(a, b)
            }
            var f, g, h, i, j, k, l, m, n = {},
                o = a,
                p = b,
                q = "1.3.0";
            return n.VERSION = q, f = 4, n.COMPILER_REVISION = f, g = {
                1: "<= 1.0.rc.2",
                2: "== 1.0.0-rc.3",
                3: "== 1.0.0-rc.4",
                4: ">= 1.0.0"
            }, n.REVISION_CHANGES = g, h = o.isArray, i = o.isFunction, j = o.toString, k = "[object Object]", n.HandlebarsEnvironment = c, c.prototype = {
                constructor: c,
                logger: l,
                log: e,
                registerHelper: function(a, b, c) {
                    if (j.call(a) === k) {
                        if (c || b) throw new p("Arg not supported with multiple helpers");
                        o.extend(this.helpers, a)
                    } else c && (b.not = c), this.helpers[a] = b
                },
                registerPartial: function(a, b) {
                    j.call(a) === k ? o.extend(this.partials, a) : this.partials[a] = b
                }
            }, l = {
                methodMap: {
                    0: "debug",
                    1: "info",
                    2: "warn",
                    3: "error"
                },
                DEBUG: 0,
                INFO: 1,
                WARN: 2,
                ERROR: 3,
                level: 3,
                log: function(a, b) {
                    if (l.level <= a) {
                        var c = l.methodMap[a];
                        "undefined" != typeof console && console[c] && console[c].call(console, b)
                    }
                }
            }, n.logger = l, n.log = e, m = function(a) {
                var b = {};
                return o.extend(b, a), b
            }, n.createFrame = m, n
        }(b, c),
        e = function(a, b, c) {
            "use strict";

            function d(a) {
                var b, c, d = a && a[0] || 1,
                    e = m;
                if (d !== e) {
                    if (e > d) throw b = n[e], c = n[d], new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + b + ") or downgrade your runtime to an older version (" + c + ").");
                    throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + a[1] + ").")
                }
            }

            function e(a, b) {
                if (!b) throw new l("No environment passed to template");
                var c = function(a, c, d, e, f, g) {
                        var h, i = b.VM.invokePartial.apply(this, arguments);
                        if (null != i) return i;
                        if (b.compile) return h = {
                            helpers: e,
                            partials: f,
                            data: g
                        }, f[c] = b.compile(a, {
                            data: void 0 !== g
                        }, b), f[c](d, h);
                        throw new l("The partial " + c + " could not be compiled when running in runtime-only mode")
                    },
                    d = {
                        escapeExpression: k.escapeExpression,
                        invokePartial: c,
                        programs: [],
                        program: function(a, b, c) {
                            var d = this.programs[a];
                            return c ? d = g(a, b, c) : d || (d = this.programs[a] = g(a, b)), d
                        },
                        merge: function(a, b) {
                            var c = a || b;
                            return a && b && a !== b && (c = {}, k.extend(c, b), k.extend(c, a)), c
                        },
                        programWithDepth: b.VM.programWithDepth,
                        noop: b.VM.noop,
                        compilerInfo: null
                    };
                return function(c, e) {
                    var f, g, h, i;
                    return e = e || {}, h = e.partial ? e : b, e.partial || (f = e.helpers, g = e.partials), i = a.call(d, h, c, f, g, e.data), e.partial || b.VM.checkRevision(d.compilerInfo), i
                }
            }

            function f(a, b, c) {
                var d = Array.prototype.slice.call(arguments, 3),
                    e = function(a, e) {
                        return e = e || {}, b.apply(this, [a, e.data || c].concat(d))
                    };
                return e.program = a, e.depth = d.length, e
            }

            function g(a, b, c) {
                var d = function(a, d) {
                    return d = d || {}, b(a, d.data || c)
                };
                return d.program = a, d.depth = 0, d
            }

            function h(a, b, c, d, e, f) {
                var g = {
                    partial: !0,
                    helpers: d,
                    partials: e,
                    data: f
                };
                if (void 0 === a) throw new l("The partial " + b + " could not be found");
                return a instanceof Function ? a(c, g) : void 0
            }

            function i() {
                return ""
            }
            var j = {},
                k = a,
                l = b,
                m = c.COMPILER_REVISION,
                n = c.REVISION_CHANGES;
            return j.checkRevision = d, j.template = e, j.programWithDepth = f, j.program = g, j.invokePartial = h, j.noop = i, j
        }(b, c, d),
        f = function(a, b, c, d, e) {
            "use strict";
            var f, g = a,
                h = b,
                i = c,
                j = d,
                k = e,
                l = function() {
                    var a = new g.HandlebarsEnvironment;
                    return j.extend(a, g), a.SafeString = h, a.Exception = i, a.Utils = j, a.VM = k, a.template = function(b) {
                        return k.template(b, a)
                    }, a
                },
                m = l();
            return m.create = l, f = m
        }(d, a, c, b, e);
    return f
}(), this.wysihtml5 = this.wysihtml5 || {}, this.wysihtml5.tpl = this.wysihtml5.tpl || {}, this.wysihtml5.tpl.blockquote = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + l((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === k ? b.apply(a) : b)), c
    }

    function g() {
        return ' \n      <span class="fa fa-quote-left"></span>\n    '
    }

    function h() {
        return '\n      <span class="glyphicon glyphicon-quote"></span>\n    '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var i, j = "",
        k = "function",
        l = this.escapeExpression,
        m = this;
    return j += '<li>\n  <a class="btn ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.size), {
        hash: {},
        inverse: m.noop,
        fn: m.program(1, f, e),
        data: e
    }), (i || 0 === i) && (j += i), j += ' btn-default" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote" data-wysihtml5-display-format-name="false" tabindex="-1">\n    ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.fa), {
        hash: {},
        inverse: m.program(5, h, e),
        fn: m.program(3, g, e),
        data: e
    }), (i || 0 === i) && (j += i), j += "\n  </a>\n</li>\n", j
}), this.wysihtml5.tpl.color = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + j((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === i ? b.apply(a) : b)), c
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var g, h = "",
        i = "function",
        j = this.escapeExpression,
        k = this;
    return h += '<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ', g = c["if"].call(b, (g = b && b.options, g = null == g || g === !1 ? g : g.toolbar, null == g || g === !1 ? g : g.size), {
        hash: {},
        inverse: k.noop,
        fn: k.program(1, f, e),
        data: e
    }), (g || 0 === g) && (h += g), h += '" data-toggle="dropdown" tabindex="-1">\n    <span class="current-color">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.black, typeof g === i ? g.apply(b) : g)) + '</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="black"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="black">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.black, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="silver"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="silver">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.silver, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="gray"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="gray">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.gray, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="maroon"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="maroon">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.maroon, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="red"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.red, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="purple"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="purple">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.purple, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="green"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.green, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="olive"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="olive">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.olive, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="navy"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="navy">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.navy, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="blue"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.blue, typeof g === i ? g.apply(b) : g)) + '</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="orange"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="orange">' + j((g = b && b.locale, g = null == g || g === !1 ? g : g.colours, g = null == g || g === !1 ? g : g.orange, typeof g === i ? g.apply(b) : g)) + "</a></li>\n  </ul>\n</li>\n", h
}), this.wysihtml5.tpl.emphasis = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + k((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === j ? b.apply(a) : b)), c
    }

    function g(a, b) {
        var d, e = "";
        return e += '\n    <a class="btn ', d = c["if"].call(a, (d = a && a.options, d = null == d || d === !1 ? d : d.toolbar, null == d || d === !1 ? d : d.size), {
            hash: {},
            inverse: l.noop,
            fn: l.program(1, f, b),
            data: b
        }), (d || 0 === d) && (e += d), e += ' btn-default" data-wysihtml5-command="small" title="CTRL+S" tabindex="-1">' + k((d = a && a.locale, d = null == d || d === !1 ? d : d.emphasis, d = null == d || d === !1 ? d : d.small, typeof d === j ? d.apply(a) : d)) + "</a>\n    ", e
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var h, i = "",
        j = "function",
        k = this.escapeExpression,
        l = this;
    return i += '<li>\n  <div class="btn-group">\n    <a class="btn ', h = c["if"].call(b, (h = b && b.options, h = null == h || h === !1 ? h : h.toolbar, null == h || h === !1 ? h : h.size), {
        hash: {},
        inverse: l.noop,
        fn: l.program(1, f, e),
        data: e
    }), (h || 0 === h) && (i += h), i += ' btn-default" data-wysihtml5-command="bold" title="CTRL+B" tabindex="-1">' + k((h = b && b.locale, h = null == h || h === !1 ? h : h.emphasis, h = null == h || h === !1 ? h : h.bold, typeof h === j ? h.apply(b) : h)) + '</a>\n    <a class="btn ', h = c["if"].call(b, (h = b && b.options, h = null == h || h === !1 ? h : h.toolbar, null == h || h === !1 ? h : h.size), {
        hash: {},
        inverse: l.noop,
        fn: l.program(1, f, e),
        data: e
    }), (h || 0 === h) && (i += h), i += ' btn-default" data-wysihtml5-command="italic" title="CTRL+I" tabindex="-1">' + k((h = b && b.locale, h = null == h || h === !1 ? h : h.emphasis, h = null == h || h === !1 ? h : h.italic, typeof h === j ? h.apply(b) : h)) + '</a>\n    <a class="btn ', h = c["if"].call(b, (h = b && b.options, h = null == h || h === !1 ? h : h.toolbar, null == h || h === !1 ? h : h.size), {
        hash: {},
        inverse: l.noop,
        fn: l.program(1, f, e),
        data: e
    }), (h || 0 === h) && (i += h), i += ' btn-default" data-wysihtml5-command="underline" title="CTRL+U" tabindex="-1">' + k((h = b && b.locale, h = null == h || h === !1 ? h : h.emphasis, h = null == h || h === !1 ? h : h.underline, typeof h === j ? h.apply(b) : h)) + "</a>\n    ", h = c["if"].call(b, (h = b && b.options, h = null == h || h === !1 ? h : h.toolbar, h = null == h || h === !1 ? h : h.emphasis, null == h || h === !1 ? h : h.small), {
        hash: {},
        inverse: l.noop,
        fn: l.program(3, g, e),
        data: e
    }), (h || 0 === h) && (i += h), i += "\n  </div>\n</li>\n", i
}), this.wysihtml5.tpl["font-styles"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + l((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === k ? b.apply(a) : b)), c
    }

    function g() {
        return '\n      <span class="fa fa-font"></span>\n    '
    }

    function h() {
        return '\n      <span class="glyphicon glyphicon-font"></span>\n    '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var i, j = "",
        k = "function",
        l = this.escapeExpression,
        m = this;
    return j += '<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.size), {
        hash: {},
        inverse: m.noop,
        fn: m.program(1, f, e),
        data: e
    }), (i || 0 === i) && (j += i), j += '" data-toggle="dropdown">\n    ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.fa), {
        hash: {},
        inverse: m.program(5, h, e),
        fn: m.program(3, g, e),
        data: e
    }), (i || 0 === i) && (j += i), j += '\n    <span class="current-font">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.normal, typeof i === k ? i.apply(b) : i)) + '</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.normal, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h1, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h2, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h3, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h4, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h5, typeof i === k ? i.apply(b) : i)) + '</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6" tabindex="-1">' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.font_styles, i = null == i || i === !1 ? i : i.h6, typeof i === k ? i.apply(b) : i)) + "</a></li>\n  </ul>\n</li>\n", j
}), this.wysihtml5.tpl.html = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + l((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === k ? b.apply(a) : b)), c
    }

    function g() {
        return '\n        <span class="fa fa-pencil"></span>\n      '
    }

    function h() {
        return '\n        <span class="glyphicon glyphicon-pencil"></span>\n      '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var i, j = "",
        k = "function",
        l = this.escapeExpression,
        m = this;
    return j += '<li>\n  <div class="btn-group">\n    <a class="btn ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.size), {
        hash: {},
        inverse: m.noop,
        fn: m.program(1, f, e),
        data: e
    }), (i || 0 === i) && (j += i), j += ' btn-default" data-wysihtml5-action="change_view" title="' + l((i = b && b.locale, i = null == i || i === !1 ? i : i.html, i = null == i || i === !1 ? i : i.edit, typeof i === k ? i.apply(b) : i)) + '" tabindex="-1">\n      ', i = c["if"].call(b, (i = b && b.options, i = null == i || i === !1 ? i : i.toolbar, null == i || i === !1 ? i : i.fa), {
        hash: {},
        inverse: m.program(5, h, e),
        fn: m.program(3, g, e),
        data: e
    }), (i || 0 === i) && (j += i), j += "\n    </a>\n  </div>\n</li>\n", j
}), this.wysihtml5.tpl.image = Handlebars.template(function(a, b, c, d, e) {
    function f() {
        return "modal-sm"
    }

    function g(a) {
        var b, c = "";
        return c += "btn-" + m((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === l ? b.apply(a) : b)), c
    }

    function h() {
        return '\n      <span class="fa fa-file-image-o"></span>\n    '
    }

    function i() {
        return '\n      <span class="glyphicon glyphicon-picture"></span>\n    '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var j, k = "",
        l = "function",
        m = this.escapeExpression,
        n = this;
    return k += '<li>\n  <div class="bootstrap-wysihtml5-insert-image-modal modal fade" data-wysihtml5-dialog="insertImage">\n    <div class="modal-dialog ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.smallmodals), {
        hash: {},
        inverse: n.noop,
        fn: n.program(1, f, e),
        data: e
    }), (j || 0 === j) && (k += j), k += '">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.image, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-image-url form-control" data-wysihtml5-dialog-field="src">\n          </div> \n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.image, j = null == j || j === !1 ? j : j.cancel, typeof j === l ? j.apply(b) : j)) + '</a>\n          <a class="btn btn-primary" data-dismiss="modal"  data-wysihtml5-dialog-action="save" href="#">' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.image, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.size), {
        hash: {},
        inverse: n.noop,
        fn: n.program(3, g, e),
        data: e
    }), (j || 0 === j) && (k += j), k += ' btn-default" data-wysihtml5-command="insertImage" title="' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.image, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '" tabindex="-1">\n    ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.fa), {
        hash: {},
        inverse: n.program(7, i, e),
        fn: n.program(5, h, e),
        data: e
    }), (j || 0 === j) && (k += j), k += "\n  </a>\n</li>\n", k
}), this.wysihtml5.tpl.link = Handlebars.template(function(a, b, c, d, e) {
    function f() {
        return "modal-sm"
    }

    function g(a) {
        var b, c = "";
        return c += "btn-" + m((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === l ? b.apply(a) : b)), c
    }

    function h() {
        return '\n      <span class="fa fa-share-square-o"></span>\n    '
    }

    function i() {
        return '\n      <span class="glyphicon glyphicon-share"></span>\n    '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var j, k = "",
        l = "function",
        m = this.escapeExpression,
        n = this;
    return k += '<li>\n  <div class="bootstrap-wysihtml5-insert-link-modal modal fade" data-wysihtml5-dialog="createLink">\n    <div class="modal-dialog ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.smallmodals), {
        hash: {},
        inverse: n.noop,
        fn: n.program(1, f, e),
        data: e
    }), (j || 0 === j) && (k += j), k += '">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.link, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-link-url form-control" data-wysihtml5-dialog-field="href">\n          </div> \n          <div class="checkbox">\n            <label> \n              <input type="checkbox" class="bootstrap-wysihtml5-insert-link-target" checked>' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.link, j = null == j || j === !1 ? j : j.target, typeof j === l ? j.apply(b) : j)) + '\n            </label>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.link, j = null == j || j === !1 ? j : j.cancel, typeof j === l ? j.apply(b) : j)) + '</a>\n          <a href="#" class="btn btn-primary" data-dismiss="modal" data-wysihtml5-dialog-action="save">' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.link, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.size), {
        hash: {},
        inverse: n.noop,
        fn: n.program(3, g, e),
        data: e
    }), (j || 0 === j) && (k += j), k += ' btn-default" data-wysihtml5-command="createLink" title="' + m((j = b && b.locale, j = null == j || j === !1 ? j : j.link, j = null == j || j === !1 ? j : j.insert, typeof j === l ? j.apply(b) : j)) + '" tabindex="-1">\n    ', j = c["if"].call(b, (j = b && b.options, j = null == j || j === !1 ? j : j.toolbar, null == j || j === !1 ? j : j.fa), {
        hash: {},
        inverse: n.program(7, i, e),
        fn: n.program(5, h, e),
        data: e
    }), (j || 0 === j) && (k += j), k += "\n  </a>\n</li>\n", k
}), this.wysihtml5.tpl.lists = Handlebars.template(function(a, b, c, d, e) {
    function f(a) {
        var b, c = "";
        return c += "btn-" + r((b = a && a.options, b = null == b || b === !1 ? b : b.toolbar, b = null == b || b === !1 ? b : b.size, typeof b === q ? b.apply(a) : b)), c
    }

    function g() {
        return '\n      <span class="fa fa-list-ul"></span>\n    '
    }

    function h() {
        return '\n      <span class="glyphicon glyphicon-list"></span>\n    '
    }

    function i() {
        return '\n      <span class="fa fa-list-ol"></span>\n    '
    }

    function j() {
        return '\n      <span class="glyphicon glyphicon-th-list"></span>\n    '
    }

    function k() {
        return '\n      <span class="fa fa-outdent"></span>\n    '
    }

    function l() {
        return '\n      <span class="glyphicon glyphicon-indent-right"></span>\n    '
    }

    function m() {
        return '\n      <span class="fa fa-indent"></span>\n    '
    }

    function n() {
        return '\n      <span class="glyphicon glyphicon-indent-left"></span>\n    '
    }
    this.compilerInfo = [4, ">= 1.0.0"], c = this.merge(c, a.helpers), e = e || {};
    var o, p = "",
        q = "function",
        r = this.escapeExpression,
        s = this;
    return p += '<li>\n  <div class="btn-group">\n    <a class="btn ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.size), {
        hash: {},
        inverse: s.noop,
        fn: s.program(1, f, e),
        data: e
    }), (o || 0 === o) && (p += o), p += ' btn-default" data-wysihtml5-command="insertUnorderedList" title="' + r((o = b && b.locale, o = null == o || o === !1 ? o : o.lists, o = null == o || o === !1 ? o : o.unordered, typeof o === q ? o.apply(b) : o)) + '" tabindex="-1">\n    ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.fa), {
        hash: {},
        inverse: s.program(5, h, e),
        fn: s.program(3, g, e),
        data: e
    }), (o || 0 === o) && (p += o), p += '\n    </a>\n    <a class="btn ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.size), {
        hash: {},
        inverse: s.noop,
        fn: s.program(1, f, e),
        data: e
    }), (o || 0 === o) && (p += o), p += ' btn-default" data-wysihtml5-command="insertOrderedList" title="' + r((o = b && b.locale, o = null == o || o === !1 ? o : o.lists, o = null == o || o === !1 ? o : o.ordered, typeof o === q ? o.apply(b) : o)) + '" tabindex="-1">\n    ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.fa), {
        hash: {},
        inverse: s.program(9, j, e),
        fn: s.program(7, i, e),
        data: e
    }), (o || 0 === o) && (p += o), p += '\n    </a>\n    <a class="btn ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.size), {
        hash: {},
        inverse: s.noop,
        fn: s.program(1, f, e),
        data: e
    }), (o || 0 === o) && (p += o), p += ' btn-default" data-wysihtml5-command="Outdent" title="' + r((o = b && b.locale, o = null == o || o === !1 ? o : o.lists, o = null == o || o === !1 ? o : o.outdent, typeof o === q ? o.apply(b) : o)) + '" tabindex="-1">\n    ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.fa), {
        hash: {},
        inverse: s.program(13, l, e),
        fn: s.program(11, k, e),
        data: e
    }), (o || 0 === o) && (p += o), p += '\n    </a>\n    <a class="btn ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.size), {
        hash: {},
        inverse: s.noop,
        fn: s.program(1, f, e),
        data: e
    }), (o || 0 === o) && (p += o), p += ' btn-default" data-wysihtml5-command="Indent" title="' + r((o = b && b.locale, o = null == o || o === !1 ? o : o.lists, o = null == o || o === !1 ? o : o.indent, typeof o === q ? o.apply(b) : o)) + '" tabindex="-1">\n    ', o = c["if"].call(b, (o = b && b.options, o = null == o || o === !1 ? o : o.toolbar, null == o || o === !1 ? o : o.fa), {
        hash: {},
        inverse: s.program(17, n, e),
        fn: s.program(15, m, e),
        data: e
    }), (o || 0 === o) && (p += o), p += "\n    </a>\n  </div>\n</li>\n", p
}),
function(a) {
    "use strict";
    "function" == typeof define && define.amd ? define("bootstrap.wysihtml5", ["publisher-web/public/js/jquery", "wysihtml5", "bootstrap", "bootstrap.wysihtml5.templates", "bootstrap.wysihtml5.commands"], a) : a(jQuery, wysihtml5)
}(function(a, b) {
    "use strict";
    var c = function(a, b) {
        var c, d, e, f = function(a, c, d) {
                return b.tpl[a] ? b.tpl[a]({
                    locale: c,
                    options: d
                }) : void 0
            },
            g = function(c, e) {
                var f, g;
                this.el = c, f = a.extend(!0, {}, d, e);
                for (g in f.customTemplates) f.customTemplates.hasOwnProperty(g) && (b.tpl[g] = f.customTemplates[g]);
                this.toolbar = this.createToolbar(c, f), this.editor = this.createEditor(f)
            };
        g.prototype = {
            constructor: g,
            createEditor: function(b) {
                b = b || {}, b = a.extend(!0, {}, b), b.toolbar = this.toolbar[0], this.initializeEditor(this.el[0], b)
            },
            initializeEditor: function(a, c) {
                var d, e = new b.Editor(this.el[0], c);
                if (e.on("beforeload", this.syncBootstrapDialogEvents), e.on("beforeload", this.loadParserRules), e.composer.editableArea.contentDocument ? this.addMoreShortcuts(e, e.composer.editableArea.contentDocument.body || e.composer.editableArea.contentDocument, c.shortcuts) : this.addMoreShortcuts(e, e.composer.editableArea, c.shortcuts), c && c.events)
                    for (d in c.events) c.events.hasOwnProperty(d) && e.on(d, c.events[d]);
                return e
            },
            loadParserRules: function() {
                "string" === a.type(this.config.parserRules) && a.ajax({
                    dataType: "json",
                    url: this.config.parserRules,
                    context: this,
                    error: function(a, b, c) {
                        void 0
                    },
                    success: function(a) {
                        this.config.parserRules = a, void 0
                    }
                }), this.config.pasteParserRulesets && "string" === a.type(this.config.pasteParserRulesets) && a.ajax({
                    dataType: "json",
                    url: this.config.pasteParserRulesets,
                    context: this,
                    error: function(a, b, c) {
                        void 0
                    },
                    success: function(a) {
                        this.config.pasteParserRulesets = a
                    }
                })
            },
            syncBootstrapDialogEvents: function() {
                var b = this;
                a.map(this.toolbar.commandMapping, function(a) {
                    return [a]
                }).filter(function(a) {
                    return a.dialog
                }).map(function(a) {
                    return a.dialog
                }).forEach(function(c) {
                    c.on("show", function() {
                        a(this.container).modal("show")
                    }), c.on("hide", function() {
                        a(this.container).modal("hide"), setTimeout(b.composer.focus, 0)
                    }), a(c.container).on("shown.bs.modal", function() {
                        a(this).find("input, select, textarea").first().focus()
                    })
                }), this.on("change_view", function() {
                    a(this.toolbar.container.children).find("a.btn").not('[data-wysihtml5-action="change_view"]').toggleClass("disabled")
                })
            },
            createToolbar: function(b, c) {
                var g, h, i = this,
                    j = a("<ul/>", {
                        "class": "wysihtml5-toolbar",
                        style: "display:none"
                    }),
                    k = c.locale || d.locale || "en";
                e.hasOwnProperty(k) || (void 0, k = "en"), g = a.extend(!0, {}, e.en, e[k]);
                for (h in c.toolbar) c.toolbar[h] && j.append(f(h, g, c));
                return j.find('a[data-wysihtml5-command="formatBlock"]').click(function(b) {
                    var c = b.delegateTarget || b.target || b.srcElement,
                        d = a(c),
                        e = d.data("wysihtml5-display-format-name"),
                        f = d.data("wysihtml5-format-name") || d.html();
                    (void 0 === e || "true" === e) && i.toolbar.find(".current-font").text(f)
                }), j.find('a[data-wysihtml5-command="foreColor"]').click(function(b) {
                    var c = b.target || b.srcElement,
                        d = a(c);
                    i.toolbar.find(".current-color").text(d.html())
                }), this.el.before(j), j
            },
            addMoreShortcuts: function(a, c, d) {
                b.dom.observe(c, "keydown", function(c) {
                    var e, f = c.keyCode,
                        g = d[f];
                    (c.ctrlKey || c.metaKey || c.altKey) && g && b.commands[g] && (e = a.toolbar.commandMapping[g + ":null"], e && e.dialog && !e.state ? e.dialog.show() : b.commands[g].exec(a.composer, g), c.preventDefault())
                })
            }
        }, c = {
            resetDefaults: function() {
                a.fn.wysihtml5.defaultOptions = a.extend(!0, {}, a.fn.wysihtml5.defaultOptionsCache)
            },
            bypassDefaults: function(b) {
                return this.each(function() {
                    var c = a(this);
                    c.data("wysihtml5", new g(c, b))
                })
            },
            shallowExtend: function(b) {
                var d = a.extend({}, a.fn.wysihtml5.defaultOptions, b || {}, a(this).data()),
                    e = this;
                return c.bypassDefaults.apply(e, [d])
            },
            deepExtend: function(b) {
                var d = a.extend(!0, {}, a.fn.wysihtml5.defaultOptions, b || {}),
                    e = this;
                return c.bypassDefaults.apply(e, [d])
            },
            init: function(a) {
                var b = this;
                return c.shallowExtend.apply(b, [a])
            }
        }, a.fn.wysihtml5 = function(b) {
            return c[b] ? c[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? (a.error("Method " + b + " does not exist on jQuery.wysihtml5"), void 0) : c.init.apply(this, arguments)
        }, a.fn.wysihtml5.Constructor = g, d = a.fn.wysihtml5.defaultOptions = {
            toolbar: {
                "font-styles": !0,
                color: !1,
                emphasis: {
                    small: !0
                },
                blockquote: !0,
                lists: !0,
                html: !1,
                link: !0,
                image: !0,
                smallmodals: !1
            },
            useLineBreaks: !1,
            parserRules: {
                classes: {
                    "wysiwyg-color-silver": 1,
                    "wysiwyg-color-gray": 1,
                    "wysiwyg-color-white": 1,
                    "wysiwyg-color-maroon": 1,
                    "wysiwyg-color-red": 1,
                    "wysiwyg-color-purple": 1,
                    "wysiwyg-color-fuchsia": 1,
                    "wysiwyg-color-green": 1,
                    "wysiwyg-color-lime": 1,
                    "wysiwyg-color-olive": 1,
                    "wysiwyg-color-yellow": 1,
                    "wysiwyg-color-navy": 1,
                    "wysiwyg-color-blue": 1,
                    "wysiwyg-color-teal": 1,
                    "wysiwyg-color-aqua": 1,
                    "wysiwyg-color-orange": 1
                },
                tags: {
                    b: {},
                    i: {},
                    strong: {},
                    em: {},
                    p: {},
                    br: {},
                    ol: {},
                    ul: {},
                    li: {},
                    h1: {},
                    h2: {},
                    h3: {},
                    h4: {},
                    h5: {},
                    h6: {},
                    blockquote: {},
                    u: 1,
                    img: {
                        check_attributes: {
                            width: "numbers",
                            alt: "alt",
                            src: "url",
                            height: "numbers"
                        }
                    },
                    a: {
                        check_attributes: {
                            href: "url"
                        },
                        set_attributes: {
                            target: "_blank",
                            rel: "nofollow"
                        }
                    },
                    span: 1,
                    div: 1,
                    small: 1,
                    code: 1,
                    pre: 1
                }
            },
            locale: "en",
            shortcuts: {
                83: "small",
                75: "createLink"
            }
        }, void 0 === a.fn.wysihtml5.defaultOptionsCache && (a.fn.wysihtml5.defaultOptionsCache = a.extend(!0, {}, a.fn.wysihtml5.defaultOptions)), e = a.fn.wysihtml5.locale = {}
    };
    c(a, b)
}),
function(a) {
    a.commands.small = {
        exec: function(b, c) {
            return a.commands.formatInline.exec(b, c, "small")
        },
        state: function(b, c) {
            return a.commands.formatInline.state(b, c, "small")
        }
    }
}(wysihtml5),
function(a) {
    "function" == typeof define && define.amd ? define("bootstrap.wysihtml5.en-US", ["publisher-web/public/js/jquery", "bootstrap.wysihtml5"], a) : a(jQuery)
}(function(a) {
    a.fn.wysihtml5.locale.en = a.fn.wysihtml5.locale["en-US"] = {
        font_styles: {
            normal: "Normal text",
            h1: "Heading 1",
            h2: "Heading 2",
            h3: "Heading 3",
            h4: "Heading 4",
            h5: "Heading 5",
            h6: "Heading 6"
        },
        emphasis: {
            bold: "Bold",
            italic: "Italic",
            underline: "Underline",
            small: "Small"
        },
        lists: {
            unordered: "Unordered list",
            ordered: "Ordered list",
            outdent: "Outdent",
            indent: "Indent"
        },
        link: {
            insert: "Insert link",
            cancel: "Cancel",
            target: "Open link in new window"
        },
        image: {
            insert: "Insert image",
            cancel: "Cancel"
        },
        html: {
            edit: "Edit HTML"
        },
        colours: {
            black: "Black",
            silver: "Silver",
            gray: "Grey",
            maroon: "Maroon",
            red: "Red",
            purple: "Purple",
            green: "Green",
            olive: "Olive",
            navy: "Navy",
            blue: "Blue",
            orange: "Orange"
        }
    }
});;
! function($) {
    "use strict";
    var Modal = function(element, options) {
        this.init(element, options);
    };
    Modal.prototype = {
        constructor: Modal,
        init: function(element, options) {
            var that = this;
            this.options = options;
            this.$element = $(element).delegate('[data-dismiss="modal"]', 'click.dismiss.modal', $.proxy(this.hide, this));
            this.options.remote && this.$element.find('.modal-body').load(this.options.remote, function() {
                var e = $.Event('loaded');
                that.$element.trigger(e);
            });
            var manager = typeof this.options.manager === 'function' ? this.options.manager.call(this) : this.options.manager;
            manager = manager.appendModal ? manager : $(manager).modalmanager().data('modalmanager');
            manager.appendModal(this);
        },
        toggle: function() {
            return this[!this.isShown ? 'show' : 'hide']();
        },
        show: function() {
            var e = $.Event('show');
            if (this.isShown) return;
            this.$element.trigger(e);
            if (e.isDefaultPrevented()) return;
            this.escape();
            this.tab();
            this.options.loading && this.loading();
        },
        hide: function(e) {
            e && e.preventDefault();
            e = $.Event('hide');
            this.$element.trigger(e);
            if (!this.isShown || e.isDefaultPrevented()) return;
            this.isShown = false;
            this.escape();
            this.tab();
            this.isLoading && this.loading();
            $(document).off('focusin.modal');
            this.$element.removeClass('in').removeClass('animated').removeClass(this.options.attentionAnimation).removeClass('modal-overflow').attr('aria-hidden', true);
            $.support.transition && this.$element.hasClass('fade') ? this.hideWithTransition() : this.hideModal();
        },
        layout: function() {
            var prop = this.options.height ? 'height' : 'max-height',
                value = this.options.height || this.options.maxHeight;
            if (this.options.width) {
                this.$element.css('width', this.options.width);
                var that = this;
                this.$element.css('margin-left', function() {
                    if (/%/ig.test(that.options.width)) {
                        return -(parseInt(that.options.width) / 2) + '%';
                    } else {
                        return -($(this).width() / 2) + 'px';
                    }
                });
            } else {
                this.$element.css('width', '');
                this.$element.css('margin-left', '');
            }
            this.$element.find('.modal-body').css('overflow', '').css(prop, '');
            if (value) {
                this.$element.find('.modal-body').css('overflow', 'auto').css(prop, value);
            }
            var modalOverflow = $(window).height() - 10 < this.$element.height();
            if (modalOverflow || this.options.modalOverflow) {
                this.$element.css('margin-top', 0).addClass('modal-overflow');
            } else {
                this.$element.css('margin-top', 0 - this.$element.height() / 2).removeClass('modal-overflow');
            }
        },
        tab: function() {
            var that = this;
            if (this.isShown && this.options.consumeTab) {
                this.$element.on('keydown.tabindex.modal', '[data-tabindex]', function(e) {
                    if (e.keyCode && e.keyCode == 9) {
                        var elements = [],
                            tabindex = Number($(this).data('tabindex'));
                        that.$element.find('[data-tabindex]:enabled:visible:not([readonly])').each(function(ev) {
                            elements.push(Number($(this).data('tabindex')));
                        });
                        elements.sort(function(a, b) {
                            return a - b
                        });
                        var arrayPos = $.inArray(tabindex, elements);
                        if (!e.shiftKey) {
                            arrayPos < elements.length - 1 ? that.$element.find('[data-tabindex=' + elements[arrayPos + 1] + ']').focus() : that.$element.find('[data-tabindex=' + elements[0] + ']').focus();
                        } else {
                            arrayPos == 0 ? that.$element.find('[data-tabindex=' + elements[elements.length - 1] + ']').focus() : that.$element.find('[data-tabindex=' + elements[arrayPos - 1] + ']').focus();
                        }
                        e.preventDefault();
                    }
                });
            } else if (!this.isShown) {
                this.$element.off('keydown.tabindex.modal');
            }
        },
        escape: function() {
            var that = this;
            if (this.isShown && this.options.keyboard) {
                if (!this.$element.attr('tabindex')) this.$element.attr('tabindex', -1);
                this.$element.on('keyup.dismiss.modal', function(e) {
                    e.which == 27 && that.hide();
                });
            } else if (!this.isShown) {
                this.$element.off('keyup.dismiss.modal')
            }
        },
        hideWithTransition: function() {
            var that = this,
                timeout = setTimeout(function() {
                    that.$element.off($.support.transition.end);
                    that.hideModal();
                }, 500);
            this.$element.one($.support.transition.end, function() {
                clearTimeout(timeout);
                that.hideModal();
            });
        },
        hideModal: function() {
            var prop = this.options.height ? 'height' : 'max-height';
            var value = this.options.height || this.options.maxHeight;
            if (value) {
                this.$element.find('.modal-body').css('overflow', '').css(prop, '');
            }
            this.$element.hide().trigger('hidden');
        },
        removeLoading: function() {
            this.$loading.remove();
            this.$loading = null;
            this.isLoading = false;
        },
        loading: function(callback) {
            callback = callback || function() {};
            var animate = this.$element.hasClass('fade') ? 'fade' : '';
            if (!this.isLoading) {
                var doAnimate = $.support.transition && animate;
                this.$loading = $('<div class="loading-mask ' + animate + '">').append(this.options.spinner).appendTo(this.$element);
                if (doAnimate) this.$loading[0].offsetWidth;
                this.$loading.addClass('in');
                this.isLoading = true;
                doAnimate ? this.$loading.one($.support.transition.end, callback) : callback();
            } else if (this.isLoading && this.$loading) {
                this.$loading.removeClass('in');
                var that = this;
                $.support.transition && this.$element.hasClass('fade') ? this.$loading.one($.support.transition.end, function() {
                    that.removeLoading()
                }) : that.removeLoading();
            } else if (callback) {
                callback(this.isLoading);
            }
        },
        focus: function() {
            var $focusElem = this.$element.find(this.options.focusOn);
            $focusElem = $focusElem.length ? $focusElem : this.$element;
            $focusElem.focus();
        },
        attention: function() {
            if (this.options.attentionAnimation) {
                this.$element.removeClass('animated').removeClass(this.options.attentionAnimation);
                var that = this;
                setTimeout(function() {
                    that.$element.addClass('animated').addClass(that.options.attentionAnimation);
                }, 0);
            }
            this.focus();
        },
        destroy: function() {
            var e = $.Event('destroy');
            this.$element.trigger(e);
            if (e.isDefaultPrevented()) return;
            this.$element.off('.modal').removeData('modal').removeClass('in').attr('aria-hidden', true);
            if (this.$parent !== this.$element.parent()) {
                this.$element.appendTo(this.$parent);
            } else if (!this.$parent.length) {
                this.$element.remove();
                this.$element = null;
            }
            this.$element.trigger('destroyed');
        }
    };
    $.fn.modal = function(option, args) {
        return this.each(function() {
            var $this = $(this),
                data = $this.data('modal'),
                options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option);
            if (!data) $this.data('modal', (data = new Modal(this, options)));
            if (typeof option == 'string') data[option].apply(data, [].concat(args));
            else if (options.show) data.show()
        })
    };
    $.fn.modal.defaults = {
        keyboard: true,
        backdrop: true,
        loading: false,
        show: true,
        width: null,
        height: null,
        maxHeight: null,
        modalOverflow: false,
        consumeTab: true,
        focusOn: null,
        replace: false,
        resize: false,
        attentionAnimation: 'shake',
        manager: 'body',
        spinner: '<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',
        backdropTemplate: '<div class="modal-backdrop" />'
    };
    $.fn.modal.Constructor = Modal;
    $(function() {
        $(document).off('click.modal').on('click.modal.data-api', '[data-toggle="modal"]', function(e) {
            var $this = $(this),
                href = $this.attr('href'),
                $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))),
                option = $target.data('modal') ? 'toggle' : $.extend({
                    remote: !/#/.test(href) && href
                }, $target.data(), $this.data());
            e.preventDefault();
            $target.modal(option).one('hide', function() {
                $this.focus();
            })
        });
    });
}(window.jQuery);;
! function($) {
    "use strict";
    var ModalManager = function(element, options) {
        this.init(element, options);
    };
    ModalManager.prototype = {
        constructor: ModalManager,
        init: function(element, options) {
            this.$element = $(element);
            this.options = $.extend({}, $.fn.modalmanager.defaults, this.$element.data(), typeof options == 'object' && options);
            this.stack = [];
            this.backdropCount = 0;
            if (this.options.resize) {
                var resizeTimeout, that = this;
                $(window).on('resize.modal', function() {
                    resizeTimeout && clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(function() {
                        for (var i = 0; i < that.stack.length; i++) {
                            that.stack[i].isShown && that.stack[i].layout();
                        }
                    }, 10);
                });
            }
        },
        createModal: function(element, options) {
            $(element).modal($.extend({
                manager: this
            }, options));
        },
        appendModal: function(modal) {
            this.stack.push(modal);
            var that = this;
            modal.$element.on('show.modalmanager', targetIsSelf(function(e) {
                var showModal = function() {
                    modal.isShown = true;
                    var transition = $.support.transition && modal.$element.hasClass('fade');
                    that.$element.toggleClass('modal-open', that.hasOpenModal()).toggleClass('page-overflow', $(window).height() < that.$element.height());
                    modal.$parent = modal.$element.parent();
                    modal.$container = that.createContainer(modal);
                    modal.$element.appendTo(modal.$container);
                    that.backdrop(modal, function() {
                        modal.$element.show();
                        if (transition) {
                            modal.$element[0].offsetWidth;
                        }
                        modal.layout();
                        modal.$element.addClass('in').attr('aria-hidden', false);
                        var complete = function() {
                            that.setFocus();
                            modal.$element.trigger('shown');
                        };
                        transition ? modal.$element.one($.support.transition.end, complete) : complete();
                    });
                };
                modal.options.replace ? that.replace(showModal) : showModal();
            }));
            modal.$element.on('hidden.modalmanager', targetIsSelf(function(e) {
                that.backdrop(modal);
                if (!modal.$element.parent().length) {
                    that.destroyModal(modal);
                } else if (modal.$backdrop) {
                    var transition = $.support.transition && modal.$element.hasClass('fade');
                    if (transition) {
                        modal.$element[0].offsetWidth;
                    }
                    $.support.transition && modal.$element.hasClass('fade') ? modal.$backdrop.one($.support.transition.end, function() {
                        modal.destroy();
                    }) : modal.destroy();
                } else {
                    modal.destroy();
                }
            }));
            modal.$element.on('destroyed.modalmanager', targetIsSelf(function(e) {
                that.destroyModal(modal);
            }));
        },
        getOpenModals: function() {
            var openModals = [];
            for (var i = 0; i < this.stack.length; i++) {
                if (this.stack[i].isShown)
                    openModals.push(this.stack[i]);
            }
            return openModals;
        },
        hasOpenModal: function() {
            return this.getOpenModals().length > 0;
        },
        setFocus: function() {
            var topModal;
            for (var i = 0; i < this.stack.length; i++) {
                if (this.stack[i].isShown)
                    topModal = this.stack[i];
            }
            if (!topModal)
                return;
            topModal.focus();
        },
        destroyModal: function(modal) {
            modal.$element.off('.modalmanager');
            if (modal.$backdrop)
                this.removeBackdrop(modal);
            this.stack.splice(this.getIndexOfModal(modal), 1);
            var hasOpenModal = this.hasOpenModal();
            this.$element.toggleClass('modal-open', hasOpenModal);
            if (!hasOpenModal) {
                this.$element.removeClass('page-overflow');
            }
            this.removeContainer(modal);
            this.setFocus();
        },
        getModalAt: function(index) {
            return this.stack[index];
        },
        getIndexOfModal: function(modal) {
            for (var i = 0; i < this.stack.length; i++) {
                if (modal === this.stack[i])
                    return i;
            }
        },
        replace: function(callback) {
            var topModal;
            for (var i = 0; i < this.stack.length; i++) {
                if (this.stack[i].isShown)
                    topModal = this.stack[i];
            }
            if (topModal) {
                this.$backdropHandle = topModal.$backdrop;
                topModal.$backdrop = null;
                callback && topModal.$element.one('hidden', targetIsSelf($.proxy(callback, this)));
                topModal.hide();
            } else if (callback) {
                callback();
            }
        },
        removeBackdrop: function(modal) {
            modal.$backdrop.remove();
            modal.$backdrop = null;
        },
        createBackdrop: function(animate, tmpl) {
            var $backdrop;
            if (!this.$backdropHandle) {
                $backdrop = $(tmpl).addClass(animate).appendTo(this.$element);
            } else {
                $backdrop = this.$backdropHandle;
                $backdrop.off('.modalmanager');
                this.$backdropHandle = null;
                this.isLoading && this.removeSpinner();
            }
            return $backdrop;
        },
        removeContainer: function(modal) {
            modal.$container.remove();
            modal.$container = null;
        },
        createContainer: function(modal) {
            var $container;
            $container = $('<div class="modal-scrollable">').css('z-index', getzIndex('modal', this.getOpenModals().length)).appendTo(this.$element);
            if (modal && modal.options.backdrop != 'static') {
                $container.on('click.modal', targetIsSelf(function(e) {
                    modal.hide();
                }));
            } else if (modal) {
                $container.on('click.modal', targetIsSelf(function(e) {
                    modal.attention();
                }));
            }
            return $container;
        },
        backdrop: function(modal, callback) {
            var animate = modal.$element.hasClass('fade') ? 'fade' : '',
                showBackdrop = modal.options.backdrop && this.backdropCount < this.options.backdropLimit;
            if (modal.isShown && showBackdrop) {
                var doAnimate = $.support.transition && animate && !this.$backdropHandle;
                modal.$backdrop = this.createBackdrop(animate, modal.options.backdropTemplate);
                modal.$backdrop.css('z-index', getzIndex('backdrop', this.getOpenModals().length));
                if (doAnimate)
                    modal.$backdrop[0].offsetWidth;
                modal.$backdrop.addClass('in');
                this.backdropCount += 1;
                doAnimate ? modal.$backdrop.one($.support.transition.end, callback) : callback();
            } else if (!modal.isShown && modal.$backdrop) {
                modal.$backdrop.removeClass('in');
                this.backdropCount -= 1;
                var that = this;
                $.support.transition && modal.$element.hasClass('fade') ? modal.$backdrop.one($.support.transition.end, function() {
                    that.removeBackdrop(modal)
                }) : that.removeBackdrop(modal);
            } else if (callback) {
                callback();
            }
        },
        removeSpinner: function() {
            this.$spinner && this.$spinner.remove();
            this.$spinner = null;
            this.isLoading = false;
        },
        removeLoading: function() {
            this.$backdropHandle && this.$backdropHandle.remove();
            this.$backdropHandle = null;
            this.removeSpinner();
        },
        loading: function(callback) {
            callback = callback || function() {};
            this.$element.toggleClass('modal-open', !this.isLoading || this.hasOpenModal()).toggleClass('page-overflow', $(window).height() < this.$element.height());
            if (!this.isLoading) {
                this.$backdropHandle = this.createBackdrop('fade', this.options.backdropTemplate);
                this.$backdropHandle[0].offsetWidth;
                var openModals = this.getOpenModals();
                this.$backdropHandle.css('z-index', getzIndex('backdrop', openModals.length + 1)).addClass('in');
                var $spinner = $(this.options.spinner).css('z-index', getzIndex('modal', openModals.length + 1)).appendTo(this.$element).addClass('in');
                this.$spinner = $(this.createContainer()).append($spinner).on('click.modalmanager', $.proxy(this.loading, this));
                this.isLoading = true;
                $.support.transition ? this.$backdropHandle.one($.support.transition.end, callback) : callback();
            } else if (this.isLoading && this.$backdropHandle) {
                this.$backdropHandle.removeClass('in');
                var that = this;
                $.support.transition ? this.$backdropHandle.one($.support.transition.end, function() {
                    that.removeLoading()
                }) : that.removeLoading();
            } else if (callback) {
                callback(this.isLoading);
            }
        }
    };
    var getzIndex = (function() {
        var zIndexFactor, baseIndex = {};
        return function(type, pos) {
            if (typeof zIndexFactor === 'undefined') {
                var $baseModal = $('<div class="modal hide" />').appendTo('body'),
                    $baseBackdrop = $('<div class="modal-backdrop hide" />').appendTo('body');
                baseIndex['modal'] = +$baseModal.css('z-index');
                baseIndex['backdrop'] = +$baseBackdrop.css('z-index');
                zIndexFactor = baseIndex['modal'] - baseIndex['backdrop'];
                $baseModal.remove();
                $baseBackdrop.remove();
                $baseBackdrop = $baseModal = null;
            }
            return baseIndex[type] + (zIndexFactor * pos);
        }
    }());

    function targetIsSelf(callback) {
        return function(e) {
            if (e && this === e.target) {
                return callback.apply(this, arguments);
            }
        }
    }
    $.fn.modalmanager = function(option, args) {
        return this.each(function() {
            var $this = $(this),
                data = $this.data('modalmanager');
            if (!data)
                $this.data('modalmanager', (data = new ModalManager(this, option)));
            if (typeof option === 'string')
                data[option].apply(data, [].concat(args))
        })
    };
    $.fn.modalmanager.defaults = {
        backdropLimit: 999,
        resize: true,
        spinner: '<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;">' +
            '  <div class="progress">' +
            '      <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>' +
            '  </div>' +
            '</div>',
        backdropTemplate: '<div class="modal-backdrop" />'
    };
    $.fn.modalmanager.Constructor = ModalManager
    $(function() {
        $(document).off('show.bs.modal').off('hidden.bs.modal');
    });
}(jQuery);;
(function($) {
    $.fn.extend({
        slimScroll: function(options) {
            var defaults = {
                width: "auto",
                height: "250px",
                size: "7px",
                color: "#000",
                position: "right",
                distance: "1px",
                start: "top",
                opacity: .4,
                alwaysVisible: false,
                disableFadeOut: false,
                railVisible: false,
                railColor: "#333",
                railOpacity: .2,
                railDraggable: true,
                railClass: "slimScrollRail",
                barClass: "slimScrollBar",
                wrapperClass: "slimScrollDiv",
                allowPageScroll: false,
                wheelStep: 20,
                touchScrollStep: 200,
                borderRadius: "7px",
                railBorderRadius: "7px"
            };
            var o = $.extend(defaults, options);
            this.each(function() {
                var isOverPanel, isOverBar, isDragg, queueHide, touchDif, barHeight, percentScroll, lastScroll, divS = "<div></div>",
                    minBarHeight = 30,
                    releaseScroll = false;
                var me = $(this);
                if (me.parent().hasClass(o.wrapperClass)) {
                    var offset = me.scrollTop();
                    bar = me.parent().find("." + o.barClass);
                    rail = me.parent().find("." + o.railClass);
                    getBarHeight();
                    if ($.isPlainObject(options)) {
                        if ("height" in options && options.height == "auto") {
                            me.parent().css("height", "auto");
                            me.css("height", "auto");
                            var height = me.parent().parent().height();
                            me.parent().css("height", height);
                            me.css("height", height)
                        }
                        if ("scrollTo" in options) {
                            offset = parseInt(o.scrollTo)
                        } else if ("scrollBy" in options) {
                            offset += parseInt(o.scrollBy)
                        } else if ("destroy" in options) {
                            bar.remove();
                            rail.remove();
                            me.unwrap();
                            return
                        }
                        scrollContent(offset, false, true)
                    }
                    return
                } else if ($.isPlainObject(options)) {
                    if ("destroy" in options) {
                        return
                    }
                }
                o.height = o.height == "auto" ? me.parent().height() : o.height;
                var wrapper = $(divS).addClass(o.wrapperClass).css({
                    position: "relative",
                    overflow: "hidden",
                    width: o.width,
                    height: o.height
                });
                me.css({
                    overflow: "hidden",
                    width: o.width,
                    height: o.height,
                    "-ms-touch-action": "none"
                });
                var rail = $(divS).addClass(o.railClass).css({
                    width: o.size,
                    height: "100%",
                    position: "absolute",
                    top: 0,
                    display: o.alwaysVisible && o.railVisible ? "block" : "none",
                    "border-radius": o.railBorderRadius,
                    background: o.railColor,
                    opacity: o.railOpacity,
                    zIndex: 90
                });
                var bar = $(divS).addClass(o.barClass).css({
                    background: o.color,
                    width: o.size,
                    position: "absolute",
                    top: 0,
                    opacity: o.opacity,
                    display: o.alwaysVisible ? "block" : "none",
                    "border-radius": o.borderRadius,
                    BorderRadius: o.borderRadius,
                    MozBorderRadius: o.borderRadius,
                    WebkitBorderRadius: o.borderRadius,
                    zIndex: 99
                });
                var posCss = o.position == "right" ? {
                    right: o.distance
                } : {
                    left: o.distance
                };
                rail.css(posCss);
                bar.css(posCss);
                me.wrap(wrapper);
                me.parent().append(bar);
                me.parent().append(rail);
                if (o.railDraggable) {
                    bar.bind("mousedown", function(e) {
                        var $doc = $(document);
                        isDragg = true;
                        t = parseFloat(bar.css("top"));
                        pageY = e.pageY;
                        $doc.bind("mousemove.slimscroll", function(e) {
                            currTop = t + e.pageY - pageY;
                            bar.css("top", currTop);
                            scrollContent(0, bar.position().top, false)
                        });
                        $doc.bind("mouseup.slimscroll", function(e) {
                            isDragg = false;
                            hideBar();
                            $doc.unbind(".slimscroll")
                        });
                        return false
                    }).bind("selectstart.slimscroll", function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        return false
                    })
                }
                rail.hover(function() {
                    showBar()
                }, function() {
                    hideBar()
                });
                bar.hover(function() {
                    isOverBar = true
                }, function() {
                    isOverBar = false
                });
                me.hover(function() {
                    isOverPanel = true;
                    showBar();
                    hideBar()
                }, function() {
                    isOverPanel = false;
                    hideBar()
                });
                if (window.navigator.msPointerEnabled) {
                    me.bind("MSPointerDown", function(e, b) {
                        if (e.originalEvent.targetTouches.length) {
                            touchDif = e.originalEvent.targetTouches[0].pageY
                        }
                    });
                    me.bind("MSPointerMove", function(e) {
                        e.originalEvent.preventDefault();
                        if (e.originalEvent.targetTouches.length) {
                            var diff = (touchDif - e.originalEvent.targetTouches[0].pageY) / o.touchScrollStep;
                            scrollContent(diff, true);
                            touchDif = e.originalEvent.targetTouches[0].pageY
                        }
                    })
                } else {
                    me.bind("touchstart", function(e, b) {
                        if (e.originalEvent.touches.length) {
                            touchDif = e.originalEvent.touches[0].pageY
                        }
                    });
                    me.bind("touchmove", function(e) {
                        if (!releaseScroll) {
                            e.originalEvent.preventDefault()
                        }
                        if (e.originalEvent.touches.length) {
                            var diff = (touchDif - e.originalEvent.touches[0].pageY) / o.touchScrollStep;
                            scrollContent(diff, true);
                            touchDif = e.originalEvent.touches[0].pageY
                        }
                    })
                }
                getBarHeight();
                if (o.start === "bottom") {
                    bar.css({
                        top: me.outerHeight() - bar.outerHeight()
                    });
                    scrollContent(0, true)
                } else if (o.start !== "top") {
                    scrollContent($(o.start).position().top, null, true);
                    if (!o.alwaysVisible) {
                        bar.hide()
                    }
                }
                attachWheel();

                function _onWheel(e) {
                    if (!isOverPanel) {
                        return
                    }
                    var e = e || window.event;
                    var delta = 0;
                    if (e.wheelDelta) {
                        delta = -e.wheelDelta / 120
                    }
                    if (e.detail) {
                        delta = e.detail / 3
                    }
                    var target = e.target || e.srcTarget || e.srcElement;
                    if ($(target).closest("." + o.wrapperClass).is(me.parent())) {
                        scrollContent(delta, true)
                    }
                    if (e.preventDefault && !releaseScroll) {
                        e.preventDefault()
                    }
                    if (!releaseScroll) {
                        e.returnValue = false
                    }
                }

                function scrollContent(y, isWheel, isJump) {
                    releaseScroll = false;
                    var delta = y;
                    var maxTop = me.outerHeight() - bar.outerHeight();
                    if (isWheel) {
                        delta = parseInt(bar.css("top")) + y * parseInt(o.wheelStep) / 100 * bar.outerHeight();
                        delta = Math.min(Math.max(delta, 0), maxTop);
                        delta = y > 0 ? Math.ceil(delta) : Math.floor(delta);
                        bar.css({
                            top: delta + "px"
                        })
                    }
                    percentScroll = parseInt(bar.css("top")) / (me.outerHeight() - bar.outerHeight());
                    delta = percentScroll * (me[0].scrollHeight - me.outerHeight());
                    if (isJump) {
                        delta = y;
                        var offsetTop = delta / me[0].scrollHeight * me.outerHeight();
                        offsetTop = Math.min(Math.max(offsetTop, 0), maxTop);
                        bar.css({
                            top: offsetTop + "px"
                        })
                    }
                    me.scrollTop(delta);
                    me.trigger("slimscrolling", ~~delta);
                    showBar();
                    hideBar()
                }

                function attachWheel() {
                    if (window.addEventListener) {
                        this.addEventListener("DOMMouseScroll", _onWheel, false);
                        this.addEventListener("mousewheel", _onWheel, false)
                    } else {
                        document.attachEvent("onmousewheel", _onWheel)
                    }
                }

                function getBarHeight() {
                    barHeight = Math.max(me.outerHeight() / me[0].scrollHeight * me.outerHeight(), minBarHeight);
                    bar.css({
                        height: barHeight + "px"
                    });
                    var display = barHeight == me.outerHeight() ? "none" : "block";
                    bar.css({
                        display: display
                    })
                }

                function showBar() {
                    getBarHeight();
                    clearTimeout(queueHide);
                    if (percentScroll == ~~percentScroll) {
                        releaseScroll = o.allowPageScroll;
                        if (lastScroll != percentScroll) {
                            var msg = ~~percentScroll == 0 ? "top" : "bottom";
                            me.trigger("slimscroll", msg)
                        }
                    } else {
                        releaseScroll = false
                    }
                    lastScroll = percentScroll;
                    if (barHeight >= me.outerHeight()) {
                        releaseScroll = true;
                        return
                    }
                    bar.stop(true, true).fadeIn("fast");
                    if (o.railVisible) {
                        rail.stop(true, true).fadeIn("fast")
                    }
                }

                function hideBar() {
                    if (!o.alwaysVisible) {
                        queueHide = setTimeout(function() {
                            if (!(o.disableFadeOut && isOverPanel) && !isOverBar && !isDragg) {
                                bar.fadeOut("slow");
                                rail.fadeOut("slow")
                            }
                        }, 1e3)
                    }
                }
            });
            return this
        }
    });
    $.fn.extend({
        slimscroll: $.fn.slimScroll
    })
})(jQuery);;
! function e(t, n, r) {
    function i(s, a) {
        if (!n[s]) {
            if (!t[s]) {
                var c = "function" == typeof require && require;
                if (!a && c) return c(s, !0);
                if (o) return o(s, !0);
                var l = new Error("Cannot find module '" + s + "'");
                throw l.code = "MODULE_NOT_FOUND", l
            }
            var u = n[s] = {
                exports: {}
            };
            t[s][0].call(u.exports, function(e) {
                var n = t[s][1][e];
                return i(n ? n : e)
            }, u, u.exports, e, t, n, r)
        }
        return n[s].exports
    }
    for (var o = "function" == typeof require && require, s = 0; s < r.length; s++) i(r[s]);
    return i
}({
    1: [function(e, t) {
        ! function() {
            "use strict";

            function e(t, n) {
                function i(e, t) {
                    return function() {
                        return e.apply(t, arguments)
                    }
                }
                var o;
                if (n = n || {}, this.trackingClick = !1, this.trackingClickStart = 0, this.targetElement = null, this.touchStartX = 0, this.touchStartY = 0, this.lastTouchIdentifier = 0, this.touchBoundary = n.touchBoundary || 10, this.layer = t, this.tapDelay = n.tapDelay || 200, this.tapTimeout = n.tapTimeout || 700, !e.notNeeded(t)) {
                    for (var s = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], a = this, c = 0, l = s.length; l > c; c++) a[s[c]] = i(a[s[c]], a);
                    r && (t.addEventListener("mouseover", this.onMouse, !0), t.addEventListener("mousedown", this.onMouse, !0), t.addEventListener("mouseup", this.onMouse, !0)), t.addEventListener("click", this.onClick, !0), t.addEventListener("touchstart", this.onTouchStart, !1), t.addEventListener("touchmove", this.onTouchMove, !1), t.addEventListener("touchend", this.onTouchEnd, !1), t.addEventListener("touchcancel", this.onTouchCancel, !1), Event.prototype.stopImmediatePropagation || (t.removeEventListener = function(e, n, r) {
                        var i = Node.prototype.removeEventListener;
                        "click" === e ? i.call(t, e, n.hijacked || n, r) : i.call(t, e, n, r)
                    }, t.addEventListener = function(e, n, r) {
                        var i = Node.prototype.addEventListener;
                        "click" === e ? i.call(t, e, n.hijacked || (n.hijacked = function(e) {
                            e.propagationStopped || n(e)
                        }), r) : i.call(t, e, n, r)
                    }), "function" == typeof t.onclick && (o = t.onclick, t.addEventListener("click", function(e) {
                        o(e)
                    }, !1), t.onclick = null)
                }
            }
            var n = navigator.userAgent.indexOf("Windows Phone") >= 0,
                r = navigator.userAgent.indexOf("Android") > 0 && !n,
                i = /iP(ad|hone|od)/.test(navigator.userAgent) && !n,
                o = i && /OS 4_\d(_\d)?/.test(navigator.userAgent),
                s = i && /OS [6-7]_\d/.test(navigator.userAgent),
                a = navigator.userAgent.indexOf("BB10") > 0;
            e.prototype.needsClick = function(e) {
                switch (e.nodeName.toLowerCase()) {
                    case "button":
                    case "select":
                    case "textarea":
                        if (e.disabled) return !0;
                        break;
                    case "input":
                        if (i && "file" === e.type || e.disabled) return !0;
                        break;
                    case "label":
                    case "iframe":
                    case "video":
                        return !0
                }
                return /\bneedsclick\b/.test(e.className)
            }, e.prototype.needsFocus = function(e) {
                switch (e.nodeName.toLowerCase()) {
                    case "textarea":
                        return !0;
                    case "select":
                        return !r;
                    case "input":
                        switch (e.type) {
                            case "button":
                            case "checkbox":
                            case "file":
                            case "image":
                            case "radio":
                            case "submit":
                                return !1
                        }
                        return !e.disabled && !e.readOnly;
                    default:
                        return /\bneedsfocus\b/.test(e.className)
                }
            }, e.prototype.sendClick = function(e, t) {
                var n, r;
                document.activeElement && document.activeElement !== e && document.activeElement.blur(), r = t.changedTouches[0], n = document.createEvent("MouseEvents"), n.initMouseEvent(this.determineEventType(e), !0, !0, window, 1, r.screenX, r.screenY, r.clientX, r.clientY, !1, !1, !1, !1, 0, null), n.forwardedTouchEvent = !0, e.dispatchEvent(n)
            }, e.prototype.determineEventType = function(e) {
                return r && "select" === e.tagName.toLowerCase() ? "mousedown" : "click"
            }, e.prototype.focus = function(e) {
                var t;
                i && e.setSelectionRange && 0 !== e.type.indexOf("date") && "time" !== e.type && "month" !== e.type ? (t = e.value.length, e.setSelectionRange(t, t)) : e.focus()
            }, e.prototype.updateScrollParent = function(e) {
                var t, n;
                if (t = e.fastClickScrollParent, !t || !t.contains(e)) {
                    n = e;
                    do {
                        if (n.scrollHeight > n.offsetHeight) {
                            t = n, e.fastClickScrollParent = n;
                            break
                        }
                        n = n.parentElement
                    } while (n)
                }
                t && (t.fastClickLastScrollTop = t.scrollTop)
            }, e.prototype.getTargetElementFromEventTarget = function(e) {
                return e.nodeType === Node.TEXT_NODE ? e.parentNode : e
            }, e.prototype.onTouchStart = function(e) {
                var t, n, r;
                if (e.targetTouches.length > 1) return !0;
                if (t = this.getTargetElementFromEventTarget(e.target), n = e.targetTouches[0], i) {
                    if (r = window.getSelection(), r.rangeCount && !r.isCollapsed) return !0;
                    if (!o) {
                        if (n.identifier && n.identifier === this.lastTouchIdentifier) return e.preventDefault(), !1;
                        this.lastTouchIdentifier = n.identifier, this.updateScrollParent(t)
                    }
                }
                return this.trackingClick = !0, this.trackingClickStart = e.timeStamp, this.targetElement = t, this.touchStartX = n.pageX, this.touchStartY = n.pageY, e.timeStamp - this.lastClickTime < this.tapDelay && e.preventDefault(), !0
            }, e.prototype.touchHasMoved = function(e) {
                var t = e.changedTouches[0],
                    n = this.touchBoundary;
                return Math.abs(t.pageX - this.touchStartX) > n || Math.abs(t.pageY - this.touchStartY) > n ? !0 : !1
            }, e.prototype.onTouchMove = function(e) {
                return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(e.target) || this.touchHasMoved(e)) && (this.trackingClick = !1, this.targetElement = null), !0) : !0
            }, e.prototype.findControl = function(e) {
                return void 0 !== e.control ? e.control : e.htmlFor ? document.getElementById(e.htmlFor) : e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
            }, e.prototype.onTouchEnd = function(e) {
                var t, n, a, c, l, u = this.targetElement;
                if (!this.trackingClick) return !0;
                if (e.timeStamp - this.lastClickTime < this.tapDelay) return this.cancelNextClick = !0, !0;
                if (e.timeStamp - this.trackingClickStart > this.tapTimeout) return !0;
                if (this.cancelNextClick = !1, this.lastClickTime = e.timeStamp, n = this.trackingClickStart, this.trackingClick = !1, this.trackingClickStart = 0, s && (l = e.changedTouches[0], u = document.elementFromPoint(l.pageX - window.pageXOffset, l.pageY - window.pageYOffset) || u, u.fastClickScrollParent = this.targetElement.fastClickScrollParent), a = u.tagName.toLowerCase(), "label" === a) {
                    if (t = this.findControl(u)) {
                        if (this.focus(u), r) return !1;
                        u = t
                    }
                } else if (this.needsFocus(u)) return e.timeStamp - n > 100 || i && window.top !== window && "input" === a ? (this.targetElement = null, !1) : (this.focus(u), this.sendClick(u, e), i && "select" === a || (this.targetElement = null, e.preventDefault()), !1);
                return i && !o && (c = u.fastClickScrollParent, c && c.fastClickLastScrollTop !== c.scrollTop) ? !0 : (this.needsClick(u) || (e.preventDefault(), this.sendClick(u, e)), !1)
            }, e.prototype.onTouchCancel = function() {
                this.trackingClick = !1, this.targetElement = null
            }, e.prototype.onMouse = function(e) {
                return this.targetElement ? e.forwardedTouchEvent ? !0 : e.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick) ? (e.stopImmediatePropagation ? e.stopImmediatePropagation() : e.propagationStopped = !0, e.stopPropagation(), e.preventDefault(), !1) : !0 : !0
            }, e.prototype.onClick = function(e) {
                var t;
                return this.trackingClick ? (this.targetElement = null, this.trackingClick = !1, !0) : "submit" === e.target.type && 0 === e.detail ? !0 : (t = this.onMouse(e), t || (this.targetElement = null), t)
            }, e.prototype.destroy = function() {
                var e = this.layer;
                r && (e.removeEventListener("mouseover", this.onMouse, !0), e.removeEventListener("mousedown", this.onMouse, !0), e.removeEventListener("mouseup", this.onMouse, !0)), e.removeEventListener("click", this.onClick, !0), e.removeEventListener("touchstart", this.onTouchStart, !1), e.removeEventListener("touchmove", this.onTouchMove, !1), e.removeEventListener("touchend", this.onTouchEnd, !1), e.removeEventListener("touchcancel", this.onTouchCancel, !1)
            }, e.notNeeded = function(e) {
                var t, n, i, o;
                if ("undefined" == typeof window.ontouchstart) return !0;
                if (n = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
                    if (!r) return !0;
                    if (t = document.querySelector("meta[name=viewport]")) {
                        if (-1 !== t.content.indexOf("user-scalable=no")) return !0;
                        if (n > 31 && document.documentElement.scrollWidth <= window.outerWidth) return !0
                    }
                }
                if (a && (i = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/), i[1] >= 10 && i[2] >= 3 && (t = document.querySelector("meta[name=viewport]")))) {
                    if (-1 !== t.content.indexOf("user-scalable=no")) return !0;
                    if (document.documentElement.scrollWidth <= window.outerWidth) return !0
                }
                return "none" === e.style.msTouchAction || "manipulation" === e.style.touchAction ? !0 : (o = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1], o >= 27 && (t = document.querySelector("meta[name=viewport]"), t && (-1 !== t.content.indexOf("user-scalable=no") || document.documentElement.scrollWidth <= window.outerWidth)) ? !0 : "none" === e.style.touchAction || "manipulation" === e.style.touchAction ? !0 : !1)
            }, e.attach = function(t, n) {
                return new e(t, n)
            }, "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
                return e
            }) : "undefined" != typeof t && t.exports ? (t.exports = e.attach, t.exports.FastClick = e) : window.FastClick = e
        }()
    }, {}],
    2: [function(e) {
        window.Origami = {
            fastclick: e("./bower_components/fastclick/lib/fastclick.js")
        }
    }, {
        "./bower_components/fastclick/lib/fastclick.js": 1
    }]
}, {}, [2]);;
(function() {
    function trigger() {
        document.dispatchEvent(new CustomEvent('o.load'))
    };
    document.addEventListener('load', trigger);
    if (document.readyState === 'ready') trigger();
}());
(function() {
    function trigger() {
        document.dispatchEvent(new CustomEvent('o.DOMContentLoaded'))
    };
    document.addEventListener('DOMContentLoaded', trigger);
    if (document.readyState === 'interactive') trigger();
}());
! function(a) {
    "function" == typeof define && define.amd ? define(["publisher-web/public/js/jquery"], a) : a("object" == typeof exports ? require("publisher-web/public/js/jquery") : jQuery)
}(function(a) {
    var b = function() {
            if (a && a.fn && a.fn.select2 && a.fn.select2.amd) var b = a.fn.select2.amd;
            var b;
            return function() {
                if (!b || !b.requirejs) {
                    b ? c = b : b = {};
                    var a, c, d;
                    ! function(b) {
                        function e(a, b) {
                            return u.call(a, b)
                        }

                        function f(a, b) {
                            var c, d, e, f, g, h, i, j, k, l, m, n = b && b.split("/"),
                                o = s.map,
                                p = o && o["*"] || {};
                            if (a && "." === a.charAt(0))
                                if (b) {
                                    for (n = n.slice(0, n.length - 1), a = a.split("/"), g = a.length - 1, s.nodeIdCompat && w.test(a[g]) && (a[g] = a[g].replace(w, "")), a = n.concat(a), k = 0; k < a.length; k += 1)
                                        if (m = a[k], "." === m) a.splice(k, 1), k -= 1;
                                        else if (".." === m) {
                                            if (1 === k && (".." === a[2] || ".." === a[0])) break;
                                            k > 0 && (a.splice(k - 1, 2), k -= 2)
                                        }
                                    a = a.join("/")
                                } else 0 === a.indexOf("./") && (a = a.substring(2));
                            if ((n || p) && o) {
                                for (c = a.split("/"), k = c.length; k > 0; k -= 1) {
                                    if (d = c.slice(0, k).join("/"), n)
                                        for (l = n.length; l > 0; l -= 1)
                                            if (e = o[n.slice(0, l).join("/")], e && (e = e[d])) {
                                                f = e, h = k;
                                                break
                                            } if (f) break;
                                    !i && p && p[d] && (i = p[d], j = k)
                                }!f && i && (f = i, h = j), f && (c.splice(0, h, f), a = c.join("/"))
                            }
                            return a
                        }

                        function g(a, c) {
                            return function() {
                                return n.apply(b, v.call(arguments, 0).concat([a, c]))
                            }
                        }

                        function h(a) {
                            return function(b) {
                                return f(b, a)
                            }
                        }

                        function i(a) {
                            return function(b) {
                                q[a] = b
                            }
                        }

                        function j(a) {
                            if (e(r, a)) {
                                var c = r[a];
                                delete r[a], t[a] = !0, m.apply(b, c)
                            }
                            if (!e(q, a) && !e(t, a)) throw new Error("No " + a);
                            return q[a]
                        }

                        function k(a) {
                            var b, c = a ? a.indexOf("!") : -1;
                            return c > -1 && (b = a.substring(0, c), a = a.substring(c + 1, a.length)), [b, a]
                        }

                        function l(a) {
                            return function() {
                                return s && s.config && s.config[a] || {}
                            }
                        }
                        var m, n, o, p, q = {},
                            r = {},
                            s = {},
                            t = {},
                            u = Object.prototype.hasOwnProperty,
                            v = [].slice,
                            w = /\.js$/;
                        o = function(a, b) {
                            var c, d = k(a),
                                e = d[0];
                            return a = d[1], e && (e = f(e, b), c = j(e)), e ? a = c && c.normalize ? c.normalize(a, h(b)) : f(a, b) : (a = f(a, b), d = k(a), e = d[0], a = d[1], e && (c = j(e))), {
                                f: e ? e + "!" + a : a,
                                n: a,
                                pr: e,
                                p: c
                            }
                        }, p = {
                            require: function(a) {
                                return g(a)
                            },
                            exports: function(a) {
                                var b = q[a];
                                return "undefined" != typeof b ? b : q[a] = {}
                            },
                            module: function(a) {
                                return {
                                    id: a,
                                    uri: "",
                                    exports: q[a],
                                    config: l(a)
                                }
                            }
                        }, m = function(a, c, d, f) {
                            var h, k, l, m, n, s, u = [],
                                v = typeof d;
                            if (f = f || a, "undefined" === v || "function" === v) {
                                for (c = !c.length && d.length ? ["require", "exports", "module"] : c, n = 0; n < c.length; n += 1)
                                    if (m = o(c[n], f), k = m.f, "require" === k) u[n] = p.require(a);
                                    else if ("exports" === k) u[n] = p.exports(a), s = !0;
                                    else if ("module" === k) h = u[n] = p.module(a);
                                    else if (e(q, k) || e(r, k) || e(t, k)) u[n] = j(k);
                                    else {
                                        if (!m.p) throw new Error(a + " missing " + k);
                                        m.p.load(m.n, g(f, !0), i(k), {}), u[n] = q[k]
                                    }
                                l = d ? d.apply(q[a], u) : void 0, a && (h && h.exports !== b && h.exports !== q[a] ? q[a] = h.exports : l === b && s || (q[a] = l))
                            } else a && (q[a] = d)
                        }, a = c = n = function(a, c, d, e, f) {
                            if ("string" == typeof a) return p[a] ? p[a](c) : j(o(a, c).f);
                            if (!a.splice) {
                                if (s = a, s.deps && n(s.deps, s.callback), !c) return;
                                c.splice ? (a = c, c = d, d = null) : a = b
                            }
                            return c = c || function() {}, "function" == typeof d && (d = e, e = f), e ? m(b, a, c, d) : setTimeout(function() {
                                m(b, a, c, d)
                            }, 4), n
                        }, n.config = function(a) {
                            return n(a)
                        }, a._defined = q, d = function(a, b, c) {
                            b.splice || (c = b, b = []), e(q, a) || e(r, a) || (r[a] = [a, b, c])
                        }, d.amd = {
                            jQuery: !0
                        }
                    }(), b.requirejs = a, b.require = c, b.define = d
                }
            }(), b.define("almond", function() {}), b.define("jquery", [], function() {
                var b = a || $;
                return null == b && console && console.error && console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."), b
            }), b.define("select2/utils", ["jquery"], function(a) {
                function b(a) {
                    var b = a.prototype,
                        c = [];
                    for (var d in b) {
                        var e = b[d];
                        "function" == typeof e && "constructor" !== d && c.push(d)
                    }
                    return c
                }
                var c = {};
                c.Extend = function(a, b) {
                    function c() {
                        this.constructor = a
                    }
                    var d = {}.hasOwnProperty;
                    for (var e in b) d.call(b, e) && (a[e] = b[e]);
                    return c.prototype = b.prototype, a.prototype = new c, a.__super__ = b.prototype, a
                }, c.Decorate = function(a, c) {
                    function d() {
                        var b = Array.prototype.unshift,
                            d = c.prototype.constructor.length,
                            e = a.prototype.constructor;
                        d > 0 && (b.call(arguments, a.prototype.constructor), e = c.prototype.constructor), e.apply(this, arguments)
                    }

                    function e() {
                        this.constructor = d
                    }
                    var f = b(c),
                        g = b(a);
                    c.displayName = a.displayName, d.prototype = new e;
                    for (var h = 0; h < g.length; h++) {
                        var i = g[h];
                        d.prototype[i] = a.prototype[i]
                    }
                    for (var j = (function(a) {
                        var b = function() {};
                        a in d.prototype && (b = d.prototype[a]);
                        var e = c.prototype[a];
                        return function() {
                            var a = Array.prototype.unshift;
                            return a.call(arguments, b), e.apply(this, arguments)
                        }
                    }), k = 0; k < f.length; k++) {
                        var l = f[k];
                        d.prototype[l] = j(l)
                    }
                    return d
                };
                var d = function() {
                    this.listeners = {}
                };
                return d.prototype.on = function(a, b) {
                    this.listeners = this.listeners || {}, a in this.listeners ? this.listeners[a].push(b) : this.listeners[a] = [b]
                }, d.prototype.trigger = function(a) {
                    var b = Array.prototype.slice;
                    this.listeners = this.listeners || {}, a in this.listeners && this.invoke(this.listeners[a], b.call(arguments, 1)), "*" in this.listeners && this.invoke(this.listeners["*"], arguments)
                }, d.prototype.invoke = function(a, b) {
                    for (var c = 0, d = a.length; d > c; c++) a[c].apply(this, b)
                }, c.Observable = d, c.generateChars = function(a) {
                    for (var b = "", c = 0; a > c; c++) {
                        var d = Math.floor(36 * Math.random());
                        b += d.toString(36)
                    }
                    return b
                }, c.bind = function(a, b) {
                    return function() {
                        a.apply(b, arguments)
                    }
                }, c._convertData = function(a) {
                    for (var b in a) {
                        var c = b.split("-"),
                            d = a;
                        if (1 !== c.length) {
                            for (var e = 0; e < c.length; e++) {
                                var f = c[e];
                                f = f.substring(0, 1).toLowerCase() + f.substring(1), f in d || (d[f] = {}), e == c.length - 1 && (d[f] = a[b]), d = d[f]
                            }
                            delete a[b]
                        }
                    }
                    return a
                }, c.hasScroll = function(b, c) {
                    var d = a(c),
                        e = c.style.overflowX,
                        f = c.style.overflowY;
                    return e !== f || "hidden" !== f && "visible" !== f ? "scroll" === e || "scroll" === f ? !0 : d.innerHeight() < c.scrollHeight || d.innerWidth() < c.scrollWidth : !1
                }, c.escapeMarkup = function(a) {
                    var b = {
                        "\\": "&#92;",
                        "&": "&amp;",
                        "<": "&lt;",
                        ">": "&gt;",
                        '"': "&quot;",
                        "'": "&#39;",
                        "/": "&#47;"
                    };
                    return "string" != typeof a ? a : String(a).replace(/[&<>"'\/\\]/g, function(a) {
                        return b[a]
                    })
                }, c.appendMany = function(b, c) {
                    if ("1.7" === a.fn.jquery.substr(0, 3)) {
                        var d = a();
                        a.map(c, function(a) {
                            d = d.add(a)
                        }), c = d
                    }
                    b.append(c)
                }, c
            }), b.define("select2/results", ["jquery", "./utils"], function(a, b) {
                function c(a, b, d) {
                    this.$element = a, this.data = d, this.options = b, c.__super__.constructor.call(this)
                }
                return b.Extend(c, b.Observable), c.prototype.render = function() {
                    var b = a('<ul class="select2-results__options" role="tree"></ul>');
                    return this.options.get("multiple") && b.attr("aria-multiselectable", "true"), this.$results = b, b
                }, c.prototype.clear = function() {
                    this.$results.empty()
                }, c.prototype.displayMessage = function(b) {
                    var c = this.options.get("escapeMarkup");
                    this.clear(), this.hideLoading();
                    var d = a('<li role="treeitem" class="select2-results__option"></li>'),
                        e = this.options.get("translations").get(b.message);
                    d.append(c(e(b.args))), this.$results.append(d)
                }, c.prototype.append = function(a) {
                    this.hideLoading();
                    var b = [];
                    if (null == a.results || 0 === a.results.length) return void(0 === this.$results.children().length && this.trigger("results:message", {
                        message: "noResults"
                    }));
                    a.results = this.sort(a.results);
                    for (var c = 0; c < a.results.length; c++) {
                        var d = a.results[c],
                            e = this.option(d);
                        b.push(e)
                    }
                    this.$results.append(b)
                }, c.prototype.position = function(a, b) {
                    var c = b.find(".select2-results");
                    c.append(a)
                }, c.prototype.sort = function(a) {
                    var b = this.options.get("sorter");
                    return b(a)
                }, c.prototype.setClasses = function() {
                    var b = this;
                    this.data.current(function(c) {
                        var d = a.map(c, function(a) {
                                return a.id.toString()
                            }),
                            e = b.$results.find(".select2-results__option[aria-selected]");
                        e.each(function() {
                            var b = a(this),
                                c = a.data(this, "data"),
                                e = "" + c.id;
                            null != c.element && c.element.selected || null == c.element && a.inArray(e, d) > -1 ? b.attr("aria-selected", "true") : b.attr("aria-selected", "false")
                        });
                        var f = e.filter("[aria-selected=true]");
                        f.length > 0 ? f.first().trigger("mouseenter") : e.first().trigger("mouseenter")
                    })
                }, c.prototype.showLoading = function(a) {
                    this.hideLoading();
                    var b = this.options.get("translations").get("searching"),
                        c = {
                            disabled: !0,
                            loading: !0,
                            text: b(a)
                        },
                        d = this.option(c);
                    d.className += " loading-results", this.$results.prepend(d)
                }, c.prototype.hideLoading = function() {
                    this.$results.find(".loading-results").remove()
                }, c.prototype.option = function(b) {
                    var c = document.createElement("li");
                    c.className = "select2-results__option";
                    var d = {
                        role: "treeitem",
                        "aria-selected": "false"
                    };
                    b.disabled && (delete d["aria-selected"], d["aria-disabled"] = "true"), null == b.id && delete d["aria-selected"], null != b._resultId && (c.id = b._resultId), b.title && (c.title = b.title), b.children && (d.role = "group", d["aria-label"] = b.text, delete d["aria-selected"]);
                    for (var e in d) {
                        var f = d[e];
                        c.setAttribute(e, f)
                    }
                    if (b.children) {
                        var g = a(c),
                            h = document.createElement("strong");
                        h.className = "select2-results__group"; {
                            a(h)
                        }
                        this.template(b, h);
                        for (var i = [], j = 0; j < b.children.length; j++) {
                            var k = b.children[j],
                                l = this.option(k);
                            i.push(l)
                        }
                        var m = a("<ul></ul>", {
                            "class": "select2-results__options select2-results__options--nested"
                        });
                        m.append(i), g.append(h), g.append(m)
                    } else this.template(b, c);
                    return a.data(c, "data", b), c
                }, c.prototype.bind = function(b) {
                    var c = this,
                        d = b.id + "-results";
                    this.$results.attr("id", d), b.on("results:all", function(a) {
                        c.clear(), c.append(a.data), b.isOpen() && c.setClasses()
                    }), b.on("results:append", function(a) {
                        c.append(a.data), b.isOpen() && c.setClasses()
                    }), b.on("query", function(a) {
                        c.showLoading(a)
                    }), b.on("select", function() {
                        b.isOpen() && c.setClasses()
                    }), b.on("unselect", function() {
                        b.isOpen() && c.setClasses()
                    }), b.on("open", function() {
                        c.$results.attr("aria-expanded", "true"), c.$results.attr("aria-hidden", "false"), c.setClasses(), c.ensureHighlightVisible()
                    }), b.on("close", function() {
                        c.$results.attr("aria-expanded", "false"), c.$results.attr("aria-hidden", "true"), c.$results.removeAttr("aria-activedescendant")
                    }), b.on("results:toggle", function() {
                        var a = c.getHighlightedResults();
                        0 !== a.length && a.trigger("mouseup")
                    }), b.on("results:select", function() {
                        var a = c.getHighlightedResults();
                        if (0 !== a.length) {
                            var b = a.data("data");
                            "true" == a.attr("aria-selected") ? c.trigger("close") : c.trigger("select", {
                                data: b
                            })
                        }
                    }), b.on("results:previous", function() {
                        var a = c.getHighlightedResults(),
                            b = c.$results.find("[aria-selected]"),
                            d = b.index(a);
                        if (0 !== d) {
                            var e = d - 1;
                            0 === a.length && (e = 0);
                            var f = b.eq(e);
                            f.trigger("mouseenter");
                            var g = c.$results.offset().top,
                                h = f.offset().top,
                                i = c.$results.scrollTop() + (h - g);
                            0 === e ? c.$results.scrollTop(0) : 0 > h - g && c.$results.scrollTop(i)
                        }
                    }), b.on("results:next", function() {
                        var a = c.getHighlightedResults(),
                            b = c.$results.find("[aria-selected]"),
                            d = b.index(a),
                            e = d + 1;
                        if (!(e >= b.length)) {
                            var f = b.eq(e);
                            f.trigger("mouseenter");
                            var g = c.$results.offset().top + c.$results.outerHeight(!1),
                                h = f.offset().top + f.outerHeight(!1),
                                i = c.$results.scrollTop() + h - g;
                            0 === e ? c.$results.scrollTop(0) : h > g && c.$results.scrollTop(i)
                        }
                    }), b.on("results:focus", function(a) {
                        a.element.addClass("select2-results__option--highlighted")
                    }), b.on("results:message", function(a) {
                        c.displayMessage(a)
                    }), a.fn.mousewheel && this.$results.on("mousewheel", function(a) {
                        var b = c.$results.scrollTop(),
                            d = c.$results.get(0).scrollHeight - c.$results.scrollTop() + a.deltaY,
                            e = a.deltaY > 0 && b - a.deltaY <= 0,
                            f = a.deltaY < 0 && d <= c.$results.height();
                        e ? (c.$results.scrollTop(0), a.preventDefault(), a.stopPropagation()) : f && (c.$results.scrollTop(c.$results.get(0).scrollHeight - c.$results.height()), a.preventDefault(), a.stopPropagation())
                    }), this.$results.on("mouseup", ".select2-results__option[aria-selected]", function(b) {
                        var d = a(this),
                            e = d.data("data");
                        return "true" === d.attr("aria-selected") ? void(c.options.get("multiple") ? c.trigger("unselect", {
                            originalEvent: b,
                            data: e
                        }) : c.trigger("close")) : void c.trigger("select", {
                            originalEvent: b,
                            data: e
                        })
                    }), this.$results.on("mouseenter", ".select2-results__option[aria-selected]", function() {
                        var b = a(this).data("data");
                        c.getHighlightedResults().removeClass("select2-results__option--highlighted"), c.trigger("results:focus", {
                            data: b,
                            element: a(this)
                        })
                    })
                }, c.prototype.getHighlightedResults = function() {
                    var a = this.$results.find(".select2-results__option--highlighted");
                    return a
                }, c.prototype.destroy = function() {
                    this.$results.remove()
                }, c.prototype.ensureHighlightVisible = function() {
                    var a = this.getHighlightedResults();
                    if (0 !== a.length) {
                        var b = this.$results.find("[aria-selected]"),
                            c = b.index(a),
                            d = this.$results.offset().top,
                            e = a.offset().top,
                            f = this.$results.scrollTop() + (e - d),
                            g = e - d;
                        f -= 2 * a.outerHeight(!1), 2 >= c ? this.$results.scrollTop(0) : (g > this.$results.outerHeight() || 0 > g) && this.$results.scrollTop(f)
                    }
                }, c.prototype.template = function(b, c) {
                    var d = this.options.get("templateResult"),
                        e = this.options.get("escapeMarkup"),
                        f = d(b);
                    null == f ? c.style.display = "none" : "string" == typeof f ? c.innerHTML = e(f) : a(c).append(f)
                }, c
            }), b.define("select2/keys", [], function() {
                var a = {
                    BACKSPACE: 8,
                    TAB: 9,
                    ENTER: 13,
                    SHIFT: 16,
                    CTRL: 17,
                    ALT: 18,
                    ESC: 27,
                    SPACE: 32,
                    PAGE_UP: 33,
                    PAGE_DOWN: 34,
                    END: 35,
                    HOME: 36,
                    LEFT: 37,
                    UP: 38,
                    RIGHT: 39,
                    DOWN: 40,
                    DELETE: 46
                };
                return a
            }), b.define("select2/selection/base", ["jquery", "../utils", "../keys"], function(a, b, c) {
                function d(a, b) {
                    this.$element = a, this.options = b, d.__super__.constructor.call(this)
                }
                return b.Extend(d, b.Observable), d.prototype.render = function() {
                    var b = a('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');
                    return this._tabindex = 0, null != this.$element.data("old-tabindex") ? this._tabindex = this.$element.data("old-tabindex") : null != this.$element.attr("tabindex") && (this._tabindex = this.$element.attr("tabindex")), b.attr("title", this.$element.attr("title")), b.attr("tabindex", this._tabindex), this.$selection = b, b
                }, d.prototype.bind = function(a) {
                    var b = this,
                        d = (a.id + "-container", a.id + "-results");
                    this.container = a, this.$selection.on("focus", function(a) {
                        b.trigger("focus", a)
                    }), this.$selection.on("blur", function(a) {
                        b.trigger("blur", a)
                    }), this.$selection.on("keydown", function(a) {
                        b.trigger("keypress", a), a.which === c.SPACE && a.preventDefault()
                    }), a.on("results:focus", function(a) {
                        b.$selection.attr("aria-activedescendant", a.data._resultId)
                    }), a.on("selection:update", function(a) {
                        b.update(a.data)
                    }), a.on("open", function() {
                        b.$selection.attr("aria-expanded", "true"), b.$selection.attr("aria-owns", d), b._attachCloseHandler(a)
                    }), a.on("close", function() {
                        b.$selection.attr("aria-expanded", "false"), b.$selection.removeAttr("aria-activedescendant"), b.$selection.removeAttr("aria-owns"), b.$selection.focus(), b._detachCloseHandler(a)
                    }), a.on("enable", function() {
                        b.$selection.attr("tabindex", b._tabindex)
                    }), a.on("disable", function() {
                        b.$selection.attr("tabindex", "-1")
                    })
                }, d.prototype._attachCloseHandler = function(b) {
                    a(document.body).on("mousedown.select2." + b.id, function(b) {
                        var c = a(b.target),
                            d = c.closest(".select2"),
                            e = a(".select2.select2-container--open");
                        e.each(function() {
                            var b = a(this);
                            if (this != d[0]) {
                                var c = b.data("element");
                                c.select2("close")
                            }
                        })
                    })
                }, d.prototype._detachCloseHandler = function(b) {
                    a(document.body).off("mousedown.select2." + b.id)
                }, d.prototype.position = function(a, b) {
                    var c = b.find(".selection");
                    c.append(a)
                }, d.prototype.destroy = function() {
                    this._detachCloseHandler(this.container)
                }, d.prototype.update = function() {
                    throw new Error("The `update` method must be defined in child classes.")
                }, d
            }), b.define("select2/selection/single", ["jquery", "./base", "../utils", "../keys"], function(a, b, c) {
                function d() {
                    d.__super__.constructor.apply(this, arguments)
                }
                return c.Extend(d, b), d.prototype.render = function() {
                    var a = d.__super__.render.call(this);
                    return a.addClass("select2-selection--single"), a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'), a
                }, d.prototype.bind = function(a) {
                    var b = this;
                    d.__super__.bind.apply(this, arguments);
                    var c = a.id + "-container";
                    this.$selection.find(".select2-selection__rendered").attr("id", c), this.$selection.attr("aria-labelledby", c), this.$selection.on("mousedown", function(a) {
                        1 === a.which && b.trigger("toggle", {
                            originalEvent: a
                        })
                    }), this.$selection.on("focus", function() {}), this.$selection.on("blur", function() {}), a.on("selection:update", function(a) {
                        b.update(a.data)
                    })
                }, d.prototype.clear = function() {
                    this.$selection.find(".select2-selection__rendered").empty()
                }, d.prototype.display = function(a) {
                    var b = this.options.get("templateSelection"),
                        c = this.options.get("escapeMarkup");
                    return c(b(a))
                }, d.prototype.selectionContainer = function() {
                    return a("<span></span>")
                }, d.prototype.update = function(a) {
                    if (0 === a.length) return void this.clear();
                    var b = a[0],
                        c = this.display(b),
                        d = this.$selection.find(".select2-selection__rendered");
                    d.empty().append(c), d.prop("title", b.title || b.text)
                }, d
            }), b.define("select2/selection/multiple", ["jquery", "./base", "../utils"], function(a, b, c) {
                function d() {
                    d.__super__.constructor.apply(this, arguments)
                }
                return c.Extend(d, b), d.prototype.render = function() {
                    var a = d.__super__.render.call(this);
                    return a.addClass("select2-selection--multiple"), a.html('<ul class="select2-selection__rendered"></ul>'), a
                }, d.prototype.bind = function() {
                    var b = this;
                    d.__super__.bind.apply(this, arguments), this.$selection.on("click", function(a) {
                        b.trigger("toggle", {
                            originalEvent: a
                        })
                    }), this.$selection.on("click", ".select2-selection__choice__remove", function(c) {
                        var d = a(this),
                            e = d.parent(),
                            f = e.data("data");
                        b.trigger("unselect", {
                            originalEvent: c,
                            data: f
                        })
                    })
                }, d.prototype.clear = function() {
                    this.$selection.find(".select2-selection__rendered").empty()
                }, d.prototype.display = function(a) {
                    var b = this.options.get("templateSelection"),
                        c = this.options.get("escapeMarkup");
                    return c(b(a))
                }, d.prototype.selectionContainer = function() {
                    var b = a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');
                    return b
                }, d.prototype.update = function(a) {
                    if (this.clear(), 0 !== a.length) {
                        for (var b = [], d = 0; d < a.length; d++) {
                            var e = a[d],
                                f = this.display(e),
                                g = this.selectionContainer();
                            g.append(f), g.prop("title", e.title || e.text), g.data("data", e), b.push(g)
                        }
                        var h = this.$selection.find(".select2-selection__rendered");
                        c.appendMany(h, b)
                    }
                }, d
            }), b.define("select2/selection/placeholder", ["../utils"], function() {
                function a(a, b, c) {
                    this.placeholder = this.normalizePlaceholder(c.get("placeholder")), a.call(this, b, c)
                }
                return a.prototype.normalizePlaceholder = function(a, b) {
                    return "string" == typeof b && (b = {
                        id: "",
                        text: b
                    }), b
                }, a.prototype.createPlaceholder = function(a, b) {
                    var c = this.selectionContainer();
                    return c.html(this.display(b)), c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"), c
                }, a.prototype.update = function(a, b) {
                    var c = 1 == b.length && b[0].id != this.placeholder.id,
                        d = b.length > 1;
                    if (d || c) return a.call(this, b);
                    this.clear();
                    var e = this.createPlaceholder(this.placeholder);
                    this.$selection.find(".select2-selection__rendered").append(e)
                }, a
            }), b.define("select2/selection/allowClear", ["jquery", "../keys"], function(a, b) {
                function c() {}
                return c.prototype.bind = function(a, b, c) {
                    var d = this;
                    a.call(this, b, c), null == this.placeholder && this.options.get("debug") && window.console && console.error && console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."), this.$selection.on("mousedown", ".select2-selection__clear", function(a) {
                        d._handleClear(a)
                    }), b.on("keypress", function(a) {
                        d._handleKeyboardClear(a, b)
                    })
                }, c.prototype._handleClear = function(a, b) {
                    if (!this.options.get("disabled")) {
                        var c = this.$selection.find(".select2-selection__clear");
                        if (0 !== c.length) {
                            b.stopPropagation();
                            for (var d = c.data("data"), e = 0; e < d.length; e++) {
                                var f = {
                                    data: d[e]
                                };
                                if (this.trigger("unselect", f), f.prevented) return
                            }
                            this.$element.val(this.placeholder.id).trigger("change"), this.trigger("toggle")
                        }
                    }
                }, c.prototype._handleKeyboardClear = function(a, c, d) {
                    d.isOpen() || (c.which == b.DELETE || c.which == b.BACKSPACE) && this._handleClear(c)
                }, c.prototype.update = function(b, c) {
                    if (b.call(this, c), !(this.$selection.find(".select2-selection__placeholder").length > 0 || 0 === c.length)) {
                        var d = a('<span class="select2-selection__clear">&times;</span>');
                        d.data("data", c), this.$selection.find(".select2-selection__rendered").prepend(d)
                    }
                }, c
            }), b.define("select2/selection/search", ["jquery", "../utils", "../keys"], function(a, b, c) {
                function d(a, b, c) {
                    a.call(this, b, c)
                }
                return d.prototype.render = function(b) {
                    var c = a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');
                    this.$searchContainer = c, this.$search = c.find("input");
                    var d = b.call(this);
                    return d
                }, d.prototype.bind = function(a, b, d) {
                    var e = this;
                    a.call(this, b, d), b.on("open", function() {
                        e.$search.attr("tabindex", 0), e.$search.focus()
                    }), b.on("close", function() {
                        e.$search.attr("tabindex", -1), e.$search.val(""), e.$search.focus()
                    }), b.on("enable", function() {
                        e.$search.prop("disabled", !1)
                    }), b.on("disable", function() {
                        e.$search.prop("disabled", !0)
                    }), this.$selection.on("focusin", ".select2-search--inline", function(a) {
                        e.trigger("focus", a)
                    }), this.$selection.on("focusout", ".select2-search--inline", function(a) {
                        e.trigger("blur", a)
                    }), this.$selection.on("keydown", ".select2-search--inline", function(a) {
                        a.stopPropagation(), e.trigger("keypress", a), e._keyUpPrevented = a.isDefaultPrevented();
                        var b = a.which;
                        if (b === c.BACKSPACE && "" === e.$search.val()) {
                            var d = e.$searchContainer.prev(".select2-selection__choice");
                            if (d.length > 0) {
                                var f = d.data("data");
                                e.searchRemoveChoice(f), a.preventDefault()
                            }
                        }
                    }), this.$selection.on("input", ".select2-search--inline", function() {
                        e.$selection.off("keyup.search")
                    }), this.$selection.on("keyup.search input", ".select2-search--inline", function(a) {
                        e.handleSearch(a)
                    })
                }, d.prototype.createPlaceholder = function(a, b) {
                    this.$search.attr("placeholder", b.text)
                }, d.prototype.update = function(a, b) {
                    this.$search.attr("placeholder", ""), a.call(this, b), this.$selection.find(".select2-selection__rendered").append(this.$searchContainer), this.resizeSearch()
                }, d.prototype.handleSearch = function() {
                    if (this.resizeSearch(), !this._keyUpPrevented) {
                        var a = this.$search.val();
                        this.trigger("query", {
                            term: a
                        })
                    }
                    this._keyUpPrevented = !1
                }, d.prototype.searchRemoveChoice = function(a, b) {
                    this.trigger("unselect", {
                        data: b
                    }), this.trigger("open"), this.$search.val(b.text + " ")
                }, d.prototype.resizeSearch = function() {
                    this.$search.css("width", "25px");
                    var a = "";
                    if ("" !== this.$search.attr("placeholder")) a = this.$selection.find(".select2-selection__rendered").innerWidth();
                    else {
                        var b = this.$search.val().length + 1;
                        a = .75 * b + "em"
                    }
                    this.$search.css("width", a)
                }, d
            }), b.define("select2/selection/eventRelay", ["jquery"], function(a) {
                function b() {}
                return b.prototype.bind = function(b, c, d) {
                    var e = this,
                        f = ["open", "opening", "close", "closing", "select", "selecting", "unselect", "unselecting"],
                        g = ["opening", "closing", "selecting", "unselecting"];
                    b.call(this, c, d), c.on("*", function(b, c) {
                        if (-1 !== a.inArray(b, f)) {
                            c = c || {};
                            var d = a.Event("select2:" + b, {
                                params: c
                            });
                            e.$element.trigger(d), -1 !== a.inArray(b, g) && (c.prevented = d.isDefaultPrevented())
                        }
                    })
                }, b
            }), b.define("select2/translation", ["jquery", "require"], function(a, b) {
                function c(a) {
                    this.dict = a || {}
                }
                return c.prototype.all = function() {
                    return this.dict
                }, c.prototype.get = function(a) {
                    return this.dict[a]
                }, c.prototype.extend = function(b) {
                    this.dict = a.extend({}, b.all(), this.dict)
                }, c._cache = {}, c.loadPath = function(a) {
                    if (!(a in c._cache)) {
                        var d = b(a);
                        c._cache[a] = d
                    }
                    return new c(c._cache[a])
                }, c
            }), b.define("select2/diacritics", [], function() {
                var a = {
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "AA",
                    "": "AE",
                    "": "AE",
                    "": "AE",
                    "": "AO",
                    "": "AU",
                    "": "AV",
                    "": "AV",
                    "": "AY",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "B",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "C",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "D",
                    "": "DZ",
                    "": "DZ",
                    "": "Dz",
                    "": "Dz",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "F",
                    "": "F",
                    "": "F",
                    "": "F",
                    "": "F",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "G",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "H",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "J",
                    "": "J",
                    "": "J",
                    "": "J",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "K",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "L",
                    "": "LJ",
                    "": "Lj",
                    "": "M",
                    "": "M",
                    "": "M",
                    "": "M",
                    "": "M",
                    "": "M",
                    "": "M",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "N",
                    "": "NJ",
                    "": "Nj",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "OI",
                    "": "OO",
                    "": "OU",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "P",
                    "": "Q",
                    "": "Q",
                    "": "Q",
                    "": "Q",
                    "": "Q",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "R",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "S",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "T",
                    "": "TZ",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "V",
                    "": "V",
                    "": "V",
                    "": "V",
                    "": "V",
                    "": "V",
                    "": "V",
                    "": "VY",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "W",
                    "": "X",
                    "": "X",
                    "": "X",
                    "": "X",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Y",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "Z",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "aa",
                    "": "ae",
                    "": "ae",
                    "": "ae",
                    "": "ao",
                    "": "au",
                    "": "av",
                    "": "av",
                    "": "ay",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "b",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "c",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "d",
                    "": "dz",
                    "": "dz",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "f",
                    "": "f",
                    "": "f",
                    "": "f",
                    "": "f",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "g",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "h",
                    "": "hv",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "j",
                    "": "j",
                    "": "j",
                    "": "j",
                    "": "j",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "k",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "l",
                    "": "lj",
                    "": "m",
                    "": "m",
                    "": "m",
                    "": "m",
                    "": "m",
                    "": "m",
                    "": "m",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "n",
                    "": "nj",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "oi",
                    "": "ou",
                    "": "oo",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "p",
                    "": "q",
                    "": "q",
                    "": "q",
                    "": "q",
                    "": "q",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "r",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "s",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "t",
                    "": "tz",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "v",
                    "": "v",
                    "": "v",
                    "": "v",
                    "": "v",
                    "": "v",
                    "": "v",
                    "": "vy",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "w",
                    "": "x",
                    "": "x",
                    "": "x",
                    "": "x",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "y",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "z",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": "",
                    "": ""
                };
                return a
            }), b.define("select2/data/base", ["../utils"], function(a) {
                function b() {
                    b.__super__.constructor.call(this)
                }
                return a.Extend(b, a.Observable), b.prototype.current = function() {
                    throw new Error("The `current` method must be defined in child classes.")
                }, b.prototype.query = function() {
                    throw new Error("The `query` method must be defined in child classes.")
                }, b.prototype.bind = function() {}, b.prototype.destroy = function() {}, b.prototype.generateResultId = function(b, c) {
                    var d = b.id + "-result-";
                    return d += a.generateChars(4), d += null != c.id ? "-" + c.id.toString() : "-" + a.generateChars(4)
                }, b
            }), b.define("select2/data/select", ["./base", "../utils", "jquery"], function(a, b, c) {
                function d(a, b) {
                    this.$element = a, this.options = b, d.__super__.constructor.call(this)
                }
                return b.Extend(d, a), d.prototype.current = function(a) {
                    var b = [],
                        d = this;
                    this.$element.find(":selected").each(function() {
                        var a = c(this),
                            e = d.item(a);
                        b.push(e)
                    }), a(b)
                }, d.prototype.select = function(a) {
                    var b = this;
                    if (a.selected = !0, c(a.element).is("option")) return a.element.selected = !0, void this.$element.trigger("change");
                    if (this.$element.prop("multiple")) this.current(function(d) {
                        var e = [];
                        a = [a], a.push.apply(a, d);
                        for (var f = 0; f < a.length; f++) {
                            var g = a[f].id; - 1 === c.inArray(g, e) && e.push(g)
                        }
                        b.$element.val(e), b.$element.trigger("change")
                    });
                    else {
                        var d = a.id;
                        this.$element.val(d), this.$element.trigger("change")
                    }
                }, d.prototype.unselect = function(a) {
                    var b = this;
                    if (this.$element.prop("multiple")) return a.selected = !1, c(a.element).is("option") ? (a.element.selected = !1, void this.$element.trigger("change")) : void this.current(function(d) {
                        for (var e = [], f = 0; f < d.length; f++) {
                            var g = d[f].id;
                            g !== a.id && -1 === c.inArray(g, e) && e.push(g)
                        }
                        b.$element.val(e), b.$element.trigger("change")
                    })
                }, d.prototype.bind = function(a) {
                    var b = this;
                    this.container = a, a.on("select", function(a) {
                        b.select(a.data)
                    }), a.on("unselect", function(a) {
                        b.unselect(a.data)
                    })
                }, d.prototype.destroy = function() {
                    this.$element.find("*").each(function() {
                        c.removeData(this, "data")
                    })
                }, d.prototype.query = function(a, b) {
                    var d = [],
                        e = this,
                        f = this.$element.children();
                    f.each(function() {
                        var b = c(this);
                        if (b.is("option") || b.is("optgroup")) {
                            var f = e.item(b),
                                g = e.matches(a, f);
                            null !== g && d.push(g)
                        }
                    }), b({
                        results: d
                    })
                }, d.prototype.addOptions = function(a) {
                    b.appendMany(this.$element, a)
                }, d.prototype.option = function(a) {
                    var b;
                    a.children ? (b = document.createElement("optgroup"), b.label = a.text) : (b = document.createElement("option"), void 0 !== b.textContent ? b.textContent = a.text : b.innerText = a.text), a.id && (b.value = a.id), a.disabled && (b.disabled = !0), a.selected && (b.selected = !0), a.title && (b.title = a.title);
                    var d = c(b),
                        e = this._normalizeItem(a);
                    return e.element = b, c.data(b, "data", e), d
                }, d.prototype.item = function(a) {
                    var b = {};
                    if (b = c.data(a[0], "data"), null != b) return b;
                    if (a.is("option")) b = {
                        id: a.val(),
                        text: a.text(),
                        disabled: a.prop("disabled"),
                        selected: a.prop("selected"),
                        title: a.prop("title")
                    };
                    else if (a.is("optgroup")) {
                        b = {
                            text: a.prop("label"),
                            children: [],
                            title: a.prop("title")
                        };
                        for (var d = a.children("option"), e = [], f = 0; f < d.length; f++) {
                            var g = c(d[f]),
                                h = this.item(g);
                            e.push(h)
                        }
                        b.children = e
                    }
                    return b = this._normalizeItem(b), b.element = a[0], c.data(a[0], "data", b), b
                }, d.prototype._normalizeItem = function(a) {
                    c.isPlainObject(a) || (a = {
                        id: a,
                        text: a
                    }), a = c.extend({}, {
                        text: ""
                    }, a);
                    var b = {
                        selected: !1,
                        disabled: !1
                    };
                    return null != a.id && (a.id = a.id.toString()), null != a.text && (a.text = a.text.toString()), null == a._resultId && a.id && null != this.container && (a._resultId = this.generateResultId(this.container, a)), c.extend({}, b, a)
                }, d.prototype.matches = function(a, b) {
                    var c = this.options.get("matcher");
                    return c(a, b)
                }, d
            }), b.define("select2/data/array", ["./select", "../utils", "jquery"], function(a, b, c) {
                function d(a, b) {
                    var c = b.get("data") || [];
                    d.__super__.constructor.call(this, a, b), this.addOptions(this.convertToOptions(c))
                }
                return b.Extend(d, a), d.prototype.select = function(a) {
                    var b = this.$element.find("option").filter(function(b, c) {
                        return c.value == a.id.toString()
                    });
                    0 === b.length && (b = this.option(a), this.addOptions(b)), d.__super__.select.call(this, a)
                }, d.prototype.convertToOptions = function(a) {
                    function d(a) {
                        return function() {
                            return c(this).val() == a.id
                        }
                    }
                    for (var e = this, f = this.$element.find("option"), g = f.map(function() {
                        return e.item(c(this)).id
                    }).get(), h = [], i = 0; i < a.length; i++) {
                        var j = this._normalizeItem(a[i]);
                        if (c.inArray(j.id, g) >= 0) {
                            var k = f.filter(d(j)),
                                l = this.item(k),
                                m = (c.extend(!0, {}, l, j), this.option(l));
                            k.replaceWith(m)
                        } else {
                            var n = this.option(j);
                            if (j.children) {
                                var o = this.convertToOptions(j.children);
                                b.appendMany(n, o)
                            }
                            h.push(n)
                        }
                    }
                    return h
                }, d
            }), b.define("select2/data/ajax", ["./array", "../utils", "jquery"], function(a, b, c) {
                function d(b, c) {
                    this.ajaxOptions = this._applyDefaults(c.get("ajax")), null != this.ajaxOptions.processResults && (this.processResults = this.ajaxOptions.processResults), a.__super__.constructor.call(this, b, c)
                }
                return b.Extend(d, a), d.prototype._applyDefaults = function(a) {
                    var b = {
                        data: function(a) {
                            return {
                                q: a.term
                            }
                        },
                        transport: function(a, b, d) {
                            var e = c.ajax(a);
                            return e.then(b), e.fail(d), e
                        }
                    };
                    return c.extend({}, b, a, !0)
                }, d.prototype.processResults = function(a) {
                    return a
                }, d.prototype.query = function(a, b) {
                    function d() {
                        var d = f.transport(f, function(d) {
                            var f = e.processResults(d, a);
                            e.options.get("debug") && window.console && console.error && (f && f.results && c.isArray(f.results) || console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")), b(f)
                        }, function() {});
                        e._request = d
                    }
                    var e = this;
                    null != this._request && (c.isFunction(this._request.abort) && this._request.abort(), this._request = null);
                    var f = c.extend({
                        type: "GET"
                    }, this.ajaxOptions);
                    "function" == typeof f.url && (f.url = f.url(a)), "function" == typeof f.data && (f.data = f.data(a)), this.ajaxOptions.delay && "" !== a.term ? (this._queryTimeout && window.clearTimeout(this._queryTimeout), this._queryTimeout = window.setTimeout(d, this.ajaxOptions.delay)) : d()
                }, d
            }), b.define("select2/data/tags", ["jquery"], function(a) {
                function b(b, c, d) {
                    var e = d.get("tags"),
                        f = d.get("createTag");
                    if (void 0 !== f && (this.createTag = f), b.call(this, c, d), a.isArray(e))
                        for (var g = 0; g < e.length; g++) {
                            var h = e[g],
                                i = this._normalizeItem(h),
                                j = this.option(i);
                            this.$element.append(j)
                        }
                }
                return b.prototype.query = function(a, b, c) {
                    function d(a, f) {
                        for (var g = a.results, h = 0; h < g.length; h++) {
                            var i = g[h],
                                j = null != i.children && !d({
                                    results: i.children
                                }, !0),
                                k = i.text === b.term;
                            if (k || j) return f ? !1 : (a.data = g, void c(a))
                        }
                        if (f) return !0;
                        var l = e.createTag(b);
                        if (null != l) {
                            var m = e.option(l);
                            m.attr("data-select2-tag", !0), e.addOptions([m]), e.insertTag(g, l)
                        }
                        a.results = g, c(a)
                    }
                    var e = this;
                    return this._removeOldTags(), null == b.term || null != b.page ? void a.call(this, b, c) : void a.call(this, b, d)
                }, b.prototype.createTag = function(b, c) {
                    var d = a.trim(c.term);
                    return "" === d ? null : {
                        id: d,
                        text: d
                    }
                }, b.prototype.insertTag = function(a, b, c) {
                    b.unshift(c)
                }, b.prototype._removeOldTags = function() {
                    var b = (this._lastTag, this.$element.find("option[data-select2-tag]"));
                    b.each(function() {
                        this.selected || a(this).remove()
                    })
                }, b
            }), b.define("select2/data/tokenizer", ["jquery"], function(a) {
                function b(a, b, c) {
                    var d = c.get("tokenizer");
                    void 0 !== d && (this.tokenizer = d), a.call(this, b, c)
                }
                return b.prototype.bind = function(a, b, c) {
                    a.call(this, b, c), this.$search = b.dropdown.$search || b.selection.$search || c.find(".select2-search__field")
                }, b.prototype.query = function(a, b, c) {
                    function d(a) {
                        e.select(a)
                    }
                    var e = this;
                    b.term = b.term || "";
                    var f = this.tokenizer(b, this.options, d);
                    f.term !== b.term && (this.$search.length && (this.$search.val(f.term), this.$search.focus()), b.term = f.term), a.call(this, b, c)
                }, b.prototype.tokenizer = function(b, c, d, e) {
                    for (var f = d.get("tokenSeparators") || [], g = c.term, h = 0, i = this.createTag || function(a) {
                        return {
                            id: a.term,
                            text: a.term
                        }
                    }; h < g.length;) {
                        var j = g[h];
                        if (-1 !== a.inArray(j, f)) {
                            var k = g.substr(0, h),
                                l = a.extend({}, c, {
                                    term: k
                                }),
                                m = i(l);
                            e(m), g = g.substr(h + 1) || "", h = 0
                        } else h++
                    }
                    return {
                        term: g
                    }
                }, b
            }), b.define("select2/data/minimumInputLength", [], function() {
                function a(a, b, c) {
                    this.minimumInputLength = c.get("minimumInputLength"), a.call(this, b, c)
                }
                return a.prototype.query = function(a, b, c) {
                    return b.term = b.term || "", b.term.length < this.minimumInputLength ? void this.trigger("results:message", {
                        message: "inputTooShort",
                        args: {
                            minimum: this.minimumInputLength,
                            input: b.term,
                            params: b
                        }
                    }) : void a.call(this, b, c)
                }, a
            }), b.define("select2/data/maximumInputLength", [], function() {
                function a(a, b, c) {
                    this.maximumInputLength = c.get("maximumInputLength"), a.call(this, b, c)
                }
                return a.prototype.query = function(a, b, c) {
                    return b.term = b.term || "", this.maximumInputLength > 0 && b.term.length > this.maximumInputLength ? void this.trigger("results:message", {
                        message: "inputTooLong",
                        args: {
                            maximum: this.maximumInputLength,
                            input: b.term,
                            params: b
                        }
                    }) : void a.call(this, b, c)
                }, a
            }), b.define("select2/data/maximumSelectionLength", [], function() {
                function a(a, b, c) {
                    this.maximumSelectionLength = c.get("maximumSelectionLength"), a.call(this, b, c)
                }
                return a.prototype.query = function(a, b, c) {
                    var d = this;
                    this.current(function(e) {
                        var f = null != e ? e.length : 0;
                        return d.maximumSelectionLength > 0 && f >= d.maximumSelectionLength ? void d.trigger("results:message", {
                            message: "maximumSelected",
                            args: {
                                maximum: d.maximumSelectionLength
                            }
                        }) : void a.call(d, b, c)
                    })
                }, a
            }), b.define("select2/dropdown", ["jquery", "./utils"], function(a, b) {
                function c(a, b) {
                    this.$element = a, this.options = b, c.__super__.constructor.call(this)
                }
                return b.Extend(c, b.Observable), c.prototype.render = function() {
                    var b = a('<span class="select2-dropdown"><span class="select2-results"></span></span>');
                    return b.attr("dir", this.options.get("dir")), this.$dropdown = b, b
                }, c.prototype.position = function() {}, c.prototype.destroy = function() {
                    this.$dropdown.remove()
                }, c
            }), b.define("select2/dropdown/search", ["jquery", "../utils"], function(a) {
                function b() {}
                return b.prototype.render = function(b) {
                    var c = b.call(this),
                        d = a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');
                    return this.$searchContainer = d, this.$search = d.find("input"), c.prepend(d), c
                }, b.prototype.bind = function(b, c, d) {
                    var e = this;
                    b.call(this, c, d), this.$search.on("keydown", function(a) {
                        e.trigger("keypress", a), e._keyUpPrevented = a.isDefaultPrevented()
                    }), this.$search.on("input", function() {
                        a(this).off("keyup")
                    }), this.$search.on("keyup input", function(a) {
                        e.handleSearch(a)
                    }), c.on("open", function() {
                        e.$search.attr("tabindex", 0), e.$search.focus(), window.setTimeout(function() {
                            e.$search.focus()
                        }, 0)
                    }), c.on("close", function() {
                        e.$search.attr("tabindex", -1), e.$search.val("")
                    }), c.on("results:all", function(a) {
                        if (null == a.query.term || "" === a.query.term) {
                            var b = e.showSearch(a);
                            b ? e.$searchContainer.removeClass("select2-search--hide") : e.$searchContainer.addClass("select2-search--hide")
                        }
                    })
                }, b.prototype.handleSearch = function() {
                    if (!this._keyUpPrevented) {
                        var a = this.$search.val();
                        this.trigger("query", {
                            term: a
                        })
                    }
                    this._keyUpPrevented = !1
                }, b.prototype.showSearch = function() {
                    return !0
                }, b
            }), b.define("select2/dropdown/hidePlaceholder", [], function() {
                function a(a, b, c, d) {
                    this.placeholder = this.normalizePlaceholder(c.get("placeholder")), a.call(this, b, c, d)
                }
                return a.prototype.append = function(a, b) {
                    b.results = this.removePlaceholder(b.results), a.call(this, b)
                }, a.prototype.normalizePlaceholder = function(a, b) {
                    return "string" == typeof b && (b = {
                        id: "",
                        text: b
                    }), b
                }, a.prototype.removePlaceholder = function(a, b) {
                    for (var c = b.slice(0), d = b.length - 1; d >= 0; d--) {
                        var e = b[d];
                        this.placeholder.id === e.id && c.splice(d, 1)
                    }
                    return c
                }, a
            }), b.define("select2/dropdown/infiniteScroll", ["jquery"], function(a) {
                function b(a, b, c, d) {
                    this.lastParams = {}, a.call(this, b, c, d), this.$loadingMore = this.createLoadingMore(), this.loading = !1
                }
                return b.prototype.append = function(a, b) {
                    this.$loadingMore.remove(), this.loading = !1, a.call(this, b), this.showLoadingMore(b) && this.$results.append(this.$loadingMore)
                }, b.prototype.bind = function(b, c, d) {
                    var e = this;
                    b.call(this, c, d), c.on("query", function(a) {
                        e.lastParams = a, e.loading = !0
                    }), c.on("query:append", function(a) {
                        e.lastParams = a, e.loading = !0
                    }), this.$results.on("scroll", function() {
                        var b = a.contains(document.documentElement, e.$loadingMore[0]);
                        if (!e.loading && b) {
                            var c = e.$results.offset().top + e.$results.outerHeight(!1),
                                d = e.$loadingMore.offset().top + e.$loadingMore.outerHeight(!1);
                            c + 50 >= d && e.loadMore()
                        }
                    })
                }, b.prototype.loadMore = function() {
                    this.loading = !0;
                    var b = a.extend({}, {
                        page: 1
                    }, this.lastParams);
                    b.page++, this.trigger("query:append", b)
                }, b.prototype.showLoadingMore = function(a, b) {
                    return b.pagination && b.pagination.more
                }, b.prototype.createLoadingMore = function() {
                    var b = a('<li class="option load-more" role="treeitem"></li>'),
                        c = this.options.get("translations").get("loadingMore");
                    return b.html(c(this.lastParams)), b
                }, b
            }), b.define("select2/dropdown/attachBody", ["jquery", "../utils"], function(a, b) {
                function c(a, b, c) {
                    this.$dropdownParent = c.get("dropdownParent") || document.body, a.call(this, b, c)
                }
                return c.prototype.bind = function(a, b, c) {
                    var d = this,
                        e = !1;
                    a.call(this, b, c), b.on("open", function() {
                        d._showDropdown(), d._attachPositioningHandler(b), e || (e = !0, b.on("results:all", function() {
                            d._positionDropdown(), d._resizeDropdown()
                        }), b.on("results:append", function() {
                            d._positionDropdown(), d._resizeDropdown()
                        }))
                    }), b.on("close", function() {
                        d._hideDropdown(), d._detachPositioningHandler(b)
                    }), this.$dropdownContainer.on("mousedown", function(a) {
                        a.stopPropagation()
                    })
                }, c.prototype.position = function(a, b, c) {
                    b.attr("class", c.attr("class")), b.removeClass("select2"), b.addClass("select2-container--open"), b.css({
                        position: "absolute",
                        top: -999999
                    }), this.$container = c
                }, c.prototype.render = function(b) {
                    var c = a("<span></span>"),
                        d = b.call(this);
                    return c.append(d), this.$dropdownContainer = c, c
                }, c.prototype._hideDropdown = function() {
                    this.$dropdownContainer.detach()
                }, c.prototype._attachPositioningHandler = function(c) {
                    var d = this,
                        e = "scroll.select2." + c.id,
                        f = "resize.select2." + c.id,
                        g = "orientationchange.select2." + c.id,
                        h = this.$container.parents().filter(b.hasScroll);
                    h.each(function() {
                        a(this).data("select2-scroll-position", {
                            x: a(this).scrollLeft(),
                            y: a(this).scrollTop()
                        })
                    }), h.on(e, function() {
                        var b = a(this).data("select2-scroll-position");
                        a(this).scrollTop(b.y)
                    }), a(window).on(e + " " + f + " " + g, function() {
                        d._positionDropdown(), d._resizeDropdown()
                    })
                }, c.prototype._detachPositioningHandler = function(c) {
                    var d = "scroll.select2." + c.id,
                        e = "resize.select2." + c.id,
                        f = "orientationchange.select2." + c.id,
                        g = this.$container.parents().filter(b.hasScroll);
                    g.off(d), a(window).off(d + " " + e + " " + f)
                }, c.prototype._positionDropdown = function() {
                    var b = a(window),
                        c = this.$dropdown.hasClass("select2-dropdown--above"),
                        d = this.$dropdown.hasClass("select2-dropdown--below"),
                        e = null,
                        f = (this.$container.position(), this.$container.offset());
                    f.bottom = f.top + this.$container.outerHeight(!1);
                    var g = {
                        height: this.$container.outerHeight(!1)
                    };
                    g.top = f.top, g.bottom = f.top + g.height;
                    var h = {
                            height: this.$dropdown.outerHeight(!1)
                        },
                        i = {
                            top: b.scrollTop(),
                            bottom: b.scrollTop() + b.height()
                        },
                        j = i.top < f.top - h.height,
                        k = i.bottom > f.bottom + h.height,
                        l = {
                            left: f.left,
                            top: g.bottom
                        };
                    c || d || (e = "below"), k || !j || c ? !j && k && c && (e = "below") : e = "above", ("above" == e || c && "below" !== e) && (l.top = g.top - h.height), null != e && (this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--" + e), this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--" + e)), this.$dropdownContainer.css(l)
                }, c.prototype._resizeDropdown = function() {
                    this.$dropdownContainer.width();
                    var a = {
                        width: this.$container.outerWidth(!1) + "px"
                    };
                    this.options.get("dropdownAutoWidth") && (a.minWidth = a.width, a.width = "auto"), this.$dropdown.css(a)
                }, c.prototype._showDropdown = function() {
                    this.$dropdownContainer.appendTo(this.$dropdownParent), this._positionDropdown(), this._resizeDropdown()
                }, c
            }), b.define("select2/dropdown/minimumResultsForSearch", [], function() {
                function a(b) {
                    for (var c = 0, d = 0; d < b.length; d++) {
                        var e = b[d];
                        e.children ? c += a(e.children) : c++
                    }
                    return c
                }

                function b(a, b, c, d) {
                    this.minimumResultsForSearch = c.get("minimumResultsForSearch"), this.minimumResultsForSearch < 0 && (this.minimumResultsForSearch = 1 / 0), a.call(this, b, c, d)
                }
                return b.prototype.showSearch = function(b, c) {
                    return a(c.data.results) < this.minimumResultsForSearch ? !1 : b.call(this, c)
                }, b
            }), b.define("select2/dropdown/selectOnClose", [], function() {
                function a() {}
                return a.prototype.bind = function(a, b, c) {
                    var d = this;
                    a.call(this, b, c), b.on("close", function() {
                        d._handleSelectOnClose()
                    })
                }, a.prototype._handleSelectOnClose = function() {
                    var a = this.getHighlightedResults();
                    a.length < 1 || this.trigger("select", {
                        data: a.data("data")
                    })
                }, a
            }), b.define("select2/dropdown/closeOnSelect", [], function() {
                function a() {}
                return a.prototype.bind = function(a, b, c) {
                    var d = this;
                    a.call(this, b, c), b.on("select", function(a) {
                        d._selectTriggered(a)
                    }), b.on("unselect", function(a) {
                        d._selectTriggered(a)
                    })
                }, a.prototype._selectTriggered = function(a, b) {
                    var c = b.originalEvent;
                    c && c.ctrlKey || this.trigger("close")
                }, a
            }), b.define("select2/i18n/en", [], function() {
                return {
                    errorLoading: function() {
                        return "The results could not be loaded."
                    },
                    inputTooLong: function(a) {
                        var b = a.input.length - a.maximum,
                            c = "Please delete " + b + " character";
                        return 1 != b && (c += "s"), c
                    },
                    inputTooShort: function(a) {
                        var b = a.minimum - a.input.length,
                            c = "Please enter " + b + " or more characters";
                        return c
                    },
                    loadingMore: function() {
                        return "Loading more results"
                    },
                    maximumSelected: function(a) {
                        var b = "You can only select " + a.maximum + " item";
                        return 1 != a.maximum && (b += "s"), b
                    },
                    noResults: function() {
                        return "No results found"
                    },
                    searching: function() {
                        return "Searching"
                    }
                }
            }), b.define("select2/defaults", ["jquery", "require", "./results", "./selection/single", "./selection/multiple", "./selection/placeholder", "./selection/allowClear", "./selection/search", "./selection/eventRelay", "./utils", "./translation", "./diacritics", "./data/select", "./data/array", "./data/ajax", "./data/tags", "./data/tokenizer", "./data/minimumInputLength", "./data/maximumInputLength", "./data/maximumSelectionLength", "./dropdown", "./dropdown/search", "./dropdown/hidePlaceholder", "./dropdown/infiniteScroll", "./dropdown/attachBody", "./dropdown/minimumResultsForSearch", "./dropdown/selectOnClose", "./dropdown/closeOnSelect", "./i18n/en"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C) {
                function D() {
                    this.reset()
                }
                D.prototype.apply = function(l) {
                    if (l = a.extend({}, this.defaults, l), null == l.dataAdapter) {
                        if (l.dataAdapter = null != l.ajax ? o : null != l.data ? n : m, l.minimumInputLength > 0 && (l.dataAdapter = j.Decorate(l.dataAdapter, r)), l.maximumInputLength > 0 && (l.dataAdapter = j.Decorate(l.dataAdapter, s)), l.maximumSelectionLength > 0 && (l.dataAdapter = j.Decorate(l.dataAdapter, t)), l.tags && (l.dataAdapter = j.Decorate(l.dataAdapter, p)), (null != l.tokenSeparators || null != l.tokenizer) && (l.dataAdapter = j.Decorate(l.dataAdapter, q)), null != l.query) {
                            var C = b(l.amdBase + "compat/query");
                            l.dataAdapter = j.Decorate(l.dataAdapter, C)
                        }
                        if (null != l.initSelection) {
                            var D = b(l.amdBase + "compat/initSelection");
                            l.dataAdapter = j.Decorate(l.dataAdapter, D)
                        }
                    }
                    if (null == l.resultsAdapter && (l.resultsAdapter = c, null != l.ajax && (l.resultsAdapter = j.Decorate(l.resultsAdapter, x)), null != l.placeholder && (l.resultsAdapter = j.Decorate(l.resultsAdapter, w)), l.selectOnClose && (l.resultsAdapter = j.Decorate(l.resultsAdapter, A))), null == l.dropdownAdapter) {
                        if (l.multiple) l.dropdownAdapter = u;
                        else {
                            var E = j.Decorate(u, v);
                            l.dropdownAdapter = E
                        }
                        if (0 !== l.minimumResultsForSearch && (l.dropdownAdapter = j.Decorate(l.dropdownAdapter, z)), l.closeOnSelect && (l.dropdownAdapter = j.Decorate(l.dropdownAdapter, B)), null != l.dropdownCssClass || null != l.dropdownCss || null != l.adaptDropdownCssClass) {
                            var F = b(l.amdBase + "compat/dropdownCss");
                            l.dropdownAdapter = j.Decorate(l.dropdownAdapter, F)
                        }
                        l.dropdownAdapter = j.Decorate(l.dropdownAdapter, y)
                    }
                    if (null == l.selectionAdapter) {
                        if (l.selectionAdapter = l.multiple ? e : d, null != l.placeholder && (l.selectionAdapter = j.Decorate(l.selectionAdapter, f)), l.allowClear && (l.selectionAdapter = j.Decorate(l.selectionAdapter, g)), l.multiple && (l.selectionAdapter = j.Decorate(l.selectionAdapter, h)), null != l.containerCssClass || null != l.containerCss || null != l.adaptContainerCssClass) {
                            var G = b(l.amdBase + "compat/containerCss");
                            l.selectionAdapter = j.Decorate(l.selectionAdapter, G)
                        }
                        l.selectionAdapter = j.Decorate(l.selectionAdapter, i)
                    }
                    if ("string" == typeof l.language)
                        if (l.language.indexOf("-") > 0) {
                            var H = l.language.split("-"),
                                I = H[0];
                            l.language = [l.language, I]
                        } else l.language = [l.language];
                    if (a.isArray(l.language)) {
                        var J = new k;
                        l.language.push("en");
                        for (var K = l.language, L = 0; L < K.length; L++) {
                            var M = K[L],
                                N = {};
                            try {
                                N = k.loadPath(M)
                            } catch (O) {
                                try {
                                    M = this.defaults.amdLanguageBase + M, N = k.loadPath(M)
                                } catch (P) {
                                    l.debug && window.console && console.warn && console.warn('Select2: The language file for "' + M + '" could not be automatically loaded. A fallback will be used instead.');
                                    continue
                                }
                            }
                            J.extend(N)
                        }
                        l.translations = J
                    } else {
                        var Q = k.loadPath(this.defaults.amdLanguageBase + "en"),
                            R = new k(l.language);
                        R.extend(Q), l.translations = R
                    }
                    return l
                }, D.prototype.reset = function() {
                    function b(a) {
                        function b(a) {
                            return l[a] || a
                        }
                        return a.replace(/[^\u0000-\u007E]/g, b)
                    }

                    function c(d, e) {
                        if ("" === a.trim(d.term)) return e;
                        if (e.children && e.children.length > 0) {
                            for (var f = a.extend(!0, {}, e), g = e.children.length - 1; g >= 0; g--) {
                                var h = e.children[g],
                                    i = c(d, h);
                                null == i && f.children.splice(g, 1)
                            }
                            return f.children.length > 0 ? f : c(d, f)
                        }
                        var j = b(e.text).toUpperCase(),
                            k = b(d.term).toUpperCase();
                        return j.indexOf(k) > -1 ? e : null
                    }
                    this.defaults = {
                        amdBase: "./",
                        amdLanguageBase: "./i18n/",
                        closeOnSelect: !0,
                        debug: !1,
                        dropdownAutoWidth: !1,
                        escapeMarkup: j.escapeMarkup,
                        language: C,
                        matcher: c,
                        minimumInputLength: 0,
                        maximumInputLength: 0,
                        maximumSelectionLength: 0,
                        minimumResultsForSearch: 0,
                        selectOnClose: !1,
                        sorter: function(a) {
                            return a
                        },
                        templateResult: function(a) {
                            return a.text
                        },
                        templateSelection: function(a) {
                            return a.text
                        },
                        theme: "default",
                        width: "resolve"
                    }
                }, D.prototype.set = function(b, c) {
                    var d = a.camelCase(b),
                        e = {};
                    e[d] = c;
                    var f = j._convertData(e);
                    a.extend(this.defaults, f)
                };
                var E = new D;
                return E
            }), b.define("select2/options", ["require", "jquery", "./defaults", "./utils"], function(a, b, c, d) {
                function e(b, e) {
                    if (this.options = b, null != e && this.fromElement(e), this.options = c.apply(this.options), e && e.is("input")) {
                        var f = a(this.get("amdBase") + "compat/inputData");
                        this.options.dataAdapter = d.Decorate(this.options.dataAdapter, f)
                    }
                }
                return e.prototype.fromElement = function(a) {
                    var c = ["select2"];
                    null == this.options.multiple && (this.options.multiple = a.prop("multiple")), null == this.options.disabled && (this.options.disabled = a.prop("disabled")), null == this.options.language && (a.prop("lang") ? this.options.language = a.prop("lang").toLowerCase() : a.closest("[lang]").prop("lang") && (this.options.language = a.closest("[lang]").prop("lang"))), null == this.options.dir && (this.options.dir = a.prop("dir") ? a.prop("dir") : a.closest("[dir]").prop("dir") ? a.closest("[dir]").prop("dir") : "ltr"), a.prop("disabled", this.options.disabled), a.prop("multiple", this.options.multiple), a.data("select2Tags") && (this.options.debug && window.console && console.warn && console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'), a.data("data", a.data("select2Tags")), a.data("tags", !0)), a.data("ajaxUrl") && (this.options.debug && window.console && console.warn && console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."), a.attr("ajax--url", a.data("ajaxUrl")), a.data("ajax--url", a.data("ajaxUrl")));
                    var e = {};
                    e = b.fn.jquery && "1." == b.fn.jquery.substr(0, 2) && a[0].dataset ? b.extend(!0, {}, a[0].dataset, a.data()) : a.data();
                    var f = b.extend(!0, {}, e);
                    f = d._convertData(f);
                    for (var g in f) b.inArray(g, c) > -1 || (b.isPlainObject(this.options[g]) ? b.extend(this.options[g], f[g]) : this.options[g] = f[g]);
                    return this
                }, e.prototype.get = function(a) {
                    return this.options[a]
                }, e.prototype.set = function(a, b) {
                    this.options[a] = b
                }, e
            }), b.define("select2/core", ["jquery", "./options", "./utils", "./keys"], function(a, b, c, d) {
                var e = function(a, c) {
                    null != a.data("select2") && a.data("select2").destroy(), this.$element = a, this.id = this._generateId(a), c = c || {}, this.options = new b(c, a), e.__super__.constructor.call(this);
                    var d = a.attr("tabindex") || 0;
                    a.data("old-tabindex", d), a.attr("tabindex", "-1");
                    var f = this.options.get("dataAdapter");
                    this.dataAdapter = new f(a, this.options);
                    var g = this.render();
                    this._placeContainer(g);
                    var h = this.options.get("selectionAdapter");
                    this.selection = new h(a, this.options), this.$selection = this.selection.render(), this.selection.position(this.$selection, g);
                    var i = this.options.get("dropdownAdapter");
                    this.dropdown = new i(a, this.options), this.$dropdown = this.dropdown.render(), this.dropdown.position(this.$dropdown, g);
                    var j = this.options.get("resultsAdapter");
                    this.results = new j(a, this.options, this.dataAdapter), this.$results = this.results.render(), this.results.position(this.$results, this.$dropdown);
                    var k = this;
                    this._bindAdapters(), this._registerDomEvents(), this._registerDataEvents(), this._registerSelectionEvents(), this._registerDropdownEvents(), this._registerResultsEvents(), this._registerEvents(), this.dataAdapter.current(function(a) {
                        k.trigger("selection:update", {
                            data: a
                        })
                    }), a.addClass("select2-hidden-accessible"), a.attr("aria-hidden", "true"), this._syncAttributes(), a.data("select2", this)
                };
                return c.Extend(e, c.Observable), e.prototype._generateId = function(a) {
                    var b = "";
                    return b = null != a.attr("id") ? a.attr("id") : null != a.attr("name") ? a.attr("name") + "-" + c.generateChars(2) : c.generateChars(4), b = "select2-" + b
                }, e.prototype._placeContainer = function(a) {
                    a.insertAfter(this.$element);
                    var b = this._resolveWidth(this.$element, this.options.get("width"));
                    null != b && a.css("width", b)
                }, e.prototype._resolveWidth = function(a, b) {
                    var c = /^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;
                    if ("resolve" == b) {
                        var d = this._resolveWidth(a, "style");
                        return null != d ? d : this._resolveWidth(a, "element")
                    }
                    if ("element" == b) {
                        var e = a.outerWidth(!1);
                        return 0 >= e ? "auto" : e + "px"
                    }
                    if ("style" == b) {
                        var f = a.attr("style");
                        if ("string" != typeof f) return null;
                        for (var g = f.split(";"), h = 0, i = g.length; i > h; h += 1) {
                            var j = g[h].replace(/\s/g, ""),
                                k = j.match(c);
                            if (null !== k && k.length >= 1) return k[1]
                        }
                        return null
                    }
                    return b
                }, e.prototype._bindAdapters = function() {
                    this.dataAdapter.bind(this, this.$container), this.selection.bind(this, this.$container), this.dropdown.bind(this, this.$container), this.results.bind(this, this.$container)
                }, e.prototype._registerDomEvents = function() {
                    var b = this;
                    this.$element.on("change.select2", function() {
                        b.dataAdapter.current(function(a) {
                            b.trigger("selection:update", {
                                data: a
                            })
                        })
                    }), this._sync = c.bind(this._syncAttributes, this), this.$element[0].attachEvent && this.$element[0].attachEvent("onpropertychange", this._sync);
                    var d = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                    null != d ? (this._observer = new d(function(c) {
                        a.each(c, b._sync)
                    }), this._observer.observe(this.$element[0], {
                        attributes: !0,
                        subtree: !1
                    })) : this.$element[0].addEventListener && this.$element[0].addEventListener("DOMAttrModified", b._sync, !1)
                }, e.prototype._registerDataEvents = function() {
                    var a = this;
                    this.dataAdapter.on("*", function(b, c) {
                        a.trigger(b, c)
                    })
                }, e.prototype._registerSelectionEvents = function() {
                    var b = this,
                        c = ["toggle"];
                    this.selection.on("toggle", function() {
                        b.toggleDropdown()
                    }), this.selection.on("*", function(d, e) {
                        -1 === a.inArray(d, c) && b.trigger(d, e)
                    })
                }, e.prototype._registerDropdownEvents = function() {
                    var a = this;
                    this.dropdown.on("*", function(b, c) {
                        a.trigger(b, c)
                    })
                }, e.prototype._registerResultsEvents = function() {
                    var a = this;
                    this.results.on("*", function(b, c) {
                        a.trigger(b, c)
                    })
                }, e.prototype._registerEvents = function() {
                    var a = this;
                    this.on("open", function() {
                        a.$container.addClass("select2-container--open")
                    }), this.on("close", function() {
                        a.$container.removeClass("select2-container--open")
                    }), this.on("enable", function() {
                        a.$container.removeClass("select2-container--disabled")
                    }), this.on("disable", function() {
                        a.$container.addClass("select2-container--disabled")
                    }), this.on("focus", function() {
                        a.$container.addClass("select2-container--focus")
                    }), this.on("blur", function() {
                        a.$container.removeClass("select2-container--focus")
                    }), this.on("query", function(b) {
                        a.isOpen() || a.trigger("open"), this.dataAdapter.query(b, function(c) {
                            a.trigger("results:all", {
                                data: c,
                                query: b
                            })
                        })
                    }), this.on("query:append", function(b) {
                        this.dataAdapter.query(b, function(c) {
                            a.trigger("results:append", {
                                data: c,
                                query: b
                            })
                        })
                    }), this.on("keypress", function(b) {
                        var c = b.which;
                        a.isOpen() ? c === d.ENTER ? (a.trigger("results:select"), b.preventDefault()) : c === d.SPACE && b.ctrlKey ? (a.trigger("results:toggle"), b.preventDefault()) : c === d.UP ? (a.trigger("results:previous"), b.preventDefault()) : c === d.DOWN ? (a.trigger("results:next"), b.preventDefault()) : (c === d.ESC || c === d.TAB) && (a.close(), b.preventDefault()) : (c === d.ENTER || c === d.SPACE || (c === d.DOWN || c === d.UP) && b.altKey) && (a.open(), b.preventDefault())
                    })
                }, e.prototype._syncAttributes = function() {
                    this.options.set("disabled", this.$element.prop("disabled")), this.options.get("disabled") ? (this.isOpen() && this.close(), this.trigger("disable")) : this.trigger("enable")
                }, e.prototype.trigger = function(a, b) {
                    var c = e.__super__.trigger,
                        d = {
                            open: "opening",
                            close: "closing",
                            select: "selecting",
                            unselect: "unselecting"
                        };
                    if (a in d) {
                        var f = d[a],
                            g = {
                                prevented: !1,
                                name: a,
                                args: b
                            };
                        if (c.call(this, f, g), g.prevented) return void(b.prevented = !0)
                    }
                    c.call(this, a, b)
                }, e.prototype.toggleDropdown = function() {
                    this.options.get("disabled") || (this.isOpen() ? this.close() : this.open())
                }, e.prototype.open = function() {
                    this.isOpen() || (this.trigger("query", {}), this.trigger("open"))
                }, e.prototype.close = function() {
                    this.isOpen() && this.trigger("close")
                }, e.prototype.isOpen = function() {
                    return this.$container.hasClass("select2-container--open")
                }, e.prototype.enable = function(a) {
                    this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'), (null == a || 0 === a.length) && (a = [!0]);
                    var b = !a[0];
                    this.$element.prop("disabled", b)
                }, e.prototype.data = function() {
                    this.options.get("debug") && arguments.length > 0 && window.console && console.warn && console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');
                    var a = [];
                    return this.dataAdapter.current(function(b) {
                        a = b
                    }), a
                }, e.prototype.val = function(b) {
                    if (this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'), null == b || 0 === b.length) return this.$element.val();
                    var c = b[0];
                    a.isArray(c) && (c = a.map(c, function(a) {
                        return a.toString()
                    })), this.$element.val(c).trigger("change")
                }, e.prototype.destroy = function() {
                    this.$container.remove(), this.$element[0].detachEvent && this.$element[0].detachEvent("onpropertychange", this._sync), null != this._observer ? (this._observer.disconnect(), this._observer = null) : this.$element[0].removeEventListener && this.$element[0].removeEventListener("DOMAttrModified", this._sync, !1), this._sync = null, this.$element.off(".select2"), this.$element.attr("tabindex", this.$element.data("old-tabindex")), this.$element.removeClass("select2-hidden-accessible"), this.$element.attr("aria-hidden", "false"), this.$element.removeData("select2"), this.dataAdapter.destroy(), this.selection.destroy(), this.dropdown.destroy(), this.results.destroy(), this.dataAdapter = null, this.selection = null, this.dropdown = null, this.results = null
                }, e.prototype.render = function() {
                    var b = a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');
                    return b.attr("dir", this.options.get("dir")), this.$container = b, this.$container.addClass("select2-container--" + this.options.get("theme")), b.data("element", this.$element), b
                }, e
            }), b.define("jquery.select2", ["jquery", "require", "./select2/core", "./select2/defaults"], function(a, b, c, d) {
                if (b("jquery.mousewheel"), null == a.fn.select2) {
                    var e = ["open", "close", "destroy"];
                    a.fn.select2 = function(b) {
                        if (b = b || {}, "object" == typeof b) return this.each(function() {
                            {
                                var d = a.extend({}, b, !0);
                                new c(a(this), d)
                            }
                        }), this;
                        if ("string" == typeof b) {
                            var d = this.data("select2");
                            null == d && window.console && console.error && console.error("The select2('" + b + "') method was called on an element that is not using Select2.");
                            var f = Array.prototype.slice.call(arguments, 1),
                                g = d[b](f);
                            return a.inArray(b, e) > -1 ? this : g
                        }
                        throw new Error("Invalid arguments for Select2: " + b)
                    }
                }
                return null == a.fn.select2.defaults && (a.fn.select2.defaults = d), c
            }), b.define("jquery.mousewheel", ["jquery"], function(a) {
                return a
            }), {
                define: b.define,
                require: b.require
            }
        }(),
        c = b.require("jquery.select2");
    return a.fn.select2.amd = b, c
});;
'use strict';
if (typeof jQuery === "undefined") {
    throw new Error("AdminLTE requires jQuery");
}
$.AdminLTE = {};
$.AdminLTE.options = {
    navbarMenuSlimscroll: true,
    navbarMenuSlimscrollWidth: "3px",
    navbarMenuHeight: "200px",
    animationSpeed: 500,
    sidebarToggleSelector: "[data-toggle='offcanvas']",
    sidebarPushMenu: true,
    sidebarSlimScroll: true,
    sidebarExpandOnHover: false,
    enableBoxRefresh: true,
    enableBSToppltip: true,
    BSTooltipSelector: "[data-toggle='tooltip']",
    enableFastclick: true,
    enableControlSidebar: true,
    controlSidebarOptions: {
        toggleBtnSelector: "[data-toggle='control-sidebar']",
        selector: ".control-sidebar",
        slide: true
    },
    enableBoxWidget: true,
    boxWidgetOptions: {
        boxWidgetIcons: {
            collapse: 'fa-minus',
            open: 'fa-plus',
            remove: 'fa-times'
        },
        boxWidgetSelectors: {
            remove: '[data-widget="remove"]',
            collapse: '[data-widget="collapse"]'
        }
    },
    directChat: {
        enable: true,
        contactToggleSelector: '[data-widget="chat-pane-toggle"]'
    },
    colors: {
        lightBlue: "#3c8dbc",
        red: "#f56954",
        green: "#00a65a",
        aqua: "#00c0ef",
        yellow: "#f39c12",
        blue: "#0073b7",
        navy: "#001F3F",
        teal: "#39CCCC",
        olive: "#3D9970",
        lime: "#01FF70",
        orange: "#FF851B",
        fuchsia: "#F012BE",
        purple: "#8E24AA",
        maroon: "#D81B60",
        black: "#222222",
        gray: "#d2d6de"
    },
    screenSizes: {
        xs: 480,
        sm: 768,
        md: 992,
        lg: 1200
    }
};
$(function() {
    if (typeof AdminLTEOptions !== "undefined") {
        $.extend(true, $.AdminLTE.options, AdminLTEOptions);
    }
    var o = $.AdminLTE.options;
    _init();
    $.AdminLTE.layout.activate();
    $.AdminLTE.tree('.sidebar');
    if (o.enableControlSidebar) {
        $.AdminLTE.controlSidebar.activate();
    }
    if (o.navbarMenuSlimscroll && typeof $.fn.slimscroll != 'undefined') {
        $(".navbar .menu").slimscroll({
            height: o.navbarMenuHeight,
            alwaysVisible: false,
            size: o.navbarMenuSlimscrollWidth
        }).css("width", "100%");
    }
    if (o.sidebarPushMenu) {
        $.AdminLTE.pushMenu.activate(o.sidebarToggleSelector);
    }
    if (o.enableBSToppltip) {
        $('body').tooltip({
            selector: o.BSTooltipSelector
        });
    }
    if (o.enableBoxWidget) {
        $.AdminLTE.boxWidget.activate();
    }
    if (o.enableFastclick && typeof FastClick != 'undefined') {
        FastClick.attach(document.body);
    }
    if (o.directChat.enable) {
        $(o.directChat.contactToggleSelector).on('click', function() {
            var box = $(this).parents('.direct-chat').first();
            box.toggleClass('direct-chat-contacts-open');
        });
    }
    $('.btn-group[data-toggle="btn-toggle"]').each(function() {
        var group = $(this);
        $(this).find(".btn").on('click', function(e) {
            group.find(".btn.active").removeClass("active");
            $(this).addClass("active");
            e.preventDefault();
        });
    });
});

function _init() {
    $.AdminLTE.layout = {
        activate: function() {
            var _this = this;
            _this.fix();
            _this.fixSidebar();
            $(window, ".wrapper").resize(function() {
                _this.fix();
                _this.fixSidebar();
            });
        },
        fix: function() {
            var neg = $('.main-header').outerHeight() + $('.main-footer').outerHeight();
            var window_height = $(window).height();
            var sidebar_height = $(".sidebar").height();
            if ($("body").hasClass("fixed")) {
                $(".content-wrapper, .right-side").css('min-height', window_height - $('.main-footer').outerHeight());
            } else {
                var postSetWidth;
                if (window_height >= sidebar_height) {
                    $(".content-wrapper, .right-side").css('min-height', window_height - neg);
                    postSetWidth = window_height - neg;
                } else {
                    $(".content-wrapper, .right-side").css('min-height', sidebar_height);
                    postSetWidth = sidebar_height;
                }
                var controlSidebar = $($.AdminLTE.options.controlSidebarOptions.selector);
                if (typeof controlSidebar !== "undefined") {
                    if (controlSidebar.height() > postSetWidth)
                        $(".content-wrapper, .right-side").css('min-height', controlSidebar.height());
                }
            }
        },
        fixSidebar: function() {
            if (!$("body").hasClass("fixed")) {
                if (typeof $.fn.slimScroll != 'undefined') {
                    $(".sidebar").slimScroll({
                        destroy: true
                    }).height("auto");
                }
                return;
            } else if (typeof $.fn.slimScroll == 'undefined' && console) {
                console.error("Error: the fixed layout requires the slimscroll plugin!");
            }
            if ($.AdminLTE.options.sidebarSlimScroll) {
                if (typeof $.fn.slimScroll != 'undefined') {
                    $(".sidebar").slimScroll({
                        destroy: true
                    }).height("auto");
                    $(".sidebar").slimscroll({
                        height: ($(window).height() - $(".main-header").height()) + "px",
                        color: "rgba(0,0,0,0.2)",
                        size: "3px"
                    });
                }
            }
        }
    };
    $.AdminLTE.pushMenu = {
        activate: function(toggleBtn) {
            var screenSizes = $.AdminLTE.options.screenSizes;
            $(toggleBtn).on('click', function(e) {
                e.preventDefault();
                if ($(window).width() > (screenSizes.sm - 1)) {
                    if ($("body").hasClass('sidebar-collapse')) {
                        $("body").removeClass('sidebar-collapse').trigger('expanded.pushMenu');
                    } else {
                        $("body").addClass('sidebar-collapse').trigger('collapsed.pushMenu');
                    }
                } else {
                    if ($("body").hasClass('sidebar-open')) {
                        $("body").removeClass('sidebar-open').removeClass('sidebar-collapse').trigger('collapsed.pushMenu');
                    } else {
                        $("body").addClass('sidebar-open').trigger('expanded.pushMenu');
                    }
                }
            });
            $(".content-wrapper").click(function() {
                if ($(window).width() <= (screenSizes.sm - 1) && $("body").hasClass("sidebar-open")) {
                    $("body").removeClass('sidebar-open');
                }
            });
            if ($.AdminLTE.options.sidebarExpandOnHover || ($('body').hasClass('fixed') && $('body').hasClass('sidebar-mini'))) {
                this.expandOnHover();
            }
        },
        expandOnHover: function() {
            var _this = this;
            var screenWidth = $.AdminLTE.options.screenSizes.sm - 1;
            $('.main-sidebar').hover(function() {
                if ($('body').hasClass('sidebar-mini') && $("body").hasClass('sidebar-collapse') && $(window).width() > screenWidth) {
                    _this.expand();
                }
            }, function() {
                if ($('body').hasClass('sidebar-mini') && $('body').hasClass('sidebar-expanded-on-hover') && $(window).width() > screenWidth) {
                    _this.collapse();
                }
            });
        },
        expand: function() {
            $("body").removeClass('sidebar-collapse').addClass('sidebar-expanded-on-hover');
        },
        collapse: function() {
            if ($('body').hasClass('sidebar-expanded-on-hover')) {
                $('body').removeClass('sidebar-expanded-on-hover').addClass('sidebar-collapse');
            }
        }
    };
    $.AdminLTE.tree = function(menu) {
        var _this = this;
        var animationSpeed = $.AdminLTE.options.animationSpeed;
        $("li a", $(menu)).on('click', function(e) {
            var $this = $(this);
            var checkElement = $this.next();
            if ((checkElement.is('.treeview-menu')) && (checkElement.is(':visible'))) {
                checkElement.slideUp(animationSpeed, function() {
                    checkElement.removeClass('menu-open');
                });
                checkElement.parent("li").removeClass("active");
            } else if ((checkElement.is('.treeview-menu')) && (!checkElement.is(':visible'))) {
                var parent = $this.parents('ul').first();
                var ul = parent.find('ul:visible').slideUp(animationSpeed);
                ul.removeClass('menu-open');
                var parent_li = $this.parent("li");
                checkElement.slideDown(animationSpeed, function() {
                    checkElement.addClass('menu-open');
                    parent.find('li.active').removeClass('active');
                    parent_li.addClass('active');
                    _this.layout.fix();
                });
            }
            if (checkElement.is('.treeview-menu')) {
                e.preventDefault();
            }
        });
    };
    $.AdminLTE.controlSidebar = {
        activate: function() {
            var _this = this;
            var o = $.AdminLTE.options.controlSidebarOptions;
            var sidebar = $(o.selector);
            var btn = $(o.toggleBtnSelector);
            btn.on('click', function(e) {
                e.preventDefault();
                if (!sidebar.hasClass('control-sidebar-open') && !$('body').hasClass('control-sidebar-open')) {
                    _this.open(sidebar, o.slide);
                } else {
                    _this.close(sidebar, o.slide);
                }
            });
            var bg = $(".control-sidebar-bg");
            _this._fix(bg);
            if ($('body').hasClass('fixed')) {
                _this._fixForFixed(sidebar);
            } else {
                if ($('.content-wrapper, .right-side').height() < sidebar.height()) {
                    _this._fixForContent(sidebar);
                }
            }
        },
        open: function(sidebar, slide) {
            var _this = this;
            if (slide) {
                sidebar.addClass('control-sidebar-open');
            } else {
                $('body').addClass('control-sidebar-open');
            }
        },
        close: function(sidebar, slide) {
            if (slide) {
                sidebar.removeClass('control-sidebar-open');
            } else {
                $('body').removeClass('control-sidebar-open');
            }
        },
        _fix: function(sidebar) {
            var _this = this;
            if ($("body").hasClass('layout-boxed')) {
                sidebar.css('position', 'absolute');
                sidebar.height($(".wrapper").height());
                $(window).resize(function() {
                    _this._fix(sidebar);
                });
            } else {
                sidebar.css({
                    'position': 'fixed',
                    'height': 'auto'
                });
            }
        },
        _fixForFixed: function(sidebar) {
            sidebar.css({
                'position': 'fixed',
                'max-height': '100%',
                'overflow': 'auto',
                'padding-bottom': '50px'
            });
        },
        _fixForContent: function(sidebar) {
            $(".content-wrapper, .right-side").css('min-height', sidebar.height());
        }
    };
    $.AdminLTE.boxWidget = {
        selectors: $.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,
        icons: $.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,
        animationSpeed: $.AdminLTE.options.animationSpeed,
        activate: function(_box) {
            var _this = this;
            if (!_box) {
                _box = document;
            }
            $(_box).find(_this.selectors.collapse).on('click', function(e) {
                e.preventDefault();
                _this.collapse($(this));
            });
            $(_box).find(_this.selectors.remove).on('click', function(e) {
                e.preventDefault();
                _this.remove($(this));
            });
        },
        collapse: function(element) {
            var _this = this;
            var box = element.parents(".box").first();
            var box_content = box.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");
            if (!box.hasClass("collapsed-box")) {
                element.children(":first").removeClass(_this.icons.collapse).addClass(_this.icons.open);
                box_content.slideUp(_this.animationSpeed, function() {
                    box.addClass("collapsed-box");
                });
            } else {
                element.children(":first").removeClass(_this.icons.open).addClass(_this.icons.collapse);
                box_content.slideDown(_this.animationSpeed, function() {
                    box.removeClass("collapsed-box");
                });
            }
        },
        remove: function(element) {
            var box = element.parents(".box").first();
            box.slideUp(this.animationSpeed);
        }
    };
}
(function($) {
    $.fn.boxRefresh = function(options) {
        var settings = $.extend({
            trigger: ".refresh-btn",
            source: "",
            onLoadStart: function(box) {},
            onLoadDone: function(box) {}
        }, options);
        var overlay = $('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');
        return this.each(function() {
            if (settings.source === "") {
                if (console) {
                    console.log("Please specify a source first - boxRefresh()");
                }
                return;
            }
            var box = $(this);
            var rBtn = box.find(settings.trigger).first();
            rBtn.on('click', function(e) {
                e.preventDefault();
                start(box);
                box.find(".box-body").load(settings.source, function() {
                    done(box);
                });
            });
        });

        function start(box) {
            box.append(overlay);
            settings.onLoadStart.call(box);
        }

        function done(box) {
            box.find(overlay).remove();
            settings.onLoadDone.call(box);
        }
    };
})(jQuery);
(function($) {
    $.fn.activateBox = function() {
        $.AdminLTE.boxWidget.activate(this);
    };
})(jQuery);
(function($) {
    $.fn.todolist = function(options) {
        var settings = $.extend({
            onCheck: function(ele) {},
            onUncheck: function(ele) {}
        }, options);
        return this.each(function() {
            if (typeof $.fn.iCheck != 'undefined') {
                $('input', this).on('ifChecked', function(event) {
                    var ele = $(this).parents("li").first();
                    ele.toggleClass("done");
                    settings.onCheck.call(ele);
                });
                $('input', this).on('ifUnchecked', function(event) {
                    var ele = $(this).parents("li").first();
                    ele.toggleClass("done");
                    settings.onUncheck.call(ele);
                });
            } else {
                $('input', this).on('change', function(event) {
                    var ele = $(this).parents("li").first();
                    ele.toggleClass("done");
                    settings.onCheck.call(ele);
                });
            }
        });
    };
}(jQuery));;
Event = (function() {
    var guid = 0;

    function fixEvent(event) {
        event = event || window.event;
        if (event.isFixed) {
            return event;
        }
        event.isFixed = true;
        event.preventDefault = event.preventDefault || function() {
            this.returnValue = false;
        };
        event.stopPropagation = event.stopPropagaton || function() {
            this.cancelBubble = true;
        };
        if (!event.target) {
            event.target = event.srcElement;
        }
        if (!event.relatedTarget && event.fromElement) {
            event.relatedTarget = event.fromElement === event.target ? event.toElement : event.fromElement;
        }
        if (event.pageX === null && event.clientX !== null) {
            var html = document.documentElement,
                body = document.body;
            event.pageX = event.clientX + (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);
            event.pageY = event.clientY + (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);
        }
        if (!event.which && event.button) {
            event.which = (event.button & 1 ? 1 : (event.button & 2 ? 3 : (event.button & 4 ? 2 : 0)));
        }
        return event;
    }

    function commonHandle(event) {
        event = fixEvent(event);
        var handlers = this.events[event.type];
        for (var g in handlers) {
            var handler = handlers[g];
            var ret = handler.call(this, event);
            if (ret === false) {
                event.preventDefault();
                event.stopPropagation();
            }
        }
    }
    return {
        add: function(elem, type, handler) {
            if (elem.setInterval && (elem !== window && !elem.frameElement)) {
                elem = window;
            }
            if (!handler.guid) {
                handler.guid = ++guid;
            }
            if (!elem.events) {
                elem.events = {};
                elem.handle = function(event) {
                    if (typeof Event !== "undefined") {
                        return commonHandle.call(elem, event);
                    }
                };
            }
            if (!elem.events[type]) {
                elem.events[type] = {}
                if (elem.addEventListener)
                    elem.addEventListener(type, elem.handle, false);
                else if (elem.attachEvent)
                    elem.attachEvent("on" + type, elem.handle);
            }
            elem.events[type][handler.guid] = handler;
        },
        remove: function(elem, type, handler) {
            var handlers = elem.events && elem.events[type]
            if (!handlers)
                return;
            delete handlers[handler.guid];
            for (var any in handlers)
                return;
            if (elem.removeEventListener)
                elem.removeEventListener(type, elem.handle, false);
            else if (elem.detachEvent)
                elem.detachEvent("on" + type, elem.handle);
            delete elem.events[type];
            for (var any in elem.events)
                return;
            try {
                delete elem.handle;
                delete elem.events;
            } catch (e) {
                elem.removeAttribute("handle");
                elem.removeAttribute("events");
            }
        }
    };
}());

function bindReady(handler) {
    var called = false

    function ready() {
        if (called)
            return
        called = true
        handler()
    }
    if (document.addEventListener) {
        document.addEventListener("DOMContentLoaded", ready, false)
    } else if (document.attachEvent) {
        try {
            var isFrame = window.frameElement != null
        } catch (e) {}
        if (document.documentElement.doScroll && !isFrame) {
            function tryScroll() {
                if (called)
                    return
                try {
                    document.documentElement.doScroll("left")
                    ready()
                } catch (e) {
                    setTimeout(tryScroll, 10)
                }
            }
            tryScroll()
        }
        document.attachEvent("onreadystatechange", function() {
            if (document.readyState === "complete") {
                ready()
            }
        })
    }
    if (window.addEventListener)
        window.addEventListener('load', ready, false)
    else if (window.attachEvent)
        window.attachEvent('onload', ready)
    else {
        var fn = window.onload
        window.onload = function() {
            fn && fn()
            ready()
        }
    }
}
var readyList = [];

function onReady(handler) {
    function executeHandlers() {
        for (var i = 0; i < readyList.length; i++) {
            readyList[i]();
        }
    }
    if (!readyList.length) {
        bindReady(executeHandlers);
    }
    readyList.push(handler);
}
if (!String.prototype.trim) {
    String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g, '');
    };
}
$.fn.serializeObject = function() {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

function isLocalStorageAvailable() {
    try {
        return 'localStorage' in window && window['localStorage'] !== null;
    } catch (e) {
        return false;
    }
};

function Rotation() {
    var self = this;
    self.elements = [];
    self.timerPosition = 1;
    self.init = function() {
        var elements = document.querySelectorAll('[data-rotation]');
        for (var i = 0; i < elements.length; i++) {
            var elem = elements[i];
            elem.classList.add('rotation');
            var config = self.parseConfig(elem.getAttribute('data-rotation'));
            if (config.target) {
                var targetElements = elem.querySelectorAll(config.target);
                self.initTargetElements(targetElements);
                elem.setAttribute('data-count', targetElements.length);
                elem.setAttribute('data-current', '1');
                if (config.interval) {
                    elem.setAttribute('data-trigger', '0');
                }
            }
            var navElement;
            if (config.nav) {
                navElement = elem.querySelector(config.nav);
            } else {
                navElement = elem;
            }
            var prevElement = navElement.querySelector('.prev');
            if (prevElement) {
                prevElement.addEventListener("click", self.clickPrev, false);
            }
            var nextElement = navElement.querySelector('.next');
            if (nextElement) {
                nextElement.addEventListener("click", self.clickNext, false);
            }
            if (config.pickerItems) {
                var pickerItems = elem.querySelectorAll(config.pickerItems);
                for (p = 0; p < pickerItems.length; p++) {
                    var pickerItemNode = pickerItems[p];
                    if (pickerItemNode) {
                        pickerItemNode.addEventListener("click", self.pick, false);
                    }
                }
            }
            if (config.interval) {
                elem.setAttribute('data-interval', config.interval);
            }
            self.elements.push(elem);
            self.setVisibleByActive(elem);
        }
        self.initIntervals();
    };
    self.initTargetElements = function(targetElements) {
        for (var i = 0; i < targetElements.length; i++) {
            var elem = targetElements[i];
            if (i != 0) {
                elem.style.display = 'none';
                elem.style.opacity = 0;
            }
        }
    }
    self.initIntervals = function() {
        window.setInterval(function() {
            for (var i = 0; i < self.elements.length; i++) {
                var elem = self.elements[i];
                var trigger = elem.getAttribute('data-trigger') || 0;
                var interval = elem.getAttribute('data-interval') || 0;
                if (trigger == 0) {
                    if (interval > 0) {
                        if (self.timerPosition >= interval && self.timerPosition % interval == 0) {
                            self.next(elem);
                        }
                    }
                }
            }
            self.timerPosition++;
        }, 1000);
    };
    self.getRoot = function(element) {
        var parent = element.parentNode;
        if (parent) {
            if (nodeHasClass(parent, 'rotation')) {
                return parent;
            } else {
                return self.getRoot(parent);
            }
        }
        return false;
    };
    self.parseConfig = function(configString) {
        var config = {};
        $.each(configString.split(';'), function(index, value) {
            var keyVal = value.split(':');
            if (keyVal[0] && keyVal[1]) {
                config[keyVal[0].trim()] = keyVal[1].trim();
            }
        });
        return config;
    };
    self.clickPrev = function(e) {
        var rootNode = self.getRoot(e.target);
        self.triggerUp(rootNode);
        self.prev(rootNode);
    };
    self.clickNext = function(e) {
        var rootNode = self.getRoot(e.target);
        self.triggerUp(rootNode);
        self.next(rootNode);
    };
    self.pick = function(e) {
        var rootNode = self.getRoot(e.target);
        self.triggerUp(rootNode);
        var newPosition = e.target.getAttribute('data-pos');
        self.setPosition(newPosition, rootNode);
    };
    self.prev = function(rootNode) {
        var current = self.getCurrent(rootNode);
        var newPosition = (current === 1) ? self.getCount(rootNode) : current - 1;
        self.setPosition(newPosition, rootNode);
    };
    self.next = function(rootNode) {
        var current = self.getCurrent(rootNode);
        var newPosition = (current === self.getCount(rootNode)) ? 1 : current + 1;
        self.setPosition(newPosition, rootNode);
    };
    self.triggerUp = function(rootNode) {
        if (rootNode) {
            rootNode.setAttribute('data-trigger', '1');
        }
    };
    self.getCurrent = function(rootNode) {
        return parseInt(rootNode.getAttribute('data-current'));
    };
    self.getCurrentElement = function(rootNode) {
        var config = self.getConfig(rootNode);
        var currentElement = rootNode.querySelector(config.nav + ' ' + config.current);
        return currentElement;
    };
    self.getTargetElements = function(rootNode) {
        var config = self.getConfig(rootNode);
        var targetElements = rootNode.querySelectorAll(config.target);
        return targetElements;
    };
    self.getTargetRelElements = function(rootNode) {
        var config = self.getConfig(rootNode);
        var targetRelElements = rootNode.querySelectorAll(config.targetRel);
        return targetRelElements;
    };
    self.getPickerElements = function(rootNode) {
        var config = self.getConfig(rootNode);
        var pickerElements = rootNode.querySelectorAll(config.pickerItems);
        return pickerElements;
    };
    self.setTargetActive = function(newPosition, rootNode, targetElements, slide) {
        var i, animationSpeed = null;
        var config = self.getConfig(rootNode);
        if (config.animationSpeed) {
            animationSpeed = config.animationSpeed;
        }
        for (i = 0; i <= targetElements.length; i++) {
            var itemNode = targetElements[i];
            if ((newPosition - 1) === i) {
                if (itemNode) {
                    itemNode.classList.add('active');
                    if (slide === true) {
                        if (animationSpeed != null) {
                            $(itemNode).css('display', 'block').animate({
                                opacity: 1
                            }, animationSpeed);
                        } else {
                            itemNode.style.display = 'block';
                            itemNode.style.opacity = 1;
                        }
                    }
                }
            } else {
                if (itemNode) {
                    itemNode.classList.remove('active');
                    if (slide === true) {
                        if (animationSpeed != null) {
                            $(itemNode).css('display', 'none').animate({
                                opacity: 0
                            }, animationSpeed);
                        } else {
                            itemNode.style.display = 'none';
                            itemNode.style.opacity = 0;
                        }
                    }
                }
            }
        }
    };
    self.getCount = function(rootNode) {
        return parseInt(rootNode.getAttribute('data-count'));
    };
    self.getConfig = function(rootNode) {
        return self.parseConfig(rootNode.getAttribute('data-rotation'));
    };
    self.setPosition = function(newPosition, rootNode) {
        rootNode.setAttribute('data-current', newPosition);
        var currentElement = self.getCurrentElement(rootNode);
        if (currentElement) {
            currentElement.innerHTML = newPosition;
        }
        self.setTargetActive(newPosition, rootNode, self.getTargetElements(rootNode), true);
        self.setTargetActive(newPosition, rootNode, self.getTargetRelElements(rootNode), false);
        self.setTargetActive(newPosition, rootNode, self.getPickerElements(rootNode), false);
    };
    self.setVisibleByActive = function(element) {
        var activeItem = element.querySelector('.wrapper > .cluster > .item.active');
        if (activeItem) {
            var activeParent = activeItem.parentNode;
            var index = 0;
            while (activeParent = activeParent.previousSibling) {
                if (activeParent.nodeType === 1) {
                    ++index
                }
            }
            self.setPosition(index, element);
        }
    }
    return {
        init: self.init
    };
}

function nodeHasClass(el, clss) {
    return el.className && new RegExp("(^|\\s)" + clss + "(\\s|$)").test(el.className);
};
var bootbox = window.bootbox || function(a, b) {
    function c(a, b) {
        return "undefined" == typeof b && (b = d), "string" == typeof m[b][a] ? m[b][a] : b != e ? c(a, e) : a
    }
    var d = "en",
        e = "en",
        f = !0,
        g = "static",
        h = "javascript:;",
        i = "",
        j = {},
        k = {},
        l = {};
    l.setLocale = function(a) {
        for (var b in m)
            if (b == a) return d = a, void 0;
        throw new Error("Invalid locale: " + a)
    }, l.addLocale = function(a, b) {
        "undefined" == typeof m[a] && (m[a] = {});
        for (var c in b) m[a][c] = b[c]
    }, l.setIcons = function(a) {
        k = a, ("object" != typeof k || null === k) && (k = {})
    }, l.setBtnClasses = function(a) {
        j = a, ("object" != typeof j || null === j) && (j = {})
    }, l.alert = function() {
        var a = "",
            b = c("OK"),
            d = null;
        switch (arguments.length) {
            case 1:
                a = arguments[0];
                break;
            case 2:
                a = arguments[0], "function" == typeof arguments[1] ? d = arguments[1] : b = arguments[1];
                break;
            case 3:
                a = arguments[0], b = arguments[1], d = arguments[2];
                break;
            default:
                throw new Error("Incorrect number of arguments: expected 1-3")
        }
        return l.dialog(a, {
            label: b,
            icon: k.OK,
            "class": j.OK,
            callback: d
        }, {
            onEscape: d || !0
        })
    }, l.confirm = function() {
        var a = "",
            b = c("CANCEL"),
            d = c("CONFIRM"),
            e = null;
        switch (arguments.length) {
            case 1:
                a = arguments[0];
                break;
            case 2:
                a = arguments[0], "function" == typeof arguments[1] ? e = arguments[1] : b = arguments[1];
                break;
            case 3:
                a = arguments[0], b = arguments[1], "function" == typeof arguments[2] ? e = arguments[2] : d = arguments[2];
                break;
            case 4:
                a = arguments[0], b = arguments[1], d = arguments[2], e = arguments[3];
                break;
            default:
                throw new Error("Incorrect number of arguments: expected 1-4")
        }
        var f = function() {
                return "function" == typeof e ? e(!1) : void 0
            },
            g = function() {
                return "function" == typeof e ? e(!0) : void 0
            };
        return l.dialog(a, [{
            label: b,
            icon: k.CANCEL,
            "class": j.CANCEL,
            callback: f
        }, {
            label: d,
            icon: k.CONFIRM,
            "class": j.CONFIRM,
            callback: g
        }], {
            onEscape: f
        })
    }, l.prompt = function() {
        var a = "",
            d = c("CANCEL"),
            e = c("CONFIRM"),
            f = null,
            g = "";
        switch (arguments.length) {
            case 1:
                a = arguments[0];
                break;
            case 2:
                a = arguments[0], "function" == typeof arguments[1] ? f = arguments[1] : d = arguments[1];
                break;
            case 3:
                a = arguments[0], d = arguments[1], "function" == typeof arguments[2] ? f = arguments[2] : e = arguments[2];
                break;
            case 4:
                a = arguments[0], d = arguments[1], e = arguments[2], f = arguments[3];
                break;
            case 5:
                a = arguments[0], d = arguments[1], e = arguments[2], f = arguments[3], g = arguments[4];
                break;
            default:
                throw new Error("Incorrect number of arguments: expected 1-5")
        }
        var h = a,
            i = b("<form></form>");
        i.append("<input class='input-block-level' autocomplete=off type=text value='" + g + "' />");
        var m = function() {
                return "function" == typeof f ? f(null) : void 0
            },
            n = function() {
                return "function" == typeof f ? f(i.find("input[type=text]").val()) : void 0
            },
            o = l.dialog(i, [{
                label: d,
                icon: k.CANCEL,
                "class": j.CANCEL,
                callback: m
            }, {
                label: e,
                icon: k.CONFIRM,
                "class": j.CONFIRM,
                callback: n
            }], {
                header: h,
                show: !1,
                onEscape: m
            });
        return o.on("shown", function() {
            i.find("input[type=text]").focus(), i.on("submit", function(a) {
                a.preventDefault(), o.find(".btn-primary").click()
            })
        }), o.modal("show"), o
    }, l.dialog = function(c, d, e) {
        function j() {
            var a = null;
            "function" == typeof e.onEscape && (a = e.onEscape()), a !== !1 && x.modal("hide")
        }
        var k = "",
            l = [];
        e || (e = {}), "undefined" == typeof d ? d = [] : "undefined" == typeof d.length && (d = [d]);
        for (var m = d.length; m--;) {
            var n = null,
                o = null,
                p = null,
                q = "",
                r = null;
            if ("undefined" == typeof d[m].label && "undefined" == typeof d[m]["class"] && "undefined" == typeof d[m].callback) {
                var s = 0,
                    t = null;
                for (var u in d[m])
                    if (t = u, ++s > 1) break;
                1 == s && "function" == typeof d[m][u] && (d[m].label = t, d[m].callback = d[m][u])
            }
            "function" == typeof d[m].callback && (r = d[m].callback), d[m]["class"] ? p = d[m]["class"] : m == d.length - 1 && d.length <= 2 && (p = "btn-primary"), d[m].link !== !0 && (p = "btn " + p), n = d[m].label ? d[m].label : "Option " + (m + 1), d[m].icon && (q = "<i class='" + d[m].icon + "'></i> "), o = d[m].href ? d[m].href : h, k = "<a data-handler='" + m + "' class='" + p + "' href='" + o + "'>" + q + n + "</a>" + k, l[m] = r
        }
        var v = ["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];
        if (e.header) {
            var w = "";
            ("undefined" == typeof e.headerCloseButton || e.headerCloseButton) && (w = "<a href='" + h + "' class='close'>&times;</a>"), v.push("<div class='modal-header'>" + w + "<h3>" + e.header + "</h3></div>")
        }
        v.push("<div class='modal-body'></div>"), k && v.push("<div class='modal-footer'>" + k + "</div>"), v.push("</div>");
        var x = b(v.join("\n")),
            y = "undefined" == typeof e.animate ? f : e.animate;
        y && x.addClass("fade");
        var z = "undefined" == typeof e.classes ? i : e.classes;
        return z && x.addClass(z), x.find(".modal-body").html(c), x.on("keyup.dismiss.modal", function(a) {
            27 === a.which && e.onEscape && j("escape")
        }), x.on("click", "a.close", function(a) {
            a.preventDefault(), j("close")
        }), x.on("shown", function() {
            x.find("a.btn-primary:first").focus()
        }), x.on("hidden", function(a) {
            a.target === this && x.remove()
        }), x.on("click", ".modal-footer a", function(a) {
            var c = b(this).data("handler"),
                e = l[c],
                f = null;
            ("undefined" == typeof c || "undefined" == typeof d[c].href) && (a.preventDefault(), "function" == typeof e && (f = e(a)), f !== !1 && x.modal("hide"))
        }), b("body").append(x), x.modal({
            backdrop: "undefined" == typeof e.backdrop ? g : e.backdrop,
            keyboard: !1,
            show: !1
        }), x.on("show", function() {
            b(a).off("focusin.modal")
        }), ("undefined" == typeof e.show || e.show === !0) && x.modal("show"), x
    }, l.modal = function() {
        var a, c, d, e = {
            onEscape: null,
            keyboard: !0,
            backdrop: g
        };
        switch (arguments.length) {
            case 1:
                a = arguments[0];
                break;
            case 2:
                a = arguments[0], "object" == typeof arguments[1] ? d = arguments[1] : c = arguments[1];
                break;
            case 3:
                a = arguments[0], c = arguments[1], d = arguments[2];
                break;
            default:
                throw new Error("Incorrect number of arguments: expected 1-3")
        }
        return e.header = c, d = "object" == typeof d ? b.extend(e, d) : e, l.dialog(a, [], d)
    }, l.hideAll = function() {
        b(".bootbox").modal("hide")
    }, l.animate = function(a) {
        f = a
    }, l.backdrop = function(a) {
        g = a
    }, l.classes = function(a) {
        i = a
    };
    var m = {
        br: {
            OK: "OK",
            CANCEL: "Cancelar",
            CONFIRM: "Sim"
        },
        da: {
            OK: "OK",
            CANCEL: "Annuller",
            CONFIRM: "Accepter"
        },
        de: {
            OK: "OK",
            CANCEL: "Abbrechen",
            CONFIRM: "Akzeptieren"
        },
        en: {
            OK: "OK",
            CANCEL: "Cancel",
            CONFIRM: "OK"
        },
        es: {
            OK: "OK",
            CANCEL: "Cancelar",
            CONFIRM: "Aceptar"
        },
        fr: {
            OK: "OK",
            CANCEL: "Annuler",
            CONFIRM: "D'accord"
        },
        it: {
            OK: "OK",
            CANCEL: "Annulla",
            CONFIRM: "Conferma"
        },
        nl: {
            OK: "OK",
            CANCEL: "Annuleren",
            CONFIRM: "Accepteren"
        },
        pl: {
            OK: "OK",
            CANCEL: "Anuluj",
            CONFIRM: "Potwierd"
        },
        ru: {
            OK: "OK",
            CANCEL: "",
            CONFIRM: ""
        },
        zh_CN: {
            OK: "OK",
            CANCEL: "",
            CONFIRM: ""
        },
        zh_TW: {
            OK: "OK",
            CANCEL: "",
            CONFIRM: ""
        }
    };
    return l
}(document, window.jQuery);
window.bootbox = bootbox;;
onReady(function() {
    var rotation = new Rotation();
    rotation.init();
    var domain = window.location.protocol + '//' + window.location.host;
    $('body form').formValidation();
    $('body').on('change', '#checkAll', function() {
        var list = $("input[name='item[]']");
        var checked_status = this.checked;
        $.each(list, function(i, val) {
            list[i].checked = checked_status;
        });
    });
    $('body').on('click', '#select-items2', function() {
        var $html = $('<thead />').append($("#student-search > thead").clone()).html();
        var list = $("input[name='item[]']");
        var to = $(this).attr('to') ? $(this).attr('to') : "#student-search-result";
        var check = false;
        $.each(list, function(i, val) {
            if (list[i].checked === true) {
                check = true;
                var $id = $(list[i]).val();
                $(list[i]).attr("checked", "checked");
                $html += $('<td />').append($('#row-' + $id).clone()).html();
            }
        });
        if (check) {
            $(to).html($html);
            $('#imodal').modal('hide');
        } else {
            var call = new Call();
            var tour = call.tour('student-search');
            tour.start();
        }
    });
    $('body').on('click', '#select-assign', function() {
        var $html = $('<thead />').append($("#student-search > thead").clone()).html();
        var list = $("input[name='item[]']");
        var listId = "";
        $.each(list, function(i, val) {
            if (list[i].checked === true) {
                listId += $(list[i]).val() + ',';
            }
        });
        var lstIdNew = listId.substr(0, listId.length - 1);
        var hostname = $(location).attr('hostname');
        var url = $('#url').val();
        var idteacher = $('#idteacher').val();
        var url = "http://" + hostname + url + idteacher + "/?lstId=" + lstIdNew;
        $(location).attr('href', url);
        $('#imodal').modal('hide');
    });
    $('#offlineDate,#dob,#decisionDate,#decisionDate,#enrollmentDate,#admissionDate,#examDate,#houAcceptanceDate,#clmHandoverDate,#toDate,#fromDate,#startDate,#endDate,#finalExamDate,#time,#technicalAcceptanceDate, #date-picker,#startTimeT').datepicker({
        format: 'yyyy-mm-dd'
    }).on('changeDate', function(e) {
        $('form').formValidation('revalidateField', $(this));
    });
    $('#date-time-picker, #dateTimePicker1, #dateTimePicker2').datetimepicker({
        format: 'YYYY-MM-DD HH:mm:ss',
        sideBySide: true
    });
    $('#start-time-picker').datetimepicker({
        format: "YYYY-MM-DD'T'HH:mm:ss'.000Z",
        sideBySide: true
    });
    var call = new Call();
    call.runSelect2("#clazzId", "/student/class/loadAjax", "Class");
    call.runSelect2("#idClassList", "/student/class/loadAjax", "Class List");
    call.runSelect2("#studentAjax", "/student/student-info/loadAjax", "Student");
    call.runSelect2("#recruitmentAjx", "/enrollment/consulting/searchAjax", "Recruiment's Firstname");
    call.runSelect2("#consultantAjx", "/enrollment/consulting/searchConsultantAjax", "Consultant's Firstname");
    call.runSelect2("#userAjax", "/system-administration/user/loadAjax", "User");
    call.runSelect2("#userGroupAjax", "/system-administration/user-group/loadAjax", "User Group");
    call.runSelect2("#courseSyllabus", "/course/courses/loadAjax", "Course Syllabus");
    call.runSelect2("#courseAjax", "/course/course-evaluation/loadAjax", "Course");
    call.runSelect2("#teacherAjax", "/human-resource/teacher-activity/searchAjax", "Teacher");
    call.runSelect2("#unitAjax", "/academic-affairs/unit/searchAjax", "Unit");
    call.runSelect2("#subjectAjax", "/academic-affairs/subject/searchAjax", "Subject");
    call.runSelect2("#subjectApplyAjax", "/academic-affairs/subject/searchApplyAjax", "Subject Apply");
    call.runSelect2("#staffAjax", "/human-resource/staffs/loadAjax", "Staff");
    call.runSelect2("#staffUserAjax", "/system-administration/user/loadAjax?staff=true&teacher=true", "Staff User");
    call.runSelect2("#majorAjax", "/academic-affairs/major/loadAjaxMajor", "Major");
    $("#user-unit").select2();
    $("#acc-unit").select2();
    $("#aa-unit").select2();
    $("#aa-major").select2();
    $("#aa-curriculum").select2();
    $("#curr-major").select2();
    $("#subj-curriculum").select2();
    $("#subj-unit").select2();
    $("#subj-major").select2();
    $("#usergroup-unit").select2();
    $("#clazz-unit").select2();
    $("#employee-unit").select2();
    $("#clazz-unit").change(function() {
        var APCall = call.getJson("/plan-schedule/academic-period/loadAjax", {
            'unit': $("#clazz-unit").val()
        });
        APCall.then(function(data) {
            $("#clazz-academic-period option").remove();
            data = $.parseJSON(data);
            $("#clazz-academic-period").select2({
                data: data
            });
        }).done(function() {});
    });
    $("#employee-unit").change(function() {
        var UserCall = call.getJson("/user/admin/loadAjax", {
            'unit': $("#employee-unit").val()
        });
        UserCall.then(function(data) {
            $("#employee-user option").remove();
            data = $.parseJSON(data);
            $("#employee-user").select2({
                data: data
            });
        }).done(function() {});
    });
    $('#allowed_date, #decision_date').datepicker({
        format: 'yyyy-mm-dd'
    });
    var $clazz_id = $("#clazz_id");
    var $unit_id_for_student_and_clazz = $("#unit_id_for_student_and_clazz");
    var $outcome_period_id = $("#outcome_period_id");
    var $academic_period = $("#academic_period_id");
    var $selectSuject = $("#select_subject");
    var $unit_id = $("#unit_id");
    var $unit = $("#unitS");
    var $unitep = $("#unitId");
    var $unitStd = $("#unitStd");
    var $unitCst = $("#unitCst");
    var $staffStd = $("#staffStd");
    var $major = $("#majorS");
    var $majorTP = $("#majorTP");
    var $majorc = $("#majorC");
    var $clazzC = $("#clazzC");
    var $majorsj = $("#majorSj");
    var $majortp = $("#majorTP");
    var $majorCop = $("#majorCop");
    var $clazz = $("#clazzS");
    var $student = $("#studentS");
    var $subject = $("#subjectS");
    var $subjectTP = $("#subjectTP");
    var $majorEp = $("#majorEP");
    var $subjectsCop = $("#subjectsCop");
    var $classExamPlan = $("#idClassList");
    var $unitTev = $("#unitTev");
    var $staffS = $("#staffS");
    var $studentAjaxs = $("#studentAjaxs");
    $studentAjaxs.select2();
    $staffS.select2();
    $unitTev.select2();
    $unitCst.select2();
    $unit.select2();
    $unitep.select2();
    $unitStd.select2();
    $staffStd.select2();
    $major.select2();
    $majorTP.select2();
    $majorCop.select2();
    $majorc.select2();
    $clazzC.select2();
    $majorsj.select2();
    $majortp.select2();
    $clazz.select2();
    $student.select2();
    $subject.select2();
    $subjectTP.select2();
    $majorEp.select2();
    $classExamPlan.select2();
    $subjectsCop.select2();
    $("#select-data").select2();
    $selectSuject.change(function() {
        $SelectSubjectCall = call.getJson("/academic-affairs/subject/loadAjaxSubject", {
            'subject_id': $(this).val()
        });
        $SelectSubjectCall.then(function(data) {
            $("#list_subject ul").empty();
            data = $.parseJSON(data);
            console.log(data);
            var currentTimeStr = 1;
            var listHtmlStr = "";
            $.each(data, function(i, item) {
                listHtmlStr = listHtmlStr + '<li class="transfer-double-list-li transfer-double-list-li-' + currentTimeStr + '">' + '<div class="checkbox-group">' + '<input type="checkbox"  value="' + item.id + '" class="checkbox-normal checkbox-item-' + currentTimeStr + '" id="itemCheckbox_' + item.id + '_' + currentTimeStr + '">' + '<label class="checkbox-name-' + currentTimeStr + '" for="itemCheckbox_' + item.id + '_' + currentTimeStr + '">' + item.text + '</label>' + '</div>' + '</li>'
            });
            $("#list_subject ul").html(listHtmlStr);
        }).done(function() {});
    });
    $clazz_id.change(function() {
        $StudentVersionedCall = call.getJson("/student/student-versioned/loadAjaxStudentversioned", {
            'clazz_id': $(this).val()
        });
        $StudentVersionedCall.then(function(data) {
            $("#student option").remove();
            data = $.parseJSON(data);
            $("#student").select2({
                data: data
            });
        }).done(function() {});
    });
    $unit_id.change(function() {
        $OutcomePeriodCall = call.getJson("/academic-affairs/outcome-period/loadAjaxOutcomePeriod", {
            'unit_id': $(this).val()
        });
        $OutcomePeriodCall.then(function(data) {
            $("#outcome_period_id option").remove();
            data = $.parseJSON(data);
            $("#outcome_period_id").select2({
                data: data
            });
        }).done(function() {});
        $MajorCall = call.getJson("/academic-affairs/major/loadAjaxMajor", {
            'unit_id': $(this).val()
        });
        $MajorCall.then(function(data) {
            $("#major_id option").remove();
            data = $.parseJSON(data);
            $("#major_id").select2({
                data: data
            });
        }).done(function() {});
    });
    $outcome_period_id.change(function() {
        $AcademicPeriodCall = call.getJson("/plan-schedule/academic-period/loadAjaxAcademicPeriod", {
            'outcome_period_id': $(this).val(),
            'unit_id': $("#unit_id").val()
        });
        $AcademicPeriodCall.then(function(data) {
            $("#academic_period_id option").remove();
            data = $.parseJSON(data);
            $("#academic_period_id").select2({
                data: data
            });
        }).done(function() {});
    });
    $unit_id_for_student_and_clazz.change(function() {
        $UnitStudentAndClazzCall = call.getJson("/plan-schedule/academic-period/loadAjaxAcademicPeriodStudentAndClazz", {
            'unit_id_for_student_and_clazz': $(this).val()
        });
        $UnitStudentAndClazzCall.then(function(data) {
            $("#academic_period_id option").remove();
            data = $.parseJSON(data);
            $("#academic_period_id").select2({
                data: data
            });
        }).done(function() {});
    });
    $academic_period.change(function() {
        $clazzCall = call.getJson("/student/clazz/loadAjax", {
            'academic_period_id': $(this).val()
        });
        $clazzCall.then(function(data) {
            $("#clazz_id option").remove();
            data = $.parseJSON(data);
            $("#clazz_id").select2({
                data: data
            });
        }).done(function() {});
    });
    $unit.change(function() {
        var dtc = call.getJson("/student/class/loadAjax", {
            'unit': $(this).val()
        });
        dtc.then(function(data) {
            $("#clazzS option").remove();
            data = $.parseJSON(data);
            $clazz.select2({
                data: data
            });
        }).done(function() {});
    });
    $major.change(function() {
        var majorCall = call.getJson("/student/learning-plan/loadAjax", {
            'major': $(this).val()
        });
        majorCall.then(function(data) {
            $("#subjectS option").remove();
            data = $.parseJSON(data);
            $subject.select2({
                data: data
            });
        }).done(function() {});
    });
    $majorTP.change(function() {
        var majorCall = call.getJson("/student/learning-plan/loadAjaxSubject", {
            'major': $(this).val()
        });
        majorCall.then(function(data) {
            $("#subjectTP option").remove();
            data = $.parseJSON(data);
            $subjectTP.select2({
                data: data
            });
        }).done(function() {});
    });
    $clazz.change(function() {
        var studentCall = call.getJson("/student/student-info/loadAjax", {
            'unit': $unit.val(),
            'clazz': $(this).val()
        });
        studentCall.then(function(data) {
            $("#studentS option").remove();
            data = $.parseJSON(data);
            $student.select2({
                data: data
            });
        }).done(function() {});
    });
    $('body [data-type="select2"]').select2();
    var AdminLTE = $.AdminLTE;
    var my_skins = ["skin-blue", "skin-black", "skin-red", "skin-yellow", "skin-purple", "skin-green", "skin-blue-light", "skin-black-light", "skin-red-light", "skin-yellow-light", "skin-purple-light", "skin-green-light"];
    setup();

    function change_layout(cls) {
        $("body").toggleClass(cls);
        AdminLTE.layout.fixSidebar();
        if (cls == "layout-boxed")
            AdminLTE.controlSidebar._fix($(".control-sidebar-bg"));
        if ($('body').hasClass('fixed') && cls == 'fixed') {
            AdminLTE.pushMenu.expandOnHover();
            AdminLTE.controlSidebar._fixForFixed($('.control-sidebar'));
            AdminLTE.layout.activate();
        }
    }

    function change_skin(cls) {
        $.each(my_skins, function(i) {
            $("body").removeClass(my_skins[i]);
        });
        $("body").addClass(cls);
        store('skin', cls);
        return false;
    }

    function store(name, val) {
        if (typeof(Storage) !== "undefined") {
            localStorage.setItem(name, val);
        } else {
            alert('Please use a modern browser to properly view this template!');
        }
    }

    function get(name) {
        if (typeof(Storage) !== "undefined") {
            return localStorage.getItem(name);
        } else {
            alert('Please use a modern browser to properly view this template!');
        }
    }

    function setup() {
        var tmp = get('skin');
        if (tmp && $.inArray(tmp, my_skins))
            change_skin(tmp);
        $("[data-skin]").on('click', function(e) {
            e.preventDefault();
            var $skin = $(this).data('skin');
            change_skin($skin);
            configAction({
                skin: $skin
            });
        });
        $("[data-layout]").on('click', function() {
            var $layout = $(this).data('layout');
            change_layout($layout);
            configAction({
                layout: $layout
            });
        });
        $("[data-controlsidebar]").on('click', function() {
            change_layout($(this).data('controlsidebar'));
            var slide = !AdminLTE.options.controlSidebarOptions.slide;
            AdminLTE.options.controlSidebarOptions.slide = slide;
            if (!slide)
                $('.control-sidebar').removeClass('control-sidebar-open');
        });
        $("[data-sidebarskin='toggle']").on('click', function() {
            var sidebar = $(".control-sidebar");
            if (sidebar.hasClass("control-sidebar-dark")) {
                sidebar.removeClass("control-sidebar-dark")
                sidebar.addClass("control-sidebar-light")
            } else {
                sidebar.removeClass("control-sidebar-light")
                sidebar.addClass("control-sidebar-dark")
            }
        });
        $("[data-enable='expandOnHover']").on('click', function() {
            AdminLTE.pushMenu.expandOnHover();
            if (!$('body').hasClass('sidebar-collapse'))
                $("[data-layout='sidebar-collapse']").click();
        });
        if ($('body').hasClass('fixed')) {
            $("[data-layout='fixed']").attr('checked', 'checked');
        }
        if ($('body').hasClass('layout-boxed')) {
            $("[data-layout='layout-boxed']").attr('checked', 'checked');
        }
        if ($('body').hasClass('sidebar-collapse')) {
            $("[data-layout='sidebar-collapse']").attr('checked', 'checked');
        }
    }

    function configAction(data) {
        $.ajax({
            type: "GET",
            url: domain + "/cms/configuration/install",
            data: data
        }).done(function() {});
    }
    $("#add_row").on('click', function(e) {
        var row = $("#original").html().toString();
        row = row.replace('<a href="#" class="btn btn-flat btn-primary" id="add_row"><i class="fa fa-plus"></i></a>', '<a href="#" class="btn btn-flat btn-danger" id="remove_row"><i class="fa fa-minus"></i></a>');
        $("#row-plus").append(row);
        e.preventDefault();
    });
    $("#row-plus").on('click', "#remove_row", function(e) {
        var row = $(this).parent().parent();
        row.remove();
        e.preventDefault();
    });
});

function Call() {
    var self = this;
    self.host = window.location.protocol + '//' + window.location.host;
    self.href = query = window.location.href;
    self.init = function() {};
    self.tour = function(form) {
        var tour = new Tour({
            name: 'tour',
            steps: [{
                element: "#" + form + " #checkAll",
                title: window.translate.choose_checkbox,
                content: window.translate.please_click_checkbox
            }],
            backdrop: true,
            storage: false,
            template: "<div class='popover tour'>" + "<div class='arrow'></div>" + "<h3 class='popover-title'></h3>" + "<div class='popover-content'></div>" + "<button class='btn btn-primary btn-flat pull-right' data-role='end'>" + window.translate.close + "</button>" + "</div>"
        });
        tour.init();
        return tour;
    };
    self.checkItemStatus = function(form) {
        var formId = "#" + form;
        var list = $(formId + " input[name='item[]']");
        var isCheck = false;
        $.each(list, function(i, val) {
            if (list[i].checked === true)
                isCheck = true;
        });
        return isCheck;
    };
    self.checkRequire = function(elements) {
        var elementRequire = "";
        if (elements) {
            $.each(elements, function(i, val) {
                var element = $("#" + val);
                if (!element.val()) {
                    elementRequire = val;
                    return false;
                }
            });
        }
        return elementRequire;
    };
    self.run = function(action, data, require, formId, method) {
        var url = (action !== "") ? action : $(this).attr("href");
        var form_id = formId ? formId : "form-lists";
        var type = method ? method : "POST";
        var message = self.checkRequire(require);
        if (!self.checkItemStatus(form_id)) {
            var tour = self.tour(form_id);
            tour.start();
        } else if (message) {
            var element = $("#" + message);
            if (message === 'graduate_status') {
                var contentRequire = element.attr("data-err") ? element.attr("data-err") : window.translate.please_choose + window.translate.graduate_status;
            } else {
                var contentRequire = element.attr("data-err") ? element.attr("data-err") : window.translate.please_choose + message;
            }
            var tour = self.tour();
            tour.addStep({
                element: element,
                placement: "top",
                smartPlacement: true,
                title: window.translate.next_step,
                content: contentRequire
            });
            tour.goTo(1);
            tour.start();
        } else {
            bootbox.confirm(window.translate.are_you_sure, function(result) {
                if (result) {
                    var form = $("#" + form_id);
                    form.attr('action', url);
                    form.attr("method", type);
                    if (require) {
                        $.each(require, function(i, val) {
                            var element = $("#" + val);
                            var input = $('<input />').attr('type', 'hidden');
                            input.attr('name', val);
                            input.attr('value', element.val());
                            form.append(input);
                        });
                    } else if (data) {
                        $.each(data, function(i, val) {
                            var element = $("#" + val);
                            var input = $('<input />').attr('type', 'hidden');
                            input.attr('name', val);
                            input.attr('value', element.val());
                            form.append(input);
                        });
                    }
                    form.attr('action', url).submit();
                    form.formValidation().on('success.form.fv', function(e) {
                        e.preventDefault();
                        var fv = $(e.target).data('formValidation');
                        fv.defaultSubmit();
                    });
                    form.submit();
                    $('#imodal').modal('hide');
                }
            });
        }
    };
    self.getJson = function(path, data, method) {
        var type = method ? method : "GET";
        var result = [{
            "id": 1,
            "text": "A11"
        }, {
            "id": 2,
            "text": "A21"
        }, {
            "id": 3,
            "text": "A31"
        }, {
            "id": 4,
            "text": "A41"
        }, {
            "id": 5,
            "text": "A51"
        }, {
            "id": 6,
            "text": "B11"
        }, {
            "id": 7,
            "text": "B21"
        }, {
            "id": 8,
            "text": "B31"
        }, {
            "id": 9,
            "text": "B41"
        }, {
            "id": 10,
            "text": "B51"
        }, {
            "id": 11,
            "text": "D11"
        }, {
            "id": 13,
            "text": "D31"
        }, {
            "id": 14,
            "text": "C11"
        }, {
            "id": 15,
            "text": "C21"
        }, {
            "id": 16,
            "text": "C31"
        }, {
            "id": 17,
            "text": "C41"
        }, {
            "id": 18,
            "text": "C51"
        }, {
            "id": 19,
            "text": "E11"
        }, {
            "id": 20,
            "text": "E31"
        }, {
            "id": 21,
            "text": "E51"
        }, {
            "id": 22,
            "text": "T\u1ea1o d\u00e1ng c\u00f4ng nghi\u1ec7p 4-2014"
        }, {
            "id": 23,
            "text": "A12"
        }, {
            "id": 24,
            "text": "A22"
        }, {
            "id": 25,
            "text": "A32"
        }];
        var d = $.Deferred();
        $.ajax({
            type: type,
            url: self.host + path,
            data: data
        }).done(function(data) {
            d.resolve(data);
        }).fail(function() {}).always(function() {});
        return d.promise();
    };
    self.formatRepo = function(repo) {
        if (repo.loading)
            return repo.text;
        var markup = "<div class='select2-result-repository clearfix'>" + "<div class='select2-result-repository__meta'>" + "<div class='select2-result-repository__title'>" + repo.text + "</div>" + "</div></div>";
        return markup;
    };
    self.formatRepoSelection = function(repo) {
        return repo.text;
    };
    self.runSelect2 = function(element, path, placeholder, templateResult, templateSelection) {
        $(element).select2({
            allowClear: true,
            placeholder: "Select an " + placeholder,
            ajax: {
                url: self.host + path,
                dataType: 'json',
                data: function(params) {
                    return {
                        key: params.term
                    };
                },
                processResults: function(data) {
                    return {
                        results: data
                    };
                },
                cache: true
            },
            escapeMarkup: function(markup) {
                return markup;
            },
            minimumInputLength: 2,
            templateResult: self.formatRepo,
            templateSelection: self.formatRepoSelection
        });
    };
};

function callAjax(item) {
    $.ajax({
        type: item.type,
        url: addParameter(item.data_url, 'ajax', 'true'),
        data: item.data,
    }).done(function(data) {
        updateHtml(item, data);
    }).fail(function() {
        bootbox.alert("Error");
    }).always(function() {});
}

function bindEvent(prefix) {
    $(document).ready(function() {
        $(prefix + " .ajax_click").off("click");
        $(prefix + ' .ajax_click').on('click', function(event) {
            event.preventDefault();
            callAjax(mapItemtoObject($(this)));;
        });
        $(prefix + " .ajax_dialog").off("click");
        $(prefix + " .ajax_dialog").on("click", function(evt) {
            evt.preventDefault();
            var url = $(this).attr('href');
            url = addParameter(url, 'ajax', 'true');
            to = $(this).attr('to');
            if (to == null) {
                to = '#imodal';
            }
            var $modal = $(to);
            $('body').modalmanager('loading');
            setTimeout(function() {
                $modal.load(url, '', function() {
                    $modal.modal({
                        backdrop: 'static',
                        keyboard: false
                    });
                    bindEvent(to);
                });
            }, 1000);
        });
        $(prefix + " .ajax_load").off("load");
        $(prefix + " .ajax_load").on("load", function() {
            callAjax(mapItemtoObject($(this)));
        });
        $(prefix + " .ajax_form_search").off("submit");
        $(prefix + " .ajax_form_search").on("submit", function(evt) {
            var form = $(this);
            var to = $(this).attr('to');
            evt.preventDefault();
            var obj = new ajaxItem(to, form.attr('action'), form.serialize(), form.attr('method'));
            callAjax(obj);
        });
        $("body form.ajax_form").formValidation().on('success.form.fv', function() {
            $(prefix + " .ajax_form").off("submit");
            $(prefix + " .ajax_form").on("submit", function(evt) {
                var form = $(this);
                var settings = form.data('settings');
                var to = $(this).attr('to');
                evt.preventDefault();
                var obj = new ajaxItem(to, form.attr('action'), form.serialize(), form.attr('method'));
                callAjax(obj);
            });
        });
    });
};